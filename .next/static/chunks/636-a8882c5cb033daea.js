"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{9636:function(e,t,a){a.d(t,{Z:function(){return MaterialsManager}});var r=a(5893),s=a(7294),l=a(794),i=a(4491),n=a(6522),d=a(3192),c=a(4207);function AnimalProtocols(e){let{materials:t,animals:a,onUpdateMaterial:n,onCreateReminder:d}=e,[c,o]=(0,s.useState)([]),[x,m]=(0,s.useState)([]),[u,g]=(0,s.useState)(null),b=[{id:"brucelose",name:"Vacina\xe7\xe3o Brucelose",description:"Vacina obrigat\xf3ria para f\xeameas",ageRange:{min:3,max:8,unit:"months"},gender:"female",materials:["vacina_brucelose"],frequency:"once",priority:"high",icon:"\uD83D\uDC89",color:"red"},{id:"brinco_identificacao",name:"Coloca\xe7\xe3o de Brinco",description:"Identifica\xe7\xe3o individual do animal",ageRange:{min:8,max:12,unit:"months"},gender:"both",materials:["brinco_auricular"],frequency:"once",priority:"high",icon:"\uD83C\uDFF7️",color:"blue"},{id:"vermifugo_inicial",name:"Vermifuga\xe7\xe3o Inicial",description:"Primeira aplica\xe7\xe3o de verm\xedfugo",ageRange:{min:2,max:4,unit:"months"},gender:"both",materials:["ivermectina","vermifugo"],frequency:"once",priority:"medium",icon:"\uD83D\uDC1B",color:"green"},{id:"vermifugo_manutencao",name:"Vermifuga\xe7\xe3o de Manuten\xe7\xe3o",description:"Aplica\xe7\xe3o peri\xf3dica de verm\xedfugo",ageRange:{min:6,max:999,unit:"months"},gender:"both",materials:["ivermectina","vermifugo"],frequency:"quarterly",priority:"medium",icon:"\uD83D\uDD04",color:"yellow"},{id:"vacina_aftosa",name:"Vacina\xe7\xe3o Aftosa",description:"Vacina contra febre aftosa",ageRange:{min:4,max:999,unit:"months"},gender:"both",materials:["vacina_aftosa"],frequency:"biannual",priority:"high",icon:"\uD83E\uDDA0",color:"purple"}];(0,s.useEffect)(()=>{o(b),checkPendingActions()},[a,t]);let calculateAgeInMonths=e=>{let t=new Date(e),a=new Date;return Math.floor(Math.abs(a-t)/2630016e3)},checkPendingActions=()=>{let e=[];null==a||a.forEach(a=>{let r=calculateAgeInMonths(a.birthDate);c.forEach(s=>{if(r>=s.ageRange.min&&r<=s.ageRange.max&&("both"===s.gender||"female"===s.gender&&"F"===a.gender||"male"===s.gender&&"M"===a.gender)){var l;let i=null===(l=a.protocols)||void 0===l?void 0:l.includes(s.id);if(!i){let l=s.materials.map(e=>null==t?void 0:t.find(t=>t.category===e||t.name.toLowerCase().includes(e.replace("_"," ")))).filter(Boolean);e.push({id:"".concat(a.id,"-").concat(s.id),animalId:a.id,animalName:a.name||"Animal ".concat(a.id),animalAge:r,protocol:s,availableMaterials:l,status:l.length>0?"ready":"waiting_materials",dueDate:new Date(Date.now()+6048e5),urgency:r>s.ageRange.max-1?"urgent":"normal"})}}})}),m(e)},executeProtocol=e=>{if(e.availableMaterials.forEach(e=>{e&&e.quantity>0&&n(e.id,{...e,quantity:e.quantity-1,totalValue:(e.quantity-1)*e.unitPrice})}),"once"!==e.protocol.frequency){let t=new Date;switch(e.protocol.frequency){case"quarterly":t.setMonth(t.getMonth()+3);break;case"biannual":t.setMonth(t.getMonth()+6);break;case"annual":t.setFullYear(t.getFullYear()+1)}d({title:"".concat(e.protocol.name," - ").concat(e.animalName),message:"Aplicar ".concat(e.protocol.name," no animal ").concat(e.animalName),date:t,type:"protocol",priority:e.protocol.priority})}m(t=>t.filter(t=>t.id!==e.id)),alert("✅ ".concat(e.protocol.name," aplicado em ").concat(e.animalName,"!"))},getUrgencyColor=e=>{switch(e){case"urgent":return"border-red-500 bg-red-50 dark:bg-red-900/20";case"normal":return"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20";default:return"border-blue-500 bg-blue-50 dark:bg-blue-900/20"}},getStatusColor=e=>{switch(e){case"ready":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"waiting_materials":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(l.Zb,{className:"p-6 bg-gradient-to-r from-green-500 to-blue-600 text-white",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"\uD83C\uDFAF Protocolos Sanit\xe1rios Inteligentes"}),(0,r.jsx)("p",{className:"opacity-90",children:"Sistema automatizado baseado na idade dos animais"})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-3xl font-bold",children:x.length}),(0,r.jsx)("div",{className:"text-sm opacity-90",children:"A\xe7\xf5es Pendentes"})]})]})}),x.length>0&&(0,r.jsxs)(l.Zb,{className:"p-6",children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:["⏰ A\xe7\xf5es Pendentes (",x.length,")"]}),(0,r.jsx)("div",{className:"space-y-4",children:x.map(e=>(0,r.jsx)("div",{className:"p-4 rounded-lg border-l-4 ".concat(getUrgencyColor(e.urgency)),children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,r.jsx)("div",{className:"text-3xl",children:e.protocol.icon}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white",children:e.protocol.name}),(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(getStatusColor(e.status)),children:"ready"===e.status?"Pronto":"Aguardando Materiais"}),"urgent"===e.urgency&&(0,r.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium",children:"\uD83D\uDEA8 Urgente"})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:[(0,r.jsx)("strong",{children:"Animal:"})," ",e.animalName," (",e.animalAge," meses)"]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:e.protocol.description}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Materiais necess\xe1rios:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:e.protocol.materials.map((t,a)=>{let s=e.availableMaterials.find(e=>(null==e?void 0:e.category)===t||(null==e?void 0:e.name.toLowerCase().includes(t.replace("_"," "))));return(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(s&&s.quantity>0?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"),children:s?"".concat(s.name," (").concat(s.quantity,")"):t},a)})})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Prazo: ",e.dueDate.toLocaleDateString("pt-BR")]})]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:["ready"===e.status?(0,r.jsx)(i.z,{onClick:()=>executeProtocol(e),className:"bg-green-600 hover:bg-green-700 text-white",size:"sm",children:"✅ Aplicar"}):(0,r.jsx)(i.z,{variant:"outline",size:"sm",className:"border-red-300 text-red-700 hover:bg-red-50",disabled:!0,children:"⏳ Aguardando"}),(0,r.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>{let t=new Date;t.setDate(t.getDate()+7),d({title:"Lembrete: ".concat(e.protocol.name),message:"Lembrar de aplicar ".concat(e.protocol.name," no animal ").concat(e.animalName),date:t,type:"reminder",priority:e.protocol.priority}),alert("\uD83D\uDD14 Lembrete criado para 7 dias!")},children:"\uD83D\uDD14 Lembrete"})]})]})},e.id))})]}),(0,r.jsxs)(l.Zb,{className:"p-6",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCCB Protocolos Configurados"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(e=>(0,r.jsx)("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:shadow-md transition-shadow",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"text-2xl",children:e.icon}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:e.description}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 space-y-1",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Idade:"})," ",e.ageRange.min,"-",e.ageRange.max," meses"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"G\xeanero:"})," ","both"===e.gender?"Ambos":"female"===e.gender?"F\xeameas":"Machos"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Frequ\xeancia:"})," ","once"===e.frequency?"Uma vez":"quarterly"===e.frequency?"Trimestral":"biannual"===e.frequency?"Semestral":"Anual"]})]})]})]})},e.id))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)(l.Zb,{className:"p-4 text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:x.filter(e=>"urgent"===e.urgency).length}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Urgentes"})]}),(0,r.jsxs)(l.Zb,{className:"p-4 text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:x.filter(e=>"ready"===e.status).length}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prontos"})]}),(0,r.jsxs)(l.Zb,{className:"p-4 text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:x.filter(e=>"waiting_materials"===e.status).length}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Aguardando"})]}),(0,r.jsxs)(l.Zb,{className:"p-4 text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:c.length}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Protocolos"})]})]})]})}function MaterialsManager(e){let{userId:t}=e,[a,o]=(0,s.useState)("overview"),[x,m]=(0,s.useState)([]),[u,g]=(0,s.useState)(!1),[b,h]=(0,s.useState)(null),[p,j]=(0,s.useState)([]),[y,k]=(0,s.useState)([]),[f,v]=(0,s.useState)(null),[N,w]=(0,s.useState)(null),[D,C]=(0,s.useState)([]),[S,q]=(0,s.useState)({category:"all",supplier:"all",dateRange:"30d"});(0,s.useEffect)(()=>{let loadMaterials=async()=>{try{let e=await fetch("/api/materials");if(e.ok){let t=await e.json();m(Array.isArray(t)?t:[])}else console.error("Erro ao carregar materiais"),m([])}catch(e){console.error("Erro ao carregar materiais:",e),m([])}};loadMaterials();let loadAnimals=async()=>{try{let e=await fetch("/api/animals-list");if(e.ok){let t=await e.json();j(t)}}catch(e){console.error("Erro ao carregar animais:",e),j([])}};loadAnimals();let loadPurchaseHistory=async()=>{try{let e=await fetch("/api/purchase-history");if(e.ok){let t=await e.json();C(Array.isArray(t)?t:[])}else console.error("Erro ao carregar hist\xf3rico de compras"),C([])}catch(e){console.error("Erro ao carregar hist\xf3rico de compras:",e),C([])}};loadPurchaseHistory()},[]);let E=[{value:"all",label:"Todas as Categorias"},{value:"medicamento",label:"\uD83D\uDC8A Medicamentos"},{value:"identificacao",label:"\uD83C\uDFF7️ Identifica\xe7\xe3o"},{value:"alimentacao",label:"\uD83C\uDF3E Alimenta\xe7\xe3o"},{value:"equipamento",label:"\uD83D\uDD27 Equipamentos"},{value:"insumo",label:"⚗️ Insumos"},{value:"outros",label:"\uD83D\uDCE6 Outros"}],F=[{value:"all",label:"Todos os Fornecedores"},{value:"Agropecu\xe1ria Silva",label:"Agropecu\xe1ria Silva"},{value:"Vetfarma Ltda",label:"Vetfarma Ltda"},{value:"Nutri\xe7\xe3o Animal Pro",label:"Nutri\xe7\xe3o Animal Pro"}],A=x.filter(e=>("all"===S.category||e.category===S.category)&&("all"===S.supplier||e.supplier===S.supplier)),R=A.reduce((e,t)=>e+t.totalValue,0),P=x.filter(e=>e.quantity<=e.minStock),I=x.filter(e=>{if(!e.expiryDate)return!1;let t=new Date(e.expiryDate),a=new Date;return a.setDate(a.getDate()+30),t<=a}),getCategoryIcon=e=>({medicamento:"\uD83D\uDC8A",identificacao:"\uD83C\uDFF7️",alimentacao:"\uD83C\uDF3E",equipamento:"\uD83D\uDD27",insumo:"⚗️",outros:"\uD83D\uDCE6"})[e]||"\uD83D\uDCE6",getStatusColor=e=>{switch(e){case"active":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"low_stock":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"expired":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},handleUpdateMaterial=(e,t)=>{m(a=>a.map(a=>a.id===e?t:a))},handleCreateReminder=e=>{let t={id:Date.now(),...e,createdAt:new Date,read:!1};k(e=>[...e,t]),console.log("Novo lembrete criado:",t)},renderOverview=()=>(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6",children:[(0,r.jsx)(l.Zb,{className:"p-6 bg-white dark:bg-gray-800 border-2 border-blue-300 dark:border-blue-600 shadow-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-bold text-gray-600 dark:text-gray-300",children:"Total em Estoque"}),(0,r.jsxs)("p",{className:"text-2xl font-black text-blue-600 dark:text-blue-400",children:["R$"," ",R.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),(0,r.jsx)("div",{className:"text-4xl bg-blue-100 dark:bg-blue-900/30 p-3 rounded-lg",children:"\uD83D\uDCB0"})]})}),(0,r.jsx)(l.Zb,{className:"p-6 bg-green-100 dark:bg-green-900/30 border-2 border-green-300 dark:border-green-600",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-bold text-green-800 dark:text-green-200",children:"Itens Ativos"}),(0,r.jsx)("p",{className:"text-2xl font-black text-green-900 dark:text-green-100",children:x.length})]}),(0,r.jsx)("div",{className:"text-4xl",children:"\uD83D\uDCE6"})]})}),(0,r.jsx)(l.Zb,{className:"p-6 bg-yellow-100 dark:bg-yellow-900/30 border-2 border-yellow-300 dark:border-yellow-600",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-bold text-yellow-800 dark:text-yellow-200",children:"Estoque Baixo"}),(0,r.jsx)("p",{className:"text-2xl font-black text-yellow-900 dark:text-yellow-100",children:P.length})]}),(0,r.jsx)("div",{className:"text-4xl",children:"⚠️"})]})}),(0,r.jsx)(l.Zb,{className:"p-6 bg-red-100 dark:bg-red-900/30 border-2 border-red-300 dark:border-red-600",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-bold text-red-800 dark:text-red-200",children:"Vencendo"}),(0,r.jsx)("p",{className:"text-2xl font-black text-red-900 dark:text-red-100",children:I.length})]}),(0,r.jsx)("div",{className:"text-4xl",children:"⏰"})]})})]}),(0,r.jsxs)(l.Zb,{className:"p-6 border-2 border-gray-300 dark:border-gray-600",children:[(0,r.jsx)("h3",{className:"text-xl font-black text-black dark:text-white mb-6",children:"\uD83C\uDFAF Protocolos Inteligentes"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"text-center p-6 bg-white dark:bg-gray-800 rounded-lg border-2 border-blue-400 dark:border-blue-600 shadow-lg",children:[(0,r.jsx)("div",{className:"text-4xl mb-3 bg-blue-100 dark:bg-blue-900/30 p-3 rounded-lg inline-block",children:"\uD83D\uDC89"}),(0,r.jsx)("div",{className:"text-2xl font-black text-blue-600 dark:text-blue-400",children:(null==p?void 0:p.filter(e=>{var t;let a=Math.floor((new Date-new Date(e.birthDate))/2630016e3);return"F"===e.gender&&a>=3&&a<=8&&!(null===(t=e.protocols)||void 0===t?void 0:t.includes("brucelose"))}).length)||0}),(0,r.jsx)("div",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:"Vacina\xe7\xe3o Brucelose"})]}),(0,r.jsxs)("div",{className:"text-center p-6 bg-green-200 dark:bg-green-800/50 rounded-lg border-2 border-green-400 dark:border-green-600",children:[(0,r.jsx)("div",{className:"text-4xl mb-3",children:"\uD83C\uDFF7️"}),(0,r.jsx)("div",{className:"text-2xl font-black text-green-900 dark:text-green-100",children:(null==p?void 0:p.filter(e=>{var t;let a=Math.floor((new Date-new Date(e.birthDate))/2630016e3);return a>=8&&a<=12&&!(null===(t=e.protocols)||void 0===t?void 0:t.includes("brinco"))}).length)||0}),(0,r.jsx)("div",{className:"text-sm font-bold text-green-800 dark:text-green-200",children:"Coloca\xe7\xe3o de Brinco"})]}),(0,r.jsxs)("div",{className:"text-center p-6 bg-purple-200 dark:bg-purple-800/50 rounded-lg border-2 border-purple-400 dark:border-purple-600",children:[(0,r.jsx)("div",{className:"text-4xl mb-3",children:"\uD83D\uDC1B"}),(0,r.jsx)("div",{className:"text-2xl font-black text-purple-900 dark:text-purple-100",children:(null==p?void 0:p.filter(e=>{var t;let a=Math.floor((new Date-new Date(e.birthDate))/2630016e3);return a>=2&&a<=4&&!(null===(t=e.protocols)||void 0===t?void 0:t.includes("vermifugo"))}).length)||0}),(0,r.jsx)("div",{className:"text-sm font-bold text-purple-800 dark:text-purple-200",children:"Vermifuga\xe7\xe3o"})]})]}),(0,r.jsx)("div",{className:"mt-4 text-center",children:(0,r.jsx)(i.z,{onClick:()=>o("protocols"),className:"bg-blue-600 hover:bg-blue-700",children:"Ver Todos os Protocolos"})})]})]}),renderProtocols=()=>(0,r.jsx)(AnimalProtocols,{materials:x,animals:p,onUpdateMaterial:handleUpdateMaterial,onCreateReminder:handleCreateReminder}),renderReminders=()=>(0,r.jsxs)("div",{className:"p-6 text-center text-gray-500",children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:"\uD83E\uDDE0"}),(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Lembretes Inteligentes"}),(0,r.jsx)("p",{children:"Funcionalidade em desenvolvimento"})]}),renderInventory=()=>(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsx)(d.Ph,{value:S.category,onValueChange:e=>q({...S,category:e}),className:"w-full sm:w-48",children:E.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,r.jsx)(d.Ph,{value:S.supplier,onValueChange:e=>q({...S,supplier:e}),className:"w-full sm:w-48",children:F.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(i.z,{onClick:()=>g(!0),className:"bg-blue-600 hover:bg-blue-700",children:"➕ Novo Item"}),(0,r.jsx)(i.z,{variant:"outline",children:"\uD83D\uDCE4 Exportar"})]})]}),(0,r.jsx)(l.Zb,{className:"overflow-hidden border-2 border-gray-300 dark:border-gray-600",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-200 dark:bg-gray-700",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-4 text-left text-sm font-black text-gray-900 dark:text-gray-100 uppercase tracking-wider",children:"Item"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-sm font-black text-gray-900 dark:text-gray-100 uppercase tracking-wider",children:"Categoria"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-sm font-black text-gray-900 dark:text-gray-100 uppercase tracking-wider",children:"Estoque"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-sm font-black text-gray-900 dark:text-gray-100 uppercase tracking-wider",children:"Valor Unit."}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-sm font-black text-gray-900 dark:text-gray-100 uppercase tracking-wider",children:"Valor Total"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-sm font-black text-gray-900 dark:text-gray-100 uppercase tracking-wider",children:"Fornecedor"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-sm font-black text-gray-900 dark:text-gray-100 uppercase tracking-wider",children:"Lote"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-sm font-black text-gray-900 dark:text-gray-100 uppercase tracking-wider",children:"Vencimento"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-sm font-black text-gray-900 dark:text-gray-100 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-sm font-black text-gray-900 dark:text-gray-100 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,r.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:A.map(e=>{var t;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"text-2xl mr-3",children:getCategoryIcon(e.category)}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-bold text-black dark:text-white",children:e.name}),(0,r.jsx)("div",{className:"text-sm font-bold text-gray-800 dark:text-gray-200",children:e.location})]})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-blue-600 text-white dark:bg-blue-500 dark:text-white",children:(null===(t=E.find(t=>t.value===e.category))||void 0===t?void 0:t.label.replace(/.*\s/,""))||e.category})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsxs)("div",{className:"text-sm font-bold text-black dark:text-white",children:[e.quantity," ",e.unit]}),(0,r.jsxs)("div",{className:"text-xs font-bold text-gray-800 dark:text-gray-200",children:["M\xedn: ",e.minStock," ",e.unit]})]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-black dark:text-white",children:["R$ ",e.unitPrice.toFixed(2)]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-black text-black dark:text-white",children:["R$"," ",e.totalValue.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-black dark:text-white",children:e.supplier}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-black dark:text-white",children:e.batchNumber}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-black dark:text-white",children:e.expiryDate?new Date(e.expiryDate).toLocaleDateString("pt-BR"):"-"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(getStatusColor(e.status)),children:"active"===e.status?"Ativo":e.status})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>h(e),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Editar",children:"✏️"}),(0,r.jsx)("button",{className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Usar Material",children:"\uD83D\uDCCA"}),(0,r.jsx)("button",{className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Excluir",children:"\uD83D\uDDD1️"})]})})]},e.id)})})]})})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)(l.Zb,{className:"p-4 text-center bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 shadow-lg",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:x.length}),(0,r.jsx)("div",{className:"text-sm text-black dark:text-white",children:"Total de Itens"})]}),(0,r.jsxs)(l.Zb,{className:"p-4 text-center",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:["R$"," ",R.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,r.jsx)("div",{className:"text-sm text-black dark:text-white",children:"Valor Total"})]}),(0,r.jsxs)(l.Zb,{className:"p-4 text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:P.length}),(0,r.jsx)("div",{className:"text-sm text-black dark:text-white",children:"Estoque Baixo"})]}),(0,r.jsxs)(l.Zb,{className:"p-4 text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:I.length}),(0,r.jsx)("div",{className:"text-sm text-black dark:text-white",children:"Vencendo"})]})]})]}),renderPurchases=()=>{let e=x.filter(e=>e.quantity<=e.minStock),getStatusColor=e=>{switch(e){case"entregue":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"pendente":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"cancelado":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},getStatusLabel=e=>{switch(e){case"entregue":return"✅ Entregue";case"pendente":return"⏳ Pendente";case"cancelado":return"❌ Cancelado";default:return e}};return(0,r.jsxs)("div",{className:"space-y-6",children:[e.length>0&&(0,r.jsxs)(l.Zb,{className:"p-6 border-2 border-red-300 dark:border-red-600 bg-red-50 dark:bg-red-900/20",children:[(0,r.jsx)("h3",{className:"text-xl font-black text-red-900 dark:text-red-100 mb-4 flex items-center",children:"\uD83D\uDEA8 Itens com Estoque Baixo - Necess\xe1rio Comprar"}),(0,r.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 rounded-lg border-2 border-red-200 dark:border-red-700",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("span",{className:"text-3xl",children:getCategoryIcon(e.category)}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-black text-black dark:text-white text-lg",children:e.name}),(0,r.jsxs)("p",{className:"text-sm font-bold text-red-700 dark:text-red-300",children:["Estoque atual:"," ",(0,r.jsxs)("span",{className:"font-black",children:[e.quantity," ",e.unit]})," ","| M\xednimo:"," ",(0,r.jsxs)("span",{className:"font-black",children:[e.minStock," ",e.unit]})]}),(0,r.jsxs)("p",{className:"text-sm font-semibold text-black dark:text-white",children:["Fornecedor: ",e.supplier," | \xdaltimo pre\xe7o: R$"," ",e.unitPrice.toFixed(2)]})]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(i.z,{className:"bg-red-600 hover:bg-red-700 text-white font-bold",onClick:()=>{let t=Math.max(2*e.minStock-e.quantity,e.minStock);alert("\uD83D\uDED2 Sugest\xe3o de Compra:\n\nItem: ".concat(e.name,"\nQuantidade sugerida: ").concat(t," ").concat(e.unit,"\nFornecedor: ").concat(e.supplier,"\nValor estimado: R$ ").concat((t*e.unitPrice).toFixed(2)))},children:"\uD83D\uDED2 Comprar Agora"}),(0,r.jsx)(i.z,{variant:"outline",className:"border-red-300 text-red-700 hover:bg-red-50 font-bold",onClick:()=>{alert("\uD83D\uDCDE Contato do Fornecedor:\n\n".concat(e.supplier,"\nTelefone: (11) 9999-9999\nEmail: vendas@").concat(e.supplier.toLowerCase().replace(/\s+/g,""),".com.br"))},children:"\uD83D\uDCDE Contatar"})]})]},e.id))}),(0,r.jsxs)("div",{className:"mt-6 p-4 bg-yellow-100 dark:bg-yellow-900/20 rounded-lg border-2 border-yellow-300 dark:border-yellow-600",children:[(0,r.jsx)("h4",{className:"font-black text-yellow-900 dark:text-yellow-100 mb-2",children:"\uD83D\uDCA1 Sugest\xe3o Inteligente"}),(0,r.jsxs)("p",{className:"text-sm font-bold text-yellow-800 dark:text-yellow-200",children:["Valor total estimado para reposi\xe7\xe3o:"," ",(0,r.jsxs)("span",{className:"font-black",children:["R$"," ",e.reduce((e,t)=>{let a=Math.max(2*t.minStock-t.quantity,t.minStock);return e+a*t.unitPrice},0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})]}),(0,r.jsxs)(l.Zb,{className:"p-6 border-2 border-gray-300 dark:border-gray-600",children:[(0,r.jsx)("h3",{className:"text-xl font-black text-black dark:text-white mb-6",children:"\uD83D\uDCCB Hist\xf3rico de Compras"}),(0,r.jsx)("div",{className:"space-y-4",children:D.map(e=>(0,r.jsxs)("div",{className:"p-4 border-2 border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h4",{className:"font-black text-black dark:text-white",children:["Compra #",e.id," -"," ",new Date(e.date).toLocaleDateString("pt-BR")]}),(0,r.jsxs)("p",{className:"text-sm font-bold text-black dark:text-white",children:["Fornecedor: ",e.supplier]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold ".concat(getStatusColor(e.status)),children:getStatusLabel(e.status)}),(0,r.jsxs)("p",{className:"text-lg font-black text-black dark:text-white mt-1",children:["R$"," ",e.totalValue.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),(0,r.jsx)("div",{className:"space-y-2",children:e.items.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-gray-700 rounded border",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCE6"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-bold text-black dark:text-white",children:e.name}),(0,r.jsxs)("p",{className:"text-sm font-semibold text-black dark:text-white",children:[e.quantity," unidades \xd7 R$"," ",e.unitPrice.toFixed(2)]})]})]}),(0,r.jsxs)("p",{className:"font-black text-black dark:text-white",children:["R$"," ",e.total.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]},t))})]},e.id))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)(l.Zb,{className:"p-4 text-center border-2 border-blue-300 dark:border-blue-600 bg-white dark:bg-gray-800 shadow-lg",children:[(0,r.jsx)("div",{className:"text-2xl font-black text-blue-600 dark:text-blue-400",children:D.length}),(0,r.jsx)("div",{className:"text-sm font-bold text-black dark:text-white",children:"Total de Compras"})]}),(0,r.jsxs)(l.Zb,{className:"p-4 text-center border-2 border-green-300 dark:border-green-600",children:[(0,r.jsxs)("div",{className:"text-2xl font-black text-green-600 dark:text-green-400",children:["R$"," ",D.reduce((e,t)=>e+t.totalValue,0).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,r.jsx)("div",{className:"text-sm font-bold text-black dark:text-white",children:"Valor Total Gasto"})]}),(0,r.jsxs)(l.Zb,{className:"p-4 text-center border-2 border-red-300 dark:border-red-600",children:[(0,r.jsx)("div",{className:"text-2xl font-black text-red-600 dark:text-red-400",children:e.length}),(0,r.jsx)("div",{className:"text-sm font-bold text-black dark:text-white",children:"Itens p/ Comprar"})]}),(0,r.jsxs)(l.Zb,{className:"p-4 text-center border-2 border-purple-300 dark:border-purple-600",children:[(0,r.jsx)("div",{className:"text-2xl font-black text-purple-600 dark:text-purple-400",children:new Set(D.map(e=>e.supplier)).size}),(0,r.jsx)("div",{className:"text-sm font-bold text-black dark:text-white",children:"Fornecedores"})]})]})]})},showCategoryItems=e=>{let t=x.filter(t=>t.category===e.value);v({...e,items:t})},showSupplierItems=e=>{let t=x.filter(t=>t.supplier===e.value);w({...e,items:t})},renderReports=()=>(0,r.jsxs)("div",{className:"space-y-6",children:[f&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h2",{className:"text-2xl font-black text-black dark:text-white",children:[f.label," - ",f.items.length," ","itens"]}),(0,r.jsx)(i.z,{onClick:()=>v(null),variant:"outline",className:"text-gray-500 hover:text-gray-700",children:"✕ Fechar"})]})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:f.items.map(e=>(0,r.jsxs)(l.Zb,{className:"p-3 sm:p-4 md:p-6 border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 sm:space-x-4 mb-3 sm:mb-4",children:[(0,r.jsx)("div",{className:"bg-blue-600 p-2 sm:p-3 rounded-lg flex-shrink-0",children:(0,r.jsx)("span",{className:"text-2xl sm:text-3xl text-white",children:getCategoryIcon(e.category)})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h3",{className:"font-black text-gray-900 dark:text-white text-base sm:text-lg",children:e.name}),(0,r.jsx)("p",{className:"text-xs sm:text-sm font-bold text-gray-600 dark:text-gray-300",children:e.location})]})]}),(0,r.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,r.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-bold text-gray-900 dark:text-white",children:"Estoque:"}),(0,r.jsxs)("span",{className:"font-black text-blue-700 dark:text-blue-300 text-lg",children:[e.quantity," ",e.unit]})]})}),(0,r.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-bold text-gray-900 dark:text-white",children:"Valor Unit:"}),(0,r.jsxs)("span",{className:"font-black text-gray-900 dark:text-white text-lg",children:["R$ ",e.unitPrice.toFixed(2)]})]})}),(0,r.jsx)("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-bold text-gray-900 dark:text-white",children:"Valor Total:"}),(0,r.jsxs)("span",{className:"font-black text-green-700 dark:text-green-300 text-lg",children:["R$"," ",e.totalValue.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})}),(0,r.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-bold text-gray-900 dark:text-white",children:"Lote:"}),(0,r.jsx)("span",{className:"font-black text-gray-900 dark:text-white",children:e.batchNumber})]})}),(0,r.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-bold text-gray-900 dark:text-white",children:"Fornecedor:"}),(0,r.jsx)("span",{className:"font-black text-gray-900 dark:text-white",children:e.supplier})]})}),e.expiryDate&&(0,r.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-bold text-gray-900 dark:text-white",children:"Vencimento:"}),(0,r.jsx)("span",{className:"font-black text-red-700 dark:text-red-300 text-lg",children:new Date(e.expiryDate).toLocaleDateString("pt-BR")})]})})]})]},e.id))})})]})}),N&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h2",{className:"text-2xl font-black text-black dark:text-white",children:[N.label," - ",N.items.length," ","itens"]}),(0,r.jsx)(i.z,{onClick:()=>w(null),variant:"outline",className:"text-gray-500 hover:text-gray-700",children:"✕ Fechar"})]})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:N.items.map(e=>{var t;return(0,r.jsxs)(l.Zb,{className:"p-6 border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,r.jsx)("div",{className:"bg-blue-600 p-3 rounded-lg",children:(0,r.jsx)("span",{className:"text-3xl text-white",children:getCategoryIcon(e.category)})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-black text-gray-900 dark:text-white text-lg",children:e.name}),(0,r.jsx)("p",{className:"text-sm font-bold text-gray-600 dark:text-gray-300",children:e.location})]})]}),(0,r.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,r.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-bold text-gray-900 dark:text-white",children:"Categoria:"}),(0,r.jsx)("span",{className:"font-black text-gray-900 dark:text-white",children:(null===(t=E.find(t=>t.value===e.category))||void 0===t?void 0:t.label.replace(/.*\s/,""))||e.category})]})}),(0,r.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-bold text-gray-900 dark:text-white",children:"Estoque:"}),(0,r.jsxs)("span",{className:"font-black text-blue-700 dark:text-blue-300 text-lg",children:[e.quantity," ",e.unit]})]})}),(0,r.jsx)("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-bold text-gray-900 dark:text-white",children:"Valor Total:"}),(0,r.jsxs)("span",{className:"font-black text-green-700 dark:text-green-300 text-lg",children:["R$"," ",e.totalValue.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})}),(0,r.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-bold text-gray-900 dark:text-white",children:"Lote:"}),(0,r.jsx)("span",{className:"font-black text-gray-900 dark:text-white",children:e.batchNumber})]})})]})]},e.id)})})})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-6",children:[(0,r.jsxs)(l.Zb,{className:"p-6 border-2 border-gray-300 dark:border-gray-600",children:[(0,r.jsx)("h3",{className:"text-xl font-black text-black dark:text-white mb-6",children:"\uD83D\uDCCA Relat\xf3rio por Categoria"}),(0,r.jsx)("div",{className:"space-y-3",children:E.slice(1).map(e=>{let t=x.filter(t=>t.category===e.value),a=t.reduce((e,t)=>e+t.totalValue,0);return(0,r.jsxs)("button",{onClick:()=>showCategoryItems(e),className:"w-full flex items-center justify-between p-4 rounded-lg border-2 border-gray-400 bg-gray-900 dark:bg-gray-900 hover:border-blue-400 hover:bg-blue-900 transition-all cursor-pointer shadow-lg hover:shadow-xl",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("span",{className:"text-3xl",children:getCategoryIcon(e.value)}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("span",{className:"font-black text-white block text-xl drop-shadow-lg",children:e.label.replace(/.*\s/,"")}),(0,r.jsxs)("span",{className:"text-base font-bold text-gray-200 drop-shadow-lg",children:[t.length," itens"]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("span",{className:"font-black text-green-400 block text-xl drop-shadow-lg",children:["R$"," ",a.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,r.jsx)("span",{className:"text-base font-bold text-yellow-300 drop-shadow-lg",children:"\uD83D\uDC46 Clique para ver"})]})]},e.value)})})]}),(0,r.jsxs)(l.Zb,{className:"p-6 border-2 border-gray-300 dark:border-gray-600",children:[(0,r.jsx)("h3",{className:"text-xl font-black text-black dark:text-white mb-6",children:"\uD83C\uDFEA Relat\xf3rio por Fornecedor"}),(0,r.jsx)("div",{className:"space-y-3",children:F.slice(1).map(e=>{let t=x.filter(t=>t.supplier===e.value),a=t.reduce((e,t)=>e+t.totalValue,0);return(0,r.jsxs)("button",{onClick:()=>showSupplierItems(e),className:"w-full flex items-center justify-between p-4 rounded-lg border-2 border-gray-400 bg-gray-900 dark:bg-gray-900 hover:border-green-400 hover:bg-green-900 transition-all cursor-pointer shadow-lg hover:shadow-xl",children:[(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("span",{className:"font-black text-white block text-xl drop-shadow-lg",children:e.label}),(0,r.jsxs)("span",{className:"text-base font-bold text-gray-200 drop-shadow-lg",children:[t.length," itens"]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("span",{className:"font-black text-green-400 block text-xl drop-shadow-lg",children:["R$"," ",a.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,r.jsx)("span",{className:"text-base font-bold text-yellow-300 drop-shadow-lg",children:"\uD83D\uDC46 Clique para ver"})]})]},e.value)})})]}),(0,r.jsxs)(l.Zb,{className:"p-6 border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800",children:[(0,r.jsx)("div",{className:"bg-blue-600 text-white p-4 rounded-lg mb-6 text-center",children:(0,r.jsx)("h3",{className:"text-xl font-black mb-2",children:"\uD83D\uDCC8 Resumo Mensal"})}),(0,r.jsxs)("div",{className:"text-center py-4",children:[(0,r.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 p-6 rounded-lg mb-6",children:[(0,r.jsxs)("div",{className:"text-4xl font-black text-green-700 dark:text-green-300 mb-2",children:["R$"," ",R.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,r.jsx)("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Valor total em estoque"})]}),(0,r.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,r.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-bold text-gray-900 dark:text-white text-base",children:"\uD83D\uDC8A Medicamentos:"}),(0,r.jsx)("span",{className:"font-black text-red-700 dark:text-red-300 text-xl",children:x.filter(e=>"medicamento"===e.category).length})]})}),(0,r.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-bold text-gray-900 dark:text-white text-base",children:"\uD83C\uDFF7️ Identifica\xe7\xe3o:"}),(0,r.jsx)("span",{className:"font-black text-blue-700 dark:text-blue-300 text-xl",children:x.filter(e=>"identificacao"===e.category).length})]})}),(0,r.jsx)("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-bold text-gray-900 dark:text-white text-base",children:"\uD83C\uDF3E Alimenta\xe7\xe3o:"}),(0,r.jsx)("span",{className:"font-black text-green-700 dark:text-green-300 text-xl",children:x.filter(e=>"alimentacao"===e.category).length})]})})]})]})]})]})]});return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-700 rounded-3xl p-8 text-white",children:(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-4xl font-bold mb-3 flex items-center",children:"\uD83D\uDCE6 Gest\xe3o de Materiais & Custos"}),(0,r.jsx)("p",{className:"text-lg opacity-90",children:"Controle completo de estoque, medicamentos e custos operacionais"})]}),(0,r.jsx)("div",{className:"mt-6 lg:mt-0",children:(0,r.jsx)(i.z,{onClick:()=>g(!0),className:"border-l-indigo-500 text-purple-600 hover:bg-emerald-700 font-semibold px-6 py-3",children:"➕ Adicionar Item"})})]})}),(0,r.jsxs)("div",{className:"bg-slate-500 dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("div",{className:"border-b border-red-200 dark:border-gray-700",children:(0,r.jsx)("nav",{className:"flex space-x-8 px-6",children:[{id:"overview",label:"\uD83D\uDCCA Vis\xe3o Geral",icon:"\uD83D\uDCCA"},{id:"protocols",label:"\uD83C\uDFAF Protocolos",icon:"\uD83C\uDFAF"},{id:"reminders",label:"\uD83E\uDDE0 Lembretes",icon:"\uD83E\uDDE0"},{id:"inventory",label:"\uD83D\uDCE6 Estoque",icon:"\uD83D\uDCE6"},{id:"purchases",label:"\uD83D\uDED2 Compras",icon:"\uD83D\uDED2"},{id:"reports",label:"\uD83D\uDCC8 Relat\xf3rios",icon:"\uD83D\uDCC8"}].map(e=>(0,r.jsx)("button",{onClick:()=>o(e.id),className:"py-4 px-2 border-b-2 font-medium text-sm transition-colors ".concat(a===e.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:e.label},e.id))})}),(0,r.jsx)("div",{className:"p-6",children:(()=>{switch(a){case"overview":default:return renderOverview();case"protocols":return renderProtocols();case"reminders":return renderReminders();case"inventory":return renderInventory();case"purchases":return renderPurchases();case"reports":return renderReports()}})()})]}),(0,r.jsx)(()=>{let[e,t]=(0,s.useState)({name:"",category:"medicamento",quantity:"",unit:"unidade",unitPrice:"",supplier:"",purchaseDate:"",expiryDate:"",batchNumber:"",location:"",minStock:"",notes:""});return((0,s.useEffect)(()=>{b&&t({name:b.name,category:b.category,quantity:b.quantity.toString(),unit:b.unit,unitPrice:b.unitPrice.toString(),supplier:b.supplier,purchaseDate:b.purchaseDate,expiryDate:b.expiryDate||"",batchNumber:b.batchNumber,location:b.location,minStock:b.minStock.toString(),notes:b.notes||""})},[b]),u||b)?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsx)("h2",{className:"text-2xl font-bold text-black dark:text-white",children:b?"✏️ Editar Material":"➕ Adicionar Material"})}),(0,r.jsxs)("form",{onSubmit:a=>{a.preventDefault();let r={id:b?b.id:Date.now(),name:e.name,category:e.category,quantity:parseInt(e.quantity),unit:e.unit,unitPrice:parseFloat(e.unitPrice),totalValue:parseInt(e.quantity)*parseFloat(e.unitPrice),supplier:e.supplier,purchaseDate:e.purchaseDate,expiryDate:e.expiryDate||null,batchNumber:e.batchNumber,location:e.location,minStock:parseInt(e.minStock),status:"active",notes:e.notes};b?m(e=>e.map(e=>e.id===b.id?r:e)):m(e=>[...e,r]),g(!1),h(null),t({name:"",category:"medicamento",quantity:"",unit:"unidade",unitPrice:"",supplier:"",purchaseDate:"",expiryDate:"",batchNumber:"",location:"",minStock:"",notes:""})},className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 md:gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-black dark:text-white mb-2",children:"Nome do Material *"}),(0,r.jsx)(n.I,{type:"text",value:e.name,onChange:a=>t({...e,name:a.target.value}),placeholder:"Ex: Brinco Auricular Numerado",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-black dark:text-white mb-2",children:"Categoria *"}),(0,r.jsx)("select",{value:e.category,onChange:a=>t({...e,category:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0,children:E.slice(1).map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-black dark:text-white mb-2",children:"Quantidade *"}),(0,r.jsx)(n.I,{type:"number",value:e.quantity,onChange:a=>t({...e,quantity:a.target.value}),placeholder:"Ex: 500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-black dark:text-white mb-2",children:"Unidade *"}),(0,r.jsx)("select",{value:e.unit,onChange:a=>t({...e,unit:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0,children:[{value:"unidade",label:"Unidade"},{value:"frasco",label:"Frasco"},{value:"saco",label:"Saco"},{value:"kg",label:"Quilograma"},{value:"litro",label:"Litro"},{value:"ml",label:"Mililitro"},{value:"caixa",label:"Caixa"},{value:"pacote",label:"Pacote"},{value:"dose",label:"Dose"}].map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-black dark:text-white mb-2",children:"Valor Unit\xe1rio (R$) *"}),(0,r.jsx)(n.I,{type:"number",step:"0.01",value:e.unitPrice,onChange:a=>t({...e,unitPrice:a.target.value}),placeholder:"Ex: 2.50",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-black dark:text-white mb-2",children:"Fornecedor *"}),(0,r.jsx)(n.I,{type:"text",value:e.supplier,onChange:a=>t({...e,supplier:a.target.value}),placeholder:"Ex: Agropecu\xe1ria Silva",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-black dark:text-white mb-2",children:"Data da Compra *"}),(0,r.jsx)(n.I,{type:"date",value:e.purchaseDate,onChange:a=>t({...e,purchaseDate:a.target.value}),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-black dark:text-white mb-2",children:"Data de Vencimento"}),(0,r.jsx)(n.I,{type:"date",value:e.expiryDate,onChange:a=>t({...e,expiryDate:a.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-black dark:text-white mb-2",children:"N\xfamero do Lote *"}),(0,r.jsx)(n.I,{type:"text",value:e.batchNumber,onChange:a=>t({...e,batchNumber:a.target.value}),placeholder:"Ex: BR2024001",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-black dark:text-white mb-2",children:"Localiza\xe7\xe3o *"}),(0,r.jsx)(n.I,{type:"text",value:e.location,onChange:a=>t({...e,location:a.target.value}),placeholder:"Ex: Estoque Principal",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-black dark:text-white mb-2",children:"Estoque M\xednimo *"}),(0,r.jsx)(n.I,{type:"number",value:e.minStock,onChange:a=>t({...e,minStock:a.target.value}),placeholder:"Ex: 100",required:!0})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-black dark:text-white mb-2",children:"Observa\xe7\xf5es"}),(0,r.jsx)(c.g,{value:e.notes,onChange:a=>t({...e,notes:a.target.value}),placeholder:"Informa\xe7\xf5es adicionais sobre o material...",rows:3})]}),e.quantity&&e.unitPrice&&(0,r.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Valor Total:"}),(0,r.jsxs)("span",{className:"text-lg font-bold text-blue-900 dark:text-blue-100",children:["R$"," ",(parseFloat(e.quantity||0)*parseFloat(e.unitPrice||0)).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,r.jsx)(i.z,{type:"button",variant:"outline",onClick:()=>{g(!1),h(null)},children:"Cancelar"}),(0,r.jsxs)(i.z,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:[b?"Atualizar":"Adicionar"," Material"]})]})]})]})}):null},{})]})}}}]);