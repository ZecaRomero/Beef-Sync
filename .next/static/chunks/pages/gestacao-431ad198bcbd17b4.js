(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[397],{825:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gestacao",function(){return t(2979)}])},2979:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return GestacaoPage}});var s=t(5893),r=t(7787),i=t(7294),o=t(6949);function GestationManager(){let[e,a]=(0,i.useState)([]),[t,r]=(0,i.useState)([]),[n,c]=(0,i.useState)(!1),[l,d]=(0,i.useState)(""),[m,x]=(0,i.useState)({dataInseminacao:"",paiSerie:"",paiRg:"",maeSerie:"",maeRg:"",previsaoNascimento:"",observacoes:""});(0,i.useEffect)(()=>{a([]);let loadGestacoes=async()=>{try{let e=await fetch("/api/gestations");if(e.ok){let a=await e.json();r(Array.isArray(a)?a:[])}else console.error("Erro ao carregar gesta\xe7\xf5es"),r([])}catch(e){console.error("Erro ao carregar gesta\xe7\xf5es:",e),r([])}};loadGestacoes()},[]);let calcularDiasGestacao=e=>{if(!e)return 0;let a=new Date,t=new Date(e);return Math.floor((a-t)/864e5)},calcularPrevisaoNascimento=e=>{if(!e)return"";let a=new Date(e);return a.setDate(a.getDate()+280),a.toISOString().split("T")[0]},handleDataInseminacaoChange=e=>{x({...m,dataInseminacao:e,previsaoNascimento:calcularPrevisaoNascimento(e)})},[h,u]=(0,i.useState)(!1),[g,p]=(0,i.useState)(null),[N,b]=(0,i.useState)({dataNascimento:new Date().toISOString().split("T")[0],horaNascimento:"",serie:"CJCJ",rg:"",tatuagem:"",sexo:"",peso:"",cor:"",tipoNascimento:"Normal",observacoes:"",custoNascimento:150,custoDNA:120,veterinario:"",dificuldadeParto:"Normal"}),abrirFormNascimento=e=>{p(e),b({...N,rg:"".concat(Date.now()).slice(-6),tatuagem:"T".concat(Date.now()).slice(-8)}),u(!0)},getStatusColor=e=>{switch(e){case"Em Gesta\xe7\xe3o":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"Nascido":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"Atrasado":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},getDiasRestantes=e=>{let a=new Date,t=new Date(e);return Math.ceil((t-a)/864e5)};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"\uD83D\uDC04 Gest\xe3o de Gesta\xe7\xf5es"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Controle de receptoras, gesta\xe7\xf5es e nascimentos FIV"})]}),(0,s.jsx)("button",{onClick:()=>c(!0),className:"btn-primary flex items-center",children:"➕ Nova Gesta\xe7\xe3o"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"card p-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.filter(e=>"Em Gesta\xe7\xe3o"===e.status).length}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Em Gesta\xe7\xe3o"})]}),(0,s.jsxs)("div",{className:"card p-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:t.filter(e=>"Nascido"===e.status).length}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Nascidos"})]}),(0,s.jsxs)("div",{className:"card p-4",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:e.length}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Receptoras Ativas"})]}),(0,s.jsxs)("div",{className:"card p-4",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:["R$ ",t.reduce((e,a)=>e+a.custoAcumulado,0).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Investimento Total"})]})]}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Gesta\xe7\xf5es em Andamento"})}),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)("div",{className:"space-y-4",children:t.map(e=>{let a=getDiasRestantes(e.previsaoNascimento),t=calcularDiasGestacao(e.dataInseminacao);return(0,s.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"text-2xl",children:"\uD83D\uDC04"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-semibold text-gray-900 dark:text-white",children:["Receptora: ",e.receptoraNome]}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Pai: ",e.paiSerie," ",e.paiRg," • M\xe3e: ",e.maeSerie," ",e.maeRg]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("span",{className:"px-3 py-1 text-xs font-semibold rounded-full ".concat(getStatusColor(e.status)),children:e.status}),"Em Gesta\xe7\xe3o"===e.status&&(0,s.jsx)("button",{onClick:()=>abrirFormNascimento(e),className:"btn-success text-sm",children:"\uD83C\uDF7C Registrar Nascimento"})]})]}),"Em Gesta\xe7\xe3o"===e.status&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:["Progresso da Gesta\xe7\xe3o: ",t,"/280 dias"]}),(0,s.jsx)("span",{className:"font-medium ".concat(a>0?"text-blue-600 dark:text-blue-400":"text-red-600 dark:text-red-400"),children:a>0?"".concat(a," dias restantes"):"".concat(Math.abs(a)," dias atrasado")})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-2 rounded-full transition-all duration-500",style:{width:"".concat(Math.min(t/280*100,100),"%")}})})]}),(0,s.jsxs)("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"T.E Embri\xe3o"}),(0,s.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:new Date(e.dataInseminacao).toLocaleDateString("pt-BR")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Previs\xe3o Nascimento"}),(0,s.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:new Date(e.previsaoNascimento).toLocaleDateString("pt-BR")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Custo Acumulado"}),(0,s.jsxs)("div",{className:"font-medium text-red-600 dark:text-red-400",children:["R$ ",e.custoAcumulado.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Tipo"}),(0,s.jsx)("div",{className:"font-medium text-purple-600 dark:text-purple-400",children:e.isFiv?"FIV":"Natural"})]})]})]},e.id)})})})]}),n&&(0,s.jsx)("div",{className:"modal-overlay",children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Registrar Nova Gesta\xe7\xe3o"})}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Receptora"}),(0,s.jsxs)("select",{value:l,onChange:e=>d(e.target.value),className:"input-field",children:[(0,s.jsx)("option",{value:"",children:"Selecione uma receptora"}),e.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.serie," ",e.rg," - R$ ",e.custoTotal.toLocaleString("pt-BR",{minimumFractionDigits:2})]},e.id))]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Data da T.E Embri\xe3o"}),(0,s.jsx)("input",{type:"date",value:m.dataInseminacao,onChange:e=>handleDataInseminacaoChange(e.target.value),className:"input-field"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Previs\xe3o Nascimento"}),(0,s.jsx)("input",{type:"date",value:m.previsaoNascimento,readOnly:!0,className:"input-field bg-gray-100 dark:bg-gray-600"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pai - S\xe9rie"}),(0,s.jsx)("input",{type:"text",value:m.paiSerie,onChange:e=>x({...m,paiSerie:e.target.value}),placeholder:"Ex: CJCJ",className:"input-field"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pai - RG"}),(0,s.jsx)("input",{type:"text",value:m.paiRg,onChange:e=>x({...m,paiRg:e.target.value}),placeholder:"Ex: 100001",className:"input-field"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"M\xe3e - S\xe9rie"}),(0,s.jsx)("input",{type:"text",value:m.maeSerie,onChange:e=>x({...m,maeSerie:e.target.value}),placeholder:"Ex: BENT",className:"input-field"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"M\xe3e - RG"}),(0,s.jsx)("input",{type:"text",value:m.maeRg,onChange:e=>x({...m,maeRg:e.target.value}),placeholder:"Ex: 200001",className:"input-field"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Observa\xe7\xf5es"}),(0,s.jsx)("textarea",{value:m.observacoes,onChange:e=>x({...m,observacoes:e.target.value}),rows:3,className:"input-field",placeholder:"Observa\xe7\xf5es sobre a gesta\xe7\xe3o..."})]})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3",children:[(0,s.jsx)("button",{onClick:()=>c(!1),className:"btn-secondary",children:"Cancelar"}),(0,s.jsx)("button",{onClick:()=>{if(!l||!m.dataInseminacao){alert("Selecione uma receptora e informe a data de T.E Embri\xe3o");return}let a=e.find(e=>e.id===parseInt(l)),s={id:t.length+1,receptoraId:a.id,receptoraNome:"".concat(a.serie," ").concat(a.rg),...m,status:"Em Gesta\xe7\xe3o",isFiv:!0,custoAcumulado:a.custoTotal,diasGestacao:calcularDiasGestacao(m.dataInseminacao)};r([...t,s]),c(!1),d(""),x({dataInseminacao:"",paiSerie:"",paiRg:"",maeSerie:"",maeRg:"",previsaoNascimento:"",observacoes:""})},className:"btn-primary",children:"Registrar Gesta\xe7\xe3o"})]})]})}),h&&g&&(0,s.jsx)("div",{className:"modal-overlay",children:(0,s.jsxs)("div",{className:"modal-content max-w-4xl",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["\uD83C\uDF7C Registrar Nascimento - ",g.receptoraNome]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Pai: ",g.paiSerie," ",g.paiRg," • M\xe3e: ",g.maeSerie," ",g.maeRg]})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white border-b pb-2",children:"\uD83D\uDCCB Dados B\xe1sicos do Bezerro"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Data de Nascimento *"}),(0,s.jsx)("input",{type:"date",value:N.dataNascimento,onChange:e=>b({...N,dataNascimento:e.target.value}),className:"input-field"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hora do Nascimento"}),(0,s.jsx)("input",{type:"time",value:N.horaNascimento,onChange:e=>b({...N,horaNascimento:e.target.value}),className:"input-field"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"S\xe9rie *"}),(0,s.jsxs)("select",{value:N.serie,onChange:e=>b({...N,serie:e.target.value}),className:"input-field",children:[(0,s.jsx)("option",{value:"CJCJ",children:"CJCJ (Nelore)"}),(0,s.jsx)("option",{value:"BENT",children:"BENT (Brahman)"}),(0,s.jsx)("option",{value:"CJCG",children:"CJCG (Gir)"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"RG *"}),(0,s.jsx)("input",{type:"text",value:N.rg,onChange:e=>b({...N,rg:e.target.value}),className:"input-field",placeholder:"Ex: 123456"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tatuagem"}),(0,s.jsx)("input",{type:"text",value:N.tatuagem,onChange:e=>b({...N,tatuagem:e.target.value}),className:"input-field",placeholder:"Ex: T123456"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sexo *"}),(0,s.jsxs)("select",{value:N.sexo,onChange:e=>b({...N,sexo:e.target.value}),className:"input-field",children:[(0,s.jsx)("option",{value:"",children:"Selecione"}),(0,s.jsx)("option",{value:"Macho",children:"\uD83D\uDC02 Macho"}),(0,s.jsx)("option",{value:"F\xeamea",children:"\uD83D\uDC04 F\xeamea"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Peso (kg) *"}),(0,s.jsx)("input",{type:"number",step:"0.1",value:N.peso,onChange:e=>b({...N,peso:e.target.value}),className:"input-field",placeholder:"Ex: 32.5"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cor/Pelagem"}),(0,s.jsxs)("select",{value:N.cor,onChange:e=>b({...N,cor:e.target.value}),className:"input-field",children:[(0,s.jsx)("option",{value:"",children:"Selecione a cor"}),(0,s.jsx)("option",{value:"Branco",children:"Branco"}),(0,s.jsx)("option",{value:"Cinza",children:"Cinza"}),(0,s.jsx)("option",{value:"Vermelho",children:"Vermelho"}),(0,s.jsx)("option",{value:"Preto",children:"Preto"}),(0,s.jsx)("option",{value:"Amarelo",children:"Amarelo"}),(0,s.jsx)("option",{value:"Malhado",children:"Malhado"}),(0,s.jsx)("option",{value:"Baio",children:"Baio"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white border-b pb-2",children:"\uD83C\uDFE5 Dados do Parto"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tipo de Nascimento"}),(0,s.jsxs)("select",{value:N.tipoNascimento,onChange:e=>b({...N,tipoNascimento:e.target.value}),className:"input-field",children:[(0,s.jsx)("option",{value:"Normal",children:"Normal"}),(0,s.jsx)("option",{value:"Assistido",children:"Assistido"}),(0,s.jsx)("option",{value:"Cesariana",children:"Cesariana"}),(0,s.jsx)("option",{value:"Complicado",children:"Complicado"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Dificuldade do Parto"}),(0,s.jsxs)("select",{value:N.dificuldadeParto,onChange:e=>b({...N,dificuldadeParto:e.target.value}),className:"input-field",children:[(0,s.jsx)("option",{value:"Normal",children:"Normal"}),(0,s.jsx)("option",{value:"Leve",children:"Leve"}),(0,s.jsx)("option",{value:"Moderada",children:"Moderada"}),(0,s.jsx)("option",{value:"Severa",children:"Severa"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Veterin\xe1rio Respons\xe1vel"}),(0,s.jsx)("input",{type:"text",value:N.veterinario,onChange:e=>b({...N,veterinario:e.target.value}),className:"input-field",placeholder:"Nome do veterin\xe1rio"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Observa\xe7\xf5es do Nascimento"}),(0,s.jsx)("textarea",{value:N.observacoes,onChange:e=>b({...N,observacoes:e.target.value}),rows:4,className:"input-field",placeholder:"Observa\xe7\xf5es sobre o parto, condi\xe7\xf5es do bezerro, etc..."})]})]})]}),(0,s.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCB0 Custos do Nascimento"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Custo do Nascimento (R$)"}),(0,s.jsx)("input",{type:"number",step:"0.01",value:N.custoNascimento,onChange:e=>b({...N,custoNascimento:parseFloat(e.target.value)||0}),className:"input-field"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Custo DNA (R$)"}),(0,s.jsx)("input",{type:"number",step:"0.01",value:N.custoDNA,onChange:e=>b({...N,custoDNA:parseFloat(e.target.value)||0}),className:"input-field"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rateio Receptora (30%)"}),(0,s.jsx)("input",{type:"text",value:"R$ ".concat((.3*g.custoAcumulado).toFixed(2)),readOnly:!0,className:"input-field bg-gray-100 dark:bg-gray-600"})]})]}),(0,s.jsxs)("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:"Custo Total Inicial:"}),(0,s.jsxs)("span",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:["R$ ",(N.custoNascimento+N.custoDNA+.3*g.custoAcumulado).toFixed(2)]})]}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Este ser\xe1 o custo inicial do bezerro, incluindo rateio da receptora"})]})]}),(0,s.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDC41️ Preview do Registro"}),(0,s.jsx)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Identifica\xe7\xe3o:"}),(0,s.jsxs)("div",{className:"font-medium text-gray-900 dark:text-white",children:[N.serie," ",N.rg]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Sexo/Peso:"}),(0,s.jsxs)("div",{className:"font-medium text-gray-900 dark:text-white",children:[N.sexo," • ",N.peso,"kg"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Cor:"}),(0,s.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:N.cor||"N\xe3o informada"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Tipo FIV:"}),(0,s.jsx)("div",{className:"font-medium text-purple-600 dark:text-purple-400",children:"Sim"})]})]})})]})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3",children:[(0,s.jsx)("button",{onClick:()=>{u(!1),p(null)},className:"btn-secondary",children:"Cancelar"}),(0,s.jsx)("button",{onClick:()=>{if(!N.sexo||!N.peso||!N.rg){alert("Preencha todos os campos obrigat\xf3rios: Sexo, Peso e RG");return}let e=.3*g.custoAcumulado,a=N.custoNascimento+N.custoDNA+e,s={id:Date.now(),serie:N.serie,rg:N.rg,tatuagem:N.tatuagem,sexo:N.sexo,raca:"Nelore",dataNascimento:N.dataNascimento,horaNascimento:N.horaNascimento,peso:parseFloat(N.peso),cor:N.cor,tipoNascimento:N.tipoNascimento,dificuldadeParto:N.dificuldadeParto,meses:0,situacao:"Ativo",pai:"".concat(g.paiSerie," ").concat(g.paiRg),mae:"".concat(g.maeSerie," ").concat(g.maeRg),receptora:g.receptoraNome,isFiv:!0,custoTotal:a,valorVenda:null,valorReal:null,veterinario:N.veterinario,custos:[{id:Date.now(),tipo:"Nascimento",valor:N.custoNascimento,data:N.dataNascimento,observacoes:"Nascimento ".concat(N.tipoNascimento," - Peso: ").concat(N.peso,"kg - ").concat(N.observacoes)},{id:Date.now()+1,tipo:"DNA",subtipo:"Paternidade + Gen\xf4mica",valor:N.custoDNA,data:N.dataNascimento,observacoes:"FIV - Confirma\xe7\xe3o paternidade e an\xe1lise gen\xf4mica"},{id:Date.now()+2,tipo:"Receptora",valor:e,data:N.dataNascimento,observacoes:"Rateio 30% da receptora ".concat(g.receptoraNome," (R$ ").concat(g.custoAcumulado.toFixed(2),")")}]},i=t.map(e=>e.id===g.id?{...e,status:"Nascido",dataNascimento:N.dataNascimento,bezerroId:s.id,dadosBezerro:{serie:s.serie,rg:s.rg,sexo:s.sexo,peso:s.peso}}:e);r(i);let n=o.Z.registrarNascimento(g,N);console.log("Novo bezerro registrado:",n),alert("✅ Bezerro registrado com sucesso!\n    \n\uD83D\uDCCB Dados:\n• Identifica\xe7\xe3o: ".concat(s.serie," ").concat(s.rg,"\n• Tatuagem: ").concat(s.tatuagem,"\n• Sexo: ").concat(s.sexo,"\n• Peso: ").concat(s.peso,"kg\n• Cor: ").concat(s.cor,"\n\n\uD83D\uDCB0 Custos Iniciais:\n• Nascimento: R$ ").concat(N.custoNascimento.toFixed(2),"\n• DNA: R$ ").concat(N.custoDNA.toFixed(2),"\n• Receptora (30%): R$ ").concat(e.toFixed(2),"\n• Total: R$ ").concat(a.toFixed(2))),u(!1),p(null),b({dataNascimento:new Date().toISOString().split("T")[0],horaNascimento:"",serie:"CJCJ",rg:"",tatuagem:"",sexo:"",peso:"",cor:"",tipoNascimento:"Normal",observacoes:"",custoNascimento:150,custoDNA:120,veterinario:"",dificuldadeParto:"Normal"})},className:"btn-success flex items-center",disabled:!N.sexo||!N.peso||!N.rg,children:"\uD83C\uDF7C Registrar Nascimento"})]})]})})]})}function GestacaoPage(){return(0,s.jsx)(r.Z,{children:(0,s.jsx)(GestationManager,{})})}},6949:function(e,a,t){"use strict";let AnimalDataManager=class AnimalDataManager{setToken(e){this.token=e}getHeaders(){let e={"Content-Type":"application/json"};return this.token&&(e.Authorization="Bearer ".concat(this.token)),e}async handleResponse(e){if(!e.ok){let a=await e.json();throw Error(a.message||"Erro na requisi\xe7\xe3o")}return e.json()}addListener(e){this.listeners.push(e)}removeListener(e){this.listeners=this.listeners.filter(a=>a!==e)}notifyListeners(e){this.listeners.forEach(a=>a(e))}async login(e,a){let t=await fetch("".concat(this.baseURL,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:a})}),s=await this.handleResponse(t);return this.setToken(s.token),localStorage.setItem("beef_sync_token",s.token),localStorage.setItem("beef_sync_user",JSON.stringify(s.user)),s}async register(e,a,t){let s=await fetch("".concat(this.baseURL,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:a,name:t})});return this.handleResponse(s)}loadToken(){{let e=localStorage.getItem("beef_sync_token");if(e)return this.setToken(e),e}return null}saveToken(e){localStorage.setItem("beef_sync_token",e),this.setToken(e)}logout(){localStorage.removeItem("beef_sync_token"),localStorage.removeItem("beef_sync_user"),this.token=null}async getAllAnimals(){try{let e=await fetch("".concat(this.baseURL,"/animals"),{headers:this.getHeaders()}),a=await this.handleResponse(e);return this.notifyListeners(a),a}catch(a){console.error("Erro ao buscar animais:",a);let e=[];return this.notifyListeners(e),e}}async getAnimalById(e){try{let a=await fetch("".concat(this.baseURL,"/animals/").concat(e),{headers:this.getHeaders()});return this.handleResponse(a)}catch(e){return console.error("Erro ao buscar animal:",e),null}}async addAnimal(e){let a=await fetch("".concat(this.baseURL,"/animals"),{method:"POST",headers:this.getHeaders(),body:JSON.stringify(e)});return this.handleResponse(a)}async updateAnimal(e,a){try{let t=await fetch("".concat(this.baseURL,"/animals/").concat(e),{method:"PUT",headers:this.getHeaders(),body:JSON.stringify(a)});return this.handleResponse(t)}catch(e){throw console.error("Erro ao atualizar animal:",e),e}}async deleteAnimal(e){try{let a=await fetch("".concat(this.baseURL,"/animals/").concat(e),{method:"DELETE",headers:this.getHeaders()});return this.handleResponse(a)}catch(e){throw console.error("Erro ao excluir animal:",e),e}}async getAllGestations(){return[]}async addGestation(e){let a=await fetch("".concat(this.baseURL,"/gestations"),{method:"POST",headers:this.getHeaders(),body:JSON.stringify(e)});return this.handleResponse(a)}async updateGestation(e,a){let t=await fetch("".concat(this.baseURL,"/gestations/").concat(e),{method:"PUT",headers:this.getHeaders(),body:JSON.stringify(a)});return this.handleResponse(t)}async getCosts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=new URLSearchParams(e),t=await fetch("".concat(this.baseURL,"/costs?").concat(a),{headers:this.getHeaders()});return this.handleResponse(t)}async addCost(e){let a=await fetch("".concat(this.baseURL,"/costs"),{method:"POST",headers:this.getHeaders(),body:JSON.stringify(e)});return this.handleResponse(a)}async addCustoToAnimal(e,a){let t={...a,animalId:e,data:a.data||new Date().toISOString()};return this.addCost(t)}async addWeight(e){let a=await fetch("".concat(this.baseURL,"/weights"),{method:"POST",headers:this.getHeaders(),body:JSON.stringify(e)});return this.handleResponse(a)}async getAlerts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=await fetch("".concat(this.baseURL,"/alerts").concat(e?"?status=".concat(e):""),{headers:this.getHeaders()});return this.handleResponse(a)}async addAlert(e){let a=await fetch("".concat(this.baseURL,"/alerts"),{method:"POST",headers:this.getHeaders(),body:JSON.stringify(e)});return this.handleResponse(a)}async updateAlert(e,a){let t=await fetch("".concat(this.baseURL,"/alerts/").concat(e),{method:"PUT",headers:this.getHeaders(),body:JSON.stringify(a)});return this.handleResponse(t)}async getDashboardStats(){return{totalAnimals:0,totalGestations:0,pendingAlerts:0,monthlyCosts:0,animalsByCategory:[],costsByType:[],upcomingBirths:[]}}async getStatistics(){try{return await this.getDashboardStats()}catch(e){return console.error("Error getting statistics:",e),{totalAnimals:0,totalGestations:0,pendingAlerts:0,monthlyCosts:0,animalsByCategory:[],costsByType:[],upcomingBirths:[]}}}async registrarNascimento(e,a){try{let t={brinco:a.rg||a.tatuagem,nome:a.nome||null,raca:this.getRacaBySerie(a.serie),sexo:a.sexo,dataNasc:a.dataNascimento,peso:parseFloat(a.peso),categoria:"Bezerro",observacoes:"FIV - Pai: ".concat(e.paiSerie," ").concat(e.paiRg,", M\xe3e: ").concat(e.maeSerie," ").concat(e.maeRg,", Receptora: ").concat(e.receptoraNome)},s=await this.addAnimal(t),r=.3*e.custoAcumulado,i=[{tipo:"NASCIMENTO",descricao:"Nascimento ".concat(a.tipoNascimento," - Peso: ").concat(a.peso,"kg"),valor:a.custoNascimento,data:a.dataNascimento,animalId:s.id,observacoes:a.observacoes},{tipo:"EXAME",descricao:"DNA - Paternidade + Gen\xf4mica",valor:a.custoDNA,data:a.dataNascimento,animalId:s.id,observacoes:"FIV - Confirma\xe7\xe3o paternidade e an\xe1lise gen\xf4mica"},{tipo:"RECEPTORA",descricao:"Rateio receptora ".concat(e.receptoraNome),valor:r,data:a.dataNascimento,animalId:s.id,observacoes:"30% do custo total da receptora (R$ ".concat(e.custoAcumulado.toFixed(2),")")}];for(let e of i)await this.addCost(e);return s}catch(e){throw console.error("Error registering birth:",e),e}}async registrarVenda(e,a,t,s){try{return await this.updateAnimal(e,{status:"VENDIDO"}),await this.addCost({tipo:"VENDA",descricao:"Venda do animal",valor:-a,data:t,animalId:e,observacoes:s||"Venda por R$ ".concat(a.toFixed(2))}),{success:!0}}catch(e){throw console.error("Error registering sale:",e),e}}searchAnimals(e,a){let t=a.toLowerCase();return e.filter(e=>e.brinco.toLowerCase().includes(t)||e.nome&&e.nome.toLowerCase().includes(t)||e.raca&&e.raca.toLowerCase().includes(t))}getAnimalsByCategory(e,a){return e.filter(e=>e.categoria===a)}getRacaBySerie(e){return({CJCJ:"Nelore",BENT:"Brahman",CJCG:"Gir",RPT:"Receptora"})[e]||"Nelore"}calcularIdadeEmMeses(e){if(!e)return 0;let a=new Date,t=new Date(e);return Math.floor(Math.floor((a-t)/864e5)/30)}async exportarDados(){try{let[e,a]=await Promise.all([this.getAllAnimals(),this.getStatistics()]);return{animals:e,statistics:a,exportDate:new Date().toISOString()}}catch(e){throw console.error("Error exporting data:",e),e}}constructor(){this.baseURL="/api",this.token=null,this.listeners=[]}};let s=new AnimalDataManager;s.loadToken(),a.Z=s}},function(e){e.O(0,[869,68,717,787,774,888,179],function(){return e(e.s=825)}),_N_E=e.O()}]);