(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[555],{7674:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/invite/[token]",function(){return t(180)}])},180:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return InvitePage}});var s=t(5893),r=t(1163),i=t(7294),n=t(2807);function PublicDashboard(e){let{inviteToken:a}=e,[t,r]=(0,i.useState)(null),[d,l]=(0,i.useState)(!0),[c,o]=(0,i.useState)([]),[x,m]=(0,i.useState)("sales");(0,i.useEffect)(()=>{loadDashboard();let e=setInterval(()=>{addLiveUpdate()},3e4);return()=>clearInterval(e)},[a]);let loadDashboard=async()=>{try{let e=await n.X.getPublicDashboard(a);r(e),o(e.liveUpdates)}catch(e){console.error("Erro ao carregar dashboard:",e)}finally{l(!1)}},addLiveUpdate=()=>{let e=[{type:"sale",message:"Nova venda: Garrote #5555 por R$ 4.200",icon:"\uD83D\uDCB0"},{type:"price_alert",message:"Pre\xe7o da arroba subiu R$ 2,50",icon:"\uD83D\uDCC8"},{type:"market",message:"Mercado em alta - momento favor\xe1vel",icon:"\uD83D\uDE80"},{type:"ranking",message:"Seu rebanho est\xe1 15% acima da m\xe9dia",icon:"\uD83C\uDFC6"}],a=e[Math.floor(Math.random()*e.length)],t={...a,timestamp:new Date().toISOString(),id:Date.now()};o(e=>[t,...e.slice(0,9)])},formatCurrency=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),formatDateTime=e=>new Date(e).toLocaleString("pt-BR");return d?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin text-6xl mb-4",children:"\uD83D\uDC04"}),(0,s.jsx)("div",{className:"text-xl text-gray-600 dark:text-gray-400",children:"Carregando dashboard..."})]})}):t?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"text-3xl",children:"\uD83D\uDC04"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.farmName}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Propriet\xe1rio: ",t.owner," • ",t.totalAnimals," animais"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),(0,s.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ao vivo"})]})]})})}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700 sticky top-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83D\uDD34 Atualiza\xe7\xf5es ao Vivo"}),(0,s.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:c.map(e=>(0,s.jsx)("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border-l-4 border-blue-500",children:(0,s.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,s.jsx)("span",{className:"text-lg",children:e.icon||"\uD83D\uDCE2"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:e.message}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:formatDateTime(e.timestamp)})]})]})},e.id||e.timestamp))})]})}),(0,s.jsx)("div",{className:"lg:col-span-3",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:[(0,s.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700",children:(0,s.jsx)("nav",{className:"flex space-x-8 px-6",children:[{id:"sales",label:"Vendas Recentes",icon:"\uD83D\uDCB0"},{id:"rankings",label:"Rankings",icon:"\uD83C\uDFC6"},{id:"market",label:"vs Mercado",icon:"\uD83D\uDCCA"}].map(e=>(0,s.jsxs)("button",{onClick:()=>m(e.id),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat(x===e.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:[(0,s.jsx)("span",{children:e.icon}),(0,s.jsx)("span",{children:e.label})]},e.id))})}),(0,s.jsxs)("div",{className:"p-6",children:["sales"===x&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCB0 Vendas Recentes"}),(0,s.jsx)("div",{className:"space-y-4",children:t.recentSales.map(e=>(0,s.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"text-2xl",children:"\uD83D\uDC04"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-semibold text-gray-900 dark:text-white",children:e.animal}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.weight,"kg • ",e.buyer]}),(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:formatDateTime(e.date)})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:formatCurrency(e.price)}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Lucro: ",formatCurrency(e.profit)]}),(0,s.jsx)("div",{className:"text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded-full",children:e.category})]})]})},e.id))})]}),"rankings"===x&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"\uD83C\uDFC6 Rankings e Performance"}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"\uD83E\uDD47 Top Performers"}),(0,s.jsx)("div",{className:"space-y-2",children:t.rankings.bestPerformers.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"text-2xl",children:0===a?"\uD83E\uDD47":1===a?"\uD83E\uDD48":"\uD83E\uDD49"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.animal}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["ROI: ",e.roi,"%"]})]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsx)("div",{className:"font-bold text-green-600 dark:text-green-400",children:formatCurrency(e.value)})})]},a))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"\uD83D\uDCCA Por Categoria"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(t.rankings.byCategory).map(e=>{let[a,t]=e;return(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[(0,s.jsx)("div",{className:"text-2xl mb-2",children:"Terminados"===a?"\uD83D\uDC04":"Recria"===a?"\uD83D\uDC02":"\uD83D\uDC2E"}),(0,s.jsx)("div",{className:"font-semibold text-gray-900 dark:text-white",children:a}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[t.count," animais"]}),(0,s.jsx)("div",{className:"text-lg font-bold text-green-600 dark:text-green-400 mt-2",children:formatCurrency(t.avgPrice)}),(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Pre\xe7o m\xe9dio"})]},a)})})]})]}),"market"===x&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCCA Performance vs Mercado"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 text-center",children:[(0,s.jsxs)("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[t.marketComparison.aboveMarket,"%"]}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"\uD83D\uDCC8 Acima do Mercado"})]}),(0,s.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 text-center",children:[(0,s.jsxs)("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:[t.marketComparison.atMarket,"%"]}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"➡️ No Mercado"})]}),(0,s.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 text-center",children:[(0,s.jsxs)("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:[t.marketComparison.belowMarket,"%"]}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"\uD83D\uDCC9 Abaixo do Mercado"})]}),(0,s.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 text-center",children:[(0,s.jsxs)("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:["+",t.marketComparison.avgPremium,"%"]}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"\uD83C\uDFAF Pr\xeamio M\xe9dio"})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 rounded-lg p-6 text-center",children:[(0,s.jsx)("div",{className:"text-4xl mb-2",children:"\uD83C\uDFC6"}),(0,s.jsx)("div",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Excelente Performance!"}),(0,s.jsxs)("div",{className:"text-gray-600 dark:text-gray-400",children:["Seu rebanho est\xe1 performando ",t.marketComparison.avgPremium,"% acima da m\xe9dia do mercado"]})]})]})]})]})})]})})]}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"❌"}),(0,s.jsx)("div",{className:"text-xl text-gray-600 dark:text-gray-400",children:"Convite inv\xe1lido ou expirado"})]})})}function InvitePage(){let e=(0,r.useRouter)(),{token:a}=e.query,[t,d]=(0,i.useState)("loading"),[l,c]=(0,i.useState)(null);(0,i.useEffect)(()=>{a&&handleInviteAcceptance()},[a]);let handleInviteAcceptance=async()=>{try{let e=await n.X.acceptInvite(a);c(e),d("accepted")}catch(e){console.error("Erro ao aceitar convite:",e),d("invalid")}};return"loading"===t?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin text-6xl mb-4",children:"\uD83D\uDC04"}),(0,s.jsx)("div",{className:"text-xl text-gray-600 dark:text-gray-400",children:"Verificando convite..."})]})}):"invalid"===t?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto text-center p-8",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"❌"}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Convite Inv\xe1lido"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Este convite pode ter expirado ou j\xe1 foi usado. Entre em contato com quem te convidou para obter um novo link."}),(0,s.jsx)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-yellow-600 dark:text-yellow-400",children:"⚠️"}),(0,s.jsxs)("div",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[(0,s.jsx)("strong",{children:"Dica:"})," Verifique se o link est\xe1 completo e tente novamente."]})]})})]})}):"accepted"===t?(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"bg-green-500 text-white p-4 text-center",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,s.jsx)("span",{className:"text-2xl",children:"\uD83C\uDF89"}),(0,s.jsx)("span",{className:"font-semibold",children:"Bem-vindo! Convite aceito com sucesso."}),(0,s.jsx)("span",{className:"text-2xl",children:"\uD83D\uDC04"})]})})}),(0,s.jsx)(PublicDashboard,{inviteToken:a})]}):null}},2807:function(e,a,t){"use strict";t.d(a,{X:function(){return s}});let s={invites:[],async getInvites(e){await this.delay(500);let a=localStorage.getItem("beef_sync_invites");return a&&(this.invites=JSON.parse(a)),this.invites.filter(a=>a.invitedBy===e)},async sendInvite(e){await this.delay(1e3);let a={id:Date.now(),...e,status:"pending",createdAt:new Date().toISOString(),inviteLink:this.generateInviteLink(),whatsappMessage:this.generateWhatsAppMessage(e)};this.invites.push(a),localStorage.setItem("beef_sync_invites",JSON.stringify(this.invites));try{await this.sendWhatsAppInvite(a)}catch(e){console.warn("Envio via WhatsApp n\xe3o configurado:",e.message)}return a},async revokeInvite(e){await this.delay(300);let a=this.invites.find(a=>a.id===e);return a&&(a.status="revoked",a.revokedAt=new Date().toISOString()),a},async acceptInvite(e){await this.delay(500);let a=this.invites.find(a=>a.inviteLink.includes(e));if(a&&"pending"===a.status)return a.status="accepted",a.acceptedAt=new Date().toISOString(),a.lastSeen=new Date().toISOString(),a;throw Error("Convite inv\xe1lido ou expirado")},generateInviteLink(){let e=Math.random().toString(36).substring(2,15);return"".concat(window.location.origin,"/invite/").concat(e)},generateWhatsAppMessage(e){let a="\uD83D\uDC04 *Beef Sync - Convite Especial*\n\nOl\xe1 ".concat(e.name,"! \uD83D\uDC4B\n\nVoc\xea foi convidado para acompanhar em tempo real as vendas de gado e resultados do mercado!\n\n\uD83C\uDFAF *O que voc\xea pode fazer:*\n").concat(e.permissions.includes("view_sales")?"\uD83D\uDCB0 Ver vendas em tempo real\n":"").concat(e.permissions.includes("view_rankings")?"\uD83C\uDFC6 Acompanhar rankings e compara\xe7\xf5es\n":"").concat(e.permissions.includes("view_analytics")?"\uD83D\uDCCA Ver an\xe1lises e relat\xf3rios\n":"").concat(e.permissions.includes("receive_alerts")?"\uD83D\uDD14 Receber alertas de oportunidades\n":"","\n\n\uD83D\uDCF1 *Acesse agora:*\n").concat(this.generateInviteLink(),"\n\n⏰ Este convite expira em 7 dias.\n\n*Beef Sync* - Gest\xe3o Bovina Inteligente \uD83D\uDE80");return encodeURIComponent(a)},async sendWhatsAppInvite(e){let a="https://wa.me/".concat(e.phone.replace(/\D/g,""),"?text=").concat(e.whatsappMessage);console.log("\uD83D\uDCF1 Link do WhatsApp gerado:",a),window.open(a,"_blank"),setTimeout(()=>{console.log("✅ WhatsApp aberto para ".concat(e.name))},1e3)},async getPublicDashboard(e){await this.delay(800);try{return{farmName:"Sua Fazenda",owner:"Propriet\xe1rio",totalAnimals:0,recentSales:[],rankings:{bestPerformers:[],byCategory:{}},marketComparison:{aboveMarket:0,atMarket:0,belowMarket:0,avgPremium:0},liveUpdates:[]}}catch(e){throw Error("Erro ao carregar dados do dashboard")}},delay:e=>new Promise(a=>setTimeout(a,e))}},1163:function(e,a,t){e.exports=t(9974)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=7674)}),_N_E=e.O()}]);