(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[916],{3875:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vendas-recentes",function(){return t(6233)}])},6233:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return VendasRecentes}});var r=t(5893),s=t(7294);function VendasRecentes(){let[e,a]=(0,s.useState)([]),[t,l]=(0,s.useState)(!0);(0,s.useEffect)(()=>{carregarVendasRecentes()},[]);let carregarVendasRecentes=async()=>{try{let e=await fetch("/api/sales-list"),t=await e.json(),r=t.slice(0,5);a(r),console.log("\uD83D\uDCCA Vendas encontradas:",r.length)}catch(e){console.error("❌ Erro ao carregar vendas:",e)}finally{l(!1)}},formatarData=e=>new Date(e).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),formatarValor=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e);return t?(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"\uD83D\uDD04 Carregando vendas..."})}):(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"\uD83D\uDCB0 5 Vendas Mais Recentes"}),(0,r.jsx)(e=>{var a,t;let{vendas:s}=e;if(0===s.length)return null;let l=s.map((e,a)=>{var t;return{x:a,y:e.valor||0,label:(null===(t=e.animal)||void 0===t?void 0:t.brinco)||"Venda ".concat(a+1),data:e.createdAt}}).reverse(),d=Math.max(...l.map(e=>e.y)),n=Math.min(...l.map(e=>e.y)),i=d-n,calcularY=e=>0===i?150:50+(d-e)/i*200,c=l.map((e,a)=>{let t=50+a*(500/Math.max(l.length-1,1)),r=calcularY(e.y);return{x:t,y:r,...e}}),o=c.map((e,a)=>"".concat(0===a?"M":"L"," ").concat(e.x," ").concat(e.y)).join(" ");return(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700 mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83D\uDCC8 Gr\xe1fico de Varia\xe7\xe3o dos Pre\xe7os"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("svg",{width:"600",height:"300",className:"w-full h-auto",children:[(0,r.jsx)("defs",{children:(0,r.jsx)("pattern",{id:"grid",width:"50",height:"25",patternUnits:"userSpaceOnUse",children:(0,r.jsx)("path",{d:"M 50 0 L 0 0 0 25",fill:"none",stroke:"#e5e7eb",strokeWidth:"0.5"})})}),(0,r.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),(0,r.jsx)("path",{d:o,fill:"none",stroke:"#3b82f6",strokeWidth:"3",className:"drop-shadow-sm"}),(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:"areaGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,r.jsx)("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:"0.3"}),(0,r.jsx)("stop",{offset:"100%",stopColor:"#3b82f6",stopOpacity:"0.05"})]})}),(0,r.jsx)("path",{d:"".concat(o," L ").concat((null===(a=c[c.length-1])||void 0===a?void 0:a.x)||0," 250 L ").concat((null===(t=c[0])||void 0===t?void 0:t.x)||0," 250 Z"),fill:"url(#areaGradient)"}),c.map((e,a)=>(0,r.jsxs)("g",{children:[(0,r.jsx)("circle",{cx:e.x,cy:e.y,r:"6",fill:"#3b82f6",stroke:"white",strokeWidth:"2",className:"drop-shadow-sm hover:r-8 transition-all cursor-pointer"}),(0,r.jsxs)("g",{className:"opacity-0 hover:opacity-100 transition-opacity pointer-events-none",children:[(0,r.jsx)("rect",{x:e.x-40,y:e.y-35,width:"80",height:"25",fill:"#1f2937",rx:"4",className:"drop-shadow-lg"}),(0,r.jsx)("text",{x:e.x,y:e.y-18,textAnchor:"middle",fill:"white",fontSize:"12",fontWeight:"bold",children:formatarValor(e.y)})]}),(0,r.jsx)("text",{x:e.x,y:270,textAnchor:"middle",fill:"#6b7280",fontSize:"10",className:"dark:fill-gray-400",children:e.label})]},a)),(0,r.jsxs)("g",{children:[(0,r.jsx)("text",{x:"20",y:"60",fill:"#6b7280",fontSize:"12",className:"dark:fill-gray-400",children:formatarValor(d)}),(0,r.jsx)("text",{x:"20",y:"155",fill:"#6b7280",fontSize:"12",className:"dark:fill-gray-400",children:formatarValor((d+n)/2)}),(0,r.jsx)("text",{x:"20",y:"245",fill:"#6b7280",fontSize:"12",className:"dark:fill-gray-400",children:formatarValor(n)})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:formatarValor(d)}),(0,r.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Maior Valor"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:formatarValor(l.reduce((e,a)=>e+a.y,0)/l.length)}),(0,r.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Valor M\xe9dio"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:formatarValor(n)}),(0,r.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Menor Valor"})]})]})]})},{vendas:e}),0===e.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCED"}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-600",children:"Nenhuma venda encontrada"}),(0,r.jsx)("p",{className:"text-gray-500 mt-2",children:"Ainda n\xe3o h\xe1 vendas registradas no sistema."})]}):(0,r.jsx)("div",{className:"space-y-4",children:e.map((e,a)=>{var t,s,l,d;return(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:(null===(t=e.animal)||void 0===t?void 0:t.sexo)==="Macho"?"\uD83D\uDC02":"\uD83D\uDC04"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:(null===(s=e.animal)||void 0===s?void 0:s.brinco)||"Animal ".concat(e.animalId)}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(null===(l=e.animal)||void 0===l?void 0:l.nome)||"Nome n\xe3o informado"," • ",(null===(d=e.animal)||void 0===d?void 0:d.raca)||"Ra\xe7a n\xe3o informada"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"\uD83D\uDC64 Comprador:"}),(0,r.jsx)("p",{className:"text-gray-900 dark:text-white",children:e.comprador||"N\xe3o informado"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"\uD83D\uDCC5 Data/Hora:"}),(0,r.jsx)("p",{className:"text-gray-900 dark:text-white font-mono",children:formatarData(e.createdAt)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"\uD83D\uDCB3 Pagamento:"}),(0,r.jsx)("p",{className:"text-gray-900 dark:text-white",children:e.formaPagamento||"N\xe3o informado"})]})]}),e.observacoes&&(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"\uD83D\uDCDD Observa\xe7\xf5es:"}),(0,r.jsx)("p",{className:"text-gray-700 dark:text-gray-300 text-sm mt-1",children:e.observacoes})]})]}),(0,r.jsxs)("div",{className:"text-right ml-6",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:formatarValor(e.valor)}),(0,r.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Venda #",a+1]}),e.saleEvent&&(0,r.jsxs)("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:["\uD83D\uDCCD ",e.saleEvent.nome]})]})]})},e.id)})}),(0,r.jsx)("div",{className:"mt-8 text-center",children:(0,r.jsx)("button",{onClick:carregarVendasRecentes,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium transition-colors",children:"\uD83D\uDD04 Atualizar Vendas"})})]})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=3875)}),_N_E=e.O()}]);