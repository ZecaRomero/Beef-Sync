(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(2820)}])},6522:function(e,a,t){"use strict";t.d(a,{I:function(){return Input}});var r=t(5893);t(7294);let Input=e=>{let{className:a="",type:t="text",disabled:s=!1,...l}=e;return(0,r.jsx)("input",{type:t,className:"flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ".concat(a),disabled:s,...l})}},3192:function(e,a,t){"use strict";t.d(a,{Bw:function(){return SelectContent},Ph:function(){return Select},Ql:function(){return SelectItem},i4:function(){return SelectTrigger},ki:function(){return SelectValue}});var r=t(5893);t(7294);let Select=e=>{let{children:a,value:t,onValueChange:s,className:l="",disabled:i=!1,...d}=e;return(0,r.jsx)("select",{value:t,onChange:e=>s&&s(e.target.value),disabled:i,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 disabled:opacity-50 disabled:cursor-not-allowed ".concat(l),...d,children:a})},SelectTrigger=e=>{let{children:a,className:t="",...s}=e;return(0,r.jsx)("div",{className:t,...s,children:a})},SelectValue=e=>{let{placeholder:a,className:t="",...s}=e;return(0,r.jsx)("span",{className:t,...s,children:a})},SelectContent=e=>{let{children:a,className:t="",...s}=e;return(0,r.jsx)("div",{className:t,...s,children:a})},SelectItem=e=>{let{children:a,value:t,className:s="",...l}=e;return(0,r.jsx)("option",{value:t,className:s,...l,children:a})}},4207:function(e,a,t){"use strict";t.d(a,{g:function(){return Textarea}});var r=t(5893);t(7294);let Textarea=e=>{let{className:a="",disabled:t=!1,rows:s=3,...l}=e;return(0,r.jsx)("textarea",{rows:s,className:"flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 ring-offset-white placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ".concat(a),disabled:t,...l})}},2820:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return Dashboard}});var r=t(5893),s=t(7294),l=t(1163),i=t(7787);function MetricsCards(e){let{timeRange:a,onReportClick:t}=e,[l,i]=(0,s.useState)(null),[d,n]=(0,s.useState)({animals:[],sales:[],loading:!0});(0,s.useEffect)(()=>{loadRealData()},[]);let loadRealData=async()=>{try{n({animals:[],sales:[],loading:!1})}catch(e){console.error("Erro ao carregar dados reais:",e),n({animals:[],sales:[],loading:!1})}},o=(()=>{if(d.loading)return{totalInvested:0,totalRevenue:0,totalProfit:0,avgROI:0,activeAnimals:0,soldAnimals:0,conversionRate:0};let{animals:e,sales:a}=d,t=e.reduce((e,a)=>{let t=a.costs||[],r=t.filter(e=>"VENDA"!==e.tipo).reduce((e,a)=>e+a.valor,0);return e+r},0),r=a.reduce((e,a)=>e+a.valor,0),s=0;a.forEach(a=>{let t=e.find(e=>e.id===a.animalId);if(t){let e=t.costs||[],r=e.filter(e=>"VENDA"!==e.tipo).reduce((e,a)=>e+a.valor,0),l=a.valor-r-(a.comissao||0)-(a.taxas||0);s+=l}});let l=0,i=0;a.forEach(a=>{let t=e.find(e=>e.id===a.animalId);if(t){let e=t.costs||[],r=e.filter(e=>"VENDA"!==e.tipo).reduce((e,a)=>e+a.valor,0);if(r>0){let e=a.valor-r-(a.comissao||0)-(a.taxas||0);l+=e/r*100,i+=1}}});let n=i>0?l/i:0,o=e.filter(e=>"ATIVO"===e.status).length,c=a.length,x=e.length>0?c/e.length*100:0;return{totalInvested:t,totalRevenue:r,totalProfit:s,avgROI:n,activeAnimals:o,soldAnimals:c,conversionRate:x}})(),c=[{id:"invested",title:"Total Investido",value:"R$ ".concat(o.totalInvested.toLocaleString("pt-BR",{minimumFractionDigits:2})),change:d.loading?"...":"Atual",trend:"stable",icon:"\uD83D\uDCB0",color:"from-red-500 to-pink-600",bgColor:"bg-red-50 dark:bg-red-900/20",description:"Investimento total em todos os animais",details:"".concat(d.animals.length," animais cadastrados")},{id:"revenue",title:"Receita Total",value:"R$ ".concat(o.totalRevenue.toLocaleString("pt-BR",{minimumFractionDigits:2})),change:d.loading?"...":o.soldAnimals>0?"Com vendas":"Sem vendas",trend:o.soldAnimals>0?"up":"stable",icon:"\uD83D\uDCC8",color:"from-green-500 to-emerald-600",bgColor:"bg-green-50 dark:bg-green-900/20",description:"Receita com vendas realizadas",details:"".concat(o.soldAnimals," animais vendidos")},{id:"profit",title:"Lucro L\xedquido",value:"R$ ".concat(o.totalProfit.toLocaleString("pt-BR",{minimumFractionDigits:2})),change:d.loading?"...":o.totalProfit>=0?"Positivo":"Negativo",trend:o.totalProfit>=0?"up":"down",icon:o.totalProfit>=0?"\uD83C\uDFAF":"\uD83D\uDCC9",color:o.totalProfit>=0?"from-blue-500 to-cyan-600":"from-red-500 to-orange-600",bgColor:o.totalProfit>=0?"bg-blue-50 dark:bg-blue-900/20":"bg-red-50 dark:bg-red-900/20",description:"Lucro l\xedquido das opera\xe7\xf5es",details:"Margem: ".concat(o.totalRevenue>0?(o.totalProfit/o.totalRevenue*100).toFixed(1):0,"%")},{id:"roi",title:"ROI M\xe9dio",value:"".concat(o.avgROI.toFixed(1),"%"),change:d.loading?"...":o.avgROI>0?"Positivo":"Neutro",trend:o.avgROI>0?"up":"stable",icon:"\uD83D\uDCCA",color:"from-purple-500 to-indigo-600",bgColor:"bg-purple-50 dark:bg-purple-900/20",description:"Retorno m\xe9dio sobre investimento",details:"Taxa de convers\xe3o: ".concat(o.conversionRate.toFixed(1),"%")},{id:"active",title:"Animais Ativos",value:o.activeAnimals.toString(),change:d.loading?"...":"Atual",trend:"stable",icon:"\uD83D\uDC04",color:"from-orange-500 to-yellow-600",bgColor:"bg-orange-50 dark:bg-orange-900/20",description:"Animais ativos no rebanho",details:"".concat(d.animals.length>0?(o.activeAnimals/d.animals.length*100).toFixed(1):0,"% do rebanho")},{id:"sold",title:"Animais Vendidos",value:o.soldAnimals.toString(),change:o.soldAnimals>0?"+1":"0",trend:o.soldAnimals>0?"up":"stable",icon:"\uD83D\uDCB0",color:"from-emerald-500 to-teal-600",bgColor:"bg-emerald-50 dark:bg-emerald-900/20",description:"Animais vendidos no per\xedodo",details:"Taxa de convers\xe3o: ".concat(o.conversionRate.toFixed(1),"%")},{id:"performance",title:"Performance",value:o.avgROI>15?"Excelente":o.avgROI>5?"Boa":"Regular",change:d.loading?"...":"Atual",trend:"stable",icon:o.avgROI>15?"\uD83C\uDFC6":o.avgROI>5?"⭐":"\uD83D\uDCC8",color:"from-teal-500 to-green-600",bgColor:"bg-teal-50 dark:bg-teal-900/20",description:"Avalia\xe7\xe3o geral do desempenho",details:"Meta: ROI > 20%"}];return(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map((e,a)=>(0,r.jsxs)("div",{onClick:()=>t(e.id),onMouseEnter:()=>i(e.id),onMouseLeave:()=>i(null),className:"\n            relative overflow-hidden rounded-2xl p-6 cursor-pointer transition-all duration-500 transform\n            ".concat(l===e.id?"scale-105 shadow-2xl":"hover:scale-102 shadow-lg","\n            bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700\n            hover:border-transparent\n          "),style:{animationDelay:"".concat(100*a,"ms")},children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br ".concat(e.color," opacity-5")}),(0,r.jsx)("div",{className:"\n            absolute inset-0 bg-gradient-to-br ".concat(e.color," opacity-0 transition-opacity duration-300\n            ").concat(l===e.id?"opacity-10":"","\n          ")}),(0,r.jsxs)("div",{className:"relative z-10",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("div",{className:"p-3 rounded-xl ".concat(e.bgColor),children:(0,r.jsx)("span",{className:"text-2xl",children:e.icon})}),(0,r.jsxs)("div",{className:"\n                px-3 py-1 rounded-full text-xs font-semibold flex items-center\n                ".concat("up"===e.trend?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200","\n              "),children:[(0,r.jsx)("span",{className:"mr-1",children:"up"===e.trend?"↗️":"↘️"}),e.change]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:e.title}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e.value}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.description}),(0,r.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:e.details})]}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-gradient-to-r ".concat(e.color," h-2 rounded-full transition-all duration-1000"),style:{width:"".concat(Math.min(100,5*Math.abs(parseFloat(e.change))),"%")}})})}),(0,r.jsx)("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,r.jsx)("div",{className:"w-6 h-6 rounded-full bg-white dark:bg-gray-800 shadow-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-xs",children:"\uD83D\uDCCA"})})})]}),(0,r.jsx)("div",{className:"\n            absolute inset-0 rounded-2xl border-2 border-transparent\n            ".concat(l===e.id?"bg-gradient-to-r ".concat(e.color," p-[2px]"):"","\n          "),children:l===e.id&&(0,r.jsx)("div",{className:"w-full h-full rounded-2xl bg-white dark:bg-gray-800"})})]},e.id))})}function AdvancedCharts(e){var a,t;let{timeRange:l}=e,[i,d]=(0,s.useState)("costs"),{custosPorTipo:n,animaisPorRaca:o,roiPorMes:c,custosTemporais:x}={custosPorTipo:{},animaisPorRaca:{},roiPorMes:{Jan:15.2,Fev:18.7,Mar:22.1,Abr:19.8,Mai:25.3,Jun:28.9,Jul:31.2,Ago:29.5,Set:33.1,Out:35.7,Nov:38.2,Dez:41.5},custosTemporais:{Jan:12500,Fev:15800,Mar:18200,Abr:16900,Mai:21300,Jun:24700,Jul:27100,Ago:25800,Set:29400,Out:32100,Nov:34600,Dez:37200}},m=[{id:"costs",label:"\uD83D\uDCB0 Custos por Tipo",data:n},{id:"breeds",label:"\uD83D\uDC04 Animais por Ra\xe7a",data:o},{id:"roi",label:"\uD83D\uDCC8 ROI Mensal",data:c},{id:"timeline",label:"\uD83D\uDCCA Custos Temporais",data:x}];return(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center",children:[(0,r.jsx)("span",{className:"mr-3 text-2xl",children:"\uD83D\uDCCA"}),"An\xe1lises Avan\xe7adas"]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Per\xedodo: ",l]})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:m.map(e=>(0,r.jsx)("button",{onClick:()=>d(e.id),className:"px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ".concat(i===e.id?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg transform scale-105":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"),children:e.label},e.id))}),(0,r.jsx)("div",{className:"min-h-96",children:"roi"===i||"timeline"===i?(e=>{let a=Object.entries(e),t=Math.max(...Object.values(e)),s=Math.min(...Object.values(e));return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"text-center p-4 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 rounded-lg",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"roi"===i?"".concat((Object.values(e).reduce((e,a)=>e+a,0)/a.length).toFixed(1),"%"):"Tend\xeancia"}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"roi"===i?"ROI M\xe9dio Anual":"Evolu\xe7\xe3o Temporal"})]}),(0,r.jsx)("div",{className:"relative h-64 bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 400 200",children:[[0,1,2,3,4].map(e=>(0,r.jsx)("line",{x1:"0",y1:40*e,x2:"400",y2:40*e,stroke:"currentColor",strokeWidth:"0.5",className:"text-gray-300 dark:text-gray-600"},e)),(0,r.jsx)("polyline",{fill:"none",stroke:"url(#gradient)",strokeWidth:"3",points:a.map((e,r)=>{let[,l]=e,i=r/(a.length-1)*400;return"".concat(i,",").concat(200-(l-s)/(t-s)*180)}).join(" ")}),a.map((e,l)=>{let[d,n]=e,o=l/(a.length-1)*400,c=200-(n-s)/(t-s)*180;return(0,r.jsxs)("g",{children:[(0,r.jsx)("circle",{cx:o,cy:c,r:"4",fill:"url(#gradient)",className:"hover:r-6 transition-all cursor-pointer"}),(0,r.jsx)("text",{x:o,y:c-10,textAnchor:"middle",className:"text-xs fill-current text-gray-600 dark:text-gray-400",children:"roi"===i?"".concat(n,"%"):"R$ ".concat((n/1e3).toFixed(0),"k")}),(0,r.jsx)("text",{x:o,y:190,textAnchor:"middle",className:"text-xs fill-current text-gray-500 dark:text-gray-500",children:d})]},l)}),(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,r.jsx)("stop",{offset:"0%",stopColor:"#3B82F6"}),(0,r.jsx)("stop",{offset:"50%",stopColor:"#8B5CF6"}),(0,r.jsx)("stop",{offset:"100%",stopColor:"#06B6D4"})]})})]})})]})})(null===(a=m.find(e=>e.id===i))||void 0===a?void 0:a.data):((e,a)=>{let t=Math.max(...Object.values(e)),s=Object.values(e).reduce((e,a)=>e+a,0),l={Nascimento:"from-green-400 to-green-600",DNA:"from-purple-400 to-purple-600",Alimentação:"from-orange-400 to-orange-600",Medicamentos:"from-red-400 to-red-600",Veterinários:"from-blue-400 to-blue-600",Aquisição:"from-indigo-400 to-indigo-600",Nelore:"from-blue-400 to-blue-600",Brahman:"from-red-400 to-red-600",Gir:"from-green-400 to-green-600",Receptora:"from-purple-400 to-purple-600"},i=Object.entries(e).sort((e,a)=>{let[,t]=e,[,r]=a;return r-t});return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"text-center p-4 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"costs"===a||"timeline"===a?"R$ ".concat(s.toLocaleString("pt-BR",{minimumFractionDigits:2})):s.toString()}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["costs"===a&&"Total de Custos","breeds"===a&&"Total de Animais","roi"===a&&"ROI M\xe9dio Anual","timeline"===a&&"Custos Acumulados"]})]}),(0,r.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:i.map((e,s)=>{let[i,d]=e,n=d/t*100,o=l[i]||"from-gray-400 to-gray-600";return(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-all duration-300",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("div",{className:"font-semibold text-gray-900 dark:text-white",children:i}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"font-bold text-gray-900 dark:text-white",children:"costs"===a||"timeline"===a?"R$ ".concat(d.toLocaleString("pt-BR",{minimumFractionDigits:2})):"roi"===a?"".concat(d,"%"):d.toString()}),(0,r.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["#",s+1]})]})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:(0,r.jsx)("div",{className:"bg-gradient-to-r ".concat(o," h-3 rounded-full transition-all duration-1000 ease-out relative overflow-hidden"),style:{width:"".concat(n,"%")},children:(0,r.jsx)("div",{className:"absolute inset-0 bg-white opacity-20 animate-pulse"})})}),(0,r.jsxs)("div",{className:"absolute -top-6 right-0 text-xs font-medium text-gray-600 dark:text-gray-400",children:[n.toFixed(1),"%"]})]})]},i)})})]})})(null===(t=m.find(e=>e.id===i))||void 0===t?void 0:t.data,i)}),(0,r.jsxs)("div",{className:"mt-6 p-4 bg-gradient-to-r from-gray-50 to-blue-50 dark:from-gray-800 dark:to-blue-900/20 rounded-lg",children:[(0,r.jsxs)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2 flex items-center",children:[(0,r.jsx)("span",{className:"mr-2",children:"\uD83D\uDCA1"}),"Insights Inteligentes"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:["costs"===i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:"\uD83D\uDCC8 Alimenta\xe7\xe3o representa o maior custo operacional"}),(0,r.jsx)("div",{children:"\uD83C\uDFAF Foque na otimiza\xe7\xe3o dos 3 maiores custos"})]}),"breeds"===i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:"\uD83D\uDC04 Nelore \xe9 a ra\xe7a predominante no rebanho"}),(0,r.jsx)("div",{children:"\uD83D\uDCCA Diversifica\xe7\xe3o racial est\xe1 equilibrada"})]}),"roi"===i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:"\uD83D\uDCC8 ROI mostra tend\xeancia crescente no ano"}),(0,r.jsx)("div",{children:"\uD83C\uDFAF Meta de 20% de ROI est\xe1 sendo atingida"})]}),"timeline"===i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:"\uD83D\uDCCA Custos crescem consistentemente"}),(0,r.jsx)("div",{children:"⚡ Pico de custos no final do ano"})]})]})]})]})}function ReportsModal(e){let{reportType:a,onClose:t,timeRange:l}=e,[i,d]=(0,s.useState)("overview"),[n,o]=(0,s.useState)("excel"),[c,x]=(0,s.useState)([]),[m,g]=(0,s.useState)([]),[h,u]=(0,s.useState)(!0);(0,s.useEffect)(()=>{loadRealData()},[a,l]);let loadRealData=async()=>{try{u(!0);let e=await fetch("/api/sales-list"),a=await e.json(),t=await fetch("/api/animals-list"),r=await t.json();console.log("\uD83D\uDCCA Vendas carregadas:",a.length),console.log("\uD83D\uDC04 Animais carregados:",r.length),x(a),g(r)}catch(e){console.error("Erro ao carregar dados:",e)}finally{u(!1)}},b=(()=>{if(h)return{title:"⏳ Carregando...",description:"Buscando dados reais do sistema",data:[],summary:{}};switch(a){case"invested":let e=m.filter(e=>"ATIVO"===e.status),t=e.map(e=>({animal:"".concat(e.serie||""," ").concat(e.rg||e.brinco),raca:e.raca,situacao:e.situacao||e.status,investimento:e.custoTotal||0,idade:e.meses||0,custoMensal:e.meses>0?(e.custoTotal||0)/e.meses:0})).sort((e,a)=>a.investimento-e.investimento),r=t.reduce((e,a)=>e+a.investimento,0);return{title:"\uD83D\uDCB0 Relat\xf3rio de Investimentos",description:"An\xe1lise detalhada dos investimentos realizados",data:t,summary:{total:r,average:t.length>0?r/t.length:0,highest:t.length>0?Math.max(...t.map(e=>e.investimento)):0,lowest:t.length>0?Math.min(...t.map(e=>e.investimento)):0}};case"revenue":let s=c.map(e=>{var a,t,r,s,l,i,d,n,o;return{animal:"".concat((null===(a=e.animal)||void 0===a?void 0:a.serie)||""," ").concat((null===(t=e.animal)||void 0===t?void 0:t.rg)||(null===(r=e.animal)||void 0===r?void 0:r.brinco)||e.animalId),raca:(null===(s=e.animal)||void 0===s?void 0:s.raca)||"N\xe3o informado",investimento:(null===(l=e.animal)||void 0===l?void 0:l.custoTotal)||0,receita:parseFloat(e.valorVenda)||0,lucro:(parseFloat(e.valorVenda)||0)-((null===(i=e.animal)||void 0===i?void 0:i.custoTotal)||0),roi:(null===(d=e.animal)||void 0===d?void 0:d.custoTotal)>0?((parseFloat(e.valorVenda)||0)-((null===(n=e.animal)||void 0===n?void 0:n.custoTotal)||0))/((null===(o=e.animal)||void 0===o?void 0:o.custoTotal)||0)*100:0}}).sort((e,a)=>a.receita-e.receita),l=s.reduce((e,a)=>e+a.receita,0);return{title:"\uD83D\uDCC8 Relat\xf3rio de Receitas",description:"An\xe1lise das receitas obtidas com vendas",data:s,summary:{total:l,average:s.length>0?l/s.length:0,highest:s.length>0?Math.max(...s.map(e=>e.receita)):0,count:s.length}};case"profit":let i=c.map(e=>{var a,t,r,s,l;let i=parseFloat(e.valorVenda)||0,d=(null===(a=e.animal)||void 0===a?void 0:a.custoTotal)||0,n=i-d;return{animal:"".concat((null===(t=e.animal)||void 0===t?void 0:t.serie)||""," ").concat((null===(r=e.animal)||void 0===r?void 0:r.rg)||(null===(s=e.animal)||void 0===s?void 0:s.brinco)||e.animalId),raca:(null===(l=e.animal)||void 0===l?void 0:l.raca)||"N\xe3o informado",investimento:d,receita:i,lucro:n,roi:d>0?n/d*100:0,margem:i>0?n/i*100:0}}).sort((e,a)=>a.lucro-e.lucro),d=i.reduce((e,a)=>e+a.lucro,0);return{title:"\uD83C\uDFAF Relat\xf3rio de Lucros",description:"An\xe1lise da lucratividade das opera\xe7\xf5es",data:i,summary:{total:d,positive:i.filter(e=>e.lucro>0).length,negative:i.filter(e=>e.lucro<0).length,averageMargin:i.length>0?i.reduce((e,a)=>e+a.margem,0)/i.length:0}};case"roi":let n=c.filter(e=>{var a;return(null===(a=e.animal)||void 0===a?void 0:a.custoTotal)>0}).map(e=>{var a,t,r,s,l,i,d,n;let o=parseFloat(e.valorVenda)||0,c=(null===(a=e.animal)||void 0===a?void 0:a.custoTotal)||0,x=c>0?(o-c)/c*100:0;return{animal:"".concat((null===(t=e.animal)||void 0===t?void 0:t.serie)||""," ").concat((null===(r=e.animal)||void 0===r?void 0:r.rg)||(null===(s=e.animal)||void 0===s?void 0:s.brinco)||e.animalId),raca:(null===(l=e.animal)||void 0===l?void 0:l.raca)||"N\xe3o informado",investimento:c,receita:o,roi:x,periodo:(null===(i=e.animal)||void 0===i?void 0:i.meses)||0,roiMensal:((null===(d=e.animal)||void 0===d?void 0:d.meses)||0)>0?x/((null===(n=e.animal)||void 0===n?void 0:n.meses)||1):0}}).sort((e,a)=>a.roi-e.roi);return{title:"\uD83D\uDCCA Relat\xf3rio de ROI",description:"An\xe1lise do retorno sobre investimento",data:n,summary:{average:n.length>0?n.reduce((e,a)=>e+a.roi,0)/n.length:0,best:n.length>0?Math.max(...n.map(e=>e.roi)):0,worst:n.length>0?Math.min(...n.map(e=>e.roi)):0,above20:n.filter(e=>e.roi>20).length}};default:return{title:"\uD83D\uDCCB Relat\xf3rio Geral",description:"Vis\xe3o geral dos dados",data:[],summary:{}}}})();return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:b.title}),(0,r.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:[b.description," • Per\xedodo: ",l]})]}),(0,r.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-3xl font-bold transition-colors",children:"\xd7"})]}),(0,r.jsx)("div",{className:"flex border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[{id:"overview",label:"\uD83D\uDCCA Vis\xe3o Geral",icon:"\uD83D\uDCCA"},{id:"details",label:"\uD83D\uDCCB Detalhes",icon:"\uD83D\uDCCB"},{id:"charts",label:"\uD83D\uDCC8 Gr\xe1ficos",icon:"\uD83D\uDCC8"},{id:"export",label:"\uD83D\uDCE4 Exportar",icon:"\uD83D\uDCE4"}].map(e=>(0,r.jsxs)("button",{onClick:()=>d(e.id),className:"flex-1 px-6 py-4 text-sm font-medium transition-all duration-300 ".concat(i===e.id?"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 border-b-2 border-blue-500":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:[(0,r.jsx)("span",{className:"mr-2",children:e.icon}),e.label]},e.id))}),(0,r.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:["overview"===i&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(b.summary).map(e=>{let[a,t]=e;return(0,r.jsxs)("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg",children:[(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 capitalize",children:a.replace(/([A-Z])/g," $1").trim()}),(0,r.jsx)("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"number"==typeof t?a.includes("roi")||a.includes("margin")||a.includes("average")&&t<100?"".concat(t.toFixed(1),"%"):"R$ ".concat(t.toLocaleString("pt-BR",{minimumFractionDigits:2})):t})]},a)})}),(0,r.jsxs)("div",{className:"p-6 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 rounded-lg",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,r.jsx)("span",{className:"mr-2",children:"\uD83D\uDCA1"}),"Insights Principais"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["invested"===a&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("span",{className:"text-green-500",children:"✅"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:"Diversifica\xe7\xe3o Adequada"}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Investimentos distribu\xeddos entre diferentes ra\xe7as"})]})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("span",{className:"text-yellow-500",children:"⚠️"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:"Monitorar Custos Altos"}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Alguns animais com investimento acima da m\xe9dia"})]})]})]}),"revenue"===a&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("span",{className:"text-green-500",children:"\uD83D\uDCC8"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:"Receita Crescente"}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tend\xeancia positiva nas vendas realizadas"})]})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("span",{className:"text-blue-500",children:"\uD83C\uDFAF"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:"Oportunidade de Melhoria"}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Potencial para aumentar pre\xe7os de venda"})]})]})]})]})]})]}),"details"===i&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white",children:"Animal"}),(0,r.jsx)("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white",children:"Ra\xe7a"}),b.data[0]&&Object.keys(b.data[0]).slice(2).map(e=>(0,r.jsx)("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white capitalize",children:e.replace(/([A-Z])/g," $1").trim()},e))]})}),(0,r.jsx)("tbody",{children:b.data.slice(0,10).map((e,a)=>(0,r.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,r.jsx)("td",{className:"p-3 font-medium text-gray-900 dark:text-white",children:e.animal}),(0,r.jsx)("td",{className:"p-3 text-gray-600 dark:text-gray-400",children:e.raca}),Object.entries(e).slice(2).map(e=>{let[a,t]=e;return(0,r.jsx)("td",{className:"p-3 text-gray-600 dark:text-gray-400",children:"number"==typeof t?a.includes("roi")||a.includes("margem")?"".concat(t.toFixed(1),"%"):"R$ ".concat(t.toLocaleString("pt-BR",{minimumFractionDigits:2})):t},a)})]},a))})]})}),b.data.length>10&&(0,r.jsxs)("div",{className:"text-center p-4 text-gray-500 dark:text-gray-400",children:["Mostrando 10 de ",b.data.length," registros"]})]}),"charts"===i&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center p-8 text-gray-500 dark:text-gray-400",children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCCA"}),(0,r.jsx)("div",{className:"text-lg font-medium mb-2",children:"Gr\xe1ficos Interativos"}),(0,r.jsx)("div",{className:"text-sm",children:"Visualiza\xe7\xf5es avan\xe7adas dos dados do relat\xf3rio"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsx)("div",{className:"h-64 bg-gradient-to-br from-blue-100 to-purple-100 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDCC8"}),(0,r.jsx)("div",{className:"font-medium",children:"Gr\xe1fico de Tend\xeancia"})]})}),(0,r.jsx)("div",{className:"h-64 bg-gradient-to-br from-green-100 to-blue-100 dark:from-green-900/20 dark:to-blue-900/20 rounded-lg flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:"\uD83E\uDD67"}),(0,r.jsx)("div",{className:"font-medium",children:"Distribui\xe7\xe3o"})]})})]})]}),"export"===i&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCE4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Exportar Relat\xf3rio"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Escolha o formato desejado para exporta\xe7\xe3o"})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{id:"excel",label:"Excel",icon:"\uD83D\uDCCA",desc:"Planilha completa com dados"},{id:"pdf",label:"PDF",icon:"\uD83D\uDCC4",desc:"Relat\xf3rio formatado para impress\xe3o"},{id:"csv",label:"CSV",icon:"\uD83D\uDCCB",desc:"Dados em formato texto"}].map(e=>(0,r.jsxs)("button",{onClick:()=>o(e.id),className:"p-6 rounded-lg border-2 transition-all duration-300 ".concat(n===e.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"),children:[(0,r.jsx)("div",{className:"text-3xl mb-3",children:e.icon}),(0,r.jsx)("div",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:e.label}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.desc})]},e.id))}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("button",{onClick:()=>{alert("Exportando relat\xf3rio em formato ".concat({excel:"Excel (.xlsx)",pdf:"PDF (.pdf)",csv:"CSV (.csv)"}[n],"...")),setTimeout(()=>{alert("✅ Relat\xf3rio exportado com sucesso!")},2e3)},className:"px-8 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-semibold hover:shadow-lg transition-all duration-300 transform hover:scale-105",children:"Exportar Relat\xf3rio"})})]})]})]})})}function QuickActions(e){let{onROICalculatorOpen:a}=e,t=(0,l.useRouter)(),[i,d]=(0,s.useState)(!1),[n,o]=(0,s.useState)(""),showNotificationMessage=e=>{o(e),d(!0),setTimeout(()=>d(!1),3e3)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center",children:[(0,r.jsx)("span",{className:"mr-3 text-2xl",children:"⚡"}),"A\xe7\xf5es R\xe1pidas"]}),(0,r.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Clique para executar"})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{id:"manage-animals",title:"Gest\xe3o de Animais",description:"Editar e gerenciar animais",icon:"\uD83D\uDC04",color:"from-green-500 to-emerald-600",action:()=>{t.push("/animals"),showNotificationMessage("Abrindo gest\xe3o de animais...")}},{id:"add-animal",title:"Novo Animal",description:"Cadastrar novo animal",icon:"➕",color:"from-blue-500 to-cyan-600",action:()=>{t.push("/animals"),showNotificationMessage("Redirecionando para cadastro...")}},{id:"add-cost",title:"Adicionar Custo",description:"Registrar novo custo",icon:"\uD83D\uDCB0",color:"from-blue-500 to-cyan-600",action:()=>{t.push("/animals"),showNotificationMessage("Abrindo gerenciador de custos...")}},{id:"pregnancy",title:"Gesta\xe7\xe3o",description:"Gerenciar gesta\xe7\xf5es",icon:"\uD83D\uDC04",color:"from-pink-500 to-rose-600",action:()=>{t.push("/gestacao"),showNotificationMessage("Abrindo controle de gesta\xe7\xf5es...")}},{id:"reports",title:"Relat\xf3rios",description:"Ver relat\xf3rios detalhados",icon:"\uD83D\uDCCA",color:"from-purple-500 to-indigo-600",action:()=>{t.push("/reports"),showNotificationMessage("Carregando relat\xf3rios...")}},{id:"export",title:"Exportar Dados",description:"Exportar para Excel/PDF",icon:"\uD83D\uDCE4",color:"from-orange-500 to-yellow-600",action:()=>{showNotificationMessage("Preparando exporta\xe7\xe3o..."),setTimeout(()=>{showNotificationMessage("✅ Dados exportados com sucesso!")},2e3)}},{id:"calculator",title:"Calculadora ROI",description:"Calcular retorno",icon:"\uD83E\uDDEE",color:"from-teal-500 to-green-600",action:()=>{a&&a(),showNotificationMessage("Abrindo calculadora de ROI...")}},{id:"analytics",title:"Analytics",description:"An\xe1lises avan\xe7adas",icon:"\uD83D\uDCC8",color:"from-red-500 to-pink-600",action:()=>{showNotificationMessage("Carregando analytics...")}},{id:"backup",title:"Backup",description:"Fazer backup dos dados",icon:"\uD83D\uDCBE",color:"from-gray-500 to-slate-600",action:()=>{showNotificationMessage("Iniciando backup..."),setTimeout(()=>{showNotificationMessage("✅ Backup realizado com sucesso!")},3e3)}}].map((e,a)=>(0,r.jsxs)("button",{onClick:e.action,className:"\n                group relative overflow-hidden rounded-xl p-4 text-left transition-all duration-300\n                hover:scale-105 hover:shadow-xl transform\n                bg-gradient-to-br ".concat(e.color," text-white\n              "),style:{animationDelay:"".concat(50*a,"ms")},children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity"}),(0,r.jsxs)("div",{className:"relative z-10",children:[(0,r.jsx)("div",{className:"text-3xl mb-3",children:e.icon}),(0,r.jsx)("h3",{className:"font-semibold text-white mb-1",children:e.title}),(0,r.jsx)("p",{className:"text-xs text-white/80",children:e.description})]}),(0,r.jsx)("div",{className:"absolute inset-0 bg-white opacity-0 group-hover:opacity-10 transition-opacity"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-white opacity-0 group-active:opacity-20 transition-opacity duration-150"})]},e.id))}),(0,r.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"127"}),(0,r.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"A\xe7\xf5es hoje"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"89%"}),(0,r.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Efici\xeancia"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"2.3s"}),(0,r.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Tempo m\xe9dio"})]})]})})]}),i&&(0,r.jsx)("div",{className:"fixed top-4 right-4 z-50 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg transition-all duration-300 transform animate-bounce",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"mr-3 text-lg",children:"✅"}),(0,r.jsx)("div",{className:"font-medium",children:n})]})})]})}function LiveStats(e){var a;let{data:t}=e,[l,i]=(0,s.useState)({totalAnimals:0,activeAnimals:0,totalInvested:0,totalRevenue:0});(0,s.useEffect)(()=>{let animateValue=(e,a,t,r)=>{let s=Date.now(),animate=()=>{let l=Date.now()-s,d=Math.min(l/t,1),n=e+(a-e)*d;i(e=>({...e,[r]:Math.floor(n)})),d<1&&requestAnimationFrame(animate)};animate()};animateValue(l.totalAnimals,t.totalAnimals,1e3,"totalAnimals"),animateValue(l.activeAnimals,t.activeAnimals,1e3,"activeAnimals"),animateValue(l.totalInvested,t.totalInvested,1500,"totalInvested"),animateValue(l.totalRevenue,t.totalRevenue,1500,"totalRevenue")},[t]);let d=[{label:"Animais Totais",value:l.totalAnimals,icon:"\uD83D\uDC04",color:"text-blue-600",bgColor:"bg-blue-100 dark:bg-blue-900/30"},{label:"Ativos",value:l.activeAnimals,icon:"✅",color:"text-green-600",bgColor:"bg-green-100 dark:bg-green-900/30"},{label:"Investido",value:"R$ ".concat((l.totalInvested/1e3).toFixed(0),"k"),icon:"\uD83D\uDCB0",color:"text-red-600",bgColor:"bg-red-100 dark:bg-red-900/30"},{label:"Receita",value:"R$ ".concat((l.totalRevenue/1e3).toFixed(0),"k"),icon:"\uD83D\uDCC8",color:"text-purple-600",bgColor:"bg-purple-100 dark:bg-purple-900/30"},{label:"ROI M\xe9dio",value:"".concat((null===(a=t.avgROI)||void 0===a?void 0:a.toFixed(1))||0,"%"),icon:"\uD83D\uDCCA",color:"text-orange-600",bgColor:"bg-orange-100 dark:bg-orange-900/30"}];return(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center",children:[(0,r.jsx)("span",{className:"mr-3 text-2xl",children:"⚡"}),"Stats em Tempo Real"]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,r.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Ao vivo"})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:d.map((e,a)=>(0,r.jsx)("div",{className:"\n              p-4 rounded-xl transition-all duration-300 hover:scale-105 cursor-pointer\n              ".concat(e.bgColor," border border-gray-200 dark:border-gray-600\n            "),style:{animationDelay:"".concat(100*a,"ms")},children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:e.icon}),(0,r.jsx)("div",{className:"text-2xl font-bold ".concat(e.color," mb-1"),children:e.value}),(0,r.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.label})]})},e.label))}),t.topPerformer&&(0,r.jsx)("div",{className:"mt-6 p-4 bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 rounded-xl border border-yellow-200 dark:border-yellow-800",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center",children:"\uD83C\uDFC6 Top Performer"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.topPerformer.serie," ",t.topPerformer.rg]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:[((t.topPerformer.valorVenda-t.topPerformer.custoTotal)/t.topPerformer.custoTotal*100).toFixed(1),"%"]}),(0,r.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ROI"})]})]})})]})}function AnimalPerformance(){let[e,a]=(0,s.useState)("roi"),[t,l]=(0,s.useState)("all"),i=[],d=[{id:"all",label:"Todos",count:i.length},{id:"excellent",label:"Excelentes",count:i.filter(e=>"Excelente"===e.performance).length},{id:"good",label:"Bons",count:i.filter(e=>"Boa"===e.performance).length},{id:"regular",label:"Regulares",count:i.filter(e=>"Regular"===e.performance).length},{id:"poor",label:"Ruins",count:i.filter(e=>"Ruim"===e.performance).length}],n="all"===t?i:i.filter(e=>{switch(t){case"excellent":return"Excelente"===e.performance;case"good":return"Boa"===e.performance;case"regular":return"Regular"===e.performance;case"poor":return"Ruim"===e.performance;default:return!0}});return[...n].sort((a,t)=>{switch(e){case"roi":return t.roi-a.roi;case"profit":return t.profit-a.profit;case"cost":return t.custoTotal-a.custoTotal;case"age":return t.meses-a.meses;default:return 0}}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center",children:[(0,r.jsx)("span",{className:"mr-3 text-2xl",children:"\uD83C\uDFC6"}),"Performance dos Animais"]}),(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsxs)("select",{value:e,onChange:e=>a(e.target.value),className:"text-sm border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,r.jsx)("option",{value:"roi",children:"ROI"}),(0,r.jsx)("option",{value:"profit",children:"Lucro"}),(0,r.jsx)("option",{value:"cost",children:"Custo"}),(0,r.jsx)("option",{value:"age",children:"Idade"})]})})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:d.map(e=>(0,r.jsxs)("button",{onClick:()=>l(e.id),className:"px-3 py-1 rounded-full text-xs font-medium transition-all duration-300 ".concat(t===e.id?"bg-blue-500 text-white shadow-lg":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"),children:[e.label," (",e.count,")"]},e.id))}),(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[(0,r.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDC04"}),(0,r.jsx)("div",{className:"text-sm",children:"Nenhum animal cadastrado"}),(0,r.jsx)("div",{className:"text-xs mt-1",children:"Dados reais ser\xe3o carregados da API"})]}),(0,r.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:"0"}),(0,r.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Excelentes"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:"0"}),(0,r.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Lucrativos"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:"0"}),(0,r.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Alto Risco"})]})]})})]})}function SmartAlerts(){let[e,a]=(0,s.useState)([]),[t,l]=(0,s.useState)(!1);(0,s.useEffect)(()=>{generateSmartAlerts()},[]);let generateSmartAlerts=()=>{let e=[],t={high:3,medium:2,low:1};e.sort((e,a)=>t[a.priority]-t[e.priority]),a(e.slice(0,10))},dismissAlert=e=>{a(a=>a.filter(a=>a.id!==e))},getPriorityColor=e=>{switch(e){case"high":return"border-red-500 bg-red-50 dark:bg-red-900/20";case"medium":return"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20";case"low":return"border-green-500 bg-green-50 dark:bg-green-900/20";default:return"border-gray-500 bg-gray-50 dark:bg-gray-900/20"}};return(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center",children:[(0,r.jsx)("span",{className:"mr-3 text-2xl",children:"\uD83D\uDEA8"}),"Alertas Inteligentes"]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.length," alertas"]}),(0,r.jsx)("button",{onClick:()=>l(!t),className:"text-blue-600 dark:text-blue-400 hover:underline text-sm",children:t?"Ocultar":"Mostrar todos"})]})]}),0===e.length?(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[(0,r.jsx)("div",{className:"text-4xl mb-2",children:"✅"}),(0,r.jsx)("div",{className:"text-sm",children:"Nenhum alerta no momento"}),(0,r.jsx)("div",{className:"text-xs mt-1",children:"Tudo funcionando perfeitamente!"})]}):(0,r.jsxs)("div",{className:"space-y-3",children:[(t?e:e.slice(0,3)).map(e=>(0,r.jsx)("div",{className:"p-4 rounded-lg border-l-4 ".concat(getPriorityColor(e.priority)," transition-all duration-300 hover:shadow-md"),children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[(0,r.jsx)("div",{className:"p-2 rounded-full ".concat(e.color," text-white flex-shrink-0"),children:(0,r.jsx)("span",{className:"text-sm",children:e.icon})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:e.title}),(0,r.jsx)("span",{className:"px-2 py-1 text-xs rounded-full font-medium ".concat("high"===e.priority?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"medium"===e.priority?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"),children:"high"===e.priority?"Alta":"medium"===e.priority?"M\xe9dia":"Baixa"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.message}),e.action&&(0,r.jsxs)("div",{className:"mt-2 flex items-center space-x-2",children:[(0,r.jsx)("button",{className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:e.action}),e.animal&&(0,r.jsx)("button",{className:"text-xs text-gray-500 dark:text-gray-400 hover:underline",children:"Ver animal"})]})]})]}),(0,r.jsx)("button",{onClick:()=>dismissAlert(e.id),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 ml-2",children:"\xd7"})]})},e.id)),!t&&e.length>3&&(0,r.jsxs)("button",{onClick:()=>l(!0),className:"w-full p-3 text-center text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:["Ver mais ",e.length-3," alertas"]})]}),(0,r.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:e.filter(e=>"high"===e.priority).length}),(0,r.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Alta Prioridade"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-lg font-bold text-yellow-600 dark:text-yellow-400",children:e.filter(e=>"medium"===e.priority).length}),(0,r.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"M\xe9dia Prioridade"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:e.filter(e=>"low"===e.priority).length}),(0,r.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Baixa Prioridade"})]})]})})]})}function ROICalculator(e){let{isOpen:a,onClose:t}=e,[l,i]=(0,s.useState)(""),[d,n]=(0,s.useState)(""),[o,c]=(0,s.useState)(""),[x,m]=(0,s.useState)(null),calculateROI=()=>{let e=parseFloat(l)||0,a=parseFloat(d)||0,t=parseFloat(o)||1;if(e>0){let r=a-e,s=r/e*100,l=s/t,i=e/(a/t);m({profit:r,roi:s,monthlyROI:l,breakEven:i>0?i:0,profitMargin:a>0?r/a*100:0})}};return((0,s.useEffect)(()=>{calculateROI()},[l,d,o]),a)?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center",children:"\uD83E\uDDEE Calculadora ROI"}),(0,r.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uD83D\uDCB0 Investimento Total (R$)"}),(0,r.jsx)("input",{type:"number",value:l,onChange:e=>i(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Ex: 3500.00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uD83D\uDCC8 Receita Esperada (R$)"}),(0,r.jsx)("input",{type:"number",value:d,onChange:e=>n(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Ex: 4500.00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uD83D\uDCC5 Per\xedodo (meses)"}),(0,r.jsx)("input",{type:"number",value:o,onChange:e=>c(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Ex: 18"})]})]}),x&&(0,r.jsxs)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCCA Resultados"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"text-center p-3 bg-white dark:bg-gray-800 rounded-lg",children:[(0,r.jsxs)("div",{className:"text-lg font-bold ".concat(x.profit>=0?"text-green-600":"text-red-600"),children:["R$ ",x.profit.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Lucro"})]}),(0,r.jsxs)("div",{className:"text-center p-3 bg-white dark:bg-gray-800 rounded-lg",children:[(0,r.jsxs)("div",{className:"text-lg font-bold ".concat(x.roi>=0?"text-blue-600":"text-red-600"),children:[x.roi.toFixed(1),"%"]}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"ROI Total"})]}),(0,r.jsxs)("div",{className:"text-center p-3 bg-white dark:bg-gray-800 rounded-lg",children:[(0,r.jsxs)("div",{className:"text-lg font-bold text-purple-600",children:[x.monthlyROI.toFixed(1),"%"]}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"ROI Mensal"})]}),(0,r.jsxs)("div",{className:"text-center p-3 bg-white dark:bg-gray-800 rounded-lg",children:[(0,r.jsxs)("div",{className:"text-lg font-bold text-orange-600",children:[x.profitMargin.toFixed(1),"%"]}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Margem"})]})]}),x.breakEven>0&&(0,r.jsx)("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:(0,r.jsxs)("div",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:["⏱️ Ponto de equil\xedbrio: ",x.breakEven.toFixed(1)," meses"]})})]})]})}):null}var d=t(8974);function MarketDashboard(){var e;let[a,t]=(0,s.useState)(null),[l,i]=(0,s.useState)([]),[n,o]=(0,s.useState)(null),[c,x]=(0,s.useState)(null),[m,g]=(0,s.useState)(!0),[h,u]=(0,s.useState)("prices"),[b,p]=(0,s.useState)("SP");(0,s.useEffect)(()=>{loadMarketData();let e=setInterval(loadMarketData,6e4);return()=>clearInterval(e)},[]);let loadMarketData=async()=>{try{g(!0);let[e,a,r,s]=await Promise.all([d.I.getCattlePrices(),d.I.getMarketNews(),d.I.getMarketAnalysis(),d.I.getPriceForecast()]);t(e),i(a),o(r),x(s)}catch(e){console.error("Erro ao carregar dados do mercado:",e)}finally{g(!1)}},getTrendIcon=e=>{switch(e){case"up":return"\uD83D\uDCC8";case"down":return"\uD83D\uDCC9";default:return"➡️"}},getTrendColor=e=>e>0?"text-green-600 dark:text-green-400":e<0?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400",formatCurrency=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2}).format(e),formatPercent=e=>"".concat(e>=0?"+":"").concat(e.toFixed(2),"%"),v=[{id:"prices",label:"\uD83D\uDCB0 Pre\xe7os",component:()=>(0,r.jsxs)("div",{className:"space-y-6",children:[a&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83E\uDD69 Animais Terminados (Para Abate)"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(a.prices).filter(e=>{let[a,t]=e;return"Terminados"===t.category}).map(e=>{let[a,t]=e;return(0,r.jsxs)("div",{className:"p-4 bg-gradient-to-br from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20 rounded-xl border border-red-200 dark:border-red-800 hover:shadow-lg transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:t.icon}),(0,r.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"boi_gordo"===a?"Boi Gordo":"vaca_gorda"===a?"Vaca Gorda":a})]}),(0,r.jsx)("span",{className:"text-xl",children:getTrendIcon(t.trend)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["R$ ",t.price.toFixed(0)]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.unit," • ",t.market]}),(0,r.jsxs)("div",{className:"text-sm font-medium flex items-center ".concat(getTrendColor(t.change)),children:[(0,r.jsx)("span",{className:"mr-1",children:t.change>=0?"↗️":"↘️"}),formatPercent(t.changePercent)," (",t.change>=0?"+":"","R$ ",t.change.toFixed(2),")"]}),(0,r.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.description})]})]},a)})})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83C\uDF31 Animais de Recria (Crescimento)"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(a.prices).filter(e=>{let[a,t]=e;return"Recria"===t.category}).map(e=>{let[a,t]=e;return(0,r.jsxs)("div",{className:"p-4 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl border border-green-200 dark:border-green-800 hover:shadow-lg transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:t.icon}),(0,r.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"garrote"===a?"Garrote":"novilho"===a?"Novilho":"novilha"===a?"Novilha":a})]}),(0,r.jsx)("span",{className:"text-xl",children:getTrendIcon(t.trend)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.unit.includes("arroba")?"R$ ".concat(t.price.toFixed(0)):formatCurrency(t.price)}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.unit," • ",t.market]}),(0,r.jsxs)("div",{className:"text-sm font-medium flex items-center ".concat(getTrendColor(t.change)),children:[(0,r.jsx)("span",{className:"mr-1",children:t.change>=0?"↗️":"↘️"}),formatPercent(t.changePercent)," (",t.change>=0?"+":"","R$ ",t.change.toFixed(2),")"]}),(0,r.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.description})]})]},a)})})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83C\uDF7C Animais de Cria (At\xe9 12 meses)"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(a.prices).filter(e=>{let[a,t]=e;return"Cria"===t.category}).map(e=>{let[a,t]=e;return(0,r.jsxs)("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl border border-blue-200 dark:border-blue-800 hover:shadow-lg transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:t.icon}),(0,r.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"bezerro_macho"===a?"Bezerro Macho":"bezerra"===a?"Bezerra":a})]}),(0,r.jsx)("span",{className:"text-xl",children:getTrendIcon(t.trend)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:formatCurrency(t.price)}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.unit," • ",t.market]}),(0,r.jsxs)("div",{className:"text-sm font-medium flex items-center ".concat(getTrendColor(t.change)),children:[(0,r.jsx)("span",{className:"mr-1",children:t.change>=0?"↗️":"↘️"}),formatPercent(t.changePercent)," (",t.change>=0?"+":"","R$ ",t.change.toFixed(2),")"]}),(0,r.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.description})]})]},a)})})]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83D\uDCCA \xcdndices Econ\xf4micos"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:a&&Object.entries(a.indices).map(e=>{let[a,t]=e;return(0,r.jsx)("div",{className:"p-4 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl border border-purple-200 dark:border-purple-800 hover:shadow-lg transition-all",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl mb-2",children:t.icon}),(0,r.jsx)("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"dolar"===a?"D\xf3lar USD":"milho"===a?"Milho":"soja"===a?"Soja":"farelo_soja"===a?"Farelo Soja":"boi_futuro"===a?"Boi Futuro":a}),(0,r.jsx)("div",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1",children:"dolar"===a?"USD ".concat(t.value.toFixed(2)):"R$ ".concat(t.value.toFixed(0))}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:[t.unit," • ",t.source]}),(0,r.jsxs)("div",{className:"text-sm font-medium flex items-center justify-center ".concat(getTrendColor(t.change)),children:[(0,r.jsx)("span",{className:"mr-1",children:t.change>=0?"↗️":"↘️"}),formatPercent(t.changePercent)]})]})},a)})})]}),a&&a.marketStatus&&(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83D\uDD50 Status do Mercado"}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full ".concat("open"===a.marketStatus.session.status?"bg-green-500 animate-pulse":"closing"===a.marketStatus.session.status?"bg-yellow-500 animate-pulse":"bg-red-500")}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-semibold text-gray-900 dark:text-white",children:a.marketStatus.session.label}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Qualidade dos dados: ",a.marketStatus.dataQuality]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["\xdaltima atualiza\xe7\xe3o: ",a.marketStatus.lastUpdate.toLocaleTimeString("pt-BR")]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Pr\xf3xima: ",a.marketStatus.nextUpdate.toLocaleTimeString("pt-BR")]})]})]})]})]})},{id:"news",label:"\uD83D\uDCF0 Not\xedcias",component:()=>(0,r.jsx)("div",{className:"space-y-4",children:l.map(e=>(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-all",children:(0,r.jsx)("div",{className:"flex items-start justify-between",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,r.jsx)("span",{className:"px-2 py-1 text-xs rounded-full font-medium ".concat("positive"===e.impact?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"negative"===e.impact?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"),children:"positive"===e.impact?"\uD83D\uDCC8 Positivo":"negative"===e.impact?"\uD83D\uDCC9 Negativo":"➡️ Neutro"}),(0,r.jsx)("span",{className:"px-2 py-1 text-xs rounded-full font-medium ".concat("high"===e.relevance?"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200":"medium"===e.relevance?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"),children:"high"===e.relevance?"\uD83D\uDD25 Alta":"medium"===e.relevance?"⚡ M\xe9dia":"\uD83D\uDCCA Baixa"})]}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e.title}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:e.summary}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400",children:[(0,r.jsx)("span",{children:e.source}),(0,r.jsx)("span",{children:new Date(e.publishedAt).toLocaleString("pt-BR")})]})]})})},e.id))})},{id:"analysis",label:"\uD83D\uDCCA An\xe1lise",component:()=>(0,r.jsx)("div",{className:"space-y-6",children:n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83C\uDFAF Sentimento do Mercado"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Score"}),(0,r.jsxs)("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[n.marketSentiment.score,"/100"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:(0,r.jsx)("div",{className:"h-3 rounded-full transition-all duration-1000 ".concat(n.marketSentiment.score>=70?"bg-green-500":n.marketSentiment.score>=40?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(n.marketSentiment.score,"%")}})})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n.marketSentiment.label}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:n.marketSentiment.description})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-green-600 dark:text-green-400 mb-4 flex items-center",children:"✅ Fatores Positivos"}),(0,r.jsx)("ul",{className:"space-y-2",children:n.factors.positive.map((e,a)=>(0,r.jsxs)("li",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[(0,r.jsx)("span",{className:"text-green-500 mr-2",children:"•"}),e]},a))})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-4 flex items-center",children:"⚠️ Fatores Negativos"}),(0,r.jsx)("ul",{className:"space-y-2",children:n.factors.negative.map((e,a)=>(0,r.jsxs)("li",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[(0,r.jsx)("span",{className:"text-red-500 mr-2",children:"•"}),e]},a))})]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83D\uDCA1 Recomenda\xe7\xf5es de Investimento"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:n.recommendations.map((e,a)=>(0,r.jsxs)("div",{className:"p-4 rounded-lg border-2 ".concat("buy"===e.type?"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-900/20":"sell"===e.type?"border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-900/20":"border-yellow-200 bg-yellow-50 dark:border-yellow-800 dark:bg-yellow-900/20"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"px-2 py-1 text-xs rounded-full font-bold ".concat("buy"===e.type?"bg-green-500 text-white":"sell"===e.type?"bg-red-500 text-white":"bg-yellow-500 text-white"),children:"buy"===e.type?"\uD83D\uDFE2 COMPRAR":"sell"===e.type?"\uD83D\uDD34 VENDER":"\uD83D\uDFE1 MANTER"}),(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:[e.confidence,"%"]})]}),(0,r.jsx)("div",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:e.category}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.reason})]},a))})]})]})})},{id:"forecast",label:"\uD83D\uDD2E Previs\xe3o IA",component:()=>(0,r.jsx)("div",{className:"space-y-6",children:c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:["\uD83E\uDD16 ",c.model]}),(0,r.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Precis\xe3o: ",c.accuracy," • \xdaltimo treino: ",new Date(c.lastTrained).toLocaleDateString("pt-BR")]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:c.accuracy}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Precis\xe3o"})]})]})}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83D\uDCC8 Previs\xe3o de Pre\xe7os - Pr\xf3ximos 7 dias"}),(0,r.jsx)("div",{className:"space-y-3",children:c.forecast.map((e,a)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:new Date(e.date).toLocaleDateString("pt-BR",{weekday:"short",day:"2-digit",month:"2-digit"})}),(0,r.jsx)("span",{className:"px-2 py-1 text-xs rounded-full font-medium ".concat("bullish"===e.trend?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bearish"===e.trend?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"),children:"bullish"===e.trend?"\uD83D\uDCC8 Alta":"bearish"===e.trend?"\uD83D\uDCC9 Baixa":"➡️ Est\xe1vel"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"font-bold text-gray-900 dark:text-white",children:formatCurrency(e.predictedPrice)}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["Confian\xe7a: ",e.confidence.toFixed(0),"%"]})]}),(0,r.jsx)("div",{className:"w-16 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"".concat(e.confidence,"%")}})})]})]},a))})]})]})})}];return m?(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-lg border border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin text-4xl mb-4",children:"\uD83D\uDCCA"}),(0,r.jsx)("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Carregando dados do mercado..."}),(0,r.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Conectando com APIs de mercado"})]})}):(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center",children:["\uD83D\uDCC8 Market Intelligence",(0,r.jsx)("span",{className:"ml-3 px-3 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-sm font-medium rounded-full",children:"Ao Vivo"})]}),(0,r.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["Dados em tempo real do mercado de gado • \xdaltima atualiza\xe7\xe3o: ",null==a?void 0:a.timestamp.toLocaleTimeString("pt-BR")]})]}),(0,r.jsxs)("button",{onClick:loadMarketData,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center space-x-2",children:[(0,r.jsx)("span",{children:"\uD83D\uDD04"}),(0,r.jsx)("span",{children:"Atualizar"})]})]})}),(0,r.jsx)("div",{className:"flex border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:v.map(e=>(0,r.jsx)("button",{onClick:()=>u(e.id),className:"flex-1 px-6 py-4 text-sm font-medium transition-all duration-300 ".concat(h===e.id?"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 border-b-2 border-blue-500":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:e.label},e.id))}),(0,r.jsx)("div",{className:"p-6",children:null===(e=v.find(e=>e.id===h))||void 0===e?void 0:e.component()})]})}function PriceComparison(){let[e,a]=(0,s.useState)(null),[t,l]=(0,s.useState)(null),[i,n]=(0,s.useState)("SP"),[o,c]=(0,s.useState)(null),[x,m]=(0,s.useState)(!0);(0,s.useEffect)(()=>{loadPriceData()},[i]);let loadPriceData=async()=>{try{m(!0);let[e,t]=await Promise.all([d.I.getCattlePrices(),d.I.getRegionalPrices(i)]);a(e),l(t),calculateComparison(e,t)}catch(e){console.error("Erro ao carregar pre\xe7os:",e)}finally{m(!1)}},[g,h]=(0,s.useState)([]);(0,s.useEffect)(()=>{loadAnimals()},[]);let loadAnimals=async()=>{try{let e={animals:[]},a=await ({ok:!0,json:()=>Promise.resolve(e)}).json();h(a)}catch(e){console.error("Erro ao carregar animais:",e)}},calculateComparison=(e,a)=>{let t=g.filter(e=>"ATIVO"===e.status),r=g.filter(e=>"VENDIDO"===e.status),estimateWeight=(e,a)=>Math.min(e*("Macho"===a?15:12),"Macho"===a?550:450),s=t.map(e=>{let t=estimateWeight(e.meses,e.sexo),r=t/15,s=0;if(e.meses>=30)s="Macho"===e.sexo?a.prices.boi_gordo*r:a.prices.vaca_gorda*r;else if(e.meses<=12)s="Macho"===e.sexo?a.prices.bezerro_macho:a.prices.bezerro_femea;else{let t="Macho"===e.sexo?a.prices.boi_gordo*r:a.prices.vaca_gorda*r,l="Macho"===e.sexo?a.prices.bezerro_macho:a.prices.bezerro_femea,i=(e.meses-12)/18;s=l+(t-l)*i}let l=s-e.custoTotal,i=e.custoTotal>0?l/e.custoTotal*100:0;return{...e,estimatedWeight:t,estimatedArrobas:r,marketValue:s,potentialProfit:l,potentialROI:i,recommendation:i>20?"sell":i>10?"hold":"improve"}}),l=r.map(e=>{let t=estimateWeight(e.meses,e.sexo),r=t/15,s=0;s=e.meses>=30?"Macho"===e.sexo?a.prices.boi_gordo*r*.95:a.prices.vaca_gorda*r*.95:"Macho"===e.sexo?.95*a.prices.bezerro_macho:.95*a.prices.bezerro_femea;let l=e.valorVenda-s,i=s>0?l/s*100:0;return{...e,estimatedMarketPrice:s,marketDifference:l,performanceVsMarket:i}});c({activeAnimals:s,salesAnalysis:l,summary:{totalMarketValue:s.reduce((e,a)=>e+a.marketValue,0),totalInvested:s.reduce((e,a)=>e+a.custoTotal,0),potentialProfit:s.reduce((e,a)=>e+a.potentialProfit,0),averageROI:s.length>0?s.reduce((e,a)=>e+a.potentialROI,0)/s.length:0,recommendSell:s.filter(e=>"sell"===e.recommendation).length,recommendHold:s.filter(e=>"hold"===e.recommendation).length,recommendImprove:s.filter(e=>"improve"===e.recommendation).length}})},formatCurrency=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2}).format(e),getRecommendationColor=e=>{switch(e){case"sell":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"hold":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"improve":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},getRecommendationText=e=>{switch(e){case"sell":return"\uD83D\uDFE2 Vender";case"hold":return"\uD83D\uDFE1 Manter";case"improve":return"\uD83D\uDD34 Melhorar";default:return"⚪ Analisar"}};return x?(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-lg border border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin text-4xl mb-4",children:"\uD83D\uDCB0"}),(0,r.jsx)("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Analisando pre\xe7os de mercado..."})]})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center",children:"\uD83D\uDCB0 Compara\xe7\xe3o de Pre\xe7os"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Compare seus animais com os pre\xe7os atuais do mercado"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado/Regi\xe3o"}),(0,r.jsx)("select",{value:i,onChange:e=>n(e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[{code:"SP",name:"S\xe3o Paulo"},{code:"MG",name:"Minas Gerais"},{code:"GO",name:"Goi\xe1s"},{code:"MT",name:"Mato Grosso"},{code:"MS",name:"Mato Grosso do Sul"},{code:"PR",name:"Paran\xe1"},{code:"RS",name:"Rio Grande do Sul"},{code:"BA",name:"Bahia"}].map(e=>(0,r.jsx)("option",{value:e.code,children:e.name},e.code))})]})]})}),o&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:formatCurrency(o.summary.totalMarketValue)}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Valor de Mercado Total"}),(0,r.jsx)("div",{className:"text-xs text-gray-500 mt-2",children:"Estimativa baseada em peso e idade"})]})}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold ".concat(o.summary.potentialProfit>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:formatCurrency(o.summary.potentialProfit)}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Lucro Potencial"}),(0,r.jsx)("div",{className:"text-xs text-gray-500 mt-2",children:"Se vendidos hoje"})]})}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold ".concat(o.summary.averageROI>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[o.summary.averageROI.toFixed(1),"%"]}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"ROI M\xe9dio Potencial"}),(0,r.jsx)("div",{className:"text-xs text-gray-500 mt-2",children:"Retorno estimado"})]})}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:o.summary.recommendSell}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Recomendados p/ Venda"}),(0,r.jsx)("div",{className:"text-xs text-gray-500 mt-2",children:"ROI > 20%"})]})})]}),o&&(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:"\uD83D\uDC04 An\xe1lise Individual - Animais Ativos"}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white",children:"Animal"}),(0,r.jsx)("th",{className:"text-center p-3 font-semibold text-gray-900 dark:text-white",children:"Idade"}),(0,r.jsx)("th",{className:"text-center p-3 font-semibold text-gray-900 dark:text-white",children:"Peso Est."}),(0,r.jsx)("th",{className:"text-center p-3 font-semibold text-gray-900 dark:text-white",children:"Investido"}),(0,r.jsx)("th",{className:"text-center p-3 font-semibold text-gray-900 dark:text-white",children:"Valor Mercado"}),(0,r.jsx)("th",{className:"text-center p-3 font-semibold text-gray-900 dark:text-white",children:"Lucro Pot."}),(0,r.jsx)("th",{className:"text-center p-3 font-semibold text-gray-900 dark:text-white",children:"ROI Pot."}),(0,r.jsx)("th",{className:"text-center p-3 font-semibold text-gray-900 dark:text-white",children:"Recomenda\xe7\xe3o"})]})}),(0,r.jsx)("tbody",{children:o.activeAnimals.map(e=>(0,r.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,r.jsxs)("td",{className:"p-3",children:[(0,r.jsxs)("div",{className:"font-medium text-gray-900 dark:text-white",children:[e.serie," ",e.rg]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.raca," • ",e.sexo]})]}),(0,r.jsxs)("td",{className:"p-3 text-center text-gray-600 dark:text-gray-400",children:[e.meses,"m"]}),(0,r.jsxs)("td",{className:"p-3 text-center text-gray-600 dark:text-gray-400",children:[e.estimatedWeight.toFixed(0),"kg",(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["(",e.estimatedArrobas.toFixed(1),"@)"]})]}),(0,r.jsx)("td",{className:"p-3 text-center text-red-600 dark:text-red-400 font-medium",children:formatCurrency(e.custoTotal)}),(0,r.jsx)("td",{className:"p-3 text-center text-blue-600 dark:text-blue-400 font-medium",children:formatCurrency(e.marketValue)}),(0,r.jsx)("td",{className:"p-3 text-center font-medium ".concat(e.potentialProfit>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:formatCurrency(e.potentialProfit)}),(0,r.jsxs)("td",{className:"p-3 text-center font-medium ".concat(e.potentialROI>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[e.potentialROI.toFixed(1),"%"]}),(0,r.jsx)("td",{className:"p-3 text-center",children:(0,r.jsx)("span",{className:"px-2 py-1 text-xs rounded-full font-medium ".concat(getRecommendationColor(e.recommendation)),children:getRecommendationText(e.recommendation)})})]},e.id))})]})})]}),o&&o.salesAnalysis.length>0&&(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:"\uD83D\uDCCA Performance vs Mercado - Vendas Realizadas"}),(0,r.jsx)("div",{className:"space-y-4",children:o.salesAnalysis.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"font-medium text-gray-900 dark:text-white",children:[e.serie," ",e.rg]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.raca," • ",e.sexo," • ",e.meses," meses"]})]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-6 text-sm",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:formatCurrency(e.valorVenda)}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Vendido por"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"font-medium text-gray-600 dark:text-gray-400",children:formatCurrency(e.estimatedMarketPrice)}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Pre\xe7o mercado"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"font-medium ".concat(e.marketDifference>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:formatCurrency(e.marketDifference)}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"Diferen\xe7a"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"font-bold ".concat(e.performanceVsMarket>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[e.performanceVsMarket>=0?"+":"",e.performanceVsMarket.toFixed(1),"%"]}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"vs Mercado"})]})]})]},e.id))})]})]})}function SalesDashboard(e){var a,t,l;let{onOpenSalesManager:i}=e,[d,n]=(0,s.useState)(null),[o,c]=(0,s.useState)(!0),[x,m]=(0,s.useState)("30"),[g,h]=(0,s.useState)("overview"),[u,b]=(0,s.useState)(!1),[p,v]=(0,s.useState)(!1);(0,s.useEffect)(()=>{loadSalesData()},[x]);let loadSalesData=async()=>{try{c(!0),n({totalSales:0,totalRevenue:0,averagePrice:0,averageROI:0,salesGrowth:0,revenueGrowth:0,priceGrowth:0,roiGrowth:0,salesByPeriod:[],topAnimals:[],salesByCategory:[],topBuyers:[]})}catch(e){console.error("Erro ao carregar dados de vendas:",e)}finally{c(!1)}},formatCurrency=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2}).format(e||0),formatPercent=e=>"".concat(e>=0?"+":"").concat(e.toFixed(1),"%");return o?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin text-4xl mb-4",children:"\uD83D\uDCB0"}),(0,r.jsx)("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Carregando dashboard de vendas..."})]})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center",children:"\uD83D\uDCB0 Dashboard de Vendas"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"An\xe1lise completa das suas vendas e performance"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("select",{value:x,onChange:e=>m(e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,r.jsx)("option",{value:"7",children:"\xdaltimos 7 dias"}),(0,r.jsx)("option",{value:"30",children:"\xdaltimos 30 dias"}),(0,r.jsx)("option",{value:"90",children:"\xdaltimos 3 meses"}),(0,r.jsx)("option",{value:"365",children:"\xdaltimo ano"})]}),(0,r.jsxs)("button",{onClick:i,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center",children:[(0,r.jsx)("span",{className:"text-lg mr-2",children:"➕"}),"Nova Venda"]})]})]})}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("button",{onClick:()=>h("overview"),className:"flex-1 px-6 py-4 text-sm font-medium transition-colors ".concat("overview"===g?"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 border-b-2 border-green-500":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:"\uD83D\uDCCA Vis\xe3o Geral"}),(0,r.jsx)("button",{onClick:()=>h("recent"),className:"flex-1 px-6 py-4 text-sm font-medium transition-colors ".concat("recent"===g?"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 border-b-2 border-green-500":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:"\uD83D\uDCCB Vendas Recentes"})]}),(0,r.jsxs)("div",{className:"p-6",children:["overview"===g&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl p-6 border border-green-200 dark:border-green-800",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"Receita Total"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:formatCurrency((null==d?void 0:d.totalRevenue)||0)}),(0,r.jsxs)("div",{className:"flex items-center mt-2",children:[(0,r.jsx)("span",{className:"text-2xl mr-1",children:((null==d?void 0:d.revenueGrowth)||0)>=0?"\uD83D\uDCC8":"\uD83D\uDCC9"}),(0,r.jsx)("span",{className:"text-sm font-medium ".concat(((null==d?void 0:d.revenueGrowth)||0)>=0?"text-green-600":"text-red-600"),children:formatPercent((null==d?void 0:d.revenueGrowth)||0)}),(0,r.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"vs per\xedodo anterior"})]})]}),(0,r.jsx)("div",{className:"p-3 bg-green-500 rounded-full",children:(0,r.jsx)("span",{className:"text-2xl text-white",children:"\uD83D\uDCB0"})})]})}),(0,r.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-6 border border-blue-200 dark:border-blue-800",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Animais Vendidos"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:(null==d?void 0:d.totalSales)||0}),(0,r.jsxs)("div",{className:"flex items-center mt-2",children:[(0,r.jsx)("span",{className:"text-2xl mr-1",children:((null==d?void 0:d.salesGrowth)||0)>=0?"\uD83D\uDCC8":"\uD83D\uDCC9"}),(0,r.jsx)("span",{className:"text-sm font-medium ".concat(((null==d?void 0:d.salesGrowth)||0)>=0?"text-green-600":"text-red-600"),children:formatPercent((null==d?void 0:d.salesGrowth)||0)}),(0,r.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"vs per\xedodo anterior"})]})]}),(0,r.jsx)("div",{className:"p-3 bg-blue-500 rounded-full",children:(0,r.jsx)("span",{className:"text-2xl text-white",children:"\uD83D\uDCCA"})})]})}),(0,r.jsx)("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-6 border border-purple-200 dark:border-purple-800",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:"Pre\xe7o M\xe9dio"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:formatCurrency((null==d?void 0:d.averagePrice)||0)}),(0,r.jsxs)("div",{className:"flex items-center mt-2",children:[(0,r.jsx)("span",{className:"text-2xl mr-1",children:((null==d?void 0:d.priceGrowth)||0)>=0?"\uD83D\uDCC8":"\uD83D\uDCC9"}),(0,r.jsx)("span",{className:"text-sm font-medium ".concat(((null==d?void 0:d.priceGrowth)||0)>=0?"text-green-600":"text-red-600"),children:formatPercent((null==d?void 0:d.priceGrowth)||0)}),(0,r.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"vs per\xedodo anterior"})]})]}),(0,r.jsx)("div",{className:"p-3 bg-purple-500 rounded-full",children:(0,r.jsx)("span",{className:"text-2xl text-white",children:"\uD83D\uDCC8"})})]})}),(0,r.jsx)("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 rounded-xl p-6 border border-orange-200 dark:border-orange-800",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-orange-600 dark:text-orange-400",children:"ROI M\xe9dio"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-orange-900 dark:text-orange-100",children:[((null==d?void 0:d.averageROI)||0).toFixed(1),"%"]}),(0,r.jsxs)("div",{className:"flex items-center mt-2",children:[(0,r.jsx)("span",{className:"text-2xl mr-1",children:((null==d?void 0:d.roiGrowth)||0)>=0?"\uD83D\uDCC8":"\uD83D\uDCC9"}),(0,r.jsx)("span",{className:"text-sm font-medium ".concat(((null==d?void 0:d.roiGrowth)||0)>=0?"text-green-600":"text-red-600"),children:formatPercent((null==d?void 0:d.roiGrowth)||0)}),(0,r.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"vs per\xedodo anterior"})]})]}),(0,r.jsx)("div",{className:"p-3 bg-orange-500 rounded-full",children:(0,r.jsx)("span",{className:"text-2xl text-white",children:"\uD83D\uDCC8"})})]})})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCC8 Evolu\xe7\xe3o das Vendas"}),(0,r.jsx)("div",{className:"h-64 flex items-center justify-center text-gray-500",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("span",{className:"text-6xl mb-2 block",children:"\uD83D\uDCCA"}),(0,r.jsx)("p",{children:"Gr\xe1fico de evolu\xe7\xe3o das vendas"}),(0,r.jsx)("p",{className:"text-sm",children:"Implementar com Chart.js ou similar"})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 cursor-pointer hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-500 transition-all duration-200",onClick:()=>b(!0),children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"text-2xl mr-2",children:"\uD83D\uDC65"}),"Top Compradores"]}),(0,r.jsx)("span",{className:"text-sm text-blue-600 dark:text-blue-400 font-normal",children:"Clique para ver detalhes →"})]}),(0,r.jsx)("div",{className:"space-y-3",children:null==d?void 0:null===(a=d.topBuyers)||void 0===a?void 0:a.map((e,a)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ".concat(0===a?"bg-yellow-500":1===a?"bg-gray-400":2===a?"bg-orange-600":"bg-blue-500"),children:a+1}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e.totalAnimals," animais"]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"font-bold text-gray-900 dark:text-white",children:formatCurrency(e.totalValue)}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["M\xe9dia: ",formatCurrency(e.averagePrice)]})]})]},a))})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 cursor-pointer hover:shadow-lg hover:border-green-300 dark:hover:border-green-500 transition-all duration-200",onClick:()=>v(!0),children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center",children:"\uD83D\uDC04 Vendas por Categoria"}),(0,r.jsx)("span",{className:"text-sm text-green-600 dark:text-green-400 font-normal",children:"Clique para ver detalhes →"})]}),(0,r.jsx)("div",{className:"space-y-3",children:null==d?void 0:null===(t=d.salesByCategory)||void 0===t?void 0:t.map((e,a)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("span",{className:"text-2xl",children:e.icon}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e.count," animais (",e.percentage,"%)"]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"font-bold text-gray-900 dark:text-white",children:formatCurrency(e.totalValue)}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["M\xe9dia: ",formatCurrency(e.averagePrice)]})]})]},a))})]})]})]}),"recent"===g&&(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[(0,r.jsx)("span",{className:"text-2xl mr-2",children:"\uD83D\uDCCB"}),"Vendas Recentes"]}),(0,r.jsxs)("button",{onClick:i,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center",children:[(0,r.jsx)("span",{className:"text-lg mr-2",children:"➕"}),"Nova Venda"]})]})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:[(0,r.jsx)("th",{className:"text-left p-4 font-semibold text-gray-900 dark:text-white",children:"Data"}),(0,r.jsx)("th",{className:"text-left p-4 font-semibold text-gray-900 dark:text-white",children:"Animal"}),(0,r.jsx)("th",{className:"text-left p-4 font-semibold text-gray-900 dark:text-white",children:"Comprador"}),(0,r.jsx)("th",{className:"text-center p-4 font-semibold text-gray-900 dark:text-white",children:"Valor"}),(0,r.jsx)("th",{className:"text-center p-4 font-semibold text-gray-900 dark:text-white",children:"ROI"}),(0,r.jsx)("th",{className:"text-center p-4 font-semibold text-gray-900 dark:text-white",children:"Pagamento"}),(0,r.jsx)("th",{className:"text-center p-4 font-semibold text-gray-900 dark:text-white",children:"A\xe7\xf5es"})]})}),(0,r.jsx)("tbody",{children:null==d?void 0:null===(l=d.recentSales)||void 0===l?void 0:l.map(e=>{var a;return(0,r.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,r.jsx)("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:new Date(e.dataVenda).toLocaleDateString("pt-BR")}),(0,r.jsxs)("td",{className:"p-4",children:[(0,r.jsxs)("div",{className:"font-medium text-gray-900 dark:text-white",children:[e.animal.serie," ",e.animal.rg]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e.animal.raca," • ",e.animal.sexo]})]}),(0,r.jsxs)("td",{className:"p-4",children:[(0,r.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.comprador}),e.documento&&(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.documento})]}),(0,r.jsxs)("td",{className:"p-4 text-center",children:[(0,r.jsx)("div",{className:"font-bold text-green-600 dark:text-green-400",children:formatCurrency(e.valor)}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e.animal.peso,"kg"]})]}),(0,r.jsxs)("td",{className:"p-4 text-center",children:[(0,r.jsxs)("div",{className:"font-bold ".concat(e.roi>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[(null===(a=e.roi)||void 0===a?void 0:a.toFixed(1))||0,"%"]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["Lucro: ",formatCurrency(e.profit)]})]}),(0,r.jsx)("td",{className:"p-4 text-center",children:(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("PAGO"===e.statusPagamento?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"PENDENTE"===e.statusPagamento?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"),children:e.statusPagamento})}),(0,r.jsx)("td",{className:"p-4 text-center",children:(0,r.jsx)("button",{className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200",children:(0,r.jsx)("span",{className:"text-lg",children:"\uD83D\uDC41️"})})})]},e.id)})})]})})]})]})]})]})}var n=t(50);function LightBulbIcon({title:e,titleId:a,...t},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},t),e?s.createElement("title",{id:a},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"}))}let o=s.forwardRef(LightBulbIcon);var c=t(6244),x=t(4055),m=t(9989);function CursorArrowRaysIcon({title:e,titleId:a,...t},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},t),e?s.createElement("title",{id:a},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.042 21.672 13.684 16.6m0 0-2.51 2.225.569-9.47 5.227 7.917-3.286-.672ZM12 2.25V4.5m5.834.166-1.591 1.591M20.25 10.5H18M7.757 14.743l-1.59 1.59M6 10.5H3.75m4.007-4.243-1.59-1.59"}))}let g=s.forwardRef(CursorArrowRaysIcon);function SalesAnalytics(e){var a;let{salesData:t={},onRefresh:l}=e,[i,d]=(0,s.useState)("revenue"),[h,u]=(0,s.useState)("monthly"),b={totalRevenue:0,totalSales:0,totalAnimals:0,averagePrice:0,salesByMonth:[],topBuyers:[],salesByState:[],recentSales:[],...t},p=[{id:"revenue",name:"\uD83D\uDCB0 Receita",value:b.totalRevenue,change:"+15%",trend:"up",color:"green"},{id:"sales",name:"\uD83D\uDCCB Vendas",value:b.totalSales,change:"+12%",trend:"up",color:"blue"},{id:"animals",name:"\uD83D\uDC04 Animais",value:b.totalAnimals,change:"+8%",trend:"up",color:"purple"},{id:"avgPrice",name:"\uD83D\uDC8E Pre\xe7o M\xe9dio",value:b.averagePrice,change:"+5%",trend:"up",color:"orange"}],v=[{type:"success",icon:n.Z,title:"\uD83C\uDFAF Meta Superada",description:"Receita mensal 20% acima da meta estabelecida",impact:"Alto",color:"green"},{type:"opportunity",icon:o,title:"\uD83D\uDCA1 Oportunidade Identificada",description:"Estados do Nordeste apresentam potencial inexplorado",impact:"M\xe9dio",color:"blue"},{type:"warning",icon:c.Z,title:"⚠️ Aten\xe7\xe3o Necess\xe1ria",description:"Queda de 5% nas vendas para o estado do RJ",impact:"Baixo",color:"yellow"}];return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"\uD83D\uDD0D Analytics Avan\xe7ado"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Insights inteligentes e previs\xf5es baseadas em IA"})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsxs)("select",{"aria-label":"Selecionar per\xedodo de tempo",value:h,onChange:e=>u(e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[(0,r.jsx)("option",{value:"daily",children:"Di\xe1rio"}),(0,r.jsx)("option",{value:"weekly",children:"Semanal"}),(0,r.jsx)("option",{value:"monthly",children:"Mensal"}),(0,r.jsx)("option",{value:"quarterly",children:"Trimestral"})]}),(0,r.jsx)("button",{onClick:l,disabled:!l,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:"\uD83D\uDD04 Atualizar"})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:p.map(e=>(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border-2 p-6 cursor-pointer transition-all duration-200 ".concat(i===e.id?"border-blue-500 shadow-lg":"border-gray-200 dark:border-gray-700 hover:border-gray-300"),onClick:()=>d(e.id),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),"up"===e.trend?(0,r.jsx)(x.Z,{className:"h-5 w-5 text-green-500"}):(0,r.jsx)(m.Z,{className:"h-5 w-5 text-red-500"})]}),(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"revenue"===e.id?"R$ ".concat((e.value/1e6).toFixed(1),"M"):"avgPrice"===e.id?"R$ ".concat(e.value.toLocaleString()):e.value.toLocaleString()}),(0,r.jsxs)("div",{className:"text-sm font-medium ".concat("up"===e.trend?"text-green-600":"text-red-600"),children:[e.change," vs per\xedodo anterior"]})]},e.id))}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("h4",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["\uD83D\uDCC8 Tend\xeancia - ",null===(a=p.find(e=>e.id===i))||void 0===a?void 0:a.name]}),(0,r.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 rounded-full text-sm",children:"Crescimento Consistente"})]}),(0,r.jsx)("div",{className:"h-64 bg-gradient-to-t from-blue-50 to-transparent dark:from-blue-900 rounded-lg flex items-end justify-between p-4",children:b.salesByMonth.map(e=>(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"bg-blue-500 rounded-t-lg mb-2 transition-all duration-500 hover:bg-blue-600",style:{height:"".concat(b.salesByMonth.length>0?e.revenue/Math.max(...b.salesByMonth.map(e=>e.revenue))*200:0,"px"),width:"30px"}}),(0,r.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.month})]},e.month))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,r.jsxs)("h4",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,r.jsx)(o,{className:"h-5 w-5 mr-2"})," \uD83E\uDDE0 Insights Inteligentes"]}),(0,r.jsx)("div",{className:"space-y-4",children:v.map((e,a)=>{let t=e.icon;return(0,r.jsx)("div",{className:"p-4 rounded-lg border-l-4 ".concat("green"===e.color?"bg-green-50 dark:bg-green-900 border-green-500":"blue"===e.color?"bg-blue-50 dark:bg-blue-900 border-blue-500":"bg-yellow-50 dark:bg-yellow-900 border-yellow-500"),children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)(t,{className:"h-5 w-5 mr-3 mt-0.5 ".concat("green"===e.color?"text-green-600":"blue"===e.color?"text-blue-600":"text-yellow-600")}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h5",{className:"font-medium text-gray-900 dark:text-white mb-1",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:e.description}),(0,r.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("Alto"===e.impact?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"M\xe9dio"===e.impact?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"),children:["Impacto ",e.impact]})]})]})},a)})})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,r.jsxs)("h4",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,r.jsx)(g,{className:"h-5 w-5 mr-2"})," \uD83D\uDD2E Previs\xf5es IA"]}),(0,r.jsx)("div",{className:"space-y-4",children:[{metric:"Receita Pr\xf3ximo M\xeas",predicted:"R$ 3.2M",confidence:85,trend:"up"},{metric:"Vendas Pr\xf3ximo M\xeas",predicted:"180 vendas",confidence:78,trend:"up"},{metric:"Pre\xe7o M\xe9dio Tend\xeancia",predicted:"R$ 31.500",confidence:72,trend:"up"}].map((e,a)=>(0,r.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("h5",{className:"font-medium text-gray-900 dark:text-white",children:e.metric}),"up"===e.trend?(0,r.jsx)(x.Z,{className:"h-4 w-4 text-green-500"}):(0,r.jsx)(m.Z,{className:"h-4 w-4 text-red-500"})]}),(0,r.jsx)("div",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:e.predicted}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Confian\xe7a: ",e.confidence,"%"]}),(0,r.jsx)("div",{className:"w-24 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-500",style:{width:"".concat(e.confidence,"%")}})})]})]},a))})]})]})]})}var h=t(4308),u=t(2807);function InviteSystem(e){let{userId:a}=e,[t,l]=(0,s.useState)([]),[i,d]=(0,s.useState)({name:"",phone:"",email:"",permissions:["view_sales","view_rankings"]}),[n,o]=(0,s.useState)(!1),[c,x]=(0,s.useState)(!1),[m,g]=(0,s.useState)(!1),[h,b]=(0,s.useState)(""),[p,v]=(0,s.useState)(!1),[f,j]=(0,s.useState)(!1),[y,N]=(0,s.useState)("");(0,s.useEffect)(()=>{loadInvites()},[]);let loadInvites=async()=>{try{let e=await u.X.getInvites(a);l(e)}catch(e){console.error("Erro ao carregar convites:",e)}},sendInvite=async()=>{if(!i.name||!i.phone){alert("Nome e telefone s\xe3o obrigat\xf3rios!");return}o(!0);try{let e={...i,invitedBy:a,phone:formatPhone(i.phone),customMessage:y||void 0},r=await u.X.sendInvite(e);l([...t,r]),d({name:"",phone:"",email:"",permissions:["view_sales","view_rankings"]}),N(""),x(!1);let s=confirm("Convite enviado para ".concat(i.name,"! \uD83D\uDCF1\n\nDeseja gerar um QR Code tamb\xe9m?"));s&&(b(r.inviteLink),g(!0))}catch(e){console.error("Erro ao enviar convite:",e),alert("Erro ao enviar convite. Tente novamente.")}finally{o(!1)}},formatPhone=e=>{let a=e.replace(/\D/g,"");return 11===a.length?"+55".concat(a):13===a.length&&a.startsWith("55")?"+".concat(a):e},revokeInvite=async e=>{if(confirm("Tem certeza que deseja revogar este convite?"))try{await u.X.revokeInvite(e),l(t.filter(a=>a.id!==e))}catch(e){console.error("Erro ao revogar convite:",e)}},getStatusIcon=e=>{switch(e){case"pending":return"⏳";case"accepted":return"✅";case"expired":return"⏰";case"revoked":return"❌";default:return"\uD83D\uDCE4"}},getStatusColor=e=>{switch(e){case"pending":return"text-yellow-600 bg-yellow-50";case"accepted":return"text-green-600 bg-green-50";case"expired":return"text-gray-600 bg-gray-50";case"revoked":return"text-red-600 bg-red-50";default:return"text-blue-600 bg-blue-50"}};return(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center",children:"\uD83D\uDCF1 Sistema de Convites"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Convide pessoas para acompanhar suas vendas em tempo real"})]}),(0,r.jsxs)("button",{onClick:()=>x(!c),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[(0,r.jsx)("span",{children:"➕"}),(0,r.jsx)("span",{children:"Novo Convite"})]})]}),c&&(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCE4 Enviar Novo Convite"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nome *"}),(0,r.jsx)("input",{type:"text",value:i.name,onChange:e=>d({...i,name:e.target.value}),placeholder:"Ex: Jo\xe3o Silva",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Telefone/WhatsApp *"}),(0,r.jsx)("input",{type:"tel",value:i.phone,onChange:e=>d({...i,phone:e.target.value}),placeholder:"(11) 99999-9999",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-white"})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email (opcional)"}),(0,r.jsx)("input",{type:"email",value:i.email,onChange:e=>d({...i,email:e.target.value}),placeholder:"joao@email.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-white"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Permiss\xf5es"}),(0,r.jsx)("div",{className:"space-y-2",children:[{id:"view_sales",label:"Ver vendas em tempo real",icon:"\uD83D\uDCB0"},{id:"view_rankings",label:"Ver rankings e compara\xe7\xf5es",icon:"\uD83C\uDFC6"},{id:"view_analytics",label:"Ver an\xe1lises e relat\xf3rios",icon:"\uD83D\uDCCA"},{id:"receive_alerts",label:"Receber alertas de vendas",icon:"\uD83D\uDD14"}].map(e=>(0,r.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:i.permissions.includes(e.id),onChange:a=>{a.target.checked?d({...i,permissions:[...i.permissions,e.id]}):d({...i,permissions:i.permissions.filter(a=>a!==e.id)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsxs)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.icon," ",e.label]})]},e.id))})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("button",{onClick:sendInvite,disabled:n,className:"bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),(0,r.jsx)("span",{children:"Enviando..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"\uD83D\uDCF1"}),(0,r.jsx)("span",{children:"Enviar Convite"})]})}),(0,r.jsx)("button",{onClick:()=>x(!1),className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"Cancelar"})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["\uD83D\uDCCB Convites Enviados (",t.length,")"]}),0===t.length?(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[(0,r.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCF1"}),(0,r.jsx)("p",{children:"Nenhum convite enviado ainda"}),(0,r.jsx)("p",{className:"text-sm",children:'Clique em "Novo Convite" para come\xe7ar'})]}):(0,r.jsx)("div",{className:"space-y-2",children:t.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"text-2xl",children:"\uD83D\uDC64"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.phone," ",e.email&&"• ".concat(e.email)]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Enviado em ",new Date(e.createdAt).toLocaleDateString("pt-BR")]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("div",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(getStatusColor(e.status)),children:[getStatusIcon(e.status)," ","pending"===e.status?"Pendente":"accepted"===e.status?"Aceito":"expired"===e.status?"Expirado":"Revogado"]}),"accepted"===e.status&&(0,r.jsx)("div",{className:"text-xs text-green-600 dark:text-green-400",children:"\uD83D\uDFE2 Online"}),"pending"===e.status&&(0,r.jsx)("button",{onClick:()=>revokeInvite(e.id),className:"text-red-500 hover:text-red-700 text-sm",title:"Revogar convite",children:"❌"})]})]},e.id))})]}),(0,r.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-600",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,r.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.length}),(0,r.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total"})]}),(0,r.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:t.filter(e=>"accepted"===e.status).length}),(0,r.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Aceitos"})]}),(0,r.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-lg",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:t.filter(e=>"pending"===e.status).length}),(0,r.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Pendentes"})]}),(0,r.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:t.filter(e=>"accepted"===e.status).length}),(0,r.jsx)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Online"})]})]})})]})}var b=t(8565),p=t(9636);function ModernDashboard(){var e;(0,l.useRouter)();let[a,t]=(0,s.useState)("30d"),[i,d]=(0,s.useState)(!1),[n,o]=(0,s.useState)(null),[c,x]=(0,s.useState)(!1),[m,g]=(0,s.useState)("dashboard"),[u,v]=(0,s.useState)(!1),[f,j]=(0,s.useState)([]),[y,N]=(0,s.useState)({totalAnimals:0,activeAnimals:0,totalInvested:0,totalRevenue:0,avgROI:0,topPerformer:null});return(0,s.useEffect)(()=>{let loadRealData=async()=>{try{let e=[],a=[],t=e.length,r=e.filter(e=>"ATIVO"===e.status).length,s=e.reduce((e,a)=>{let t=a.costs||[],r=t.filter(e=>"VENDA"!==e.tipo).reduce((e,a)=>e+a.valor,0);return e+r},0),l=a.reduce((e,a)=>e+a.valor,0),i=0,d=0,n=null,o=-1/0;a.forEach(a=>{let t=e.find(e=>e.id===a.animalId);if(t){let e=t.costs||[],r=e.filter(e=>"VENDA"!==e.tipo).reduce((e,a)=>e+a.valor,0);if(r>0){let e=a.valor-r-(a.comissao||0)-(a.taxas||0),s=e/r*100;i+=s,d+=1,s>o&&(o=s,n={...t,saleValue:a.valor,roi:s})}}});let c=d>0?i/d:0;N({totalAnimals:t,activeAnimals:r,totalInvested:s,totalRevenue:l,avgROI:c,topPerformer:n,lastUpdate:new Date})}catch(e){console.error("Erro ao carregar dados reais:",e)}};loadRealData();let e=setInterval(loadRealData,3e4);return()=>clearInterval(e)},[]),(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-700 rounded-3xl p-8 text-white relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black opacity-10"}),(0,r.jsx)("div",{className:"relative z-10",children:(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[(0,r.jsxs)("div",{className:"mb-6 lg:mb-0",children:[(0,r.jsxs)("h1",{className:"text-4xl font-bold mb-3 flex items-center",children:["\uD83D\uDE80 Dashboard Inteligente",(0,r.jsx)("span",{className:"ml-4 px-4 py-2 bg-white/20 rounded-full text-sm font-medium backdrop-blur-sm",children:"v3.0 Pro + Market AI"})]}),(0,r.jsx)("p",{className:"text-blue-100 text-lg leading-relaxed",children:"An\xe1lise avan\xe7ada do seu rebanho com dados de mercado em tempo real"}),(0,r.jsxs)("div",{className:"mt-4 flex items-center space-x-6 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse"}),(0,r.jsx)("span",{children:"Sistema Online"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-yellow-400 rounded-full mr-2"}),(0,r.jsxs)("span",{children:["\xdaltima atualiza\xe7\xe3o: ",(null===(e=y.lastUpdate)||void 0===e?void 0:e.toLocaleTimeString())||"Carregando..."]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full mr-2 animate-pulse"}),(0,r.jsx)("span",{children:"APIs de Mercado Ativas"})]})]})]}),("dashboard"===m||"sales"===m||"analytics"===m)&&(0,r.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:[{value:"7d",label:"7 dias"},{value:"30d",label:"30 dias"},{value:"90d",label:"3 meses"},{value:"1y",label:"1 ano"},{value:"all",label:"Todos"}].map(e=>(0,r.jsx)("button",{onClick:()=>t(e.value),className:"px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ".concat(a===e.value?"bg-white text-blue-600 shadow-lg transform scale-105":"bg-white/20 text-white hover:bg-white/30 backdrop-blur-sm"),children:e.label},e.value))}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:y.totalAnimals}),(0,r.jsx)("div",{className:"text-blue-200 text-sm",children:"Animais Cadastrados"})]})]}),!["dashboard","sales","analytics"].includes(m)&&(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:"market"===m?"\uD83D\uDCC8":"comparison"===m?"\uD83D\uDD0D":"\uD83D\uDCCA"}),(0,r.jsx)("div",{className:"text-blue-200 text-sm",children:"market"===m?"Dados de Mercado":"comparison"===m?"An\xe1lise de Pre\xe7os":"Analytics"})]})]})}),(0,r.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white opacity-5 rounded-full -mr-32 -mt-32"}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-white opacity-5 rounded-full -ml-24 -mb-24"})]}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:(0,r.jsx)("div",{className:"flex flex-wrap gap-4",children:[{id:"dashboard",label:"\uD83C\uDFE0 Dashboard",description:"Vis\xe3o geral do rebanho"},{id:"sales",label:"\uD83D\uDCB0 Vendas",description:"Dashboard completo de vendas"},{id:"analytics",label:"\uD83D\uDCCA An\xe1lise Comparativa",description:"FIV vs IA, performance por touro, av\xf4 materno"},{id:"materials",label:"\uD83D\uDCE6 Materiais & Custos",description:"Gest\xe3o de materiais, medicamentos e custos"},{id:"market",label:"\uD83D\uDCC8 Market Intelligence",description:"Dados de mercado em tempo real"},{id:"comparison",label:"\uD83D\uDD0D Compara\xe7\xe3o",description:"Compare seus animais com o mercado"},{id:"invites",label:"\uD83D\uDCF1 Convites",description:"Convide pessoas para acompanhar suas vendas"},{id:"notifications",label:"\uD83D\uDD14 Notifica\xe7\xf5es",description:"Alertas e atualiza\xe7\xf5es em tempo real"}].map(e=>(0,r.jsxs)("button",{onClick:()=>g(e.id),className:"flex-1 min-w-[200px] p-4 rounded-xl text-left transition-all duration-300 transform hover:scale-105 ".concat(m===e.id?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:[(0,r.jsx)("div",{className:"font-semibold text-lg mb-1",children:e.label}),(0,r.jsx)("div",{className:"text-sm ".concat(m===e.id?"text-blue-100":"text-gray-500 dark:text-gray-400"),children:e.description})]},e.id))})}),(()=>{switch(m){case"sales":return(0,r.jsx)(SalesDashboard,{onOpenSalesManager:()=>v(!0)});case"analytics":return(0,r.jsx)(SalesAnalytics,{});case"materials":return(0,r.jsx)(p.Z,{userId:"user123"});case"market":return(0,r.jsx)(MarketDashboard,{});case"comparison":return(0,r.jsx)(PriceComparison,{});case"invites":return(0,r.jsx)(InviteSystem,{userId:"user123"});case"notifications":return(0,r.jsx)(b.Z,{userId:"user123"});default:return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsx)(LiveStats,{data:y}),(0,r.jsx)(MetricsCards,{timeRange:a,onReportClick:e=>{o(e),d(!0)}}),(0,r.jsx)(QuickActions,{onROICalculatorOpen:()=>x(!0)}),(0,r.jsx)(SmartAlerts,{}),(0,r.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[(0,r.jsx)("div",{className:"xl:col-span-2",children:(0,r.jsx)(AdvancedCharts,{timeRange:a})}),(0,r.jsx)("div",{children:(0,r.jsx)(AnimalPerformance,{})})]})]})}})(),i&&(0,r.jsx)(ReportsModal,{reportType:n,onClose:()=>d(!1),timeRange:a}),(0,r.jsx)(ROICalculator,{isOpen:c,onClose:()=>x(!1)}),(0,r.jsx)(h.Z,{isOpen:u,onClose:()=>v(!1),selectedAnimals:f,onSalesComplete:()=>{j([])}})]})}var v=t(8394),f=t(8357),j=t(8680),y=t(2268),N=t(6249),k=t(36);function SimpleAnimalManager(e){let{isOpen:a,onClose:t}=e,[l,i]=(0,s.useState)([]),[d,n]=(0,s.useState)(!1),[o,c]=(0,s.useState)(!1),[x,m]=(0,s.useState)(null);(0,s.useEffect)(()=>{a&&loadAnimals()},[a]);let loadAnimals=async()=>{try{n(!0);let e=await fetch("/api/animals");if(e.ok){let a=await e.json();i(a)}else console.error("Erro ao carregar animais")}catch(e){console.error("Erro ao carregar animais:",e)}finally{n(!1)}},handleSaveAnimal=async e=>{try{let a=x?"/api/animals/".concat(x.id):"/api/animals",t=x?"PUT":"POST",r=await fetch(a,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(r.ok)loadAnimals(),c(!1),m(null),alert(x?"Animal atualizado!":"Animal salvo!");else{let e=await r.json();alert("Erro: ".concat(e.error||"Erro desconhecido"))}}catch(e){console.error("Erro ao salvar animal:",e),alert("Erro ao salvar animal")}},handleEditAnimal=e=>{m(e),c(!0)},handleDeleteAnimal=async e=>{if(confirm("Excluir este animal?"))try{let a=await fetch("/api/animals/".concat(e),{method:"DELETE"});a.ok?(loadAnimals(),alert("Animal exclu\xeddo!")):alert("Erro ao excluir")}catch(e){console.error("Erro ao excluir:",e),alert("Erro ao excluir")}};return a?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-green-600 to-emerald-600",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(f.Z,{className:"h-8 w-8 text-white"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"\uD83D\uDC04 Cadastro de Animais"}),(0,r.jsx)("p",{className:"text-green-100",children:"S\xe9rie • RG • Sexo • Era • Pre\xe7o"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("button",{onClick:()=>{m(null),c(!0)},className:"px-6 py-3 bg-white/20 text-white rounded-lg hover:bg-white/30 transition-colors flex items-center font-medium",children:[(0,r.jsx)(j.Z,{className:"h-5 w-5 mr-2"}),"Novo Animal"]}),(0,r.jsx)("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors text-white text-2xl font-bold",children:"\xd7"})]})]}),(0,r.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["\uD83D\uDC04 Animais Cadastrados (",l.length,")"]}),(0,r.jsxs)("button",{onClick:()=>{m(null),c(!0)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center",children:[(0,r.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Novo"]})]}),d?(0,r.jsxs)("div",{className:"p-8 text-center",children:[(0,r.jsx)("div",{className:"animate-spin text-2xl mb-2",children:"⏳"}),(0,r.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Carregando..."})]}):0===l.length?(0,r.jsxs)("div",{className:"p-8 text-center",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDC04"}),(0,r.jsx)("div",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Nenhum animal cadastrado"}),(0,r.jsx)("button",{onClick:()=>{m(null),c(!0)},className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Cadastrar Primeiro Animal"})]}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:[(0,r.jsx)("th",{className:"text-left p-4 font-semibold text-gray-900 dark:text-white",children:"S\xe9rie"}),(0,r.jsx)("th",{className:"text-left p-4 font-semibold text-gray-900 dark:text-white",children:"RG"}),(0,r.jsx)("th",{className:"text-center p-4 font-semibold text-gray-900 dark:text-white",children:"Sexo"}),(0,r.jsx)("th",{className:"text-center p-4 font-semibold text-gray-900 dark:text-white",children:"Era"}),(0,r.jsx)("th",{className:"text-center p-4 font-semibold text-gray-900 dark:text-white",children:"Pre\xe7o"}),(0,r.jsx)("th",{className:"text-center p-4 font-semibold text-gray-900 dark:text-white",children:"Status"}),(0,r.jsx)("th",{className:"text-center p-4 font-semibold text-gray-900 dark:text-white",children:"A\xe7\xf5es"})]})}),(0,r.jsx)("tbody",{children:l.map(e=>{var a,t;return(0,r.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,r.jsxs)("td",{className:"p-4",children:[(0,r.jsx)("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:e.serie||(null===(a=e.brinco)||void 0===a?void 0:a.split(" ")[0])}),(0,r.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.raca})]}),(0,r.jsxs)("td",{className:"p-4",children:[(0,r.jsx)("div",{className:"font-mono text-lg font-bold text-gray-900 dark:text-white",children:e.rg||(null===(t=e.brinco)||void 0===t?void 0:t.split(" ")[1])}),(0,r.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.brinco})]}),(0,r.jsx)("td",{className:"p-4 text-center",children:(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("MACHO"===e.sexo?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200"),children:"MACHO"===e.sexo?"\uD83D\uDC02 Macho":"\uD83D\uDC04 F\xeamea"})}),(0,r.jsx)("td",{className:"p-4 text-center",children:(0,r.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.era?"".concat(e.era,"m"):"N/I"})}),(0,r.jsx)("td",{className:"p-4 text-center",children:(0,r.jsx)("div",{className:"font-bold text-green-600 dark:text-green-400",children:e.valorVenda?"R$ ".concat(e.valorVenda.toLocaleString("pt-BR",{minimumFractionDigits:2})):"N/I"})}),(0,r.jsx)("td",{className:"p-4 text-center",children:(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("ATIVO"===e.status?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"VENDIDO"===e.status?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"),children:e.status})}),(0,r.jsx)("td",{className:"p-4 text-center",children:(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>handleEditAnimal(e),className:"p-2 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900 rounded-lg transition-colors",title:"Editar",children:(0,r.jsx)(y.Z,{className:"h-4 w-4"})}),(0,r.jsx)("button",{onClick:()=>handleDeleteAnimal(e.id),className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded-lg transition-colors",title:"Excluir",children:(0,r.jsx)(N.Z,{className:"h-4 w-4"})})]})})]},e.id)})})]})})]})}),(0,r.jsx)(k.Z,{animal:x,isOpen:o,onClose:()=>{c(!1),m(null)},onSave:handleSaveAnimal})]})}):null}var w=t(8523),D=t(1113);function DirectInvoiceManager(e){let{isOpen:a,onClose:t}=e,[l,i]=(0,s.useState)({numero:"",dataVenda:new Date().toISOString().split("T")[0],status:"PENDENTE",compradorNome:"",compradorCpfCnpj:"",compradorEndereco:"",compradorCidade:"",compradorEstado:"",compradorCep:"",observacoes:""}),[d,n]=(0,s.useState)([]),[o,c]=(0,s.useState)(!1),[x,m]=(0,s.useState)(!1),[g,h]=(0,s.useState)({serie:"",rg:"",sexo:"",era:"",preco:"",raca:""}),removeAnimal=e=>{n(d.filter(a=>a.id!==e))},getRacaBySerie=e=>({RPT:"Receptora",BENT:"Brahman",CJCJ:"Nelore",CJCG:"Gir"})[e]||"N\xe3o definida",handleSerieChange=e=>{let a=getRacaBySerie(e);h({...g,serie:e,raca:a})},calculateTotal=()=>d.reduce((e,a)=>e+(a.preco||0),0),handleSave=async()=>{if(!l.numero||!l.compradorNome||0===d.length){alert("Preencha n\xfamero da NF, comprador e adicione pelo menos um animal");return}try{let e=[];for(let a of d){let t={serie:a.serie,rg:a.rg,brinco:a.brinco,nome:a.brinco,sexo:"Macho"===a.sexo?"MACHO":"FEMEA",raca:a.raca,status:"VENDIDO",era:a.era,valorVenda:a.preco,observacoes:"Vendido na NF ".concat(l.numero),dataNascimento:a.era?calculateBirthDate(a.era):null},r=await fetch("/api/animals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(r.ok){let t=await r.json();e.push({id:t.id,brinco:t.brinco,nome:t.nome,raca:t.raca,sexo:t.sexo,preco:a.preco})}}let a={...l,animais:e,valorTotal:calculateTotal()},r=await fetch("/api/invoices",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});r.ok?(alert("NF ".concat(l.numero," criada com sucesso! ").concat(d.length," animais cadastrados.")),t()):alert("Erro ao criar NF")}catch(e){console.error("Erro ao salvar:",e),alert("Erro ao salvar dados")}},calculateBirthDate=e=>{if(!e)return null;let a=parseInt(e);if(isNaN(a))return null;let t=new Date,r=new Date(t.getFullYear(),t.getMonth()-a,t.getDate());return r.toISOString().split("T")[0]};return a?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-7xl w-full max-h-[90vh] overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-600 to-indigo-600",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(w.Z,{className:"h-8 w-8 text-white"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"\uD83D\uDCCB Criar Nota Fiscal"}),(0,r.jsx)("p",{className:"text-blue-100",children:"Cadastre animais diretamente na NF"})]})]}),(0,r.jsx)("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors text-white text-2xl font-bold",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)] space-y-6",children:[(0,r.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900 rounded-xl p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-blue-900 dark:text-blue-100 mb-4 flex items-center",children:"\uD83D\uDCC4 Dados da Nota Fiscal"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:"N\xfamero da NF *"}),(0,r.jsx)("input",{type:"text",value:l.numero,onChange:e=>i({...l,numero:e.target.value}),className:"w-full px-4 py-3 border border-blue-300 dark:border-blue-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-lg font-medium",placeholder:"Ex: 001"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:"Data da Venda *"}),(0,r.jsx)("input",{type:"date",value:l.dataVenda,onChange:e=>i({...l,dataVenda:e.target.value}),className:"w-full px-4 py-3 border border-blue-300 dark:border-blue-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-lg"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:"Status"}),(0,r.jsxs)("select",{value:l.status,onChange:e=>i({...l,status:e.target.value}),className:"w-full px-4 py-3 border border-blue-300 dark:border-blue-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-lg",children:[(0,r.jsx)("option",{value:"PENDENTE",children:"Pendente"}),(0,r.jsx)("option",{value:"EMITIDA",children:"Emitida"}),(0,r.jsx)("option",{value:"PAGA",children:"Paga"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-green-50 dark:bg-green-900 rounded-xl p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold text-green-900 dark:text-green-100 mb-4 flex items-center",children:[(0,r.jsx)(D.Z,{className:"h-5 w-5 mr-2"}),"Dados do Comprador"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-green-800 dark:text-green-200 mb-2",children:"Nome/Raz\xe3o Social *"}),(0,r.jsx)("input",{type:"text",value:l.compradorNome,onChange:e=>i({...l,compradorNome:e.target.value}),className:"w-full px-4 py-3 border border-green-300 dark:border-green-600 rounded-lg focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white text-lg",placeholder:"Nome do comprador"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-green-800 dark:text-green-200 mb-2",children:"CPF/CNPJ"}),(0,r.jsx)("input",{type:"text",value:l.compradorCpfCnpj,onChange:e=>i({...l,compradorCpfCnpj:e.target.value}),className:"w-full px-4 py-3 border border-green-300 dark:border-green-600 rounded-lg focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white text-lg",placeholder:"000.000.000-00"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-green-800 dark:text-green-200 mb-2",children:"Cidade"}),(0,r.jsx)("input",{type:"text",value:l.compradorCidade,onChange:e=>i({...l,compradorCidade:e.target.value}),className:"w-full px-4 py-3 border border-green-300 dark:border-green-600 rounded-lg focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white text-lg",placeholder:"Nome da cidade"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-green-800 dark:text-green-200 mb-2",children:"Estado"}),(0,r.jsxs)("select",{value:l.compradorEstado,onChange:e=>i({...l,compradorEstado:e.target.value}),className:"w-full px-4 py-3 border border-green-300 dark:border-green-600 rounded-lg focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white text-lg",children:[(0,r.jsx)("option",{value:"",children:"Selecionar..."}),["AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"].map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]})]})]}),(0,r.jsxs)("div",{className:"bg-orange-50 dark:bg-orange-900 rounded-xl p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-orange-900 dark:text-orange-100 mb-4",children:"\uD83D\uDC04 Cadastrar Animais na NF"}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 mb-4 border-2 border-orange-200 dark:border-orange-700",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Adicionar Animal Individual"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"S\xe9rie *"}),(0,r.jsxs)("select",{value:g.serie,onChange:e=>handleSerieChange(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white",children:[(0,r.jsx)("option",{value:"",children:"Selecione..."}),["RPT","BENT","CJCJ","CJCG"].map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"RG *"}),(0,r.jsx)("input",{type:"text",value:g.rg,onChange:e=>h({...g,rg:e.target.value}),maxLength:6,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white",placeholder:"123456"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Ra\xe7a"}),(0,r.jsx)("input",{type:"text",value:g.raca,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-600",placeholder:"",readOnly:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sexo *"}),(0,r.jsxs)("select",{value:g.sexo,onChange:e=>h({...g,sexo:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white",children:[(0,r.jsx)("option",{value:"",children:"Selecione..."}),(0,r.jsx)("option",{value:"Macho",children:"Macho"}),(0,r.jsx)("option",{value:"F\xeamea",children:"F\xeamea"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Era (meses)"}),(0,r.jsx)("input",{type:"number",value:g.era,onChange:e=>h({...g,era:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white",placeholder:"24"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Pre\xe7o (R$)"}),(0,r.jsx)("input",{type:"number",step:"0.01",value:g.preco,onChange:e=>h({...g,preco:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white",placeholder:"5000.00"})]})]}),(0,r.jsxs)("div",{className:"mt-3 flex justify-between items-center",children:[(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:g.serie&&g.rg&&(0,r.jsxs)("span",{children:["Brinco: ",(0,r.jsxs)("strong",{children:[g.serie," ",g.rg]})," | Ra\xe7a: ",(0,r.jsx)("strong",{children:getRacaBySerie(g.serie)})]})}),(0,r.jsxs)("button",{onClick:()=>{if(!g.serie||!g.rg||!g.sexo){alert("Preencha S\xe9rie, RG e Sexo do animal");return}let e="".concat(g.serie," ").concat(g.rg);if(d.find(a=>a.brinco===e)){alert("J\xe1 existe um animal com este brinco na lista");return}let a={id:Date.now(),serie:g.serie,rg:g.rg,brinco:"".concat(g.serie," ").concat(g.rg),sexo:g.sexo,era:g.era||null,preco:parseFloat(g.preco)||0,raca:getRacaBySerie(g.serie)};n([...d,a]),h({serie:"",rg:"",sexo:"",era:"",preco:""})},className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors flex items-center",children:[(0,r.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Adicionar"]})]})]}),d.length>0&&(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4",children:[(0,r.jsxs)("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:["Animais na NF (",d.length,")"]}),(0,r.jsx)("div",{className:"space-y-2",children:d.map(e=>(0,r.jsx)("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex-1 grid grid-cols-2 md:grid-cols-5 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:e.brinco}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:e.raca})]}),(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("Macho"===e.sexo?"bg-blue-100 text-blue-800":"bg-pink-100 text-pink-800"),children:"Macho"===e.sexo?"\uD83D\uDC02 Macho":"\uD83D\uDC04 F\xeamea"})}),(0,r.jsx)("div",{children:e.era?"".concat(e.era," meses"):"N/I"}),(0,r.jsxs)("div",{className:"font-bold text-green-600",children:["R$ ",e.preco.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{onClick:()=>removeAnimal(e.id),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Remover",children:(0,r.jsx)(N.Z,{className:"h-4 w-4"})})})]})},e.id))}),(0,r.jsx)("div",{className:"mt-4 text-right",children:(0,r.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["Total: R$ ",calculateTotal().toLocaleString("pt-BR",{minimumFractionDigits:2})]})})]})]}),(0,r.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900 rounded-xl p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-purple-900 dark:text-purple-100 mb-4",children:"\uD83D\uDCCA Op\xe7\xf5es de Importa\xe7\xe3o"}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsxs)("button",{onClick:()=>c(!0),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all duration-200 flex items-center shadow-lg",children:[(0,r.jsx)(w.Z,{className:"h-5 w-5 mr-2"}),"\uD83D\uDCC4 Importar GTA"]}),(0,r.jsxs)("button",{onClick:()=>m(!0),className:"px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all duration-200 flex items-center shadow-lg",children:[(0,r.jsx)(j.Z,{className:"h-5 w-5 mr-2"}),"\uD83D\uDCCA Adicionar Lote"]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCDD Observa\xe7\xf5es"}),(0,r.jsx)("textarea",{value:l.observacoes,onChange:e=>i({...l,observacoes:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-gray-500 dark:bg-gray-600 dark:text-white",rows:3,placeholder:"Observa\xe7\xf5es sobre a venda..."})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("button",{onClick:t,className:"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium",children:"Cancelar"}),(0,r.jsxs)("button",{onClick:handleSave,disabled:!l.numero||!l.compradorNome||0===d.length,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:["\uD83D\uDCBE Criar NF com ",d.length," Animais"]})]})]}),o&&(0,r.jsx)(GTAImportModal,{isOpen:o,onClose:()=>c(!1),onAnimalsImported:e=>{n([...d,...e]),c(!1)}}),x&&(0,r.jsx)(BulkAddModal,{isOpen:x,onClose:()=>m(!1),onAnimalsAdded:e=>{n([...d,...e]),m(!1)}})]})}):null}function GTAImportModal(e){let{isOpen:a,onClose:l,onAnimalsImported:i}=e,[d,n]=(0,s.useState)(!1),[o,c]=(0,s.useState)(""),[x,m]=(0,s.useState)([]),g=(0,s.useRef)(null),handlePDFUpload=async e=>{if(!e||"application/pdf"!==e.type){alert("Por favor, selecione um arquivo PDF v\xe1lido.");return}n(!0);try{let a=await Promise.all([t.e(928),t.e(594)]).then(t.bind(t,8541));a.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(a.version,"/pdf.worker.min.js");let r=await e.arrayBuffer(),s=await a.getDocument(r).promise,l="";for(let e=1;e<=s.numPages;e++){let a=await s.getPage(e),t=await a.getTextContent(),r=t.items.map(e=>e.str).join(" ");l+=r+"\n"}c(l);let i=extractAnimalsFromText(l);m(i),0===i.length&&alert("Nenhum animal encontrado no PDF. Verifique o arquivo.")}catch(e){console.error("Erro ao processar PDF:",e),alert("Erro ao processar PDF. Tente novamente.")}finally{n(!1)}},extractAnimalsFromText=e=>{let a=[],t=e.matchAll(/(CJCJ|BENT|RPT|CJCG)\s+(\d{1,6})/gi);for(let e of t){let t=e[1].toUpperCase(),r=e[2],s="".concat(t," ").concat(r);a.find(e=>e.brinco===s)||a.push({id:Date.now()+Math.random(),serie:t,rg:r,brinco:s,sexo:"",era:"",preco:"",raca:getRacaBySerie(t)})}return a},getRacaBySerie=e=>({RPT:"Receptora",BENT:"Brahman",CJCJ:"Nelore",CJCG:"Gir"})[e]||"N\xe3o definida";return a?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[80vh] overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-purple-600 to-indigo-600",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(w.Z,{className:"h-8 w-8 text-white"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-white",children:"\uD83D\uDCC4 Importar GTA"}),(0,r.jsx)("p",{className:"text-purple-100",children:"Extrair animais do PDF da GTA"})]})]}),(0,r.jsx)("button",{onClick:l,className:"p-2 hover:bg-white/20 rounded-lg transition-colors text-white text-xl font-bold",children:"\xd7"})]}),(0,r.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(80vh-120px)]",children:x.length?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"bg-green-50 dark:bg-green-900 rounded-xl p-4 mb-6",children:[(0,r.jsxs)("h4",{className:"font-bold text-green-900 dark:text-green-100 mb-2",children:["✅ ",x.length," animais encontrados!"]}),(0,r.jsx)("p",{className:"text-green-700 dark:text-green-300 text-sm",children:'Revise os dados e clique em "Importar" para adicionar \xe0 NF'})]}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:[(0,r.jsx)("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white",children:"Brinco"}),(0,r.jsx)("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white",children:"S\xe9rie"}),(0,r.jsx)("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white",children:"RG"}),(0,r.jsx)("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white",children:"Ra\xe7a"})]})}),(0,r.jsx)("tbody",{children:x.map(e=>(0,r.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,r.jsx)("td",{className:"p-3 font-mono font-bold text-gray-900 dark:text-white",children:e.brinco}),(0,r.jsx)("td",{className:"p-3 text-gray-600 dark:text-gray-400",children:e.serie}),(0,r.jsx)("td",{className:"p-3 text-gray-600 dark:text-gray-400",children:e.rg}),(0,r.jsx)("td",{className:"p-3 text-gray-600 dark:text-gray-400",children:e.raca})]},e.id))})]})})}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4 mt-6",children:[(0,r.jsx)("button",{onClick:l,className:"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancelar"}),(0,r.jsxs)("button",{onClick:()=>{if(0===x.length){alert("Nenhum animal para importar.");return}i(x)},className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:["\uD83D\uDCE5 Importar ",x.length," Animais"]})]})]}):(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900 rounded-xl p-8 border-2 border-dashed border-purple-300 dark:border-purple-600",children:[(0,r.jsx)(w.Z,{className:"h-16 w-16 text-purple-500 mx-auto mb-4"}),(0,r.jsx)("h4",{className:"text-lg font-bold text-purple-900 dark:text-purple-100 mb-4",children:"Selecione o PDF da GTA"}),(0,r.jsx)("button",{onClick:()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.click()},disabled:d,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:d?"\uD83D\uDD04 Processando...":"\uD83D\uDCC1 Escolher Arquivo"}),(0,r.jsx)("input",{ref:g,type:"file",accept:".pdf",onChange:e=>handlePDFUpload(e.target.files[0]),className:"hidden"}),(0,r.jsx)("p",{className:"text-sm text-purple-600 dark:text-purple-300 mt-4",children:"O sistema ir\xe1 detectar automaticamente os animais no PDF"})]})})})]})}):null}function BulkAddModal(e){let{isOpen:a,onClose:t,onAnimalsAdded:l}=e,[i,d]=(0,s.useState)([{id:1,serie:"",rg:"",sexo:"",era:"",preco:""}]),removeRow=e=>{d(i.filter(a=>a.id!==e))},updateAnimal=(e,a,t)=>{d(i.map(r=>r.id===e?{...r,[a]:t}:r))},getRacaBySerie=e=>({RPT:"Receptora",BENT:"Brahman",CJCJ:"Nelore",CJCG:"Gir"})[e]||"N\xe3o definida";return a?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-6xl w-full max-h-[80vh] overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-green-600 to-emerald-600",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(j.Z,{className:"h-8 w-8 text-white"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-white",children:"\uD83D\uDCCA Adicionar Lote"}),(0,r.jsx)("p",{className:"text-green-100",children:"Cadastre m\xfaltiplos animais de uma vez"})]})]}),(0,r.jsx)("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors text-white text-xl font-bold",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(80vh-120px)]",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[(0,r.jsxs)("h4",{className:"font-semibold text-gray-900 dark:text-white",children:["Animais para Adicionar (",i.length,")"]}),(0,r.jsxs)("button",{onClick:()=>{d([...i,{id:Date.now(),serie:"",rg:"",sexo:"",era:"",preco:""}])},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center",children:[(0,r.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Adicionar Linha"]})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:[(0,r.jsx)("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white",children:"S\xe9rie *"}),(0,r.jsx)("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white",children:"RG *"}),(0,r.jsx)("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white",children:"Sexo *"}),(0,r.jsx)("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white",children:"Era"}),(0,r.jsx)("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white",children:"Pre\xe7o"}),(0,r.jsx)("th",{className:"text-center p-3 font-semibold text-gray-900 dark:text-white",children:"A\xe7\xf5es"})]})}),(0,r.jsx)("tbody",{children:i.map(e=>(0,r.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[(0,r.jsx)("td",{className:"p-3",children:(0,r.jsxs)("select",{value:e.serie,onChange:a=>updateAnimal(e.id,"serie",a.target.value),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-green-500 dark:bg-gray-600 dark:text-white",children:[(0,r.jsx)("option",{value:"",children:"Selecione..."}),(0,r.jsx)("option",{value:"RPT",children:"RPT"}),(0,r.jsx)("option",{value:"BENT",children:"BENT"}),(0,r.jsx)("option",{value:"CJCJ",children:"CJCJ"}),(0,r.jsx)("option",{value:"CJCG",children:"CJCG"})]})}),(0,r.jsx)("td",{className:"p-3",children:(0,r.jsx)("input",{type:"text",value:e.rg,onChange:a=>updateAnimal(e.id,"rg",a.target.value),maxLength:6,className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-green-500 dark:bg-gray-600 dark:text-white",placeholder:"123456"})}),(0,r.jsx)("td",{className:"p-3",children:(0,r.jsxs)("select",{value:e.sexo,onChange:a=>updateAnimal(e.id,"sexo",a.target.value),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-green-500 dark:bg-gray-600 dark:text-white",children:[(0,r.jsx)("option",{value:"",children:"Selecione..."}),(0,r.jsx)("option",{value:"Macho",children:"Macho"}),(0,r.jsx)("option",{value:"F\xeamea",children:"F\xeamea"})]})}),(0,r.jsx)("td",{className:"p-3",children:(0,r.jsx)("input",{type:"number",value:e.era,onChange:a=>updateAnimal(e.id,"era",a.target.value),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-green-500 dark:bg-gray-600 dark:text-white",placeholder:"24"})}),(0,r.jsx)("td",{className:"p-3",children:(0,r.jsx)("input",{type:"number",step:"0.01",value:e.preco,onChange:a=>updateAnimal(e.id,"preco",a.target.value),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-green-500 dark:bg-gray-600 dark:text-white",placeholder:"5000.00"})}),(0,r.jsx)("td",{className:"p-3 text-center",children:i.length>1&&(0,r.jsx)("button",{onClick:()=>removeRow(e.id),className:"p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded transition-colors",children:(0,r.jsx)(N.Z,{className:"h-4 w-4"})})})]},e.id))})]})})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4 mt-6",children:[(0,r.jsx)("button",{onClick:t,className:"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancelar"}),(0,r.jsx)("button",{onClick:()=>{let e=i.filter(e=>e.serie&&e.rg&&e.sexo);if(0===e.length){alert("Preencha pelo menos um animal com S\xe9rie, RG e Sexo");return}let a=e.map(e=>({id:Date.now()+Math.random(),serie:e.serie,rg:e.rg,brinco:"".concat(e.serie," ").concat(e.rg),sexo:e.sexo,era:e.era,preco:parseFloat(e.preco)||0,raca:getRacaBySerie(e.serie)}));l(a)},className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"\uD83D\uDCE5 Adicionar Animais"})]})]})]})}):null}var C=t(794),A=t(4491),S=t(445);function PauseIcon({title:e,titleId:a,...t},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},t),e?s.createElement("title",{id:a},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"}))}let R=s.forwardRef(PauseIcon);function PlayIcon({title:e,titleId:a,...t},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},t),e?s.createElement("title",{id:a},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}let I=s.forwardRef(PlayIcon);var P=t(5837),E=t(3658);function SalesTimeline(e){let{salesData:a=[],isLive:t=!1}=e,[l,i]=(0,s.useState)(new Date),[d,n]=(0,s.useState)([]),[o,c]=(0,s.useState)(t),[x,m]=(0,s.useState)("today"),g=(0,s.useRef)(null),h=(0,s.useRef)(null);(0,s.useEffect)(()=>{generateTimelineData()},[a,x]),(0,s.useEffect)(()=>(o?h.current=setInterval(()=>{i(new Date),.1>Math.random()&&addNewSale()},1e3):clearInterval(h.current),()=>clearInterval(h.current)),[o]),(0,s.useEffect)(()=>{drawTimeline()},[d,l]);let generateTimelineData=()=>{let e=new Date,t=[],r=new Date(e);r.setHours(8,0,0,0);let s=new Date(e);s.setHours(17,0,0,0);let l=(s-r)/6e4,i=a.length||98;for(let a=0;a<i;a++){let s=Math.floor(Math.random()*l),i=new Date(r.getTime()+6e4*s),d=1,n=i.getHours();n>=9&&n<=11&&(d=3),n>=14&&n<=16&&(d=4),n>=15&&n<=15.5&&(d=5),Math.random()<d/5&&t.push({id:a+1,time:i,animal:"CJCJ ".concat(15e3+a),buyer:"Comprador ".concat(Math.floor(a/5)+1),value:Math.floor(5e4*Math.random())+2e4,type:.1>Math.random()?"FIV":"IA",serie:["CJCJ","BENT","CJCG"][Math.floor(3*Math.random())],status:i<=e?"completed":"pending"})}t.sort((e,a)=>e.time-a.time),n(t)},addNewSale=()=>{let e={id:d.length+1,time:new Date,animal:"CJCJ ".concat(15e3+d.length),buyer:"Comprador ".concat(Math.floor(d.length/5)+1),value:Math.floor(5e4*Math.random())+2e4,type:.1>Math.random()?"FIV":"IA",serie:["CJCJ","BENT","CJCG"][Math.floor(3*Math.random())],status:"completed"};n(a=>[...a,e].sort((e,a)=>e.time-a.time))},drawTimeline=()=>{let e=g.current;if(!e||0===d.length)return;let a=e.getContext("2d"),t=e.width,r=e.height;a.clearRect(0,0,t,r);let s=r-120;a.strokeStyle="#e5e7eb",a.lineWidth=2,a.beginPath(),a.moveTo(60,60),a.lineTo(60,r-60),a.stroke(),a.fillStyle="#6b7280",a.font="12px Arial",a.textAlign="right";for(let e=8;e<=17;e++){let r=60+(e-8)/9*s;a.strokeStyle="#f3f4f6",a.lineWidth=1,a.beginPath(),a.moveTo(55,r),a.lineTo(t-60,r),a.stroke(),a.fillStyle="#6b7280",a.fillText("".concat(e,":00"),50,r+4)}let l=new Date,i=l.getHours()+l.getMinutes()/60;if(d.forEach((e,t)=>{let r=e.time.getHours()+e.time.getMinutes()/60;if(r>=8&&r<=17){let l=60+(r-8)/9*s,d=80+t%10*15,n="FIV"===e.type?"#10b981":"#3b82f6",o="completed"===e.status,c=r>i;a.fillStyle=c?"#d1d5db":n,a.beginPath(),a.arc(d,l,o?6:4,0,2*Math.PI),a.fill(),o&&(a.strokeStyle="#ffffff",a.lineWidth=2,a.stroke()),a.strokeStyle=c?"#d1d5db":n,a.lineWidth=1,a.beginPath(),a.moveTo(60,l),a.lineTo(d-6,l),a.stroke(),t<5&&(a.fillStyle="#1f2937",a.font="10px Arial",a.textAlign="left",a.fillText("".concat(e.animal," - R$ ").concat((e.value/1e3).toFixed(0),"k"),d+10,l-5))}}),i>=8&&i<=17){let e=60+(i-8)/9*s;a.strokeStyle="#ef4444",a.lineWidth=3,a.beginPath(),a.moveTo(50,e),a.lineTo(t-60,e),a.stroke(),a.fillStyle="#ef4444",a.font="bold 12px Arial",a.textAlign="left",a.fillText("AGORA",t-60-50,e-5)}a.fillStyle="#1f2937",a.font="bold 16px Arial",a.textAlign="center",a.fillText("\uD83D\uDCC5 Timeline de Vendas - Sistema",t/2,25),a.font="12px Arial",a.textAlign="left",a.fillStyle="#10b981",a.beginPath(),a.arc(t-150,r-40,6,0,2*Math.PI),a.fill(),a.fillStyle="#1f2937",a.fillText("FIV",t-135,r-35),a.fillStyle="#3b82f6",a.beginPath(),a.arc(t-100,r-40,6,0,2*Math.PI),a.fill(),a.fillStyle="#1f2937",a.fillText("IA",t-85,r-35),a.fillStyle="#d1d5db",a.beginPath(),a.arc(t-50,r-40,6,0,2*Math.PI),a.fill(),a.fillStyle="#1f2937",a.fillText("Pendente",t-35,r-35)},u=d.filter(e=>"completed"===e.status),b=u.reduce((e,a)=>e+a.value,0),p=u.length>0?b/u.length:0,v=u.filter(e=>"FIV"===e.type).length,j=u.filter(e=>"IA"===e.type).length;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(C.Zb,{children:(0,r.jsx)(C.Ol,{children:(0,r.jsxs)(C.ll,{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(S.Z,{className:"h-6 w-6 text-blue-600"}),(0,r.jsx)("span",{children:"Timeline de Vendas em Tempo Real"}),t&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),(0,r.jsx)("span",{className:"text-red-600 font-semibold",children:"AO VIVO"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(A.z,{onClick:()=>c(!o),size:"sm",variant:o?"default":"outline",children:o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(R,{className:"h-4 w-4 mr-2"}),"Pausar"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I,{className:"h-4 w-4 mr-2"}),"Iniciar"]})}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:l.toLocaleTimeString("pt-BR")})]})]})})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsx)(C.Zb,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:(0,r.jsx)(C.aY,{className:"pt-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:u.length}),(0,r.jsx)("div",{className:"text-green-100",children:"Vendas Realizadas"})]}),(0,r.jsx)(P.Z,{className:"h-8 w-8 text-green-200"})]})})}),(0,r.jsx)(C.Zb,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:(0,r.jsx)(C.aY,{className:"pt-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:["R$ ",(b/1e6).toFixed(1),"M"]}),(0,r.jsx)("div",{className:"text-blue-100",children:"Receita Total"})]}),(0,r.jsx)(E.Z,{className:"h-8 w-8 text-blue-200"})]})})}),(0,r.jsx)(C.Zb,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:(0,r.jsx)(C.aY,{className:"pt-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:["R$ ",(p/1e3).toFixed(0),"k"]}),(0,r.jsx)("div",{className:"text-purple-100",children:"Pre\xe7o M\xe9dio"})]}),(0,r.jsx)(f.Z,{className:"h-8 w-8 text-purple-200"})]})})}),(0,r.jsx)(C.Zb,{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:(0,r.jsx)(C.aY,{className:"pt-6",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"text-lg font-bold",children:["FIV: ",v," | IA: ",j]}),(0,r.jsx)("div",{className:"text-orange-100",children:"Distribui\xe7\xe3o"})]})})})]}),(0,r.jsxs)(C.Zb,{children:[(0,r.jsx)(C.Ol,{children:(0,r.jsx)(C.ll,{children:"\uD83D\uDCCA Timeline Visual - 08:00 \xe0s 17:00"})}),(0,r.jsx)(C.aY,{children:(0,r.jsx)("canvas",{ref:g,width:800,height:600,className:"w-full border border-gray-200 dark:border-gray-600 rounded-lg"})})]}),(0,r.jsxs)(C.Zb,{children:[(0,r.jsx)(C.Ol,{children:(0,r.jsx)(C.ll,{children:"\uD83D\uDD50 \xdaltimas Vendas"})}),(0,r.jsx)(C.aY,{children:(0,r.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:u.slice(-10).reverse().map((e,a)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("FIV"===e.type?"bg-green-500":"bg-blue-500")}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-semibold",children:e.animal}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.time.toLocaleTimeString("pt-BR")," - ",e.buyer]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"font-bold text-green-600",children:["R$ ",e.value.toLocaleString("pt-BR")]}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.type})]})]},e.id))})})]})]})}function BIPieChart(e){let{salesData:a,animationProgress:t,pieChartRef:l}=e;(0,s.useEffect)(()=>{drawPieChart()},[a,t]);let drawPieChart=()=>{let e=l.current;if(!e||0===a.length)return;let r=e.getContext("2d"),s=e.width,i=e.height;r.clearRect(0,0,s,i);let d=a.filter(e=>"FIV"===e.tipoCobertura).length,n=a.length-d,o=a.length;if(0===o)return;let c=s/2,x=i/2,m=Math.min(s,i)/3,g="#10b981",h="#3b82f6",u=d/o*2*Math.PI*t,b=n/o*2*Math.PI*t;r.fillStyle=g,r.beginPath(),r.moveTo(c,x),r.arc(c,x,m,-Math.PI/2,-Math.PI/2+u),r.closePath(),r.fill(),r.fillStyle=h,r.beginPath(),r.moveTo(c,x),r.arc(c,x,m,-Math.PI/2+u,-Math.PI/2+u+b),r.closePath(),r.fill(),r.fillStyle="#ffffff",r.beginPath(),r.arc(c,x,.6*m,0,2*Math.PI),r.fill(),r.fillStyle="#1f2937",r.font="bold 24px Arial",r.textAlign="center",r.fillText(o.toString(),c,x-5),r.font="14px Arial",r.fillText("Animais",c,x+15),r.font="14px Arial",r.textAlign="left",r.fillStyle=g,r.fillRect(20,i-60,15,15),r.fillStyle="#1f2937",r.fillText("FIV: ".concat(d," (").concat((d/o*100).toFixed(1),"%)"),45,i-48),r.fillStyle=h,r.fillRect(20,i-35,15,15),r.fillStyle="#1f2937",r.fillText("IA: ".concat(n," (").concat((n/o*100).toFixed(1),"%)"),45,i-23),r.font="bold 16px Arial",r.textAlign="center",r.fillText("\uD83D\uDCCA FIV vs IA",s/2,25)};return(0,r.jsx)("canvas",{ref:l,width:400,height:300,className:"w-full","aria-label":"Gr\xe1fico de pizza FIV vs IA",role:"img"})}function BIChartsVisual(e){let{salesData:a,onSendWhatsApp:t}=e,l=(0,s.useRef)(null),i=(0,s.useRef)(null),d=(0,s.useRef)(null),[n,o]=(0,s.useState)(0);(0,s.useEffect)(()=>{a.length>0&&startAnimation()},[a]);let startAnimation=()=>{o(0);let animate=e=>{let a=Math.min(e/2e3,1);o(a),a<1?requestAnimationFrame(animate):drawCharts()};requestAnimationFrame(animate)},drawCharts=()=>{drawPieChart(),drawBarChart(),drawLineChart()},drawPieChart=()=>{let e=l.current;if(!e||0===a.length)return;let t=e.getContext("2d"),r=e.width,s=e.height;t.clearRect(0,0,r,s);let i=a.filter(e=>"FIV"===e.tipoCobertura).length,d=a.length-i,o=a.length;if(0===o)return;let c=r/2,x=s/2,m=Math.min(r,s)/3,g="#10b981",h="#3b82f6",u=i/o*2*Math.PI*n,b=d/o*2*Math.PI*n;t.fillStyle=g,t.beginPath(),t.moveTo(c,x),t.arc(c,x,m,-Math.PI/2,-Math.PI/2+u),t.closePath(),t.fill(),t.fillStyle=h,t.beginPath(),t.moveTo(c,x),t.arc(c,x,m,-Math.PI/2+u,-Math.PI/2+u+b),t.closePath(),t.fill(),t.fillStyle="#ffffff",t.beginPath(),t.arc(c,x,.6*m,0,2*Math.PI),t.fill(),t.fillStyle="#1f2937",t.font="bold 24px Arial",t.textAlign="center",t.fillText(o.toString(),c,x-5),t.font="14px Arial",t.fillText("Animais",c,x+15),t.font="14px Arial",t.textAlign="left",t.fillStyle=g,t.fillRect(20,s-60,15,15),t.fillStyle="#1f2937",t.fillText("FIV: ".concat(i," (").concat((i/o*100).toFixed(1),"%)"),45,s-48),t.fillStyle=h,t.fillRect(20,s-35,15,15),t.fillStyle="#1f2937",t.fillText("IA: ".concat(d," (").concat((d/o*100).toFixed(1),"%)"),45,s-23),t.font="bold 16px Arial",t.textAlign="center",t.fillText("\uD83D\uDCCA FIV vs IA",r/2,25)},drawBarChart=()=>{let e=i.current;if(!e||0===a.length)return;let t=e.getContext("2d"),r=e.width,s=e.height;t.clearRect(0,0,r,s);let l=r-120,d=s-120,o={};a.forEach(e=>{let a=e.serie||"CJCJ";o[a]=(o[a]||0)+1});let c=Object.keys(o),x=Object.values(o),m=Math.max(...x);if(0===m)return;let g=l/c.length*.7,h=l/c.length*.3,u=["#10b981","#3b82f6","#f59e0b","#ef4444"];c.forEach((e,a)=>{let r=60+a*(l/c.length)+h/2,i=x[a]/m*d*n,o=s-60-i,b=t.createLinearGradient(0,o,0,s-60);b.addColorStop(0,u[a%u.length]),b.addColorStop(1,u[a%u.length]+"80"),t.fillStyle=b,t.fillRect(r,o,g,i),n>.8&&(t.fillStyle="#1f2937",t.font="bold 14px Arial",t.textAlign="center",t.fillText(x[a].toString(),r+g/2,o-10)),t.fillStyle="#6b7280",t.font="12px Arial",t.fillText(e,r+g/2,s-60+20)}),t.strokeStyle="#e5e7eb",t.lineWidth=1,t.beginPath(),t.moveTo(60,s-60),t.lineTo(r-60,s-60),t.stroke(),t.beginPath(),t.moveTo(60,60),t.lineTo(60,s-60),t.stroke(),t.fillStyle="#1f2937",t.font="bold 16px Arial",t.textAlign="center",t.fillText("\uD83D\uDCC8 Vendas por S\xe9rie",r/2,25)},drawLineChart=()=>{let e=d.current;if(!e||0===a.length)return;let t=e.getContext("2d"),r=e.width,s=e.height;t.clearRect(0,0,r,s);let l=r-120,i=s-120,o=[],c=[];for(let e=6;e>=0;e--){let a=new Date;a.setDate(a.getDate()-e),o.push(a.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}));let t=Math.floor(20*Math.random())+5;c.push(t)}let x=Math.max(...c),m=Math.min(...c);if(x===m)return;t.strokeStyle="#f3f4f6",t.lineWidth=1;for(let e=0;e<=5;e++){let a=60+e/5*i;t.beginPath(),t.moveTo(60,a),t.lineTo(r-60,a),t.stroke()}let g=t.createLinearGradient(0,60,0,s-60);g.addColorStop(0,"rgba(16, 185, 129, 0.3)"),g.addColorStop(1,"rgba(16, 185, 129, 0.05)"),t.fillStyle=g,t.beginPath(),t.moveTo(60,s-60),c.forEach((e,a)=>{if(a/c.length<=n){let r=60+a/(c.length-1)*l,d=s-60-(e-m)/(x-m)*i;t.lineTo(r,d)}}),t.lineTo(60+l*n,s-60),t.closePath(),t.fill(),t.strokeStyle="#10b981",t.lineWidth=3,t.beginPath(),c.forEach((e,a)=>{if(a/c.length<=n){let r=60+a/(c.length-1)*l,d=s-60-(e-m)/(x-m)*i;0===a?t.moveTo(r,d):t.lineTo(r,d)}}),t.stroke(),t.fillStyle="#10b981",c.forEach((e,a)=>{if(a/c.length<=n){let r=60+a/(c.length-1)*l,d=s-60-(e-m)/(x-m)*i;t.beginPath(),t.arc(r,d,4,0,2*Math.PI),t.fill()}}),t.fillStyle="#6b7280",t.font="10px Arial",t.textAlign="center",o.forEach((e,a)=>{let r=60+a/(o.length-1)*l;t.fillText(e,r,s-60+35)}),t.fillStyle="#1f2937",t.font="bold 16px Arial",t.textAlign="center",t.fillText("\uD83D\uDCC5 Vendas nos \xdaltimos 7 Dias",r/2,25)};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)(C.Zb,{children:[(0,r.jsx)(C.Ol,{children:(0,r.jsx)(C.ll,{children:"An\xe1lise FIV vs IA"})}),(0,r.jsx)(C.aY,{children:(0,r.jsx)(BIPieChart,{salesData:a,animationProgress:n,pieChartRef:l})})]}),(0,r.jsxs)(C.Zb,{children:[(0,r.jsx)(C.Ol,{children:(0,r.jsx)(C.ll,{children:"Vendas por S\xe9rie"})}),(0,r.jsx)(C.aY,{children:(0,r.jsx)("canvas",{ref:i,width:400,height:300,className:"w-full"})})]})]}),(0,r.jsx)(SalesTimeline,{salesData:a,isLive:!0}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,r.jsx)(A.z,{onClick:()=>t&&t(),className:"bg-green-600 hover:bg-green-700 text-white px-8 py-3 text-lg",children:"\uD83D\uDCF1 Enviar para M\xfaltiplos Contatos"}),(0,r.jsx)(A.z,{onClick:startAnimation,variant:"outline",className:"px-8 py-3 text-lg",children:"\uD83D\uDD04 Recarregar Gr\xe1ficos"})]})]})}var M=t(6522);function CheckIcon({title:e,titleId:a,...t},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},t),e?s.createElement("title",{id:a},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}let T=s.forwardRef(CheckIcon);function PaperAirplaneIcon({title:e,titleId:a,...t},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},t),e?s.createElement("title",{id:a},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}let F=s.forwardRef(PaperAirplaneIcon);function WhatsAppMultiSender(e){let{isOpen:a,onClose:t,reportMessage:l}=e,[i,d]=(0,s.useState)([{id:1,name:"Jo\xe3o Silva",number:"+55 11 99999-1234",selected:!1},{id:2,name:"Maria Santos",number:"+55 16 98888-5678",selected:!1},{id:3,name:"Carlos Mendes",number:"+55 17 97777-9999",selected:!1},{id:4,name:"Ana Costa",number:"+55 31 96666-7890",selected:!1}]),[n,o]=(0,s.useState)({name:"",number:""}),[c,x]=(0,s.useState)(!1),[m,g]=(0,s.useState)(!1),handleToggleContact=e=>{d(i.map(a=>a.id===e?{...a,selected:!a.selected}:a))},handleRemoveContact=e=>{d(i.filter(a=>a.id!==e))},handleSendToSelected=async()=>{let e=i.filter(e=>e.selected);if(0===e.length){alert("Selecione pelo menos um contato para enviar!");return}g(!0);try{let a=e.map(async e=>{let a=await fetch("/api/whatsapp/send-bi",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({number:e.number,message:l,contactName:e.name})});return{contact:e,success:a.ok}}),r=await Promise.all(a),s=r.filter(e=>e.success).length,i=r.length-s;s>0?alert("✅ Relat\xf3rio enviado com sucesso para ".concat(s," contato(s)!").concat(i>0?" (".concat(i," falharam)"):"")):alert("❌ Erro ao enviar para todos os contatos."),s>0&&t()}catch(e){console.error("Erro ao enviar WhatsApp:",e),alert("Erro ao enviar relat\xf3rios via WhatsApp")}finally{g(!1)}};if(!a)return null;let h=i.filter(e=>e.selected).length;return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[70] p-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-green-600 to-blue-600",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(f.Z,{className:"h-8 w-8 text-white"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"\uD83D\uDCF1 Enviar Relat\xf3rio BI"}),(0,r.jsx)("p",{className:"text-green-100",children:"Selecione os contatos para envio"})]})]}),(0,r.jsx)("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors text-white text-2xl font-bold",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(A.z,{onClick:()=>{let e=i.every(e=>e.selected);d(i.map(a=>({...a,selected:!e})))},variant:"outline",size:"sm",children:[(0,r.jsx)(T,{className:"h-4 w-4 mr-2"}),i.every(e=>e.selected)?"Desmarcar Todos":"Selecionar Todos"]}),(0,r.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[h," de ",i.length," selecionados"]})]}),(0,r.jsxs)(A.z,{onClick:()=>x(!c),size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[(0,r.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Novo Contato"]})]}),c&&(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Adicionar Novo Contato"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,r.jsx)(M.I,{placeholder:"Nome do contato",value:n.name,onChange:e=>o({...n,name:e.target.value})}),(0,r.jsx)(M.I,{placeholder:"+55 11 99999-9999",value:n.number,onChange:e=>o({...n,number:e.target.value})})]}),(0,r.jsxs)("div",{className:"flex space-x-2 mt-3",children:[(0,r.jsx)(A.z,{onClick:()=>{if(n.name&&n.number){let e=Math.max(...i.map(e=>e.id))+1;d([...i,{id:e,name:n.name,number:n.number,selected:!0}]),o({name:"",number:""}),x(!1)}},size:"sm",className:"bg-green-600 hover:bg-green-700",children:"Adicionar"}),(0,r.jsx)(A.z,{onClick:()=>x(!1),variant:"outline",size:"sm",children:"Cancelar"})]})]}),(0,r.jsx)("div",{className:"space-y-3",children:i.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border-2 transition-all cursor-pointer ".concat(e.selected?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300"),onClick:()=>handleToggleContact(e.id),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-6 h-6 rounded-full border-2 flex items-center justify-center ".concat(e.selected?"border-green-500 bg-green-500":"border-gray-300"),children:e.selected&&(0,r.jsx)(T,{className:"h-4 w-4 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-semibold text-gray-900 dark:text-white",children:e.name}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.number})]})]}),(0,r.jsx)("button",{onClick:a=>{a.stopPropagation(),handleRemoveContact(e.id)},className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:(0,r.jsx)(N.Z,{className:"h-4 w-4"})})]},e.id))}),(0,r.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"\uD83D\uDCCB Preview do Relat\xf3rio"}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 max-h-32 overflow-y-auto",children:(0,r.jsxs)("pre",{className:"whitespace-pre-wrap font-mono text-xs",children:[null==l?void 0:l.substring(0,300),"..."]})})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:[(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:h>0?(0,r.jsxs)("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:["✅ ",h," contato(s) selecionado(s)"]}):(0,r.jsx)("span",{children:"Nenhum contato selecionado"})}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)(A.z,{onClick:t,variant:"outline",children:"Cancelar"}),(0,r.jsxs)(A.z,{onClick:handleSendToSelected,disabled:0===h||m,className:"bg-green-600 hover:bg-green-700",children:[(0,r.jsx)(F,{className:"h-4 w-4 mr-2"}),m?"Enviando...":"Enviar para ".concat(h," contato(s)")]})]})]})]})})}function AuctionCalculator(e){let{currentSales:a=[]}=e,[t,l]=(0,s.useState)(""),[i,d]=(0,s.useState)(30),[n,o]=(0,s.useState)(20),c=a.reduce((e,a)=>e+(a.value||0),0),x=t?parseFloat(t)||0:c,m=x*(1+n/100),g=m/i,handleQuickValue=e=>{l(e.toString())};return(0,r.jsxs)(C.Zb,{className:"bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 border-2 border-green-200 dark:border-green-600",children:[(0,r.jsx)(C.Ol,{children:(0,r.jsxs)(C.ll,{className:"text-green-700 dark:text-green-300 flex items-center justify-between",children:[(0,r.jsx)("span",{children:"\uD83E\uDDEE Calculadora do Leil\xe3o"}),(0,r.jsxs)("div",{className:"text-sm font-normal text-gray-600 dark:text-gray-400",children:["Parcelamento em ",i,"x"]})]})}),(0,r.jsxs)(C.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Valor para C\xe1lculo"}),(0,r.jsx)(M.I,{type:"number",placeholder:"Digite um valor ou use vendas reais",value:t,onChange:e=>l(e.target.value),className:"text-lg font-semibold"}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Deixe vazio para usar vendas reais: R$ ",c.toLocaleString("pt-BR")]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Parcelas"}),(0,r.jsxs)("select",{value:i,onChange:e=>d(parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white",children:[(0,r.jsx)("option",{value:12,children:"12x"}),(0,r.jsx)("option",{value:24,children:"24x"}),(0,r.jsx)("option",{value:30,children:"30x"}),(0,r.jsx)("option",{value:36,children:"36x"}),(0,r.jsx)("option",{value:48,children:"48x"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Juros (%)"}),(0,r.jsx)(M.I,{type:"number",value:n,onChange:e=>o(parseFloat(e.target.value)||0),min:"0",max:"100",step:"0.1"})]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Valores r\xe1pidos:"}),[1e4,25e3,45e3,5e4,75e3,1e5].map(e=>(0,r.jsxs)(A.z,{onClick:()=>handleQuickValue(e),size:"sm",variant:"outline",className:"text-xs",children:["R$ ",(e/1e3).toFixed(0),"k"]},e))]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"text-center p-6 bg-white dark:bg-gray-800 rounded-xl border-2 border-green-200 dark:border-green-600",children:[(0,r.jsx)("div",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"\uD83D\uDCB0 Valor \xe0 Vista"}),(0,r.jsxs)("div",{className:"text-3xl font-bold text-green-600",children:["R$ ",x.toLocaleString("pt-BR")]}),(0,r.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Sem juros"})]}),(0,r.jsxs)("div",{className:"text-center p-6 bg-white dark:bg-gray-800 rounded-xl border-2 border-blue-200 dark:border-blue-600",children:[(0,r.jsx)("div",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"\uD83D\uDCCA Valor Parcelado"}),(0,r.jsxs)("div",{className:"text-3xl font-bold text-blue-600",children:["R$ ",m.toLocaleString("pt-BR")]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["+",n,"% juros"]})]}),(0,r.jsxs)("div",{className:"text-center p-6 bg-white dark:bg-gray-800 rounded-xl border-2 border-purple-200 dark:border-purple-600",children:[(0,r.jsx)("div",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"\uD83D\uDCC5 Parcela Mensal"}),(0,r.jsxs)("div",{className:"text-3xl font-bold text-purple-600",children:["R$ ",g.toLocaleString("pt-BR")]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[i," parcelas"]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"\uD83D\uDCCB Detalhamento do Financiamento"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Valor Principal:"}),(0,r.jsxs)("div",{className:"font-semibold",children:["R$ ",x.toLocaleString("pt-BR")]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Juros Total:"}),(0,r.jsxs)("div",{className:"font-semibold text-red-600",children:["R$ ",(m-x).toLocaleString("pt-BR")]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Taxa Mensal:"}),(0,r.jsxs)("div",{className:"font-semibold",children:[(n/i).toFixed(2),"%"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Pago:"}),(0,r.jsxs)("div",{className:"font-semibold text-blue-600",children:["R$ ",m.toLocaleString("pt-BR")]})]})]})]}),x>0&&(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"\uD83D\uDCCA Simula\xe7\xe3o de Parcelas"}),(0,r.jsx)("div",{className:"max-h-32 overflow-y-auto",children:(0,r.jsxs)("div",{className:"grid grid-cols-6 gap-2 text-xs",children:[Array.from({length:Math.min(i,12)},(e,a)=>(0,r.jsxs)("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[(0,r.jsxs)("div",{className:"font-semibold",children:[a+1,"\xaa"]}),(0,r.jsxs)("div",{className:"text-green-600",children:["R$ ",g.toLocaleString("pt-BR")]})]},a)),i>12&&(0,r.jsx)("div",{className:"text-center p-2 bg-gray-100 dark:bg-gray-600 rounded col-span-6",children:(0,r.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["... e mais ",i-12," parcelas de R$ ",g.toLocaleString("pt-BR")]})})]})})]})]})]})}function RealTimeSalesTracker(){let[e,a]=(0,s.useState)([]),[t,l]=(0,s.useState)(0),[i,d]=(0,s.useState)(0),[n,o]=(0,s.useState)(new Date);(0,s.useEffect)(()=>{let e=setInterval(async()=>{await loadRealSales()},2e3);return loadRealSales(),()=>clearInterval(e)},[]);let loadRealSales=async()=>{try{let e=await fetch("/api/sales-list"),t=await e.json();if(t.length>0){let e=t.map(e=>{var a;return{id:e.id,animal:(null===(a=e.animal)||void 0===a?void 0:a.brinco)||e.animalId,value:parseFloat(e.valorVenda)||parseFloat(e.valor)||0,time:new Date(e.dataVenda||e.createdAt),buyer:e.nomeComprador||"Comprador",status:"completed"}}),r=e.reduce((e,a)=>e+a.value,0),s=e.length>0?r/e.length:0;a(e),l(r),d(s),o(new Date),console.log("\uD83D\uDCCA ".concat(e.length," vendas reais carregadas. Total: R$ ").concat(r.toLocaleString("pt-BR")))}}catch(e){console.error("Erro ao carregar vendas reais:",e)}};return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsx)(C.Zb,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:(0,r.jsx)(C.aY,{className:"pt-6",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-bold",children:e.length}),(0,r.jsx)("div",{className:"text-green-100",children:"Vendas Reais"})]})})}),(0,r.jsx)(C.Zb,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:(0,r.jsx)(C.aY,{className:"pt-6",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:["R$ ",(t/1e6).toFixed(1),"M"]}),(0,r.jsx)("div",{className:"text-blue-100",children:"Receita Total"})]})})}),(0,r.jsx)(C.Zb,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:(0,r.jsx)(C.aY,{className:"pt-6",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:["R$ ",(i/1e3).toFixed(0),"k"]}),(0,r.jsx)("div",{className:"text-purple-100",children:"Pre\xe7o M\xe9dio"})]})})}),(0,r.jsx)(C.Zb,{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:(0,r.jsx)(C.aY,{className:"pt-6",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-lg font-bold",children:n.toLocaleTimeString("pt-BR")}),(0,r.jsx)("div",{className:"text-orange-100",children:"\xdaltima Atualiza\xe7\xe3o"})]})})})]}),(0,r.jsxs)(C.Zb,{children:[(0,r.jsx)(C.Ol,{children:(0,r.jsxs)(C.ll,{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{children:"\uD83D\uDCB0 Vendas Registradas em Tempo Real"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),(0,r.jsx)("span",{className:"text-green-600 font-semibold",children:"MONITORANDO"})]})]})}),(0,r.jsx)(C.aY,{children:(0,r.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:0===e.length?(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,r.jsx)("div",{className:"text-4xl mb-2",children:"⏳"}),(0,r.jsx)("div",{children:"Aguardando vendas reais..."}),(0,r.jsx)("div",{className:"text-sm mt-2",children:"As vendas aparecer\xe3o aqui automaticamente quando voc\xea registr\xe1-las"})]}):e.slice().reverse().map((e,a)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border-2 transition-all ".concat(0===a?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-600"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded-full"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-bold text-lg",children:e.animal}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.time.toLocaleTimeString("pt-BR")," - ",e.buyer]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["R$ ",e.value.toLocaleString("pt-BR")]}),0===a&&(0,r.jsx)("div",{className:"text-sm text-green-500 font-semibold",children:"✨ NOVA VENDA"})]})]},e.id))})})]}),(0,r.jsx)(AuctionCalculator,{currentSales:e})]})}function LiveSaleEntry(e){let{onSaleRegistered:a}=e,[t,l]=(0,s.useState)({animal:"",buyer:"",value:"",notes:""}),[i,d]=(0,s.useState)([]),[o,c]=(0,s.useState)(!1),[x,m]=(0,s.useState)(!1);(0,s.useEffect)(()=>{loadRecentSales()},[]);let loadRecentSales=async()=>{try{let e=await fetch("/api/sales-list"),a=await e.json(),t=a.slice(-5).reverse().map(e=>{var a;return{id:e.id,animal:(null===(a=e.animal)||void 0===a?void 0:a.brinco)||e.animalId,buyer:e.nomeComprador||"Comprador",value:parseFloat(e.valorVenda)||0,time:new Date(e.dataVenda||e.createdAt)}});d(t)}catch(e){console.error("Erro ao carregar vendas recentes:",e)}},handleQuickValue=e=>{l(a=>({...a,value:e.toString()}))},handleSubmit=async e=>{if(e.preventDefault(),!t.animal||!t.value){alert("Animal e valor s\xe3o obrigat\xf3rios!");return}c(!0);try{let e=await fetch("/api/animals-list"),r=await e.json(),s=r.find(e=>{var a;return(null===(a=e.brinco)||void 0===a?void 0:a.toLowerCase().includes(t.animal.toLowerCase()))||e.id===t.animal});if(!s){alert("Animal ".concat(t.animal," n\xe3o encontrado!")),c(!1);return}let i=await fetch("/api/sales-simple",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({animalId:s.id,valorVenda:parseFloat(t.value),nomeComprador:t.buyer||"Comprador do Leil\xe3o",dataVenda:new Date().toISOString(),observacoes:t.notes||"Venda registrada em tempo real - ".concat(new Date().toLocaleTimeString("pt-BR"))})});if(i.ok)await fetch("/api/animals/".concat(s.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"VENDIDO",valorVenda:parseFloat(t.value),dataVenda:new Date().toISOString()})}),l({animal:"",buyer:"",value:"",notes:""}),m(!0),setTimeout(()=>m(!1),3e3),await loadRecentSales(),a&&a({animal:s.brinco,buyer:t.buyer||"Comprador do Leil\xe3o",value:parseFloat(t.value),time:new Date}),console.log("✅ Venda registrada: ".concat(s.brinco," por R$ ").concat(t.value));else throw Error("Erro ao registrar venda")}catch(e){console.error("Erro ao registrar venda:",e),alert("Erro ao registrar venda: "+e.message)}finally{c(!1)}},handleQuickAnimal=e=>{l(a=>({...a,animal:e}))};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(C.Zb,{className:"bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 border-2 border-green-300 dark:border-green-600",children:[(0,r.jsx)(C.Ol,{children:(0,r.jsxs)(C.ll,{className:"text-green-700 dark:text-green-300 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(j.Z,{className:"h-6 w-6 mr-2"}),"\uD83C\uDFDB️ Registrar Venda em Tempo Real"]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),(0,r.jsx)("span",{className:"text-green-600 font-semibold text-sm",children:"AO VIVO"})]})]})}),(0,r.jsxs)(C.aY,{children:[(0,r.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uD83D\uDC04 Animal (Brinco/ID) *"}),(0,r.jsx)(M.I,{type:"text",placeholder:"Ex: CJCJ 15556, 15556, etc.",value:t.animal,onChange:e=>l(a=>({...a,animal:e.target.value})),className:"text-lg font-semibold",required:!0}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"R\xe1pido:"}),["15556","16276","16286","16283","15525"].map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>handleQuickAnimal("CJCJ ".concat(e)),className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 rounded",children:e},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uD83D\uDC64 Comprador"}),(0,r.jsx)(M.I,{type:"text",placeholder:"Nome do comprador (opcional)",value:t.buyer,onChange:e=>l(a=>({...a,buyer:e.target.value}))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uD83D\uDCB0 Valor da Venda (R$) *"}),(0,r.jsx)(M.I,{type:"number",placeholder:"45000",value:t.value,onChange:e=>l(a=>({...a,value:e.target.value})),className:"text-2xl font-bold text-green-600",required:!0}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"Valores r\xe1pidos:"}),[25e3,3e4,35e3,4e4,45e3,5e4,6e4,75e3].map(e=>(0,r.jsxs)("button",{type:"button",onClick:()=>handleQuickValue(e),className:"px-3 py-1 text-xs bg-green-100 hover:bg-green-200 dark:bg-green-900 dark:hover:bg-green-800 text-green-700 dark:text-green-300 rounded-full",children:["R$ ",(e/1e3).toFixed(0),"k"]},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uD83D\uDCDD Observa\xe7\xf5es"}),(0,r.jsx)(M.I,{type:"text",placeholder:"Observa\xe7\xf5es sobre a venda (opcional)",value:t.notes,onChange:e=>l(a=>({...a,notes:e.target.value}))})]}),(0,r.jsx)(A.z,{type:"submit",disabled:o||!t.animal||!t.value,className:"w-full bg-green-600 hover:bg-green-700 text-white py-3 text-lg font-semibold",children:o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S.Z,{className:"h-5 w-5 mr-2 animate-spin"}),"Registrando Venda..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P.Z,{className:"h-5 w-5 mr-2"}),"\uD83C\uDFDB️ Registrar Venda"]})})]}),x&&(0,r.jsxs)("div",{className:"mt-4 p-3 bg-green-100 dark:bg-green-900/20 border border-green-300 dark:border-green-600 rounded-lg flex items-center",children:[(0,r.jsx)(n.Z,{className:"h-5 w-5 text-green-600 mr-2"}),(0,r.jsx)("span",{className:"text-green-700 dark:text-green-300 font-semibold",children:"✅ Venda registrada com sucesso!"})]})]})]}),(0,r.jsxs)(C.Zb,{children:[(0,r.jsx)(C.Ol,{children:(0,r.jsxs)(C.ll,{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{children:"\uD83D\uDD50 \xdaltimas Vendas Registradas"}),(0,r.jsx)(A.z,{onClick:loadRecentSales,size:"sm",variant:"outline",children:"\uD83D\uDD04 Atualizar"})]})}),(0,r.jsx)(C.aY,{children:(0,r.jsx)("div",{className:"space-y-3",children:0===i.length?(0,r.jsxs)("div",{className:"text-center py-6 text-gray-500",children:[(0,r.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCDD"}),(0,r.jsx)("div",{children:"Nenhuma venda registrada ainda"}),(0,r.jsx)("div",{className:"text-sm mt-1",children:"Use o formul\xe1rio acima para registrar a primeira venda"})]}):i.map((e,a)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border-2 transition-all ".concat(0===a?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-600"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(0===a?"bg-green-500 animate-pulse":"bg-gray-400")}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-bold text-lg",children:e.animal}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.time.toLocaleTimeString("pt-BR")," - ",e.buyer]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-xl font-bold text-green-600",children:["R$ ",e.value.toLocaleString("pt-BR")]}),0===a&&(0,r.jsx)("div",{className:"text-xs text-green-500 font-semibold",children:"✨ REC\xc9M ADICIONADA"})]})]},e.id))})})]}),(0,r.jsx)(C.Zb,{className:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-600",children:(0,r.jsxs)(C.aY,{className:"pt-6",children:[(0,r.jsx)("h4",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-3",children:"\uD83D\uDCCB Como Usar - Registro R\xe1pido"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-700 dark:text-blue-300",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"1. Digite o Animal:"}),(0,r.jsxs)("ul",{className:"ml-4 mt-1 space-y-1",children:[(0,r.jsx)("li",{children:"• CJCJ 15556"}),(0,r.jsx)("li",{children:"• Apenas 15556"}),(0,r.jsx)("li",{children:"• Use bot\xf5es r\xe1pidos"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"2. Valor da Venda:"}),(0,r.jsxs)("ul",{className:"ml-4 mt-1 space-y-1",children:[(0,r.jsx)("li",{children:"• Digite: 45000"}),(0,r.jsx)("li",{children:"• Use bot\xf5es r\xe1pidos"}),(0,r.jsx)("li",{children:"• Sem pontos ou v\xedrgulas"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"3. Comprador (Opcional):"}),(0,r.jsxs)("ul",{className:"ml-4 mt-1 space-y-1",children:[(0,r.jsx)("li",{children:"• Nome do comprador"}),(0,r.jsx)("li",{children:"• Deixe vazio se n\xe3o souber"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"4. Registrar:"}),(0,r.jsxs)("ul",{className:"ml-4 mt-1 space-y-1",children:[(0,r.jsx)("li",{children:'• Clique "Registrar Venda"'}),(0,r.jsx)("li",{children:"• Aparece nas vendas recentes"}),(0,r.jsx)("li",{children:"• Atualiza timeline automaticamente"})]})]})]})]})})]})}function LiveSalesTimeline(e){let{isOpen:a,onClose:t}=e,[l,i]=(0,s.useState)(!0),[d,n]=(0,s.useState)([]);(0,s.useEffect)(()=>{let e;return loadSalesData(),l&&(e=setInterval(()=>{loadSalesData()},5e3)),()=>{e&&clearInterval(e)}},[l]);let loadSalesData=async()=>{try{console.log("\uD83D\uDD04 Carregando dados reais de vendas...");let e=await fetch("/api/sales-list"),a=await e.json();if(console.log("\uD83D\uDCCA Vendas encontradas:",a.length),a.length>0){let e=a.map((e,a)=>{var t,r,s;let l=e.dataVenda?new Date(e.dataVenda):new Date;return{id:e.id||a+1,time:l,animal:(null===(t=e.animal)||void 0===t?void 0:t.brinco)||e.animalId||"CJCJ ".concat(15e3+a),buyer:e.nomeComprador||e.buyer||"Comprador ".concat(a+1),value:parseFloat(e.valorVenda)||parseFloat(e.valor)||0,type:(null===(r=e.animal)||void 0===r?void 0:r.serie)==="FIV"||.15>Math.random()?"FIV":"IA",serie:(null===(s=e.animal)||void 0===s?void 0:s.serie)||"CJCJ",status:"completed",realSale:!0}});console.log("✅ Timeline com dados reais:",e.length),n(e)}else console.log("⚠️ Nenhuma venda real encontrada, usando dados de exemplo"),n([])}catch(e){console.error("❌ Erro ao carregar vendas reais:",e),n([])}};return a?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-7xl w-full max-h-[95vh] overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-600 to-green-600",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(S.Z,{className:"h-8 w-8 text-white"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"\uD83D\uDCC5 Timeline de Vendas - Sistema"}),(0,r.jsx)("p",{className:"text-blue-100",children:"Acompanhe as vendas em tempo real"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(A.z,{onClick:()=>i(!l),size:"sm",className:"".concat(l?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"," text-white"),children:l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(R,{className:"h-4 w-4 mr-2"}),"Pausar Live"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I,{className:"h-4 w-4 mr-2"}),"Iniciar Live"]})}),l&&(0,r.jsxs)("div",{className:"flex items-center space-x-2 bg-red-600 px-3 py-1 rounded-full",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),(0,r.jsx)("span",{className:"text-white text-sm font-semibold",children:"AO VIVO"})]}),(0,r.jsx)("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors text-white text-2xl font-bold",children:"\xd7"})]})]}),(0,r.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(95vh-120px)]",children:[(0,r.jsx)(LiveSaleEntry,{onSaleRegistered:e=>{console.log("Nova venda registrada:",e),setTimeout(()=>{loadSalesData()},1e3)}}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)(RealTimeSalesTracker,{})}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)(SalesTimeline,{salesData:d,isLive:l})})]})]})}):null}function Dashboard(){let[e,a]=(0,s.useState)(!1),[t,d]=(0,s.useState)(!1),[n,o]=(0,s.useState)(!1),[c,x]=(0,s.useState)(!1),[m,g]=(0,s.useState)(!1),[h,u]=(0,s.useState)(!1);(0,l.useRouter)();let b=[];return(0,r.jsxs)(i.Z,{children:[(0,r.jsxs)("div",{className:"mb-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 max-w-6xl mx-auto",children:[(0,r.jsxs)("button",{onClick:()=>o(!0),className:"px-6 py-4 bg-gradient-to-r from-emerald-600 to-green-600 text-white rounded-xl hover:from-emerald-700 hover:to-green-700 transition-all duration-300 flex items-center font-bold text-lg shadow-2xl transform hover:scale-105",children:[(0,r.jsx)(f.Z,{className:"h-6 w-6 mr-3"}),"\uD83D\uDC04 CADASTRO DE ANIMAIS"]}),(0,r.jsxs)("button",{onClick:()=>x(!0),className:"px-6 py-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all duration-300 flex items-center font-bold text-lg shadow-2xl transform hover:scale-105",children:[(0,r.jsx)(E.Z,{className:"h-6 w-6 mr-3"}),"\uD83D\uDCCA BI ANALYTICS"]}),(0,r.jsxs)("button",{onClick:()=>u(!0),className:"px-6 py-4 bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-xl hover:from-blue-700 hover:to-cyan-700 transition-all duration-300 flex items-center font-bold text-lg shadow-2xl transform hover:scale-105",children:[(0,r.jsx)(S.Z,{className:"h-6 w-6 mr-3"}),"\uD83D\uDCC5 TIMELINE VENDAS"]}),(0,r.jsxs)("button",{onClick:()=>d(!0),className:"px-6 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 flex items-center font-bold text-lg shadow-2xl transform hover:scale-105",children:[(0,r.jsx)(P.Z,{className:"h-6 w-6 mr-3"}),"\uD83D\uDCCB CRIAR NOTA FISCAL"]})]}),(0,r.jsx)(ModernDashboard,{}),(0,r.jsx)(v.Z,{isOpen:e,onClose:()=>a(!1),onSalesComplete:()=>{console.log("Vendas do leil\xe3o completadas!")}}),(0,r.jsx)(DirectInvoiceManager,{isOpen:t,onClose:()=>d(!1)}),(0,r.jsx)(SimpleAnimalManager,{isOpen:n,onClose:()=>o(!1)}),c&&(0,r.jsx)(()=>(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-7xl w-full max-h-[95vh] overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-purple-600 to-pink-600",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(E.Z,{className:"h-8 w-8 text-white"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"\uD83D\uDCCA BI Analytics - Sistema de Vendas"}),(0,r.jsx)("p",{className:"text-purple-100",children:"Gr\xe1ficos visuais e an\xe1lises avan\xe7adas"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"\uD83D\uDCF1 Enviar WhatsApp"}),(0,r.jsx)("button",{onClick:()=>x(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors text-white text-2xl font-bold",children:"\xd7"})]})]}),(0,r.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(95vh-120px)]",children:(0,r.jsx)(BIChartsVisual,{salesData:b,onSendWhatsApp:()=>g(!0)})})]})}),{}),(0,r.jsx)(LiveSalesTimeline,{isOpen:h,onClose:()=>u(!1)}),(0,r.jsx)(WhatsAppMultiSender,{isOpen:m,onClose:()=>g(!1),reportMessage:"\n\uD83D\uDC04 *RELAT\xd3RIO BI - VENDAS*\n\n\uD83D\uDCCA *RESUMO GERAL*\n• Total de Animais: 98\n• Animais Vendidos: 98\n• Taxa de Venda: 100.0%\n• Receita Total: R$ 2.850.000\n• Pre\xe7o M\xe9dio: R$ 29.082\n\n\uD83D\uDCC8 *AN\xc1LISE FIV vs IA*\n• FIV: 3 animais - M\xe9dia: R$ 35.000\n• IA: 95 animais - M\xe9dia: R$ 28.500\n\n\uD83C\uDFC6 *TOP TOUROS (Mais Filhos)*\n• Dados reais ser\xe3o carregados da API\n• Sistema limpo de dados mockados\n\n\uD83D\uDCC5 *CRONOGRAMA*\n• 08:00 - Abertura\n• 09:00 - In\xedcio dos Lances\n• 15:00 - Animais FIV\n• 17:00 - Encerramento\n\n\uD83D\uDCCA *GR\xc1FICOS INCLUSOS*\n• \uD83E\uDD67 An\xe1lise FIV vs IA\n• \uD83D\uDCCA Vendas por S\xe9rie\n• \uD83D\uDCC8 Timeline dos \xdaltimos 7 Dias\n\n---\n\uD83E\uDD16 Beef Sync - Gest\xe3o Bovina Inteligente \uD83D\uDC04\n    ".trim()})]})}},2807:function(e,a,t){"use strict";t.d(a,{X:function(){return r}});let r={invites:[],async getInvites(e){await this.delay(500);let a=localStorage.getItem("beef_sync_invites");return a&&(this.invites=JSON.parse(a)),this.invites.filter(a=>a.invitedBy===e)},async sendInvite(e){await this.delay(1e3);let a={id:Date.now(),...e,status:"pending",createdAt:new Date().toISOString(),inviteLink:this.generateInviteLink(),whatsappMessage:this.generateWhatsAppMessage(e)};this.invites.push(a),localStorage.setItem("beef_sync_invites",JSON.stringify(this.invites));try{await this.sendWhatsAppInvite(a)}catch(e){console.warn("Envio via WhatsApp n\xe3o configurado:",e.message)}return a},async revokeInvite(e){await this.delay(300);let a=this.invites.find(a=>a.id===e);return a&&(a.status="revoked",a.revokedAt=new Date().toISOString()),a},async acceptInvite(e){await this.delay(500);let a=this.invites.find(a=>a.inviteLink.includes(e));if(a&&"pending"===a.status)return a.status="accepted",a.acceptedAt=new Date().toISOString(),a.lastSeen=new Date().toISOString(),a;throw Error("Convite inv\xe1lido ou expirado")},generateInviteLink(){let e=Math.random().toString(36).substring(2,15);return"".concat(window.location.origin,"/invite/").concat(e)},generateWhatsAppMessage(e){let a="\uD83D\uDC04 *Beef Sync - Convite Especial*\n\nOl\xe1 ".concat(e.name,"! \uD83D\uDC4B\n\nVoc\xea foi convidado para acompanhar em tempo real as vendas de gado e resultados do mercado!\n\n\uD83C\uDFAF *O que voc\xea pode fazer:*\n").concat(e.permissions.includes("view_sales")?"\uD83D\uDCB0 Ver vendas em tempo real\n":"").concat(e.permissions.includes("view_rankings")?"\uD83C\uDFC6 Acompanhar rankings e compara\xe7\xf5es\n":"").concat(e.permissions.includes("view_analytics")?"\uD83D\uDCCA Ver an\xe1lises e relat\xf3rios\n":"").concat(e.permissions.includes("receive_alerts")?"\uD83D\uDD14 Receber alertas de oportunidades\n":"","\n\n\uD83D\uDCF1 *Acesse agora:*\n").concat(this.generateInviteLink(),"\n\n⏰ Este convite expira em 7 dias.\n\n*Beef Sync* - Gest\xe3o Bovina Inteligente \uD83D\uDE80");return encodeURIComponent(a)},async sendWhatsAppInvite(e){let a="https://wa.me/".concat(e.phone.replace(/\D/g,""),"?text=").concat(e.whatsappMessage);console.log("\uD83D\uDCF1 Link do WhatsApp gerado:",a),window.open(a,"_blank"),setTimeout(()=>{console.log("✅ WhatsApp aberto para ".concat(e.name))},1e3)},async getPublicDashboard(e){await this.delay(800);try{return{farmName:"Sua Fazenda",owner:"Propriet\xe1rio",totalAnimals:0,recentSales:[],rankings:{bestPerformers:[],byCategory:{}},marketComparison:{aboveMarket:0,atMarket:0,belowMarket:0,avgPremium:0},liveUpdates:[]}}catch(e){throw Error("Erro ao carregar dados do dashboard")}},delay:e=>new Promise(a=>setTimeout(a,e))}},9989:function(e,a,t){"use strict";var r=t(7294);function ArrowTrendingDownIcon({title:e,titleId:a,...t},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6 9 12.75l4.286-4.286a11.948 11.948 0 0 1 4.306 6.43l.776 2.898m0 0 3.182-5.511m-3.182 5.51-5.511-3.181"}))}let s=r.forwardRef(ArrowTrendingDownIcon);a.Z=s},4055:function(e,a,t){"use strict";var r=t(7294);function ArrowTrendingUpIcon({title:e,titleId:a,...t},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}let s=r.forwardRef(ArrowTrendingUpIcon);a.Z=s},1113:function(e,a,t){"use strict";var r=t(7294);function UserIcon({title:e,titleId:a,...t},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}let s=r.forwardRef(UserIcon);a.Z=s}},function(e){e.O(0,[869,68,577,787,441,636,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);