(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[394],{5653:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/animals",function(){return t(3080)}])},3080:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return Animals}});var s=t(5893),r=t(7294),l=t(1163),i=t(7787),o=t(36),n=t(9927),d=t(50),c=t(6244);function AnimalImporter(e){let{isOpen:a,onClose:t,onImport:l}=e,[i,o]=(0,r.useState)(""),[x,m]=(0,r.useState)(null),[g,u]=(0,r.useState)(!1),[h,p]=(0,r.useState)("excel"),calcularIdade=e=>{let a=new Date(e),t=new Date;return Math.ceil(Math.abs(t-a)/2630016e3)},convertDateToISO=e=>{if(!e)return null;let a=e.toString().trim();if(a.match(/^\d{4}-\d{2}-\d{2}$/))return a;let t=a.split("/");if(3===t.length){let[a,s,r]=t.map(e=>e.trim());if(2===r.length){let e=new Date().getFullYear(),a=100*Math.floor(e/100),t=parseInt(r);r=t>e%100+10?(a-100+t).toString():(a+t).toString()}let l=parseInt(a),i=parseInt(s),o=parseInt(r);if(isNaN(l)||isNaN(i)||isNaN(o))throw Error("Formato de data inv\xe1lido: ".concat(e));if(l<1||l>31||i<1||i>12)throw Error("Data inv\xe1lida: ".concat(e));return"".concat(r,"-").concat(s.padStart(2,"0"),"-").concat(a.padStart(2,"0"))}throw Error("Formato de data inv\xe1lido: ".concat(e))},downloadTemplate=()=>{let e=new Blob(["Serie,RG,Lote,LOCAL,PESO,CE,Sexo,iABC7,DECA,MGTe,TOP,NASC,Meses,Nome do Pai,Av\xf4 Materno\nCJCJ,15628,22,3,913,42,M,24.62,1,22.1,8,09/08/23,24,REM HERMOSO FIV GEN,B2887 DA S.NICE\nCJCJ,15562,34,3,830,41,M,24.96,1,19.2,14,03/07/23,25,MAIAIO DA S.NICE,CJ SANT ANNA POI 7687"],{type:"text/csv"}),a=window.URL.createObjectURL(e),t=document.createElement("a");t.href=a,t.download="template_importacao_cjcj.csv",t.click(),window.URL.revokeObjectURL(a)};return a?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(n.Z,{className:"h-8 w-8 text-blue-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Importar Animais CJCJ"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Importe m\xfaltiplos animais CJCJ de uma vez"})]})]}),(0,s.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl font-bold",children:"\xd7"})]}),(0,s.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Escolha o M\xe9todo de Importa\xe7\xe3o"}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"radio",value:"excel",checked:"excel"===h,onChange:e=>p(e.target.value),className:"mr-2"}),(0,s.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"\uD83D\uDCCA Excel/Planilha (Recomendado)"})]}),(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"radio",value:"csv",checked:"csv"===h,onChange:e=>p(e.target.value),className:"mr-2"}),(0,s.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"CSV"})]}),(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"radio",value:"manual",checked:"manual"===h,onChange:e=>p(e.target.value),className:"mr-2"}),(0,s.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Manual"})]})]})]}),(0,s.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-semibold text-blue-900 dark:text-blue-200 mb-2",children:"\uD83D\uDCCB Instru\xe7\xf5es de Importa\xe7\xe3o"}),"excel"===h?(0,s.jsxs)("div",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-300",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"\uD83D\uDCCA Formato Excel:"})," Cole os dados diretamente do Excel (com TAB ou v\xedrgulas)"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Colunas esperadas:"})," Serie, RG, Lote, LOCAL, PESO, CE, Sexo, iABC7, DECA, MGTe, TOP, NASC, Meses, Nome do Pai, Av\xf4 Materno"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Exemplo:"})," CJCJ 15628 22 3 913 42 M 24,62 1 22,1 8 09/08/23 24 REM HERMOSO FIV GEN B2887 DA S.NICE"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"\uD83D\uDCA1 Dica:"})," Selecione as linhas no Excel e cole aqui (Ctrl+C → Ctrl+V)"]}),(0,s.jsx)("button",{onClick:downloadTemplate,className:"mt-2 px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"\uD83D\uDCE5 Baixar Template Excel"})]}):"csv"===h?(0,s.jsxs)("div",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-300",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Formato CSV:"})," Use v\xedrgulas para separar os campos"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Cabe\xe7alho:"})," ","Serie,RG,Nascimento,Pai,AvoMaterno,Sexo"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Exemplo:"})," CJCJ,123456,2022-01-15,CJCJ 100001,CJCJ 100002,Macho"]}),(0,s.jsx)("button",{onClick:downloadTemplate,className:"mt-2 px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"\uD83D\uDCE5 Baixar Template CSV"})]}):(0,s.jsxs)("div",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-300",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Formato Manual:"})," Use | (pipe) para separar os campos"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Ordem:"})," ","Serie|RG|Nascimento|Pai|AvoMaterno|Sexo"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Exemplo:"})," CJCJ|123456|2022-01-15|CJCJ 100001|CJCJ 100002|Macho"]}),(0,s.jsx)("p",{children:(0,s.jsx)("strong",{children:"Uma linha por animal"})})]}),(0,s.jsxs)("div",{className:"mt-3 text-sm text-blue-800 dark:text-blue-300",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"\uD83D\uDCC5 Data:"})," Use formato YYYY-MM-DD (ex: 2022-01-15)"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"\uD83D\uDC65 Sexo:"})," Macho, Femea ou F\xeamea"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"\uD83E\uDDEC Autom\xe1tico:"})," DNA Paternidade (R$ 40) + Gen\xf4mica (R$ 80) ser\xe3o adicionados"]})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"excel"===h?"\uD83D\uDCCA Cole os dados do Excel aqui (Ctrl+C → Ctrl+V):":"csv"===h?"Cole os dados CSV aqui:":"Digite os dados (uma linha por animal):"}),(0,s.jsx)("textarea",{value:i,onChange:e=>o(e.target.value),rows:8,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm",placeholder:"excel"===h?"CJCJ	15628	22	3	913	42	M	24,62	1	22,1	8	09/08/23	24	REM HERMOSO FIV GEN	B2887 DA S.NICE\nCJCJ	15562	34	3	830	41	M	24,96	1	19,2	14	03/07/23	25	MAIAIO DA S.NICE	CJ SANT ANNA POI 7687":"csv"===h?"Serie,RG,Nascimento,Pai,AvoMaterno,Sexo\nCJCJ,123456,2022-01-15,CJCJ 100001,CJCJ 100002,Macho\nCJCJ,123457,2022-02-20,CJCJ 100003,CJCJ 100004,Femea":"CJCJ|123456|2022-01-15|CJCJ 100001|CJCJ 100002|Macho\nCJCJ|123457|2022-02-20|CJCJ 100003|CJCJ 100004|Femea"})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("button",{onClick:()=>{u(!0);try{let e=[];if("excel"===h){if(e=i.trim().split("\n"),0===e.length)throw Error("Nenhum dado encontrado");let a=e[0],t=a.toLowerCase().includes("serie")||a.toLowerCase().includes("rg")||a.toLowerCase().includes("nasc");t&&(e=e.slice(1))}else if("csv"===h){e=i.trim().split("\n");let a=e[0].split(",").map(e=>e.trim()),t=["Serie","RGN","Nascimento","Pai","AvoMaterno","Sexo"].every(e=>a.includes(e));if(!t)throw Error("Cabe\xe7alho CSV inv\xe1lido. Use: Serie,RGN,Nascimento,Pai,AvoMaterno,Sexo");e=e.slice(1)}else e=i.trim().split("\n");let a=[],t=[];e.forEach((e,s)=>{if(e.trim())try{let t,s,r,l,i,o,n,d,c;if("excel"===h){let a=[];if(e.includes("	"))a=e.split("	").map(e=>e.trim());else if(e.includes(","))a=e.split(",").map(e=>e.trim());else if(a=e.split(/\s+/).filter(e=>""!==e.trim()),console.log("Campos encontrados:",a.length,a),a.length>12){let e=a.slice(0,12),t=a.slice(12);console.log("Primeiros 12:",e),console.log("Restante para nomes:",t);let s=-1;for(let e=0;e<t.length;e++){let a=t[e];if(a.match(/^[A-Z]\d{3,4}$/)||a.match(/^[A-Z]{2}$/)||"DA"===a||"DE"===a||"DO"===a){s=e;break}}if(s>0){let r=t.slice(0,s).join(" "),l=t.slice(s).join(" ");a=[...e,r,l],console.log("Separa\xe7\xe3o encontrada no \xedndice",s,":",{nomePai:r,avoMaterno:l})}else{let s=Math.max(1,t.length-3),r=t.slice(0,s).join(" "),l=t.slice(s).join(" ");a=[...e,r,l],console.log("Usando fallback (\xfaltimas 3 palavras):",{nomePai:r,avoMaterno:l})}}else 14===a.length?console.log("Exatamente 14 campos, usando como est\xe1"):a.length<14&&console.log("Menos de 14 campos, pode haver erro no formato");if(a.length<7)throw Error("Formato Excel inv\xe1lido. Esperado pelo menos 7 colunas, encontrado ".concat(a.length,". Dados: ").concat(e));console.log("Processando linha:",e),console.log("Total de campos:",a.length);let s=-1;for(let e=0;e<a.length;e++)if(a[e]&&a[e].includes("/")){s=e;break}if(-1===s)throw Error("Data n\xe3o encontrada. Esperado formato DD/MM/YY ou DD/MM/YYYY");if(console.log("Data encontrada na posi\xe7\xe3o:",s,"=",a[s]),a.length<s+2)throw Error("Dados insuficientes. Encontrado ".concat(a.length," campos, mas preciso de pelo menos ").concat(s+2));let r=a.slice(s+2).join(" ");console.log("Nomes completos:",r);let l="",i="";if(r.trim()){let e=r.trim().split(" ");if(console.log("Palavras dos nomes:",e),e.length>=2){let a=Math.ceil(e.length/2);l=e.slice(0,a).join(" "),i=e.slice(a).join(" ")}else l=e[0]||"",i=""}console.log("Nomes separados:",{nomePai:l,avoMaterno:i}),t={serie:a[0]||"CJCJ",rg:a[1]||"",tipo:a[2]||"",nascimento:a[s]||"",meses:a[s+1]||"",pai:l,avoMaterno:i,sexo:"M"}}else if("csv"===h){let a=e.split(",").map(e=>e.trim());t={serie:a[0],rg:a[1],sexo:a[2],nascimento:a[3],pai:a[4],avoMaterno:a[5]}}else{let a=e.split("|").map(e=>e.trim());if(6!==a.length)throw Error("Formato inv\xe1lido. Use: Serie|RG|Nascimento|Pai|AvoMaterno|Sexo");t={serie:a[0],rg:a[1],sexo:a[2],nascimento:a[3],pai:a[4],avoMaterno:a[5]}}if("excel"===h){if(s=t.rg,r="M"===t.sexo?"Macho":"F"===t.sexo?"F\xeamea":t.sexo,console.log("Campo nascimento:",t.nascimento,"Tipo:",typeof t.nascimento),t.nascimento&&t.nascimento.toString().includes("/"))l=convertDateToISO(t.nascimento);else throw Error("Campo de data n\xe3o parece v\xe1lido: ".concat(t.nascimento));i=t.pai,o=t.avoMaterno,n=parseInt(t.meses)||calcularIdade(l),d=parseFloat(t.peso)||null,c=t.lote}else s=t.rg||t.rgn,r=t.sexo,l=t.nascimento,i=t.pai,o=t.avoMaterno,n=calcularIdade(l),d=null,c=null;if(!t.serie||!s||!l||!r)throw Error("Campos obrigat\xf3rios: Serie, RG, Nascimento, Sexo");if("CJCJ"!==t.serie)throw Error("Apenas animais CJCJ s\xe3o suportados nesta importa\xe7\xe3o");if(!["Macho","F\xeamea","Femea","M","F"].includes(t.sexo))throw Error("Sexo deve ser: Macho, F\xeamea, M ou F");let x=new Date(l);if(isNaN(x.getTime()))throw Error("Data de nascimento inv\xe1lida: ".concat(t.nascimento));let m=!1,g=[],u=0,p="IA";if("excel"===h&&t.tipo){let e=t.tipo.toUpperCase();e.includes("FIV")||e.includes("FV")?(m=!0,p="FIV",u=120,g=[{id:1,tipo:"DNA",subtipo:"Paternidade",valor:40,data:l,observacoes:"DNA Paternidade - FIV (Importa\xe7\xe3o)"},{id:2,tipo:"DNA",subtipo:"Gen\xf4mica",valor:80,data:l,observacoes:"DNA Gen\xf4mica - FIV (Importa\xe7\xe3o)"}]):e.includes("IA")||e.includes("I.A")?(m=!1,p="IA",u=80,g=[{id:1,tipo:"DNA",subtipo:"Gen\xf4mica",valor:80,data:l,observacoes:"DNA Gen\xf4mica - IA (Importa\xe7\xe3o)"}]):(m=!1,p=e,u=80,g=[{id:1,tipo:"DNA",subtipo:"Gen\xf4mica",valor:80,data:l,observacoes:"DNA Gen\xf4mica - ".concat(e," (Importa\xe7\xe3o)")}])}else m=!0,p="FIV",u=120,g=[{id:1,tipo:"DNA",subtipo:"Paternidade",valor:40,data:l,observacoes:"DNA Paternidade - FIV (Importa\xe7\xe3o)"},{id:2,tipo:"DNA",subtipo:"Gen\xf4mica",valor:80,data:l,observacoes:"DNA Gen\xf4mica - FIV (Importa\xe7\xe3o)"}];let b={id:Date.now()+Math.random(),serie:t.serie,rg:s,raca:"Nelore",sexo:r,dataNascimento:l,meses:n,situacao:"Ativo",pai:i||null,mae:null,avoMaterno:o||null,receptora:null,isFiv:m,tipoCobertura:p,peso:d,lote:c,custoTotal:u,valorVenda:null,valorReal:null,custos:g};a.push(b)}catch(a){t.push({linha:s+1,dados:e,erro:a.message})}}),m({sucesso:a,erros:t,total:e.length})}catch(e){m({sucesso:[],erros:[{linha:0,dados:"",erro:e.message}],total:0})}u(!1)},disabled:!i.trim()||g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center",children:g?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Validando..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Validar Dados"]})})}),x&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:x.sucesso.length}),(0,s.jsx)("div",{className:"text-sm text-green-600 dark:text-green-400",children:"V\xe1lidos"})]}),(0,s.jsxs)("div",{className:"text-center p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:x.erros.length}),(0,s.jsx)("div",{className:"text-sm text-red-600 dark:text-red-400",children:"Erros"})]}),(0,s.jsxs)("div",{className:"text-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:x.total}),(0,s.jsx)("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Total"})]})]}),x.erros.length>0&&(0,s.jsxs)("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[(0,s.jsxs)("h4",{className:"font-semibold text-red-900 dark:text-red-200 mb-2 flex items-center",children:[(0,s.jsx)(c.Z,{className:"h-5 w-5 mr-2"}),"Erros Encontrados"]}),(0,s.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:x.erros.map((e,a)=>(0,s.jsxs)("div",{className:"text-sm text-red-800 dark:text-red-300",children:[(0,s.jsxs)("strong",{children:["Linha ",e.linha,":"]})," ",e.erro,e.dados&&(0,s.jsx)("div",{className:"font-mono text-xs mt-1 bg-red-100 dark:bg-red-900/40 p-1 rounded",children:e.dados})]},a))})]}),x.sucesso.length>0&&(0,s.jsxs)("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,s.jsxs)("h4",{className:"font-semibold text-green-900 dark:text-green-200 mb-2 flex items-center",children:[(0,s.jsx)(d.Z,{className:"h-5 w-5 mr-2"}),"Animais Prontos para Importa\xe7\xe3o (",x.sucesso.length,")"]}),(0,s.jsxs)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:[x.sucesso.slice(0,5).map((e,a)=>(0,s.jsxs)("div",{className:"text-sm text-green-800 dark:text-green-300 flex justify-between",children:[(0,s.jsxs)("span",{children:[e.serie," ",e.rg," - ",e.sexo]}),(0,s.jsxs)("span",{children:[e.meses," meses - R$"," ",e.custoTotal.toFixed(2)]})]},a)),x.sucesso.length>5&&(0,s.jsxs)("div",{className:"text-sm text-green-600 dark:text-green-400",children:["... e mais ",x.sucesso.length-5," ","animais"]})]})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-between p-6 border-t border-gray-200 dark:border-gray-700",children:[(0,s.jsx)("button",{onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Cancelar"}),(0,s.jsxs)("button",{onClick:()=>{x&&x.sucesso.length>0&&(l(x.sucesso),o(""),m(null),t())},disabled:!x||0===x.sucesso.length,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center",children:[(0,s.jsx)(n.Z,{className:"h-4 w-4 mr-2"}),"Importar ",x?x.sucesso.length:0," ","Animais"]})]})]})}):null}function CostManager(e){let{animal:a,isOpen:t,onClose:l,onSave:i}=e,[o,n]=(0,r.useState)([]),[d,c]=(0,r.useState)(!0),[x,m]=(0,r.useState)(!1),[g,u]=(0,r.useState)({tipo:"",descricao:"",valor:"",data:new Date().toISOString().split("T")[0],observacoes:""});if((0,r.useEffect)(()=>{a&&t&&loadCosts()},[a,t]),!t||!a)return null;let loadCosts=async()=>{try{c(!0);let e=a.custos||[];n(e)}catch(e){console.error("Erro ao carregar custos:",e)}finally{c(!1)}},handleDeleteCost=e=>{if(!confirm("Tem certeza que deseja excluir este custo?"))return;let t=o.filter(a=>a.id!==e);n(t);let s={...a,custos:t,custoTotal:t.reduce((e,a)=>e+a.valor,0)};i&&i(s),alert("Custo exclu\xeddo com sucesso!")},h=o.reduce((e,a)=>e+a.valor,0);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"\uD83D\uDCB0 Gerenciar Custos"}),(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[a.serie," ",a.rg," - ",a.raca]})]}),(0,s.jsx)("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"➕ Adicionar Custo"})]}),(0,s.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total de Custos"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:["R$ ",h.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Registros"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:o.length})]})]})}),d?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Carregando custos..."})]}):(0,s.jsx)("div",{className:"space-y-3",children:0===o.length?(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[(0,s.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCCB"}),(0,s.jsx)("p",{children:"Nenhum custo registrado ainda"}),(0,s.jsx)("p",{className:"text-sm",children:'Clique em "Adicionar Custo" para come\xe7ar'})]}):o.map(e=>(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.tipo}),e.descricao&&(0,s.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["- ",e.descricao]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 mt-1",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(e.data).toLocaleDateString("pt-BR")}),e.observacoes&&(0,s.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.observacoes})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("div",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:["R$ ",e.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,s.jsx)("button",{onClick:()=>handleDeleteCost(e.id),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Excluir custo",children:"\uD83D\uDDD1️"})]})]})},e.id))}),x&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,s.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Adicionar Novo Custo"})}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tipo de Custo *"}),(0,s.jsxs)("select",{value:g.tipo,onChange:e=>u({...g,tipo:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[(0,s.jsx)("option",{value:"",children:"Selecione o tipo"}),["Aquisi\xe7\xe3o","Alimenta\xe7\xe3o","Medicamentos","Veterin\xe1rios","DNA","M\xe3o de Obra","Transporte","Outros"].map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descri\xe7\xe3o"}),(0,s.jsx)("input",{type:"text",value:g.descricao,onChange:e=>u({...g,descricao:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Ex: Ra\xe7\xe3o concentrada, Vacina, etc."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Valor *"}),(0,s.jsx)("input",{type:"number",step:"0.01",value:g.valor,onChange:e=>u({...g,valor:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"0,00"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Data"}),(0,s.jsx)("input",{type:"date",value:g.data,onChange:e=>u({...g,data:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Observa\xe7\xf5es"}),(0,s.jsx)("textarea",{value:g.observacoes,onChange:e=>u({...g,observacoes:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Observa\xe7\xf5es adicionais..."})]})]}),(0,s.jsxs)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3",children:[(0,s.jsx)("button",{onClick:()=>m(!1),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Cancelar"}),(0,s.jsx)("button",{onClick:()=>{if(!g.tipo||!g.valor){alert("Preencha pelo menos o tipo e valor do custo");return}let e={id:Date.now(),tipo:g.tipo,descricao:g.descricao,valor:parseFloat(g.valor),data:g.data,observacoes:g.observacoes},t=[...o,e];n(t);let s={...a,custos:t,custoTotal:t.reduce((e,a)=>e+a.valor,0)};i&&i(s),u({tipo:"",descricao:"",valor:"",data:new Date().toISOString().split("T")[0],observacoes:""}),m(!1),alert("Custo adicionado com sucesso!")},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Adicionar"})]})]})})]})}function AnimalTimeline(e){let{animalId:a}=e,[t,l]=(0,r.useState)([]),[i,o]=(0,r.useState)(a),[n,d]=(0,r.useState)(!0),[c,x]=(0,r.useState)(!1),[m,g]=(0,r.useState)(Date.now());(0,r.useEffect)(()=>{fetchAnimals()},[]),(0,r.useEffect)(()=>{let e=setInterval(()=>{fetchAnimals()},5e3);return()=>clearInterval(e)},[]),(0,r.useEffect)(()=>{let handleFocus=()=>{fetchAnimals()};return window.addEventListener("focus",handleFocus),()=>window.removeEventListener("focus",handleFocus)},[]);let fetchAnimals=async()=>{try{n||x(!0);let e=await fetch("/api/animals?t=".concat(Date.now())),a=await e.json();l(a),!i&&a.length>0&&o(a[0].id),g(Date.now())}catch(e){console.error("Erro ao carregar animais:",e)}finally{d(!1),x(!1)}};if(n)return(0,s.jsx)("div",{className:"card p-6",children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})});let u=t&&t.length>0?t.find(e=>e.id===i):null;if(!u)return(0,s.jsx)("div",{className:"card p-6 text-center",children:(0,s.jsxs)("div",{className:"text-gray-500 dark:text-gray-400",children:[(0,s.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDC04"}),(0,s.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Nenhum animal selecionado"}),(0,s.jsx)("p",{children:"Selecione um animal para ver sua timeline completa"})]})});let getCostIcon=e=>({Aquisição:"\uD83D\uDED2",Alimentação:"\uD83C\uDF3E",DNA:"\uD83E\uDDEC",Medicamentos:"\uD83D\uDC8A",Veterinários:"\uD83D\uDC68‍⚕️","M\xe3o de Obra Proporcional":"\uD83D\uDC77","Frete / Transporte":"\uD83D\uDE9B",Outros:"\uD83D\uDCCB"})[e]||"\uD83D\uDCCB",getCostColor=e=>({Aquisição:"bg-purple-500",Alimentação:"bg-green-500",DNA:"bg-blue-500",Medicamentos:"bg-red-500",Veterinários:"bg-indigo-500","M\xe3o de Obra Proporcional":"bg-orange-500","Frete / Transporte":"bg-gray-500",Outros:"bg-gray-400"})[e]||"bg-gray-400",h=(e=>{let a=[];return e.data_nascimento&&a.push({id:"nascimento",date:e.data_nascimento,type:"nascimento",title:"Nascimento",description:"".concat(e.sexo," • ").concat(e.raca," • ").concat(e.serie||""," ").concat(e.rg||""),cost:0,icon:"\uD83C\uDF7C",color:"bg-green-500"}),e.custos&&e.custos.length>0&&e.custos.forEach(e=>{a.push({id:"custo-".concat(e.id),date:e.data,type:"custo",title:e.tipo+(e.subtipo?" - ".concat(e.subtipo):""),description:e.observacoes||"Custo registrado",cost:parseFloat(e.valor)||0,icon:getCostIcon(e.tipo),color:getCostColor(e.tipo)})}),e.vendas&&e.vendas.length>0&&e.vendas.forEach(e=>{a.push({id:"venda-".concat(e.id),date:e.data_venda,type:"venda",title:"Venda do Animal",description:"Vendido por R$ ".concat(parseFloat(e.valor).toLocaleString("pt-BR",{minimumFractionDigits:2})),cost:-parseFloat(e.valor),icon:"\uD83D\uDCB0",color:"bg-yellow-500"})}),a.sort((e,a)=>new Date(e.date)-new Date(a.date))})(u),p=h.filter(e=>e.cost>0).reduce((e,a)=>e+a.cost,0),b=h.filter(e=>e.cost<0).reduce((e,a)=>e+Math.abs(a.cost),0);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"card p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Selecionar Animal para Timeline"}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["\xdaltima atualiza\xe7\xe3o: ",new Date(m).toLocaleTimeString("pt-BR")]}),(0,s.jsx)("button",{onClick:fetchAnimals,disabled:c,className:"px-3 py-1 text-white text-xs rounded-md transition-colors ".concat(c?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"),title:"Atualizar dados",children:c?"\uD83D\uDD04 Atualizando...":"\uD83D\uDD04 Atualizar"})]})]}),(0,s.jsxs)("select",{value:i||"",onChange:e=>o(parseInt(e.target.value)),className:"input-field max-w-md",children:[(0,s.jsx)("option",{value:"",children:"Selecione um animal..."}),t&&t.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.serie||"S/N"," ",e.rg||"S/N"," - ",e.raca," (",e.status,")"]},e.id))]})]}),(0,s.jsxs)("div",{className:"card p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[u.serie||"S/N"," ",u.rg||"S/N"]}),(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[u.raca," • ",u.sexo," • ",u.status]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsx)("div",{className:"text-2xl mb-2",children:"Macho"===u.sexo?"\uD83D\uDC02":"\uD83D\uDC04"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"text-center p-4 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:["R$ ",p.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,s.jsx)("div",{className:"text-sm text-red-600 dark:text-red-400",children:"Total Investido"})]}),(0,s.jsxs)("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:["R$ ",b.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,s.jsx)("div",{className:"text-sm text-green-600 dark:text-green-400",children:"Total Recebido"})]}),(0,s.jsxs)("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold ".concat(b-p>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:["R$ ",(b-p).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,s.jsx)("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Resultado"})]})]})]}),(0,s.jsxs)("div",{className:"card p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"\uD83D\uDCC5 Timeline Completa"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-gray-300 dark:bg-gray-600"}),(0,s.jsx)("div",{className:"space-y-6",children:h.map((e,a)=>(0,s.jsxs)("div",{className:"relative flex items-start",children:[(0,s.jsx)("div",{className:"".concat(e.color," w-16 h-16 rounded-full flex items-center justify-center text-white text-xl font-bold shadow-lg z-10"),children:e.icon}),(0,s.jsx)("div",{className:"ml-6 flex-1",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.title}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(e.date).toLocaleDateString("pt-BR")}),0!==e.cost&&(0,s.jsxs)("span",{className:"text-lg font-bold ".concat(e.cost>0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"),children:[e.cost>0?"-":"+","R$ ",Math.abs(e.cost).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:e.description}),a>0&&(0,s.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Custo Acumulado:"}),(0,s.jsxs)("span",{className:"font-medium text-gray-900 dark:text-white",children:["R$ ",h.slice(0,a+1).filter(e=>e.cost>0).reduce((e,a)=>e+a.cost,0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})})]})})]},e.id))})]})]}),u.vendas&&u.vendas.length>0&&(0,s.jsxs)("div",{className:"card p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCCA An\xe1lise de Performance"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Distribui\xe7\xe3o de Custos"}),(0,s.jsx)("div",{className:"space-y-2",children:Object.entries(h.filter(e=>e.cost>0).reduce((e,a)=>{let t="custo"===a.type?a.title.split(" - ")[0]:a.type;return e[t]=(e[t]||0)+a.cost,e},{})).map(e=>{let[a,t]=e;return(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:a}),(0,s.jsxs)("span",{className:"font-medium text-gray-900 dark:text-white",children:["R$ ",t.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]},a)})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"M\xe9tricas"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"ROI"}),(0,s.jsxs)("span",{className:"font-bold ".concat(b-p>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[p>0?((b-p)/p*100).toFixed(1):"0.0","%"]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Data de Nascimento"}),(0,s.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:u.data_nascimento?new Date(u.data_nascimento).toLocaleDateString("pt-BR"):"N/A"})]})]})]})]})]}),0===h.length&&(0,s.jsx)("div",{className:"card p-6 text-center",children:(0,s.jsxs)("div",{className:"text-gray-500 dark:text-gray-400",children:[(0,s.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCCB"}),(0,s.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Timeline vazia"}),(0,s.jsx)("p",{children:"Este animal ainda n\xe3o possui custos ou eventos registrados."}),(0,s.jsx)("p",{className:"text-sm mt-2",children:"Adicione custos ou registre eventos para ver a timeline completa."})]})})]})}var x=t(4308),m=t(8394),g=t(4491),u=t(794);function ArrowPathIcon({title:e,titleId:a,...t},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}let h=r.forwardRef(ArrowPathIcon);var p=t(5837);function FinancialFixer(){let[e,a]=(0,r.useState)(!1),[t,l]=(0,r.useState)(null),[i,o]=(0,r.useState)(null),handleFixFinancial=async()=>{a(!0),o(null),l(null);try{console.log("\uD83D\uDD27 Iniciando corre\xe7\xe3o financeira...");let e=await fetch("/api/update-financial",{method:"POST",headers:{"Content-Type":"application/json"}}),a=await e.json();a.success?(l(a),console.log("✅ Corre\xe7\xe3o financeira conclu\xedda:",a)):o(a.message||"Erro desconhecido")}catch(e){console.error("❌ Erro na corre\xe7\xe3o financeira:",e),o("Erro ao conectar com o servidor")}finally{a(!1)}};return(0,s.jsxs)(u.Zb,{className:"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 border-2 border-yellow-300 dark:border-yellow-600",children:[(0,s.jsx)(u.Ol,{children:(0,s.jsxs)(u.ll,{className:"text-orange-700 dark:text-orange-300 flex items-center",children:[(0,s.jsx)(c.Z,{className:"h-6 w-6 mr-2"}),"\uD83D\uDD27 Corre\xe7\xe3o de Dados Financeiros"]})}),(0,s.jsxs)(u.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[(0,s.jsxs)("p",{className:"mb-2",children:[(0,s.jsx)("strong",{children:"Problema identificado:"})," Os valores financeiros est\xe3o zerados mesmo com animais vendidos."]}),(0,s.jsxs)("p",{className:"mb-4",children:[(0,s.jsx)("strong",{children:"Solu\xe7\xe3o:"})," Este bot\xe3o vai sincronizar os dados de vendas com o sistema financeiro."]})]}),(0,s.jsx)(g.z,{onClick:handleFixFinancial,disabled:e,className:"w-full bg-orange-600 hover:bg-orange-700 text-white",children:e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h,{className:"h-4 w-4 mr-2 animate-spin"}),"Corrigindo Dados Financeiros..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"\uD83D\uDD27 Corrigir Dados Financeiros"]})}),t&&(0,s.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-600 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center mb-3",children:[(0,s.jsx)(d.Z,{className:"h-5 w-5 text-green-600 mr-2"}),(0,s.jsx)("span",{className:"font-semibold text-green-800 dark:text-green-200",children:"Corre\xe7\xe3o Conclu\xedda!"})]}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Animais Processados:"}),(0,s.jsx)("span",{className:"font-semibold",children:t.stats.updatedAnimals})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Total de Vendas:"}),(0,s.jsxs)("span",{className:"font-semibold text-green-600",children:["R$ ",t.stats.totalSalesValue.toLocaleString("pt-BR")]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Quantidade Vendida:"}),(0,s.jsxs)("span",{className:"font-semibold",children:[t.stats.totalSalesCount," animais"]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Total de Custos:"}),(0,s.jsxs)("span",{className:"font-semibold text-red-600",children:["R$ ",t.stats.totalCosts.toLocaleString("pt-BR")]})]}),(0,s.jsxs)("div",{className:"flex justify-between border-t pt-2",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Lucro:"}),(0,s.jsxs)("span",{className:"font-bold ".concat(t.stats.profit>=0?"text-green-600":"text-red-600"),children:["R$ ",t.stats.profit.toLocaleString("pt-BR")]})]})]}),(0,s.jsxs)("div",{className:"mt-3 text-xs text-green-700 dark:text-green-300",children:["✅ ",t.message]})]}),i&&(0,s.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-600 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(c.Z,{className:"h-5 w-5 text-red-600 mr-2"}),(0,s.jsx)("span",{className:"font-semibold text-red-800 dark:text-red-200",children:"Erro na Corre\xe7\xe3o"})]}),(0,s.jsx)("div",{className:"text-sm text-red-700 dark:text-red-300 mt-2",children:i})]}),(0,s.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-600 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"\uD83D\uDCCB O que esta corre\xe7\xe3o faz:"}),(0,s.jsxs)("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[(0,s.jsx)("li",{children:"• Encontra todos os animais vendidos"}),(0,s.jsx)("li",{children:"• Cria registros de custo para as vendas"}),(0,s.jsx)("li",{children:"• Atualiza os valores financeiros"}),(0,s.jsx)("li",{children:"• Calcula lucros e preju\xedzos"}),(0,s.jsx)("li",{children:"• Sincroniza dados entre vendas e financeiro"})]})]})]})]})}var b=t(6949),v=t(434),j=t(8680),f=t(9633);function FunnelIcon({title:e,titleId:a,...t},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":a},t),e?r.createElement("title",{id:a},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}let y=r.forwardRef(FunnelIcon);var N=t(6249),k=t(2940),w=t(2268),D=t(445),C=t(8613),A=t(8357);let S=["Ativo","Vendido","Morto","Doado"];function Animals(){let e=(0,l.useRouter)(),[a,t]=(0,r.useState)([]),[n,d]=(0,r.useState)(!0),[c,g]=(0,r.useState)(null),[u,R]=(0,r.useState)(!1),[E,M]=(0,r.useState)(!1),[F,I]=(0,r.useState)(!1),[T,O]=(0,r.useState)(!1),[B,V]=(0,r.useState)(!1),[L,J]=(0,r.useState)(!1),[P,Z]=(0,r.useState)(!1),[G,$]=(0,r.useState)(!1),[z,q]=(0,r.useState)(""),[_,Y]=(0,r.useState)("table"),[U,H]=(0,r.useState)({raca:"",sexo:"",situacao:"",serie:""}),[W,X]=(0,r.useState)([]),[Q,K]=(0,r.useState)(!1),[ee,ea]=(0,r.useState)(!1),[et,es]=(0,r.useState)(1);(0,r.useEffect)(()=>{"true"===e.query.openImporter&&($(!0),e.replace("/animals",void 0,{shallow:!0})),e.query.filter&&(H(a=>({...a,situacao:e.query.filter})),e.replace("/animals",void 0,{shallow:!0}))},[e.query.openImporter,e.query.filter]),(0,r.useEffect)(()=>{"true"===e.query.openImporter&&($(!0),e.replace("/animals",void 0,{shallow:!0}))},[e.query.openImporter]);let er=a.filter(e=>{let a=e.serie.toLowerCase().includes(z.toLowerCase())||e.rg.includes(z)||e.raca.toLowerCase().includes(z.toLowerCase()),t=(!U.raca||e.raca===U.raca)&&(!U.sexo||e.sexo===U.sexo)&&(!U.situacao||e.situacao===U.situacao)&&(!U.serie||e.serie===U.serie);return a&&t}),el=Math.ceil(er.length/5),ei=(et-1)*5,eo=ei+5,en=er.slice(ei,eo);(0,r.useEffect)(()=>{es(1)},[z,U]);let goToPage=e=>{es(e)},goToPreviousPage=()=>{et>1&&es(et-1)},goToNextPage=()=>{et<el&&es(et+1)},handleSelectAnimal=e=>{X(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},handleSalesComplete=async()=>{await loadAnimals(),X([]),K(!1)},handleDeleteSelected=async()=>{if(0===W.length){alert("Selecione pelo menos um animal para excluir.");return}let e="Tem certeza que deseja excluir ".concat(W.length," animal(is) selecionado(s)?");if(confirm(e))try{await Promise.all(W.map(e=>b.Z.deleteAnimal(e))),X([]),K(!1),await loadAnimals(),alert("".concat(W.length," animal(is) exclu\xeddo(s) com sucesso!"))}catch(e){console.error("Erro ao excluir animais:",e),alert("Erro ao excluir animais: "+e.message)}},handleSaveAnimal=async e=>{try{console.log("Dados recebidos do formul\xe1rio:",e);let a={Ativo:"ATIVO",Vendido:"VENDIDO",Morto:"MORTO",Doado:"DOADO"}[e.situacao]||"ATIVO";if(console.log("Status que ser\xe1 salvo:",a),c){let t={brinco:e.rg,serie:e.serie,nome:e.nome,raca:e.raca,sexo:e.sexo,dataNasc:e.dataNascimento?new Date(e.dataNascimento).toISOString():null,peso:e.peso?parseFloat(e.peso):null,categoria:e.categoria||"Bezerro",observacoes:e.observacoes,status:a};console.log("Dados que ser\xe3o enviados para API:",t),await b.Z.updateAnimal(c.id,t)}else{let a={brinco:e.rg,serie:e.serie,nome:e.nome,raca:e.raca,sexo:e.sexo,dataNasc:e.dataNascimento?new Date(e.dataNascimento).toISOString():null,peso:e.peso?parseFloat(e.peso):null,categoria:e.categoria||"Bezerro",observacoes:e.observacoes};console.log("Dados enviados para API:",a),await b.Z.addAnimal(a)}setTimeout(async()=>{await loadAnimals()},500),g(null),R(!1),alert("Animal atualizado com sucesso!")}catch(e){console.error("Erro ao salvar animal:",e),alert("Erro ao salvar animal: "+e.message)}},handleDeleteAnimal=async e=>{if(confirm("Tem certeza que deseja excluir este animal?"))try{await b.Z.deleteAnimal(e),await loadAnimals()}catch(e){console.error("Erro ao excluir animal:",e),alert("Erro ao excluir animal: "+e.message)}},handleViewAnimal=e=>{g(e),Z(!0)},handlePrint=e=>{let a="\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Ficha do Animal - ".concat(e.serie," ").concat(e.rg,'</title>\n        <style>\n          body { font-family: Arial, sans-serif; margin: 20px; }\n          .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 20px; }\n          .section { margin-bottom: 20px; }\n          .section h3 { background-color: #f0f0f0; padding: 8px; margin: 0 0 10px 0; }\n          .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }\n          .info-item { padding: 5px 0; border-bottom: 1px solid #eee; }\n          .info-label { font-weight: bold; }\n          .costs-table { width: 100%; border-collapse: collapse; margin-top: 10px; }\n          .costs-table th, .costs-table td { border: 1px solid #ddd; padding: 8px; text-align: left; }\n          .costs-table th { background-color: #f0f0f0; }\n          .total { font-weight: bold; background-color: #f9f9f9; }\n          @media print { body { margin: 0; } }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <h1>FICHA DO ANIMAL</h1>\n          <h2>').concat(e.serie," ").concat(e.rg,"</h2>\n          <p>Impresso em: ").concat(new Date().toLocaleDateString("pt-BR")," \xe0s ").concat(new Date().toLocaleTimeString("pt-BR"),'</p>\n        </div>\n\n        <div class="section">\n          <h3>\uD83D\uDCCB Informa\xe7\xf5es B\xe1sicas</h3>\n          <div class="info-grid">\n            <div class="info-item">\n              <span class="info-label">ID:</span> ').concat(e.id,'\n            </div>\n            <div class="info-item">\n              <span class="info-label">S\xe9rie:</span> ').concat(e.serie,'\n            </div>\n            <div class="info-item">\n              <span class="info-label">RG:</span> ').concat(e.rg,'\n            </div>\n            <div class="info-item">\n              <span class="info-label">Ra\xe7a:</span> ').concat(e.raca,'\n            </div>\n            <div class="info-item">\n              <span class="info-label">Sexo:</span> ').concat(e.sexo,'\n            </div>\n            <div class="info-item">\n              <span class="info-label">Idade:</span> ').concat(e.meses,' meses\n            </div>\n            <div class="info-item">\n              <span class="info-label">Situa\xe7\xe3o:</span> ').concat(e.situacao,'\n            </div>\n            <div class="info-item">\n              <span class="info-label">Data de Nascimento:</span> ').concat(e.dataNascimento?new Date(e.dataNascimento).toLocaleDateString("pt-BR"):"N/A","\n            </div>\n          </div>\n        </div>\n\n        ").concat(e.pai||e.mae||e.avoMaterno||e.receptora?'\n        <div class="section">\n          <h3>\uD83E\uDDEC Genealogia</h3>\n          <div class="info-grid">\n            '.concat(e.pai?'<div class="info-item"><span class="info-label">Pai:</span> '.concat(e.pai,"</div>"):"","\n            ").concat(e.mae?'<div class="info-item"><span class="info-label">M\xe3e:</span> '.concat(e.mae,"</div>"):"","\n            ").concat(e.avoMaterno?'<div class="info-item"><span class="info-label">Av\xf4 Materno:</span> '.concat(e.avoMaterno,"</div>"):"","\n            ").concat(e.receptora?'<div class="info-item"><span class="info-label">Receptora:</span> '.concat(e.receptora,"</div>"):"","\n            ").concat(e.isFiv?'<div class="info-item"><span class="info-label">FIV:</span> Sim</div>':"","\n          </div>\n        </div>\n        "):"",'\n\n        <div class="section">\n          <h3>\uD83D\uDCB0 Resumo Financeiro</h3>\n          <div class="info-grid">\n            <div class="info-item">\n              <span class="info-label">Custo Total:</span> R$ ').concat(e.custoTotal.toLocaleString("pt-BR",{minimumFractionDigits:2}),'\n            </div>\n            <div class="info-item">\n              <span class="info-label">Valor de Venda:</span> ').concat(e.valorVenda?"R$ ".concat(e.valorVenda.toLocaleString("pt-BR",{minimumFractionDigits:2})):"N/A",'\n            </div>\n            <div class="info-item">\n              <span class="info-label">Resultado:</span> ').concat(null!==e.valorReal?"R$ ".concat(e.valorReal.toLocaleString("pt-BR",{minimumFractionDigits:2})):"N/A",'\n            </div>\n            <div class="info-item">\n              <span class="info-label">ROI:</span> ').concat(e.valorVenda?"".concat(((e.valorVenda-e.custoTotal)/e.custoTotal*100).toFixed(1),"%"):"N/A","\n            </div>\n          </div>\n        </div>\n\n        ").concat(e.custos&&e.custos.length>0?'\n        <div class="section">\n          <h3>\uD83D\uDCCA Detalhamento de Custos</h3>\n          <table class="costs-table">\n            <thead>\n              <tr>\n                <th>Data</th>\n                <th>Tipo</th>\n                <th>Subtipo</th>\n                <th>Valor</th>\n                <th>Observa\xe7\xf5es</th>\n              </tr>\n            </thead>\n            <tbody>\n              '.concat(e.custos.map(e=>"\n                <tr>\n                  <td>".concat(new Date(e.data).toLocaleDateString("pt-BR"),"</td>\n                  <td>").concat(e.tipo,"</td>\n                  <td>").concat(e.subtipo||"-","</td>\n                  <td>R$ ").concat(Math.abs(e.valor).toLocaleString("pt-BR",{minimumFractionDigits:2}),"</td>\n                  <td>").concat(e.observacoes||"-","</td>\n                </tr>\n              ")).join(""),'\n              <tr class="total">\n                <td colspan="3"><strong>TOTAL</strong></td>\n                <td><strong>R$ ').concat(e.custoTotal.toLocaleString("pt-BR",{minimumFractionDigits:2}),"</strong></td>\n                <td></td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        "):"",'\n\n        <div class="section">\n          <h3>\uD83D\uDCDD Observa\xe7\xf5es</h3>\n          <p>').concat(e.observacoes||"Nenhuma observa\xe7\xe3o registrada.","</p>\n        </div>\n      </body>\n      </html>\n    "),t=window.open("","_blank");t.document.write(a),t.document.close(),t.focus(),t.print(),t.close()},handleImportAnimals=async e=>{try{console.log("\uD83D\uDD04 Iniciando importa\xe7\xe3o de",e.length,"animais");let a=e.map(e=>({brinco:e.rg,serie:e.serie||"",nome:e.nome,raca:e.raca,sexo:e.sexo,dataNasc:e.dataNascimento,peso:e.peso,categoria:e.categoria||"Bezerro",observacoes:e.observacoes,status:"ATIVO"})),t=await fetch("/api/animals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!t.ok){let e=await t.json();throw Error(e.message||"Erro ao importar animais")}let s=await t.json();console.log("\uD83D\uDCCA Resultado da importa\xe7\xe3o:",s),await loadAnimals(),alert("✅ ".concat(s.message||e.length+" animais importados com sucesso!"))}catch(e){console.error("Erro ao importar animais:",e),alert("Erro ao importar animais: "+e.message)}},clearFilters=()=>{H({raca:"",sexo:"",situacao:"",serie:"",importados:""}),q("")};(0,r.useEffect)(()=>{loadAnimals()},[]);let loadAnimals=async()=>{try{d(!0);let e=await b.Z.getAllAnimals(),a=e.map(e=>{var a,t,s;let r=e.serie||((null===(a=e.brinco)||void 0===a?void 0:a.match(/^[A-Z]+/))?e.brinco.match(/^[A-Z]+/)[0]:"");return{id:e.id,serie:r,rg:e.brinco,brinco:e.brinco,nome:e.nome,sexo:e.sexo,raca:e.raca,dataNascimento:e.dataNasc?new Date(e.dataNasc).toISOString().split("T")[0]:null,dataNasc:e.dataNasc,meses:e.dataNasc?Math.floor((new Date-new Date(e.dataNasc))/2630016e3):0,situacao:"ATIVO"===e.status?"Ativo":"VENDIDO"===e.status?"Vendido":"MORTO"===e.status?"Morto":"DOADO"===e.status?"Doado":e.status,categoria:e.categoria,peso:e.peso,observacoes:e.observacoes,custoTotal:(null===(t=e.costs)||void 0===t?void 0:t.reduce((e,a)=>e+a.valor,0))||0,custos:(null===(s=e.costs)||void 0===s?void 0:s.map(e=>({id:e.id,tipo:e.tipo,descricao:e.descricao,valor:e.valor,data:new Date(e.data).toISOString().split("T")[0],observacoes:e.observacoes})))||[],valorVenda:null,valorReal:null,pai:null,mae:null,avoMaterno:null,receptora:null,isFiv:!1}});t(a)}catch(e){console.error("Erro ao carregar animais:",e),alert("Erro ao carregar animais do banco de dados: "+e.message)}finally{d(!1)}};return n?(0,s.jsx)(i.Z,{children:(0,s.jsxs)("div",{className:"flex items-center justify-center min-h-screen",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500"}),(0,s.jsx)("p",{className:"ml-4 text-lg text-gray-600 dark:text-gray-400",children:"Carregando animais..."})]})}):(0,s.jsxs)(i.Z,{children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gest\xe3o de Animais"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Gerencie o cadastro e informa\xe7\xf5es dos animais"})]}),(0,s.jsxs)("div",{className:"mt-4 sm:mt-0 flex space-x-3",children:[(0,s.jsxs)("button",{onClick:()=>$(!0),className:"btn-secondary flex items-center",children:[(0,s.jsx)(v.Z,{className:"h-5 w-5 mr-2"}),"\uD83D\uDCE5 Importar Planilha"]}),(0,s.jsxs)("button",{onClick:loadAnimals,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center font-medium",disabled:n,children:[(0,s.jsx)(h,{className:"h-5 w-5 mr-2"}),n?"Carregando...":"\uD83D\uDD04 Recarregar Dados"]}),(0,s.jsxs)("button",{onClick:()=>V(!0),className:"px-4 py-2 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-lg hover:from-green-700 hover:to-blue-700 transition-all duration-300 flex items-center font-medium shadow-lg",children:[(0,s.jsx)(p.Z,{className:"h-5 w-5 mr-2"}),"\uD83D\uDCCB Nota Fiscal"]}),(0,s.jsxs)("button",{onClick:()=>{g(null),R(!0)},className:"btn-primary flex items-center",children:[(0,s.jsx)(j.Z,{className:"h-5 w-5 mr-2"}),"Novo Animal"]})]})]}),(0,s.jsxs)("div",{className:"card p-4",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[(0,s.jsx)("div",{className:"flex-1 max-w-md",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(f.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,s.jsx)("input",{type:"text",placeholder:"Buscar por s\xe9rie, RG ou ra\xe7a...",value:z,onChange:e=>q(e.target.value),className:"input-field pl-10"})]})}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsxs)("button",{onClick:()=>J(!L),className:"btn-secondary flex items-center",children:[(0,s.jsx)(y,{className:"h-5 w-5 mr-2"}),"Filtros"]}),(0,s.jsx)("button",{onClick:clearFilters,className:"btn-secondary",children:"Limpar"})]})]}),L&&(0,s.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"S\xe9rie"}),(0,s.jsxs)("select",{value:U.serie,onChange:e=>H({...U,serie:e.target.value}),className:"input-field",children:[(0,s.jsx)("option",{value:"",children:"Todas"}),(0,s.jsx)("option",{value:"RPT",children:"RPT"}),(0,s.jsx)("option",{value:"BENT",children:"BENT"}),(0,s.jsx)("option",{value:"CJCJ",children:"CJCJ"}),(0,s.jsx)("option",{value:"CJCG",children:"CJCG"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Ra\xe7a"}),(0,s.jsxs)("select",{value:U.raca,onChange:e=>H({...U,raca:e.target.value}),className:"input-field",children:[(0,s.jsx)("option",{value:"",children:"Todas"}),(0,s.jsx)("option",{value:"Nelore",children:"Nelore"}),(0,s.jsx)("option",{value:"Brahman",children:"Brahman"}),(0,s.jsx)("option",{value:"Gir",children:"Gir"}),(0,s.jsx)("option",{value:"Receptora",children:"Receptora"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sexo"}),(0,s.jsxs)("select",{value:U.sexo,onChange:e=>H({...U,sexo:e.target.value}),className:"input-field",children:[(0,s.jsx)("option",{value:"",children:"Todos"}),(0,s.jsx)("option",{value:"Macho",children:"Macho"}),(0,s.jsx)("option",{value:"F\xeamea",children:"F\xeamea"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Situa\xe7\xe3o"}),(0,s.jsxs)("select",{value:U.situacao,onChange:e=>H({...U,situacao:e.target.value}),className:"input-field",children:[(0,s.jsx)("option",{value:"",children:"Todas"}),S.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]})]})})]}),(0,s.jsx)(FinancialFixer,{}),W.length>0&&(0,s.jsx)("div",{className:"mb-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center space-x-3",children:(0,s.jsxs)("span",{className:"text-green-800 dark:text-green-200 font-medium",children:[W.length," animais selecionados"]})}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsxs)("button",{onClick:()=>O(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center font-medium",children:[(0,s.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"\uD83D\uDCB0 Vender Animais"]}),(0,s.jsx)("button",{onClick:()=>{X([]),K(!1)},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Cancelar Sele\xe7\xe3o"}),(0,s.jsxs)("button",{onClick:handleDeleteSelected,className:"btn-danger flex items-center space-x-2",children:[(0,s.jsx)(N.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Excluir Selecionados"})]})]})]})}),(0,s.jsxs)("div",{className:"card overflow-hidden",children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,s.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:(0,s.jsx)("input",{type:"checkbox",checked:Q,onChange:()=>{Q?X([]):X(er.map(e=>e.id)),K(!Q)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Animal"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Detalhes"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Situa\xe7\xe3o"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Financeiro"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,s.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:en.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("input",{type:"checkbox",checked:W.includes(e.id),onChange:()=>handleSelectAnimal(e.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Macho"===e.sexo?"\uD83D\uDC02":"\uD83D\uDC04"})})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsxs)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[e.serie," ",e.rg]}),(0,s.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",e.id]})]})]})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-900 dark:text-white",children:[e.raca," - ",e.sexo]}),(0,s.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.meses," meses"]})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("Ativo"===e.situacao?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"Vendido"===e.situacao?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"Morto"===e.situacao?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"),children:e.situacao})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[(0,s.jsxs)("div",{className:"text-gray-900 dark:text-white",children:["Custo: R$"," ",e.custoTotal.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),null!==e.valorReal&&(0,s.jsxs)("div",{className:e.valorReal>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:["Resultado: R$"," ",e.valorReal.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>handleViewAnimal(e),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Visualizar",children:(0,s.jsx)(k.Z,{className:"h-5 w-5"})}),(0,s.jsx)("button",{onClick:()=>{g(e),R(!0)},className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",title:"Editar",children:(0,s.jsx)(w.Z,{className:"h-5 w-5"})}),(0,s.jsx)("button",{onClick:()=>{g(e),M(!0)},className:"text-yellow-600 hover:text-yellow-900 dark:text-yellow-400 dark:hover:text-yellow-300",title:"Gerenciar Custos",children:(0,s.jsx)(p.Z,{className:"h-5 w-5"})}),(0,s.jsx)("button",{onClick:()=>{g(e),I(!0)},className:"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300",title:"Timeline de Custos",children:(0,s.jsx)(D.Z,{className:"h-5 w-5"})}),(0,s.jsx)("button",{onClick:()=>handlePrint(e),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Imprimir",children:(0,s.jsx)(C.Z,{className:"h-5 w-5"})}),(0,s.jsx)("button",{onClick:()=>handleDeleteAnimal(e.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Excluir",children:(0,s.jsx)(N.Z,{className:"h-5 w-5"})})]})})]},e.id))})]})}),el>1&&(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-900 px-4 py-3 flex items-center justify-between border-t border-gray-200 dark:border-gray-700 sm:px-6",children:[(0,s.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,s.jsx)("button",{onClick:goToPreviousPage,disabled:1===et,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),(0,s.jsx)("button",{onClick:goToNextPage,disabled:et===el,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Pr\xf3ximo"})]}),(0,s.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Mostrando"," ",(0,s.jsx)("span",{className:"font-medium",children:ei+1})," ","at\xe9"," ",(0,s.jsx)("span",{className:"font-medium",children:Math.min(eo,er.length)})," ","de"," ",(0,s.jsx)("span",{className:"font-medium",children:er.length})," ","resultados"]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[(0,s.jsx)("button",{onClick:goToPreviousPage,disabled:1===et,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"←"}),Array.from({length:el},(e,a)=>a+1).map(e=>(0,s.jsx)("button",{onClick:()=>goToPage(e),className:"relative inline-flex items-center px-4 py-2 border text-sm font-medium ".concat(e===et?"z-10 bg-blue-50 dark:bg-blue-900 border-blue-500 dark:border-blue-400 text-blue-600 dark:text-blue-200":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"),children:e},e)),(0,s.jsx)("button",{onClick:goToNextPage,disabled:et===el,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"→"})]})})]})]}),0===er.length&&(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsxs)("div",{className:"text-gray-500 dark:text-gray-400",children:[(0,s.jsx)(A.Z,{className:"mx-auto h-12 w-12 mb-4"}),(0,s.jsx)("p",{className:"text-lg font-medium",children:"Nenhum animal encontrado"}),(0,s.jsx)("p",{className:"text-sm",children:"Tente ajustar os filtros ou adicione um novo animal"})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,s.jsxs)("div",{onClick:()=>{clearFilters(),q("")},className:"card p-4 text-center cursor-pointer hover:shadow-lg hover:scale-105 transition-all duration-300 group bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border-2 border-blue-200 dark:border-blue-800 hover:border-blue-400 dark:hover:border-blue-600",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mb-2 group-hover:scale-110 transition-transform",children:er.length}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors font-medium",children:"Total Filtrado"}),(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1 opacity-0 group-hover:opacity-100 transition-opacity",children:"\uD83D\uDC46 Clique para limpar filtros"})]}),(0,s.jsxs)("div",{onClick:()=>{H(e=>({...e,situacao:"Ativo"})),q("")},className:"card p-4 text-center cursor-pointer hover:shadow-lg hover:scale-105 transition-all duration-300 group bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border-2 border-green-200 dark:border-green-800 hover:border-green-400 dark:hover:border-green-600",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mb-2 group-hover:scale-110 transition-transform",children:er.filter(e=>"Ativo"===e.situacao).length}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 group-hover:text-green-600 dark:group-hover:text-green-400 transition-colors font-medium",children:"Ativos"}),(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1 opacity-0 group-hover:opacity-100 transition-opacity",children:"\uD83D\uDC46 Clique para filtrar ativos"})]}),(0,s.jsxs)("div",{onClick:()=>{H(e=>({...e,situacao:"Vendido"})),q("")},className:"card p-4 text-center cursor-pointer hover:shadow-lg hover:scale-105 transition-all duration-300 group bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 border-2 border-orange-200 dark:border-orange-800 hover:border-orange-400 dark:hover:border-orange-600",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400 mb-2 group-hover:scale-110 transition-transform",children:er.filter(e=>"Vendido"===e.situacao).length}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 group-hover:text-orange-600 dark:group-hover:text-orange-400 transition-colors font-medium",children:"Vendidos"}),(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1 opacity-0 group-hover:opacity-100 transition-opacity",children:"\uD83D\uDC46 Clique para ver vendidos"})]}),(0,s.jsxs)("div",{onClick:()=>ea(!0),className:"card p-4 text-center cursor-pointer hover:shadow-lg hover:scale-105 transition-all duration-300 group bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border-2 border-purple-200 dark:border-purple-800 hover:border-purple-400 dark:hover:border-purple-600",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400 mb-2 group-hover:scale-110 transition-transform",children:["R$"," ",er.reduce((e,a)=>e+a.custoTotal,0).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors font-medium",children:"Custo Total"}),(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1 opacity-0 group-hover:opacity-100 transition-opacity",children:"\uD83D\uDC46 Clique para ver resumo"})]}),(0,s.jsxs)("div",{onClick:()=>{let e=er.filter(e=>"Morto"===e.situacao).length,a=er.filter(e=>"Doado"===e.situacao).length,t=er.filter(e=>!["Ativo","Vendido","Morto","Doado"].includes(e.situacao)).length;e>0||a>0||t>0?H(t=>({...t,situacao:e>0?"Morto":a>0?"Doado":""})):alert("\uD83D\uDCCA Outras Situa\xe7\xf5es:\n\nNenhum animal encontrado em outras situa\xe7\xf5es (Morto, Doado, etc.)")},className:"card p-4 text-center cursor-pointer hover:shadow-lg hover:scale-105 transition-all duration-300 group bg-gradient-to-br from-gray-50 to-slate-50 dark:from-gray-900/20 dark:to-slate-900/20 border-2 border-gray-200 dark:border-gray-800 hover:border-gray-400 dark:hover:border-gray-600",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-600 dark:text-gray-400 mb-2 group-hover:scale-110 transition-transform",children:er.filter(e=>!["Ativo","Vendido"].includes(e.situacao)).length}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 group-hover:text-gray-700 dark:group-hover:text-gray-300 transition-colors font-medium",children:"Outros"}),(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1 opacity-0 group-hover:opacity-100 transition-opacity",children:"\uD83D\uDC46 Mortos, doados, etc."})]})]})]}),(0,s.jsx)(o.Z,{animal:c,isOpen:u,onClose:()=>{R(!1),g(null)},onSave:handleSaveAnimal}),E&&c&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["Gerenciar Custos - ",c.serie," ",c.rg]}),(0,s.jsx)("button",{onClick:()=>{M(!1),g(null)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl font-bold",children:"\xd7"})]}),(0,s.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:(0,s.jsx)(CostManager,{animal:c,isOpen:!0,onClose:()=>{M(!1),g(null)},onSave:e=>{t(a.map(a=>a.id===e.id?e:a)),g(null)}})})]})}),F&&c&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["Timeline de Custos - ",c.serie," ",c.rg]}),(0,s.jsx)("button",{onClick:()=>{I(!1),g(null)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl font-bold",children:"\xd7"})]}),(0,s.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:(0,s.jsx)(AnimalTimeline,{animalId:c.id})})]})}),(0,s.jsx)(AnimalImporter,{isOpen:G,onClose:()=>$(!1),onImport:handleImportAnimals}),(0,s.jsx)(x.Z,{isOpen:T,onClose:()=>O(!1),selectedAnimals:W.map(e=>a.find(a=>a.id===e)).filter(Boolean),onSalesComplete:handleSalesComplete}),(0,s.jsx)(m.Z,{isOpen:B,onClose:()=>V(!1),onSalesComplete:handleSalesComplete}),P&&c&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"h-12 w-12 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-2xl",children:"Macho"===c.sexo?"\uD83D\uDC02":"\uD83D\uDC04"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[c.serie," ",c.rg]}),(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[c.raca," • ",c.sexo," •"," ",c.meses," meses"]})]})]}),(0,s.jsx)("button",{onClick:()=>Z(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl font-bold",children:"\xd7"})]}),(0,s.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[(0,s.jsx)("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsx)("span",{className:"inline-flex px-3 py-1 text-sm font-semibold rounded-full ".concat("Ativo"===c.situacao?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"Vendido"===c.situacao?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"Morto"===c.situacao?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"),children:c.situacao})}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"ID do Sistema"}),(0,s.jsxs)("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["#",c.id]})]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[(0,s.jsxs)("div",{className:"card p-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"\uD83D\uDCCB"}),"Informa\xe7\xf5es B\xe1sicas"]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"S\xe9rie:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:c.serie})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"RG:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:c.rg})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Ra\xe7a:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:c.raca})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Sexo:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:c.sexo})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Idade:"}),(0,s.jsxs)("span",{className:"font-medium text-gray-900 dark:text-white",children:[c.meses," meses"]})]}),c.dataNascimento&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Nascimento:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:new Date(c.dataNascimento).toLocaleDateString("pt-BR")})]})]})]}),(0,s.jsxs)("div",{className:"card p-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"\uD83D\uDCB0"}),"Resumo Financeiro"]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Custo Total:"}),(0,s.jsxs)("span",{className:"font-bold text-red-600 dark:text-red-400",children:["R$"," ",c.custoTotal.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),c.valorVenda&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Valor de Venda:"}),(0,s.jsxs)("span",{className:"font-bold text-green-600 dark:text-green-400",children:["R$"," ",c.valorVenda.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),null!==c.valorReal&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Resultado:"}),(0,s.jsxs)("span",{className:"font-bold ".concat(c.valorReal>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:["R$"," ",c.valorReal.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),c.valorVenda&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"ROI:"}),(0,s.jsxs)("span",{className:"font-bold ".concat((c.valorVenda-c.custoTotal)/c.custoTotal>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[((c.valorVenda-c.custoTotal)/c.custoTotal*100).toFixed(1),"%"]})]})]})]})]}),(c.pai||c.mae||c.avoMaterno||c.receptora)&&(0,s.jsxs)("div",{className:"card p-4 mb-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"\uD83E\uDDEC"}),"Genealogia"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.pai&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Pai:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:c.pai})]}),c.mae&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"M\xe3e:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:c.mae})]}),c.avoMaterno&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Av\xf4 Materno:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:c.avoMaterno})]}),c.receptora&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Receptora:"}),(0,s.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:c.receptora})]}),c.isFiv&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"FIV:"}),(0,s.jsx)("span",{className:"font-medium text-green-600 dark:text-green-400",children:"Sim"})]})]})]}),c.custos&&c.custos.length>0&&(0,s.jsxs)("div",{className:"card p-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"\uD83D\uDCCA"}),"Hist\xf3rico de Custos (",c.custos.length," ","registros)"]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,s.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Data"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Tipo"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Valor"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Observa\xe7\xf5es"})]})}),(0,s.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:c.custos.map((e,a)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:new Date(e.data).toLocaleDateString("pt-BR")}),(0,s.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.tipo}),e.subtipo&&(0,s.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-1",children:["- ",e.subtipo]})]}),(0,s.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:(0,s.jsxs)("span",{className:"text-sm font-bold ".concat(e.valor>0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"),children:[e.valor>0?"-":"+","R$"," ",Math.abs(e.valor).toLocaleString("pt-BR",{minimumFractionDigits:2})]})}),(0,s.jsx)("td",{className:"px-4 py-2 text-sm text-gray-500 dark:text-gray-400",children:e.observacoes||"-"})]},e.id||a))})]})})]})]}),(0,s.jsx)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between space-y-3 sm:space-y-0",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:[(0,s.jsxs)("button",{onClick:()=>{Z(!1),R(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center font-medium",children:[(0,s.jsx)(w.Z,{className:"h-4 w-4 mr-2"}),"✏️ Editar Animal"]}),(0,s.jsxs)("button",{onClick:()=>{Z(!1),g(c),M(!0)},className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors flex items-center justify-center font-medium",children:[(0,s.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"\uD83D\uDCB0 Gerenciar Custos"]}),(0,s.jsxs)("button",{onClick:()=>handlePrint(c),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center font-medium",children:[(0,s.jsx)(C.Z,{className:"h-4 w-4 mr-2"}),"\uD83D\uDDA8️ Imprimir Ficha"]})]}),(0,s.jsx)("button",{onClick:()=>Z(!1),className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium",children:"❌ Fechar"})]})})]})}),ee&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-purple-600 to-pink-600",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(p.Z,{className:"h-8 w-8 text-white"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Resumo Financeiro"}),(0,s.jsx)("p",{className:"text-purple-100",children:"An\xe1lise detalhada dos investimentos"})]})]}),(0,s.jsx)("button",{onClick:()=>ea(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors text-white text-2xl font-bold",children:"\xd7"})]}),(0,s.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,s.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl p-6 border border-green-200 dark:border-green-800",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:["R$ ",er.reduce((e,a)=>e+a.custoTotal,0).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Total Investido"})]})}),(0,s.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-6 border border-blue-200 dark:border-blue-800",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:["R$ ",(er.reduce((e,a)=>e+a.custoTotal,0)/(er.length||1)).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Investimento M\xe9dio"})]})}),(0,s.jsx)("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 rounded-xl p-6 border border-orange-200 dark:border-orange-800",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400",children:er.length}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Animais Analisados"})]})})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83C\uDFC6 Top 5 Maiores Investimentos"}),(0,s.jsx)("div",{className:"space-y-3",children:[...er].sort((e,a)=>a.custoTotal-e.custoTotal).slice(0,5).map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ".concat(0===a?"bg-yellow-500":1===a?"bg-gray-400":2===a?"bg-orange-600":"bg-blue-500"),children:a+1}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-medium text-gray-900 dark:text-white",children:[e.serie," ",e.rg]}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[e.raca," • ",e.sexo," • ",e.meses," meses"]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"font-bold text-purple-600 dark:text-purple-400",children:["R$ ",e.custoTotal.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[(e.custoTotal/er.reduce((e,a)=>e+a.custoTotal,0)*100).toFixed(1),"% do total"]})]})]},e.id))})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83D\uDCCA Distribui\xe7\xe3o de Investimentos por Situa\xe7\xe3o"}),(0,s.jsx)("div",{className:"space-y-3",children:["Ativo","Vendido","Morto","Doado"].map(e=>{let a=er.filter(a=>a.situacao===e),t=a.reduce((e,a)=>e+a.custoTotal,0),r=er.reduce((e,a)=>e+a.custoTotal,0)>0?t/er.reduce((e,a)=>e+a.custoTotal,0)*100:0;return 0===a.length?null:(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-4 h-4 rounded-full ".concat("Ativo"===e?"bg-green-500":"Vendido"===e?"bg-orange-500":"Morto"===e?"bg-red-500":"bg-blue-500")}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[a.length," animais"]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"font-bold text-gray-900 dark:text-white",children:["R$ ",t.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[r.toFixed(1),"% do total"]})]})]},e)})})]})]})]})})]})}},2940:function(e,a,t){"use strict";var s=t(7294);function EyeIcon({title:e,titleId:a,...t},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},t),e?s.createElement("title",{id:a},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}let r=s.forwardRef(EyeIcon);a.Z=r},8613:function(e,a,t){"use strict";var s=t(7294);function PrinterIcon({title:e,titleId:a,...t},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},t),e?s.createElement("title",{id:a},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"}))}let r=s.forwardRef(PrinterIcon);a.Z=r}},function(e){e.O(0,[869,68,577,787,441,774,888,179],function(){return e(e.s=5653)}),_N_E=e.O()}]);