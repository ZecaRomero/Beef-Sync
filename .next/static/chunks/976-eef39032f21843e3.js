"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[976],{36:function(e,t,a){a.d(t,{Z:function(){return AnimalForm}});var r=a(5893),s=a(7294),l=a(1415);function AnimalForm(e){let{animal:t,isOpen:a,onClose:i,onSave:n}=e,[o,d]=(0,s.useState)({serie:"",rg:"",sexo:"",era:"",preco:"",observacoes:""}),[c,x]=(0,s.useState)({});(0,s.useEffect)(()=>{t?d({serie:t.serie||"",rg:t.rg||"",sexo:"MACHO"===t.sexo?"Macho":"F\xeamea",era:t.era||"",preco:t.valorVenda||"",observacoes:t.observacoes||""}):d({serie:"",rg:"",sexo:"",era:"",preco:"",observacoes:""})},[t]);let validateForm=()=>{let e={};return o.serie?["RPT","BENT","CJCJ","CJCG"].includes(o.serie)||(e.serie="S\xe9rie deve ser RPT, BENT, CJCJ ou CJCG"):e.serie="S\xe9rie \xe9 obrigat\xf3ria (RPT, BENT, CJCJ, CJCG)",o.rg?o.rg.length>6?e.rg="RG deve ter no m\xe1ximo 6 d\xedgitos":/^\d+$/.test(o.rg)||(e.rg="RG deve conter apenas n\xfameros"):e.rg="RG \xe9 obrigat\xf3rio",o.sexo?["Macho","F\xeamea"].includes(o.sexo)||(e.sexo="Sexo deve ser Macho ou F\xeamea"):e.sexo="Sexo \xe9 obrigat\xf3rio (Macho ou F\xeamea)",o.era&&(isNaN(o.era)||o.era<0||o.era>120)&&(e.era="Era deve ser um n\xfamero entre 0 e 120 meses"),o.preco&&(isNaN(o.preco)||o.preco<0)&&(e.preco="Pre\xe7o deve ser um valor positivo"),x(e),0===Object.keys(e).length},getDefaultRace=e=>({RPT:"Receptora",BENT:"Brahman",CJCJ:"Nelore",CJCG:"Gir"})[e]||"N\xe3o definida",calculateBirthDate=e=>{if(!e)return null;let t=parseInt(e);if(isNaN(t))return null;let a=new Date,r=new Date(a.getFullYear(),a.getMonth()-t,a.getDate());return r.toISOString().split("T")[0]};return a?(0,r.jsx)("div",{className:"modal-overlay",children:(0,r.jsxs)("div",{className:"modal-content",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t?"Editar Animal":"Novo Animal"}),(0,r.jsx)("button",{onClick:i,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:(0,r.jsx)(l.Z,{className:"h-6 w-6"})})]}),(0,r.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),validateForm()){let e={serie:o.serie.toUpperCase(),rg:o.rg,brinco:"".concat(o.serie.toUpperCase()," ").concat(o.rg),nome:"".concat(o.serie.toUpperCase()," ").concat(o.rg),sexo:"Macho"===o.sexo?"MACHO":"FEMEA",raca:getDefaultRace(o.serie),status:"ATIVO",era:o.era||null,valorVenda:o.preco?parseFloat(o.preco):null,observacoes:o.observacoes||null,dataNascimento:calculateBirthDate(o.era),createdAt:new Date().toISOString()};console.log("Dados do animal a serem salvos:",e),n(e)}},className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900 dark:to-indigo-900 rounded-xl p-6 border-2 border-blue-200 dark:border-blue-700",children:[(0,r.jsx)("h4",{className:"text-xl font-bold text-blue-900 dark:text-blue-100 mb-6 flex items-center",children:"⭐ Campos Obrigat\xf3rios"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-blue-800 dark:text-blue-200 mb-3",children:"S\xc9RIE *"}),(0,r.jsxs)("select",{value:o.serie,onChange:e=>d({...o,serie:e.target.value}),className:"w-full px-4 py-4 border-2 rounded-xl focus:ring-4 focus:ring-blue-300 dark:bg-gray-700 dark:text-white text-lg font-medium ".concat(c.serie?"border-red-500 bg-red-50":"border-blue-300 dark:border-blue-600"),children:[(0,r.jsx)("option",{value:"",children:"Selecione..."}),(0,r.jsx)("option",{value:"RPT",children:"RPT"}),(0,r.jsx)("option",{value:"BENT",children:"BENT"}),(0,r.jsx)("option",{value:"CJCJ",children:"CJCJ"}),(0,r.jsx)("option",{value:"CJCG",children:"CJCG"})]}),c.serie&&(0,r.jsxs)("p",{className:"text-red-600 text-sm mt-2 font-medium",children:["⚠️ ",c.serie]}),(0,r.jsxs)("p",{className:"text-xs text-blue-600 dark:text-blue-300 mt-2 font-medium",children:["RPT"===o.serie&&"Receptora","BENT"===o.serie&&"Brahman","CJCJ"===o.serie&&"Nelore","CJCG"===o.serie&&"Gir"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-blue-800 dark:text-blue-200 mb-3",children:"RG (REGISTRO) *"}),(0,r.jsx)("input",{type:"text",value:o.rg,onChange:e=>d({...o,rg:e.target.value}),maxLength:6,className:"w-full px-4 py-4 border-2 rounded-xl focus:ring-4 focus:ring-blue-300 dark:bg-gray-700 dark:text-white text-lg font-mono ".concat(c.rg?"border-red-500 bg-red-50":"border-blue-300 dark:border-blue-600"),placeholder:"123456"}),c.rg&&(0,r.jsxs)("p",{className:"text-red-600 text-sm mt-2 font-medium",children:["⚠️ ",c.rg]}),(0,r.jsx)("p",{className:"text-xs text-blue-600 dark:text-blue-300 mt-2 font-medium",children:"At\xe9 6 d\xedgitos"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-blue-800 dark:text-blue-200 mb-3",children:"SEXO *"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>d({...o,sexo:"Macho"}),className:"p-4 rounded-xl border-2 transition-all duration-200 flex items-center justify-center text-base font-bold ".concat("Macho"===o.sexo?"border-blue-500 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 shadow-lg scale-105":"border-gray-300 dark:border-gray-600 hover:border-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30"),children:["\uD83D\uDC02",(0,r.jsx)("br",{}),"MACHO"]}),(0,r.jsxs)("button",{type:"button",onClick:()=>d({...o,sexo:"F\xeamea"}),className:"p-4 rounded-xl border-2 transition-all duration-200 flex items-center justify-center text-base font-bold ".concat("F\xeamea"===o.sexo?"border-pink-500 bg-pink-100 dark:bg-pink-800 text-pink-800 dark:text-pink-200 shadow-lg scale-105":"border-gray-300 dark:border-gray-600 hover:border-pink-400 hover:bg-pink-50 dark:hover:bg-pink-900/30"),children:["\uD83D\uDC04",(0,r.jsx)("br",{}),"F\xcaMEA"]})]}),c.sexo&&(0,r.jsxs)("p",{className:"text-red-600 text-sm mt-2 font-medium",children:["⚠️ ",c.sexo]})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900 dark:to-emerald-900 rounded-xl p-6 border-2 border-green-200 dark:border-green-700",children:[(0,r.jsx)("h4",{className:"text-xl font-bold text-green-900 dark:text-green-100 mb-6 flex items-center",children:"\uD83D\uDCDD Campos Opcionais"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-green-800 dark:text-green-200 mb-3",children:"ERA (IDADE EM MESES)"}),(0,r.jsx)("input",{type:"number",value:o.era,onChange:e=>d({...o,era:e.target.value}),className:"w-full px-4 py-4 border-2 border-green-300 dark:border-green-600 rounded-xl focus:ring-4 focus:ring-green-300 dark:bg-gray-700 dark:text-white text-lg font-medium",placeholder:"24",min:"0",max:"120"}),(0,r.jsx)("p",{className:"text-xs text-green-600 dark:text-green-300 mt-2 font-medium",children:"Idade do animal em meses (0-120)"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-green-800 dark:text-green-200 mb-3",children:"PRE\xc7O (R$)"}),(0,r.jsx)("input",{type:"number",step:"0.01",value:o.preco,onChange:e=>d({...o,preco:e.target.value}),className:"w-full px-4 py-4 border-2 border-green-300 dark:border-green-600 rounded-xl focus:ring-4 focus:ring-green-300 dark:bg-gray-700 dark:text-white text-lg font-medium",placeholder:"5000.00"}),(0,r.jsx)("p",{className:"text-xs text-green-600 dark:text-green-300 mt-2 font-medium",children:"Valor do animal em reais"})]})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-green-800 dark:text-green-200 mb-3",children:"OBSERVA\xc7\xd5ES"}),(0,r.jsx)("textarea",{value:o.observacoes,onChange:e=>d({...o,observacoes:e.target.value}),className:"w-full px-4 py-4 border-2 border-green-300 dark:border-green-600 rounded-xl focus:ring-4 focus:ring-green-300 dark:bg-gray-700 dark:text-white text-base",rows:4,placeholder:"Informa\xe7\xf5es adicionais sobre o animal..."}),(0,r.jsx)("p",{className:"text-xs text-green-600 dark:text-green-300 mt-2 font-medium",children:"Texto livre para observa\xe7\xf5es"})]})]}),o.serie&&o.rg&&(0,r.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-violet-50 dark:from-purple-900 dark:to-violet-900 rounded-xl p-6 border-2 border-purple-200 dark:border-purple-700",children:[(0,r.jsx)("h4",{className:"text-xl font-bold text-purple-900 dark:text-purple-100 mb-6 flex items-center",children:"\uD83D\uDC41️ Preview do Animal"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-sm font-bold text-purple-800 dark:text-purple-200 mb-2",children:"BRINCO"}),(0,r.jsxs)("div",{className:"text-2xl font-mono font-bold text-purple-900 dark:text-purple-100 bg-white dark:bg-gray-800 rounded-lg p-3 border-2 border-purple-300",children:[o.serie," ",o.rg]})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-sm font-bold text-purple-800 dark:text-purple-200 mb-2",children:"RA\xc7A"}),(0,r.jsx)("div",{className:"text-lg font-bold text-purple-900 dark:text-purple-100 bg-white dark:bg-gray-800 rounded-lg p-3 border-2 border-purple-300",children:getDefaultRace(o.serie)})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-sm font-bold text-purple-800 dark:text-purple-200 mb-2",children:"SEXO"}),(0,r.jsx)("div",{className:"text-lg font-bold text-purple-900 dark:text-purple-100 bg-white dark:bg-gray-800 rounded-lg p-3 border-2 border-purple-300",children:o.sexo||"N\xe3o definido"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-sm font-bold text-purple-800 dark:text-purple-200 mb-2",children:"ERA"}),(0,r.jsx)("div",{className:"text-lg font-bold text-purple-900 dark:text-purple-100 bg-white dark:bg-gray-800 rounded-lg p-3 border-2 border-purple-300",children:o.era?"".concat(o.era,"m"):"N/I"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-sm font-bold text-purple-800 dark:text-purple-200 mb-2",children:"PRE\xc7O"}),(0,r.jsx)("div",{className:"text-lg font-bold text-green-600 dark:text-green-400 bg-white dark:bg-gray-800 rounded-lg p-3 border-2 border-purple-300",children:o.preco?"R$ ".concat(parseFloat(o.preco).toLocaleString("pt-BR",{minimumFractionDigits:2})):"N/I"})]})]}),(0,r.jsxs)("div",{className:"mt-4 p-4 bg-white dark:bg-gray-800 rounded-lg border-2 border-purple-300",children:[(0,r.jsx)("h5",{className:"text-sm font-bold text-purple-800 dark:text-purple-200 mb-2",children:"\uD83D\uDD27 DADOS AUTO-GERADOS:"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-purple-700 dark:text-purple-300",children:"Nome:"}),(0,r.jsxs)("div",{className:"font-mono text-purple-900 dark:text-purple-100",children:[o.serie," ",o.rg]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-purple-700 dark:text-purple-300",children:"Status:"}),(0,r.jsx)("div",{className:"text-green-600 font-bold",children:"ATIVO"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-purple-700 dark:text-purple-300",children:"Data Nasc:"}),(0,r.jsx)("div",{className:"text-purple-900 dark:text-purple-100",children:o.era?"Calculada":"N/I"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-purple-700 dark:text-purple-300",children:"Brinco \xdanico:"}),(0,r.jsx)("div",{className:"text-green-600 font-bold",children:"✓ Validado"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-6 border-2 border-gray-200 dark:border-gray-600",children:[(0,r.jsx)("h4",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-4 flex items-center",children:"✅ Status de Valida\xe7\xe3o"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl mb-2 ".concat(o.serie?"text-green-500":"text-red-500"),children:o.serie?"✅":"❌"}),(0,r.jsxs)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["S\xe9rie ",o.serie?"✓":"(obrigat\xf3rio)"]})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl mb-2 ".concat(o.rg&&o.rg.length<=6?"text-green-500":"text-red-500"),children:o.rg&&o.rg.length<=6?"✅":"❌"}),(0,r.jsxs)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["RG ",o.rg&&o.rg.length<=6?"✓":"(obrigat\xf3rio)"]})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl mb-2 ".concat(o.sexo?"text-green-500":"text-red-500"),children:o.sexo?"✅":"❌"}),(0,r.jsxs)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Sexo ",o.sexo?"✓":"(obrigat\xf3rio)"]})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl mb-2 ".concat(o.era?"text-blue-500":"text-gray-400"),children:o.era?"\uD83D\uDCC5":"⚪"}),(0,r.jsxs)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Era ",o.era?"✓":"(opcional)"]})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl mb-2 ".concat(o.preco?"text-green-500":"text-gray-400"),children:o.preco?"\uD83D\uDCB0":"⚪"}),(0,r.jsxs)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Pre\xe7o ",o.preco?"✓":"(opcional)"]})]})]}),o.serie&&o.rg&&(0,r.jsx)("div",{className:"mt-4 p-3 bg-green-100 dark:bg-green-900 rounded-lg border border-green-300 dark:border-green-700",children:(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-green-600 dark:text-green-400 font-bold",children:["\uD83C\uDFAF Brinco \xfanico ser\xe1: ",(0,r.jsxs)("span",{className:"font-mono text-lg",children:[o.serie," ",o.rg]})]})})})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center pt-6 border-t-2 border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,r.jsx)("div",{className:"font-medium",children:"Campos obrigat\xf3rios: S\xe9rie, RG, Sexo"}),(0,r.jsx)("div",{children:"Campos opcionais: Era, Pre\xe7o, Observa\xe7\xf5es"})]}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{type:"button",onClick:i,className:"px-8 py-4 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-all duration-200 font-bold text-lg",children:"❌ Cancelar"}),(0,r.jsx)("button",{type:"submit",disabled:!o.serie||!o.rg||!o.sexo,className:"px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-bold text-lg flex items-center disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:t?"✏️ ATUALIZAR ANIMAL":"\uD83D\uDCBE SALVAR ANIMAL"})]})]})]})]})}):null}},8394:function(e,t,a){a.d(t,{Z:function(){return AuctionManager}});var r=a(5893),s=a(7294),l=a(5837);function ShareIcon({title:e,titleId:t,...a},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}let i=s.forwardRef(ShareIcon);var n=a(445),o=a(3658),d=a(434),c=a(1415);a(6949);let DevicePhoneMobileIcon=e=>{let{className:t}=e;return(0,r.jsx)("span",{className:t,children:"\uD83D\uDCF1"})};function AuctionManager(e){var t,a,x,m,g,u;let{isOpen:h,onClose:b,onSalesComplete:p}=e,[v,y]=(0,s.useState)([]),[f,j]=(0,s.useState)([]),[N,k]=(0,s.useState)(!1),[D,w]=(0,s.useState)(!1),[C,A]=(0,s.useState)(""),[R,S]=(0,s.useState)({nome:"Sistema de Vendas",data:new Date().toISOString().split("T")[0],local:"Fazenda",tipo:"VENDA"}),[E,B]=(0,s.useState)({}),[I,L]=(0,s.useState)("timeline"),[O,V]=(0,s.useState)(!1),[T,F]=(0,s.useState)([]),[P,M]=(0,s.useState)({fivAnimals:[],iaAnimals:[],topBulls:[],priceAnalysis:{}});(0,s.useEffect)(()=>{h&&(loadActiveAnimals(),generateTimeline())},[h]),(0,s.useEffect)(()=>{f.length>0&&analyzeAnimals()},[f,E]),(0,s.useEffect)(()=>{if(C){let e=v.filter(e=>{var t,a,r,s;let l=C.toLowerCase(),i=e.serie||extractSerieFromBrinco(e.brinco);return(null===(t=e.brinco)||void 0===t?void 0:t.toLowerCase().includes(l))||(null==i?void 0:i.toLowerCase().includes(l))||(null===(a=e.raca)||void 0===a?void 0:a.toLowerCase().includes(l))||(null===(r=e.nome)||void 0===r?void 0:r.toLowerCase().includes(l))||(null===(s=e.id)||void 0===s?void 0:s.toString().includes(l))});j(e)}else j(v)},[C,v]);let extractSerieFromBrinco=e=>{if(!e)return"CJCJ";let t=e.match(/^[A-Z]+/);return t?t[0]:"CJCJ"},generateTimeline=()=>{let e=[{time:"08:00",title:"Abertura do Leil\xe3o",description:"Recep\xe7\xe3o dos participantes e credenciamento",status:"pending",icon:"\uD83C\uDFAA"},{time:"08:30",title:"Apresenta\xe7\xe3o dos Animais",description:"".concat(f.length," animais dispon\xedveis para venda"),status:"pending",icon:"\uD83D\uDC02"},{time:"09:00",title:"In\xedcio dos Lances",description:"Primeira categoria: Touros e Reprodutores",status:"pending",icon:"\uD83D\uDD28"},{time:"10:30",title:"Intervalo",description:"Coffee break e networking",status:"pending",icon:"☕"},{time:"11:00",title:"Segunda Rodada",description:"Novilhas e F\xeameas Jovens",status:"pending",icon:"\uD83D\uDC04"},{time:"14:00",title:"Almo\xe7o",description:"Pausa para refei\xe7\xe3o",status:"pending",icon:"\uD83C\uDF7D️"},{time:"15:00",title:"Rodada Final",description:"Animais FIV e Gen\xe9tica Superior",status:"pending",icon:"\uD83E\uDDEC"},{time:"17:00",title:"Encerramento",description:"Finaliza\xe7\xe3o e acerto de contas",status:"pending",icon:"\uD83C\uDFC1"}];F(e)},analyzeAnimals=()=>{let e=f.filter(e=>{var t,a;return(null===(t=e.observacoes)||void 0===t?void 0:t.toLowerCase().includes("fiv"))||(null===(a=e.categoria)||void 0===a?void 0:a.toLowerCase().includes("fiv"))}),t=f.filter(e=>{var t,a;return!(null===(t=e.observacoes)||void 0===t?void 0:t.toLowerCase().includes("fiv"))&&!(null===(a=e.categoria)||void 0===a?void 0:a.toLowerCase().includes("fiv"))}),a={};f.forEach(e=>{e.pai&&(a[e.pai]||(a[e.pai]={name:e.pai,count:0,animals:[],avgPrice:0}),a[e.pai].count++,a[e.pai].animals.push(e))});let r=Object.values(a).sort((e,t)=>t.count-e.count).slice(0,5),s=e.map(e=>{var t;return(null===(t=E[e.id])||void 0===t?void 0:t.valor)||0}).filter(e=>e>0),l=t.map(e=>{var t;return(null===(t=E[e.id])||void 0===t?void 0:t.valor)||0}).filter(e=>e>0),i={fiv:{count:e.length,avgPrice:s.length>0?s.reduce((e,t)=>e+t,0)/s.length:0,maxPrice:s.length>0?Math.max(...s):0,minPrice:s.length>0?Math.min(...s):0},ia:{count:t.length,avgPrice:l.length>0?l.reduce((e,t)=>e+t,0)/l.length:0,maxPrice:l.length>0?Math.max(...l):0,minPrice:l.length>0?Math.min(...l):0}};M({fivAnimals:e,iaAnimals:t,topBulls:r,priceAnalysis:i})},generateBIReport=()=>{let e=f.length,t=Object.keys(E).length,a=Object.values(E).reduce((e,t)=>e+(t.valor||0),0);return{summary:{totalAnimals:e,soldAnimals:t,totalRevenue:a,avgPrice:t>0?a/t:0,saleRate:e>0?t/e*100:0},fivVsIa:P.priceAnalysis,topBulls:P.topBulls,timeline:T}},sendBIReport=async e=>{try{let t=generateBIReport(),a="\n\uD83D\uDCCB *RELAT\xd3RIO DE VENDAS - BI*\n\n\uD83D\uDCCA *RESUMO GERAL*\n• Total de Animais: ".concat(t.summary.totalAnimals,"\n• Animais Vendidos: ").concat(t.summary.soldAnimals,"\n• Taxa de Venda: ").concat(t.summary.saleRate.toFixed(1),"%\n• Receita Total: R$ ").concat(t.summary.totalRevenue.toLocaleString("pt-BR"),"\n• Pre\xe7o M\xe9dio: R$ ").concat(t.summary.avgPrice.toLocaleString("pt-BR"),"\n\n\uD83E\uDDEC *AN\xc1LISE FIV vs IA*\n• FIV: ").concat(t.fivVsIa.fiv.count," animais - M\xe9dia: R$ ").concat(t.fivVsIa.fiv.avgPrice.toLocaleString("pt-BR"),"\n• IA: ").concat(t.fivVsIa.ia.count," animais - M\xe9dia: R$ ").concat(t.fivVsIa.ia.avgPrice.toLocaleString("pt-BR"),"\n\n\uD83C\uDFC6 *TOP TOUROS (Mais Filhos)*\n").concat(t.topBulls.slice(0,3).map((e,t)=>"".concat(t+1,". ").concat(e.name,": ").concat(e.count," filhos")).join("\n"),"\n\n⏰ *CRONOGRAMA*\n• 08:00 - Abertura\n• 09:00 - In\xedcio dos Lances\n• 15:00 - Animais FIV\n• 17:00 - Encerramento\n\n*Beef Sync* - Gest\xe3o Bovina Inteligente \uD83D\uDC02\n      "),r="https://wa.me/".concat(e.replace(/\D/g,""),"?text=").concat(encodeURIComponent(a));window.open(r,"_blank"),alert("✅ Relat\xf3rio BI enviado!\n\nO WhatsApp Web foi aberto com o relat\xf3rio pronto para enviar.")}catch(e){console.error("Erro ao enviar BI:",e),alert("Erro ao enviar relat\xf3rio BI")}},loadActiveAnimals=async()=>{try{k(!0);let e=await fetch("/api/animals");if(e.ok){let t=await e.json();console.log("Animais carregados da API:",t);let a=t.filter(e=>"ATIVO"===e.status||!e.status||"ativo"===e.status);console.log("Animais ativos filtrados:",a);let r={};a.forEach(e=>{r[e.id]={selected:!1,valor:""}}),y(a),j(a),B(r)}else{console.error("Erro ao carregar animais da API:",e.status);let t=[],a={};t.forEach(e=>{a[e.id]={selected:!1,valor:""}}),y(t),j(t),B(a)}}catch(a){console.error("Erro ao carregar animais:",a);let e=[],t={};e.forEach(e=>{t[e.id]={selected:!1,valor:""}}),y(e),j(e),B(t)}finally{k(!1)}},handleAnimalToggle=e=>{B(t=>({...t,[e]:{...t[e],selected:!t[e].selected}}))},handleValueChange=(e,t)=>{B(a=>({...a,[e]:{...a[e],valor:t,selected:!!t||a[e].selected}}))},getSelectedAnimals=()=>{let e=Object.entries(E).filter(e=>{let[t,a]=e;return a.selected&&a.valor}).map(e=>{let[t,a]=e;return{animalId:t,animal:v.find(e=>e.id===t),valor:parseFloat(a.valor)}});return console.log("\uD83D\uDD0D Animais selecionados:",e),console.log("\uD83D\uDCCA SalesData atual:",E),e},handleSaveAuction=async()=>{console.log("\uD83D\uDD04 Iniciando salvamento de vendas...");let e=getSelectedAnimals();if(console.log("\uD83D\uDCCB Vendas selecionadas:",e),0===e.length){alert("Selecione pelo menos um animal e informe o valor de venda");return}try{w(!0),console.log("\uD83D\uDCBE Salvando vendas no banco...");let t=e.map(e=>(console.log("\uD83D\uDD04 Salvando animal ".concat(e.animalId," com valor ").concat(e.valor)),fetch("/api/animals/"+e.animalId,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"VENDIDO",valorVenda:e.valor,dataVenda:new Date().toISOString()})}))),a=await Promise.all(t);console.log("✅ Respostas da API:",a);let r=a.every(e=>e.ok);if(!r)throw Error("Algumas vendas n\xe3o puderam ser salvas");let s=generateBIReport();console.log("\uD83D\uDCCA Relat\xf3rio gerado:",s);let l=e.reduce((e,t)=>e+t.valor,0),i=l/e.length;alert("✅ Vendas registradas com sucesso!\n\n\uD83D\uDCCA RESUMO:\n• ".concat(e.length," animais vendidos\n• Receita total: R$ ").concat(l.toLocaleString("pt-BR"),"\n• Pre\xe7o m\xe9dio: R$ ").concat(i.toLocaleString("pt-BR"),'\n\n\uD83D\uDCCB Relat\xf3rios dispon\xedveis na aba "Relat\xf3rios"\n\uD83D\uDCF1 Use "Enviar BI" para compartilhar via WhatsApp'));let n=v.map(t=>{let a=e.find(e=>e.animalId===t.id);return a?{...t,status:"VENDIDO",valorVenda:a.valor}:t});y(n),j(n),B({}),p&&p(),b()}catch(e){console.error("❌ Erro ao salvar vendas:",e),alert("Erro ao salvar vendas: "+e.message)}finally{w(!1)}},J=getSelectedAnimals().reduce((e,t)=>e+t.valor,0),G=getSelectedAnimals().length;return h?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-6xl w-full max-h-[95vh] overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-green-600 to-blue-600",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(l.Z,{className:"h-8 w-8 text-white"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"\uD83D\uDCCB Sistema de Vendas e NF"}),(0,r.jsx)("p",{className:"text-green-100",children:"Gest\xe3o de Vendas, Pre\xe7os, Compradores e Notas Fiscais"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("button",{onClick:()=>V(!0),className:"px-4 py-2 bg-white/20 text-white rounded-lg hover:bg-white/30 transition-colors flex items-center",children:[(0,r.jsx)(i,{className:"h-4 w-4 mr-2"}),"Enviar BI"]}),(0,r.jsx)("button",{onClick:b,className:"p-2 hover:bg-white/20 rounded-lg transition-colors text-white text-2xl font-bold",children:"\xd7"})]})]}),(0,r.jsx)("div",{className:"flex border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[{id:"timeline",label:"Cronograma",icon:n.Z},{id:"analytics",label:"An\xe1lises",icon:o.Z},{id:"animals",label:"Animais",icon:l.Z},{id:"reports",label:"Relat\xf3rios",icon:d.Z}].map(e=>(0,r.jsxs)("button",{onClick:()=>L(e.id),className:"flex items-center px-6 py-3 text-sm font-medium transition-colors ".concat(I===e.id?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 bg-white dark:bg-gray-800":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:[(0,r.jsx)(e.icon,{className:"h-4 w-4 mr-2"}),e.label]},e.id))}),(0,r.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(95vh-200px)]",children:["timeline"===I&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"⏰ Cronograma do Leil\xe3o"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Acompanhe a programa\xe7\xe3o completa do evento"})]}),(0,r.jsx)("div",{className:"relative",children:T.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-start mb-6",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center text-2xl",children:e.icon}),(0,r.jsxs)("div",{className:"ml-4 flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.title}),(0,r.jsx)("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900 px-3 py-1 rounded-full",children:e.time})]}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:e.description})]})]},t))})]}),"analytics"===I&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"\uD83D\uDCCA An\xe1lises do Leil\xe3o"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Insights e estat\xedsticas dos animais"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,r.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-xl p-6 border border-purple-200 dark:border-purple-800",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-purple-900 dark:text-purple-100 mb-4 flex items-center",children:"\uD83E\uDDEC Animais FIV"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Quantidade:"}),(0,r.jsx)("span",{className:"font-bold text-purple-600 dark:text-purple-400",children:(null===(t=P.priceAnalysis.fiv)||void 0===t?void 0:t.count)||0})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Pre\xe7o M\xe9dio:"}),(0,r.jsxs)("span",{className:"font-bold text-green-600 dark:text-green-400",children:["R$ ",((null===(a=P.priceAnalysis.fiv)||void 0===a?void 0:a.avgPrice)||0).toLocaleString("pt-BR")]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Maior Valor:"}),(0,r.jsxs)("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:["R$ ",((null===(x=P.priceAnalysis.fiv)||void 0===x?void 0:x.maxPrice)||0).toLocaleString("pt-BR")]})]})]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-6 border border-blue-200 dark:border-blue-800",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-4 flex items-center",children:"\uD83D\uDC04 Animais IA"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Quantidade:"}),(0,r.jsx)("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:(null===(m=P.priceAnalysis.ia)||void 0===m?void 0:m.count)||0})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Pre\xe7o M\xe9dio:"}),(0,r.jsxs)("span",{className:"font-bold text-green-600 dark:text-green-400",children:["R$ ",((null===(g=P.priceAnalysis.ia)||void 0===g?void 0:g.avgPrice)||0).toLocaleString("pt-BR")]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Maior Valor:"}),(0,r.jsxs)("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:["R$ ",((null===(u=P.priceAnalysis.ia)||void 0===u?void 0:u.maxPrice)||0).toLocaleString("pt-BR")]})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83C\uDFC6 Top Touros (Mais Filhos no Leil\xe3o)"}),(0,r.jsx)("div",{className:"space-y-3",children:P.topBulls.length>0?P.topBulls.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ".concat(0===t?"bg-yellow-500":1===t?"bg-gray-400":2===t?"bg-orange-600":"bg-blue-500"),children:t+1}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Touro reprodutor"})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"font-bold text-blue-600 dark:text-blue-400",children:[e.count," filhos"]}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"no leil\xe3o"})]})]},t)):(0,r.jsxs)("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDC02"}),(0,r.jsx)("p",{children:"Nenhum dado de touro dispon\xedvel"})]})})]})]}),G>0&&(0,r.jsx)("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,r.jsx)("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:G})," animais selecionados"]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Valor total: ",(0,r.jsxs)("span",{className:"font-bold text-green-600 dark:text-green-400",children:["R$ ",J.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),(0,r.jsx)("button",{onClick:handleSaveAuction,disabled:D||0===G,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:D?"\uD83D\uDCBE Salvando...":"\uD83D\uDCBE Registrar Leil\xe3o"})]})}),(0,r.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-300px)]",children:N?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Carregando animais..."})]}):0===v.length?(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[(0,r.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDC04"}),(0,r.jsx)("p",{children:"Nenhum animal ativo encontrado"})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,r.jsx)("input",{type:"text",value:C,onChange:e=>A(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md leading-5 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"\uD83D\uDD0D Buscar por brinco, s\xe9rie, ra\xe7a ou nome..."}),C&&(0,r.jsx)("button",{onClick:()=>A(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400",children:[(0,r.jsx)("div",{children:C?(0,r.jsxs)("span",{children:[f.length," de ",v.length," animais encontrados",C&&(0,r.jsxs)("span",{className:"ml-2 font-medium",children:['para "',C,'"']})]}):(0,r.jsxs)("span",{children:[v.length," animais ativos dispon\xedveis"]})}),(0,r.jsxs)("div",{children:["\uD83D\uDCA1 ",(0,r.jsx)("strong",{children:"Dica:"})," Marque os animais vendidos e informe o valor"]})]}),(0,r.jsx)("div",{className:"space-y-3",children:0===f.length?(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[(0,r.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDD0D"}),(0,r.jsxs)("p",{children:['Nenhum animal encontrado para "',C,'"']}),(0,r.jsx)("button",{onClick:()=>A(""),className:"mt-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:"Limpar busca"})]}):f.map(e=>{var t,a,s,l,i,n,o;return(0,r.jsx)("div",{className:"border rounded-lg p-4 transition-all ".concat((null===(t=E[e.id])||void 0===t?void 0:t.selected)?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"),children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("input",{type:"checkbox",checked:(null===(a=E[e.id])||void 0===a?void 0:a.selected)||!1,onChange:()=>handleAnimalToggle(e.id),className:"w-5 h-5 text-green-600 rounded focus:ring-green-500"}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"text-2xl",children:"Macho"===e.sexo?"\uD83D\uDC02":"\uD83D\uDC04"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"font-medium text-gray-900 dark:text-white",children:[e.serie||extractSerieFromBrinco(e.brinco)," ",e.brinco]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.raca," • ",e.sexo," • ",e.categoria||"Bezerro"]})]})]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Custo Total"}),(0,r.jsxs)("div",{className:"font-medium text-red-600 dark:text-red-400",children:["R$ ",((null===(s=e.costs)||void 0===s?void 0:s.reduce((e,t)=>e+(t.valor||0),0))||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),(0,r.jsxs)("div",{className:"w-32",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Valor Venda"}),(0,r.jsx)("input",{type:"number",step:"0.01",value:(null===(l=E[e.id])||void 0===l?void 0:l.valor)||"",onChange:t=>handleValueChange(e.id,t.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white text-right",placeholder:"0,00"})]}),(null===(i=E[e.id])||void 0===i?void 0:i.valor)&&(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Resultado"}),(0,r.jsxs)("div",{className:"font-bold ".concat(parseFloat(E[e.id].valor)-((null===(n=e.costs)||void 0===n?void 0:n.reduce((e,t)=>e+(t.valor||0),0))||0)>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:["R$ ",(parseFloat(E[e.id].valor)-((null===(o=e.costs)||void 0===o?void 0:o.reduce((e,t)=>e+(t.valor||0),0))||0)).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})]})},e.id)})})]})}),(0,r.jsx)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:'\uD83D\uDCA1 Os animais vendidos ter\xe3o status alterado para "VENDIDO" automaticamente'}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("button",{onClick:b,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Cancelar"}),(0,r.jsx)("button",{onClick:handleSaveAuction,disabled:D||0===G,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:D?"\uD83D\uDCBE Salvando...":"\uD83D\uDCBE Registrar ".concat(G," Vendas")})]})]})}),"animals"===I&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"\uD83D\uDC04 Animais do Leil\xe3o"}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[f.length," animais dispon\xedveis"]})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",value:C,onChange:e=>A(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"\uD83D\uDD0D Buscar animais..."}),(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),(0,r.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:f.map(e=>{let t=e.serie||extractSerieFromBrinco(e.brinco),a=E[e.id]||{};return(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("input",{type:"checkbox",checked:a.selected||!1,onChange:()=>handleAnimalToggle(e.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"font-semibold text-gray-900 dark:text-white",children:[t," ",e.brinco]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e.raca," • ",e.sexo," • ",e.categoria]})]})]}),(0,r.jsx)("div",{className:"flex items-center space-x-3",children:(0,r.jsx)("input",{type:"number",value:a.valor||"",onChange:t=>handleValueChange(e.id,t.target.value),className:"w-32 px-3 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Valor R$"})})]})},e.id)})}),getSelectedAnimals().length>0&&(0,r.jsx)("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{className:"font-bold text-green-600 dark:text-green-400",children:[getSelectedAnimals().length," animais selecionados"]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Valor total: R$ ",getSelectedAnimals().reduce((e,t)=>e+t.valor,0).toLocaleString("pt-BR")]})]}),(0,r.jsx)("button",{onClick:handleSaveAuction,disabled:D,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:D?"\uD83D\uDCBE Salvando...":"\uD83D\uDCBE Registrar Vendas"})]})})]}),"reports"===I&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"\uD83D\uDCCB Relat\xf3rios do Leil\xe3o"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Resumos e estat\xedsticas para compartilhar"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCCA Resumo Executivo"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Total de Animais:"}),(0,r.jsx)("span",{className:"font-bold",children:v.length})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Animais Ativos:"}),(0,r.jsx)("span",{className:"font-bold text-green-600",children:v.filter(e=>"ATIVO"===e.status).length})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Animais Vendidos:"}),(0,r.jsx)("span",{className:"font-bold text-blue-600",children:v.filter(e=>"VENDIDO"===e.status).length})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Receita Total:"}),(0,r.jsxs)("span",{className:"font-bold text-green-600",children:["R$ ",v.filter(e=>"VENDIDO"===e.status).reduce((e,t)=>e+(t.valorVenda||0),0).toLocaleString("pt-BR")]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCF1 Compartilhar BI"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Envie relat\xf3rios detalhados via WhatsApp para compradores e interessados"}),(0,r.jsxs)("button",{onClick:()=>V(!0),className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center",children:[(0,r.jsx)(DevicePhoneMobileIcon,{className:"h-4 w-4 mr-2"}),"Enviar BI via WhatsApp"]})]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCB0 Vendas Realizadas"}),(0,r.jsx)("div",{className:"space-y-3",children:v.filter(e=>"VENDIDO"===e.status).length>0?v.filter(e=>"VENDIDO"===e.status).map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"text-2xl",children:"\uD83D\uDC02"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"font-medium text-gray-900 dark:text-white",children:[e.serie," ",e.brinco]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e.raca," • ",e.sexo]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"font-bold text-green-600",children:["R$ ",(e.valorVenda||0).toLocaleString("pt-BR")]}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Vendido"})]})]},e.id)):(0,r.jsxs)("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDCB0"}),(0,r.jsx)("p",{children:"Nenhuma venda registrada ainda"})]})})]})]})]}),O&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"\uD83D\uDCF1 Enviar BI via WhatsApp"}),(0,r.jsx)("button",{onClick:()=>V(!1),className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)(c.Z,{className:"h-6 w-6"})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"N\xfamero do WhatsApp"}),(0,r.jsx)("input",{type:"tel",id:"whatsappNumber",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white",placeholder:"+55 11 99999-9999"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"O relat\xf3rio incluir\xe1:"}),(0,r.jsxs)("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[(0,r.jsx)("li",{children:"• Resumo geral do leil\xe3o"}),(0,r.jsx)("li",{children:"• An\xe1lise FIV vs IA com pre\xe7os"}),(0,r.jsx)("li",{children:"• Top touros com mais filhos"}),(0,r.jsx)("li",{children:"• Cronograma do evento"}),(0,r.jsx)("li",{children:"• Gr\xe1ficos otimizados para celular"})]})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("button",{onClick:()=>V(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancelar"}),(0,r.jsx)("button",{onClick:()=>{let e=document.getElementById("whatsappNumber").value;e?(sendBIReport(e),V(!1)):alert("Por favor, informe o n\xfamero do WhatsApp")},className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Enviar BI"})]})]})]})})})]})}):null}},4308:function(e,t,a){a.d(t,{Z:function(){return SalesManager}});var r=a(5893),s=a(7294),l=a(8523),i=a(5837),n=a(9871);function SalesManager(e){let{isOpen:t,onClose:a}=e,[o,d]=(0,s.useState)("menu"),[c,x]=(0,s.useState)([]),[m,g]=(0,s.useState)(!1),u=[{id:"invoice",title:"\uD83D\uDCCB Criar Nota Fiscal",description:"Emitir NF com dados do comprador, animais e pre\xe7os",color:"from-blue-600 to-indigo-600",icon:l.Z},{id:"sales",title:"\uD83D\uDCB0 Registrar Venda Direta",description:"Venda simples sem emiss\xe3o de NF",color:"from-green-600 to-emerald-600",icon:i.Z},{id:"history",title:"\uD83D\uDCCA Hist\xf3rico de Vendas",description:"Ver todas as vendas e NFs emitidas",color:"from-purple-600 to-pink-600",icon:n.Z}];return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-600 to-indigo-600",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(i.Z,{className:"h-8 w-8 text-white"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"\uD83D\uDCB0 Sistema de Vendas"}),(0,r.jsx)("p",{className:"text-blue-100",children:"Vendas, Notas Fiscais, Pre\xe7os e Compradores"})]})]}),(0,r.jsx)("button",{onClick:a,className:"p-2 hover:bg-white/20 rounded-lg transition-colors text-white text-2xl font-bold",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:["menu"===o&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"O que voc\xea deseja fazer?"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Escolha uma das op\xe7\xf5es abaixo para gerenciar suas vendas"})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:u.map(e=>(0,r.jsx)("button",{onClick:()=>d(e.id),className:"p-6 rounded-2xl bg-gradient-to-br ".concat(e.color," text-white hover:scale-105 transform transition-all duration-200 shadow-xl"),children:(0,r.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,r.jsx)(e.icon,{className:"h-12 w-12"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-xl font-bold mb-2",children:e.title}),(0,r.jsx)("p",{className:"text-sm opacity-90",children:e.description})]})]})},e.id))}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-6 mt-8",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCCA Resumo R\xe1pido"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:"0"}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"NFs Emitidas"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:"0"}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Vendas Diretas"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:"0"}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Animais Vendidos"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:"R$ 0"}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Receita Total"})]})]})]})]}),"invoice"===o&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"\uD83D\uDCCB Sistema de Notas Fiscais"}),(0,r.jsx)("button",{onClick:()=>d("menu"),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"← Voltar ao Menu"})]}),(0,r.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900 rounded-xl p-6 border border-blue-200 dark:border-blue-700",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-blue-800 dark:text-blue-200 mb-4",children:"\uD83D\uDCCB Sistema de Notas Fiscais"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4",children:[(0,r.jsx)("h5",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Dados da NF"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"N\xfamero da NF",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"}),(0,r.jsx)("input",{type:"date",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"}),(0,r.jsxs)("select",{className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[(0,r.jsx)("option",{children:"Pendente"}),(0,r.jsx)("option",{children:"Emitida"}),(0,r.jsx)("option",{children:"Paga"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4",children:[(0,r.jsx)("h5",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Dados do Comprador"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Nome/Raz\xe3o Social",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"}),(0,r.jsx)("input",{type:"text",placeholder:"CPF/CNPJ",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"}),(0,r.jsx)("input",{type:"text",placeholder:"Cidade",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"}),(0,r.jsxs)("select",{className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[(0,r.jsx)("option",{value:"",children:"Estado..."}),(0,r.jsx)("option",{value:"SP",children:"SP"}),(0,r.jsx)("option",{value:"MG",children:"MG"}),(0,r.jsx)("option",{value:"RJ",children:"RJ"}),(0,r.jsx)("option",{value:"GO",children:"GO"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4",children:[(0,r.jsx)("h5",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Animais da Venda"}),(0,r.jsx)("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:(0,r.jsx)("option",{children:"Selecionar animal..."})}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Primeiro cadastre animais para poder selecion\xe1-los aqui"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,r.jsx)("button",{className:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancelar"}),(0,r.jsx)("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Criar NF"})]})]})]})]}),"sales"===o&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"\uD83D\uDCB0 Vendas Diretas"}),(0,r.jsx)("button",{onClick:()=>d("menu"),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"← Voltar ao Menu"})]}),(0,r.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900 rounded-xl p-6 border border-yellow-200 dark:border-yellow-700",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-yellow-800 dark:text-yellow-200 mb-2",children:"\uD83D\uDEA7 Em Desenvolvimento"}),(0,r.jsx)("p",{className:"text-yellow-700 dark:text-yellow-300",children:"O sistema de vendas diretas (sem NF) est\xe1 sendo desenvolvido. Por enquanto, use o sistema de Notas Fiscais para registrar suas vendas."})]})]}),"history"===o&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"\uD83D\uDCCA Hist\xf3rico de Vendas"}),(0,r.jsx)("button",{onClick:()=>d("menu"),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"← Voltar ao Menu"})]}),(0,r.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900 rounded-xl p-6 border border-blue-200 dark:border-blue-700",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"\uD83D\uDCC8 Relat\xf3rios em Desenvolvimento"}),(0,r.jsx)("p",{className:"text-blue-700 dark:text-blue-300",children:"O hist\xf3rico detalhado de vendas e relat\xf3rios est\xe3o sendo desenvolvidos. Em breve voc\xea poder\xe1 ver gr\xe1ficos, estat\xedsticas e exportar dados."})]})]})]})]})}):null}},4491:function(e,t,a){a.d(t,{z:function(){return Button}});var r=a(5893);a(7294);let Button=e=>{let{children:t,variant:a="default",size:s="default",className:l="",disabled:i=!1,type:n="button",...o}=e;return(0,r.jsx)("button",{type:n,className:"".concat("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none"," ").concat({default:"bg-blue-600 dark:bg-blue-500 text-white hover:bg-blue-700 dark:hover:bg-blue-600 font-semibold",outline:"border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-700 font-medium",ghost:"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100 font-medium",destructive:"bg-red-600 dark:bg-red-500 text-white hover:bg-red-700 dark:hover:bg-red-600 font-semibold"}[a]," ").concat({default:"h-10 py-2 px-4 text-sm",sm:"h-9 px-3 text-sm",lg:"h-11 px-8 text-base",icon:"h-10 w-10"}[s]," ").concat(l),disabled:i,...o,children:t})}},794:function(e,t,a){a.d(t,{Ol:function(){return CardHeader},Zb:function(){return Card},aY:function(){return CardContent},ll:function(){return CardTitle}});var r=a(5893);a(7294);let Card=e=>{let{children:t,className:a="",...s}=e;return(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm text-gray-900 dark:text-white transition-colors ".concat(a),...s,children:t})},CardHeader=e=>{let{children:t,className:a="",...s}=e;return(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 ".concat(a),...s,children:t})},CardTitle=e=>{let{children:t,className:a="",...s}=e;return(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white ".concat(a),...s,children:t})},CardContent=e=>{let{children:t,className:a="",...s}=e;return(0,r.jsx)("div",{className:"px-6 py-4 text-gray-900 dark:text-white ".concat(a),...s,children:t})}},6949:function(e,t,a){let AnimalDataManager=class AnimalDataManager{setToken(e){this.token=e}getHeaders(){let e={"Content-Type":"application/json"};return this.token&&(e.Authorization="Bearer ".concat(this.token)),e}async handleResponse(e){if(!e.ok){let t=await e.json();throw Error(t.message||"Erro na requisi\xe7\xe3o")}return e.json()}addListener(e){this.listeners.push(e)}removeListener(e){this.listeners=this.listeners.filter(t=>t!==e)}notifyListeners(e){this.listeners.forEach(t=>t(e))}async login(e,t){let a=await fetch("".concat(this.baseURL,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),r=await this.handleResponse(a);return this.setToken(r.token),localStorage.setItem("beef_sync_token",r.token),localStorage.setItem("beef_sync_user",JSON.stringify(r.user)),r}async register(e,t,a){let r=await fetch("".concat(this.baseURL,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:a})});return this.handleResponse(r)}loadToken(){{let e=localStorage.getItem("beef_sync_token");if(e)return this.setToken(e),e}return null}saveToken(e){localStorage.setItem("beef_sync_token",e),this.setToken(e)}logout(){localStorage.removeItem("beef_sync_token"),localStorage.removeItem("beef_sync_user"),this.token=null}async getAllAnimals(){try{let e=await fetch("".concat(this.baseURL,"/animals"),{headers:this.getHeaders()}),t=await this.handleResponse(e);return this.notifyListeners(t),t}catch(t){console.error("Erro ao buscar animais:",t);let e=[];return this.notifyListeners(e),e}}async getAnimalById(e){try{let t=await fetch("".concat(this.baseURL,"/animals/").concat(e),{headers:this.getHeaders()});return this.handleResponse(t)}catch(e){return console.error("Erro ao buscar animal:",e),null}}async addAnimal(e){let t=await fetch("".concat(this.baseURL,"/animals"),{method:"POST",headers:this.getHeaders(),body:JSON.stringify(e)});return this.handleResponse(t)}async updateAnimal(e,t){try{let a=await fetch("".concat(this.baseURL,"/animals/").concat(e),{method:"PUT",headers:this.getHeaders(),body:JSON.stringify(t)});return this.handleResponse(a)}catch(e){throw console.error("Erro ao atualizar animal:",e),e}}async deleteAnimal(e){try{let t=await fetch("".concat(this.baseURL,"/animals/").concat(e),{method:"DELETE",headers:this.getHeaders()});return this.handleResponse(t)}catch(e){throw console.error("Erro ao excluir animal:",e),e}}async getAllGestations(){return[]}async addGestation(e){let t=await fetch("".concat(this.baseURL,"/gestations"),{method:"POST",headers:this.getHeaders(),body:JSON.stringify(e)});return this.handleResponse(t)}async updateGestation(e,t){let a=await fetch("".concat(this.baseURL,"/gestations/").concat(e),{method:"PUT",headers:this.getHeaders(),body:JSON.stringify(t)});return this.handleResponse(a)}async getCosts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e),a=await fetch("".concat(this.baseURL,"/costs?").concat(t),{headers:this.getHeaders()});return this.handleResponse(a)}async addCost(e){let t=await fetch("".concat(this.baseURL,"/costs"),{method:"POST",headers:this.getHeaders(),body:JSON.stringify(e)});return this.handleResponse(t)}async addCustoToAnimal(e,t){let a={...t,animalId:e,data:t.data||new Date().toISOString()};return this.addCost(a)}async addWeight(e){let t=await fetch("".concat(this.baseURL,"/weights"),{method:"POST",headers:this.getHeaders(),body:JSON.stringify(e)});return this.handleResponse(t)}async getAlerts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=await fetch("".concat(this.baseURL,"/alerts").concat(e?"?status=".concat(e):""),{headers:this.getHeaders()});return this.handleResponse(t)}async addAlert(e){let t=await fetch("".concat(this.baseURL,"/alerts"),{method:"POST",headers:this.getHeaders(),body:JSON.stringify(e)});return this.handleResponse(t)}async updateAlert(e,t){let a=await fetch("".concat(this.baseURL,"/alerts/").concat(e),{method:"PUT",headers:this.getHeaders(),body:JSON.stringify(t)});return this.handleResponse(a)}async getDashboardStats(){return{totalAnimals:0,totalGestations:0,pendingAlerts:0,monthlyCosts:0,animalsByCategory:[],costsByType:[],upcomingBirths:[]}}async getStatistics(){try{return await this.getDashboardStats()}catch(e){return console.error("Error getting statistics:",e),{totalAnimals:0,totalGestations:0,pendingAlerts:0,monthlyCosts:0,animalsByCategory:[],costsByType:[],upcomingBirths:[]}}}async registrarNascimento(e,t){try{let a={brinco:t.rg||t.tatuagem,nome:t.nome||null,raca:this.getRacaBySerie(t.serie),sexo:t.sexo,dataNasc:t.dataNascimento,peso:parseFloat(t.peso),categoria:"Bezerro",observacoes:"FIV - Pai: ".concat(e.paiSerie," ").concat(e.paiRg,", M\xe3e: ").concat(e.maeSerie," ").concat(e.maeRg,", Receptora: ").concat(e.receptoraNome)},r=await this.addAnimal(a),s=.3*e.custoAcumulado,l=[{tipo:"NASCIMENTO",descricao:"Nascimento ".concat(t.tipoNascimento," - Peso: ").concat(t.peso,"kg"),valor:t.custoNascimento,data:t.dataNascimento,animalId:r.id,observacoes:t.observacoes},{tipo:"EXAME",descricao:"DNA - Paternidade + Gen\xf4mica",valor:t.custoDNA,data:t.dataNascimento,animalId:r.id,observacoes:"FIV - Confirma\xe7\xe3o paternidade e an\xe1lise gen\xf4mica"},{tipo:"RECEPTORA",descricao:"Rateio receptora ".concat(e.receptoraNome),valor:s,data:t.dataNascimento,animalId:r.id,observacoes:"30% do custo total da receptora (R$ ".concat(e.custoAcumulado.toFixed(2),")")}];for(let e of l)await this.addCost(e);return r}catch(e){throw console.error("Error registering birth:",e),e}}async registrarVenda(e,t,a,r){try{return await this.updateAnimal(e,{status:"VENDIDO"}),await this.addCost({tipo:"VENDA",descricao:"Venda do animal",valor:-t,data:a,animalId:e,observacoes:r||"Venda por R$ ".concat(t.toFixed(2))}),{success:!0}}catch(e){throw console.error("Error registering sale:",e),e}}searchAnimals(e,t){let a=t.toLowerCase();return e.filter(e=>e.brinco.toLowerCase().includes(a)||e.nome&&e.nome.toLowerCase().includes(a)||e.raca&&e.raca.toLowerCase().includes(a))}getAnimalsByCategory(e,t){return e.filter(e=>e.categoria===t)}getRacaBySerie(e){return({CJCJ:"Nelore",BENT:"Brahman",CJCG:"Gir",RPT:"Receptora"})[e]||"Nelore"}calcularIdadeEmMeses(e){if(!e)return 0;let t=new Date,a=new Date(e);return Math.floor(Math.floor((t-a)/864e5)/30)}async exportarDados(){try{let[e,t]=await Promise.all([this.getAllAnimals(),this.getStatistics()]);return{animals:e,statistics:t,exportDate:new Date().toISOString()}}catch(e){throw console.error("Error exporting data:",e),e}}constructor(){this.baseURL="/api",this.token=null,this.listeners=[]}};let r=new AnimalDataManager;r.loadToken(),t.Z=r},9871:function(e,t,a){var r=a(7294);function CalendarIcon({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}let s=r.forwardRef(CalendarIcon);t.Z=s},445:function(e,t,a){var r=a(7294);function ClockIcon({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}let s=r.forwardRef(ClockIcon);t.Z=s},8523:function(e,t,a){var r=a(7294);function DocumentTextIcon({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}let s=r.forwardRef(DocumentTextIcon);t.Z=s},6244:function(e,t,a){var r=a(7294);function ExclamationTriangleIcon({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}let s=r.forwardRef(ExclamationTriangleIcon);t.Z=s},8357:function(e,t,a){var r=a(7294);function UserGroupIcon({title:e,titleId:t,...a},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}let s=r.forwardRef(UserGroupIcon);t.Z=s}}]);