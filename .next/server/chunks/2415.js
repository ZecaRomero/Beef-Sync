exports.id=2415,exports.ids=[2415],exports.modules={4233:(e,a,t)=>{"use strict";t.d(a,{qD:()=>useApp,wI:()=>AppProvider});var r=t(997),s=t(6689);let o={user:null,animals:[],materials:[],sales:[],processes:[],notifications:[],loading:!1,error:null,theme:"light",filters:{dateRange:"30d",category:"all",status:"all"},stats:{totalAnimals:0,totalValue:0,monthlyProfit:0,pendingTasks:0}},l={SET_LOADING:"SET_LOADING",SET_ERROR:"SET_ERROR",SET_USER:"SET_USER",SET_ANIMALS:"SET_ANIMALS",ADD_ANIMAL:"ADD_ANIMAL",UPDATE_ANIMAL:"UPDATE_ANIMAL",DELETE_ANIMAL:"DELETE_ANIMAL",SET_MATERIALS:"SET_MATERIALS",ADD_MATERIAL:"ADD_MATERIAL",UPDATE_MATERIAL:"UPDATE_MATERIAL",DELETE_MATERIAL:"DELETE_MATERIAL",SET_SALES:"SET_SALES",ADD_SALE:"ADD_SALE",SET_PROCESSES:"SET_PROCESSES",ADD_PROCESS:"ADD_PROCESS",UPDATE_PROCESS:"UPDATE_PROCESS",DELETE_PROCESS:"DELETE_PROCESS",ADD_NOTIFICATION:"ADD_NOTIFICATION",MARK_NOTIFICATION_READ:"MARK_NOTIFICATION_READ",SET_FILTERS:"SET_FILTERS",UPDATE_STATS:"UPDATE_STATS",TOGGLE_THEME:"TOGGLE_THEME"};function appReducer(e,a){switch(a.type){case l.SET_LOADING:return{...e,loading:a.payload};case l.SET_ERROR:return{...e,error:a.payload,loading:!1};case l.SET_USER:return{...e,user:a.payload};case l.SET_ANIMALS:return{...e,animals:a.payload};case l.ADD_ANIMAL:return{...e,animals:[...e.animals,a.payload]};case l.UPDATE_ANIMAL:return{...e,animals:e.animals.map(e=>e.id===a.payload.id?a.payload:e)};case l.DELETE_ANIMAL:return{...e,animals:e.animals.filter(e=>e.id!==a.payload)};case l.SET_MATERIALS:return{...e,materials:a.payload};case l.ADD_MATERIAL:return{...e,materials:[...e.materials,a.payload]};case l.UPDATE_MATERIAL:return{...e,materials:e.materials.map(e=>e.id===a.payload.id?a.payload:e)};case l.DELETE_MATERIAL:return{...e,materials:e.materials.filter(e=>e.id!==a.payload)};case l.SET_SALES:return{...e,sales:a.payload};case l.ADD_SALE:return{...e,sales:[...e.sales,a.payload]};case l.SET_PROCESSES:return{...e,processes:a.payload};case l.ADD_PROCESS:return{...e,processes:[...e.processes,a.payload]};case l.UPDATE_PROCESS:return{...e,processes:e.processes.map(e=>e.id===a.payload.id?a.payload:e)};case l.DELETE_PROCESS:return{...e,processes:e.processes.filter(e=>e.id!==a.payload)};case l.ADD_NOTIFICATION:return{...e,notifications:[a.payload,...e.notifications]};case l.MARK_NOTIFICATION_READ:return{...e,notifications:e.notifications.map(e=>e.id===a.payload?{...e,read:!0}:e)};case l.SET_FILTERS:return{...e,filters:{...e.filters,...a.payload}};case l.UPDATE_STATS:return{...e,stats:{...e.stats,...a.payload}};case l.TOGGLE_THEME:let t="light"===e.theme?"dark":"light";return{...e,theme:t};case"SET_THEME":return{...e,theme:a.payload};default:return e}}let n=(0,s.createContext)();function AppProvider({children:e}){let[a,t]=(0,s.useReducer)(appReducer,o);(0,s.useEffect)(()=>{let e=localStorage.getItem("theme");e&&e!==a.theme&&t({type:"SET_THEME",payload:e})},[]),(0,s.useEffect)(()=>{},[a.theme]),(0,s.useEffect)(()=>{loadInitialData()},[]),(0,s.useEffect)(()=>{calculateStats()},[a.animals,a.materials,a.sales]);let loadInitialData=async()=>{t({type:l.SET_LOADING,payload:!0});try{let e=await fetch("/api/animals-list"),a=e.ok?await e.json():[],r=await fetch("/api/sales-list"),s=r.ok?await r.json():[];t({type:l.SET_ANIMALS,payload:a}),t({type:l.SET_MATERIALS,payload:[]}),t({type:l.SET_SALES,payload:s})}catch(e){t({type:l.SET_ERROR,payload:e.message})}finally{t({type:l.SET_LOADING,payload:!1})}},calculateStats=()=>{let e=a.animals.length,r=a.animals.reduce((e,a)=>e+(a.value||0),0),s=a.sales.filter(e=>{let a=new Date(e.date),t=new Date;return a.getMonth()===t.getMonth()&&a.getFullYear()===t.getFullYear()}).reduce((e,a)=>e+a.totalValue,0),o=a.materials.filter(e=>e.quantity<=e.minStock).length;t({type:l.UPDATE_STATS,payload:{totalAnimals:e,totalValue:r,monthlyProfit:s,pendingTasks:o}})};return r.jsx(n.Provider,{value:{state:a,actions:{setLoading:e=>t({type:l.SET_LOADING,payload:e}),setError:e=>t({type:l.SET_ERROR,payload:e}),setUser:e=>t({type:l.SET_USER,payload:e}),addAnimal:e=>t({type:l.ADD_ANIMAL,payload:e}),updateAnimal:e=>t({type:l.UPDATE_ANIMAL,payload:e}),deleteAnimal:e=>t({type:l.DELETE_ANIMAL,payload:e}),addMaterial:e=>t({type:l.ADD_MATERIAL,payload:e}),updateMaterial:e=>t({type:l.UPDATE_MATERIAL,payload:e}),deleteMaterial:e=>t({type:l.DELETE_MATERIAL,payload:e}),addSale:e=>t({type:l.ADD_SALE,payload:e}),addProcess:e=>t({type:l.ADD_PROCESS,payload:e}),updateProcess:e=>t({type:l.UPDATE_PROCESS,payload:e}),deleteProcess:e=>t({type:l.DELETE_PROCESS,payload:e}),addNotification:e=>t({type:l.ADD_NOTIFICATION,payload:e}),markNotificationRead:e=>t({type:l.MARK_NOTIFICATION_READ,payload:e}),setFilters:e=>t({type:l.SET_FILTERS,payload:e}),toggleTheme:()=>t({type:l.TOGGLE_THEME})}},children:e})}function useApp(){let e=(0,s.useContext)(n);if(!e)throw Error("useApp deve ser usado dentro de AppProvider");return e}},7016:(e,a,t)=>{"use strict";t.d(a,{Ho:()=>AuthProvider,aC:()=>useAuth});var r=t(997),s=t(6689);let o=(0,s.createContext)(),useAuth=()=>{let e=(0,s.useContext)(o);if(!e)throw Error("useAuth deve ser usado dentro de AuthProvider");return e},AuthProvider=({children:e})=>{let[a,t]=(0,s.useState)(null),[l,n]=(0,s.useState)(!0),i={zeca:{name:"Zeca",role:"developer",permissions:["read","write","delete","admin","manage_users"],description:"Desenvolvedor - Acesso completo"},bento:{name:"Bento",role:"consultant",permissions:["read"],description:"Consultor - Apenas visualiza\xe7\xe3o"},nilson:{name:"Nilson",role:"consultant",permissions:["read"],description:"Consultor - Apenas visualiza\xe7\xe3o"},mauricio:{name:"Maur\xedcio",role:"consultant",permissions:["read"],description:"Consultor - Apenas visualiza\xe7\xe3o"}};(0,s.useEffect)(()=>{let e=localStorage.getItem("beef-sync-user");e&&t(JSON.parse(e)),n(!1)},[]);let login=async(e,a)=>{if(n(!0),await new Promise(e=>setTimeout(e,1e3)),!i[e])return{success:!1,error:"Usu\xe1rio n\xe3o encontrado"};{let a={username:e,name:i[e].name,role:i[e].role,permissions:i[e].permissions};return t(a),localStorage.setItem("beef-sync-user",JSON.stringify(a)),{success:!0}}};return r.jsx(o.Provider,{value:{user:a,loading:l,login,logout:()=>{t(null),localStorage.removeItem("beef-sync-user")},checkPermission:e=>{if(!a)return!1;let t=i[a.username]||i.bento;return t.permissions.includes(e)},getUserRole:()=>a?i[a.username]||i.bento:null,userRoles:i},children:e})}},2415:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var r=t(997);t(6764);var s=t(6689),o=t.n(s);let l=(0,s.createContext)(),ThemeProvider=({children:e})=>{let[a,t]=(0,s.useState)("light");return(0,s.useEffect)(()=>{let e=localStorage.getItem("theme");if(e)t(e);else{let e=window.matchMedia("(prefers-color-scheme: dark)").matches;t(e?"dark":"light")}},[]),(0,s.useEffect)(()=>{"dark"===a?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",a)},[a]),r.jsx(l.Provider,{value:{theme:a,setTheme:t,toggleTheme:()=>{t(e=>"light"===e?"dark":"light")},isDark:"dark"===a},children:e})};var n=t(7016);let i=(0,s.createContext)(),ToastProvider=({children:e})=>{let[a,t]=(0,s.useState)([]),addToast=(e,a="info",r=5e3)=>{let s=Date.now(),o={id:s,message:e,type:a,duration:r};return t(e=>[...e,o]),r>0&&setTimeout(()=>{removeToast(s)},r),s},removeToast=e=>{t(a=>a.filter(a=>a.id!==e))};return(0,r.jsxs)(i.Provider,{value:{toasts:a,addToast,removeToast,success:(e,a)=>addToast(e,"success",a),error:(e,a)=>addToast(e,"error",a),warning:(e,a)=>addToast(e,"warning",a),info:(e,a)=>addToast(e,"info",a)},children:[e,r.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:a.map(e=>r.jsx("div",{className:`px-4 py-3 rounded-lg shadow-lg max-w-sm ${"success"===e.type?"bg-green-500 text-white":"error"===e.type?"bg-red-500 text-white":"warning"===e.type?"bg-yellow-500 text-white":"bg-blue-500 text-white"}`,children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:e.message}),r.jsx("button",{onClick:()=>removeToast(e.id),className:"ml-2 text-white hover:text-gray-200",children:"\xd7"})]})},e.id))})]})};var d=t(4233);let ErrorBoundary=class ErrorBoundary extends o().Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,a){console.error("ErrorBoundary caught an error:",e,a),this.setState({error:e,errorInfo:a})}render(){return this.state.hasError?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,r.jsxs)("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[r.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 dark:bg-red-900/20 rounded-full mb-4",children:r.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Oops! Algo deu errado"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"Ocorreu um erro inesperado. Nossa equipe foi notificada e est\xe1 trabalhando para resolver o problema."}),(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Recarregar P\xe1gina"}),r.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),className:"w-full px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Tentar Novamente"})]}),!1]})}):this.props.children}};function MyApp({Component:e,pageProps:a}){return r.jsx(ErrorBoundary,{children:r.jsx(ThemeProvider,{children:r.jsx(n.Ho,{children:r.jsx(d.wI,{children:r.jsx(ToastProvider,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:r.jsx(e,{...a})})})})})})})}let c=MyApp},6764:()=>{}};