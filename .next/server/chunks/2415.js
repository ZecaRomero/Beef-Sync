exports.id=2415,exports.ids=[2415],exports.modules={4233:(e,a,r)=>{"use strict";r.d(a,{qD:()=>useApp,wI:()=>AppProvider});var t=r(997),s=r(6689);let o={user:null,animals:[],materials:[],sales:[],processes:[],notifications:[],loading:!1,error:null,theme:"light",filters:{dateRange:"30d",category:"all",status:"all"},stats:{totalAnimals:0,totalValue:0,monthlyProfit:0,pendingTasks:0}},l={SET_LOADING:"SET_LOADING",SET_ERROR:"SET_ERROR",SET_USER:"SET_USER",SET_ANIMALS:"SET_ANIMALS",ADD_ANIMAL:"ADD_ANIMAL",UPDATE_ANIMAL:"UPDATE_ANIMAL",DELETE_ANIMAL:"DELETE_ANIMAL",SET_MATERIALS:"SET_MATERIALS",ADD_MATERIAL:"ADD_MATERIAL",UPDATE_MATERIAL:"UPDATE_MATERIAL",DELETE_MATERIAL:"DELETE_MATERIAL",SET_SALES:"SET_SALES",ADD_SALE:"ADD_SALE",SET_PROCESSES:"SET_PROCESSES",ADD_PROCESS:"ADD_PROCESS",UPDATE_PROCESS:"UPDATE_PROCESS",DELETE_PROCESS:"DELETE_PROCESS",ADD_NOTIFICATION:"ADD_NOTIFICATION",MARK_NOTIFICATION_READ:"MARK_NOTIFICATION_READ",SET_FILTERS:"SET_FILTERS",UPDATE_STATS:"UPDATE_STATS",TOGGLE_THEME:"TOGGLE_THEME"};function appReducer(e,a){switch(a.type){case l.SET_LOADING:return{...e,loading:a.payload};case l.SET_ERROR:return{...e,error:a.payload,loading:!1};case l.SET_USER:return{...e,user:a.payload};case l.SET_ANIMALS:return{...e,animals:a.payload};case l.ADD_ANIMAL:return{...e,animals:[...e.animals,a.payload]};case l.UPDATE_ANIMAL:return{...e,animals:e.animals.map(e=>e.id===a.payload.id?a.payload:e)};case l.DELETE_ANIMAL:return{...e,animals:e.animals.filter(e=>e.id!==a.payload)};case l.SET_MATERIALS:return{...e,materials:a.payload};case l.ADD_MATERIAL:return{...e,materials:[...e.materials,a.payload]};case l.UPDATE_MATERIAL:return{...e,materials:e.materials.map(e=>e.id===a.payload.id?a.payload:e)};case l.DELETE_MATERIAL:return{...e,materials:e.materials.filter(e=>e.id!==a.payload)};case l.SET_SALES:return{...e,sales:a.payload};case l.ADD_SALE:return{...e,sales:[...e.sales,a.payload]};case l.SET_PROCESSES:return{...e,processes:a.payload};case l.ADD_PROCESS:return{...e,processes:[...e.processes,a.payload]};case l.UPDATE_PROCESS:return{...e,processes:e.processes.map(e=>e.id===a.payload.id?a.payload:e)};case l.DELETE_PROCESS:return{...e,processes:e.processes.filter(e=>e.id!==a.payload)};case l.ADD_NOTIFICATION:return{...e,notifications:[a.payload,...e.notifications]};case l.MARK_NOTIFICATION_READ:return{...e,notifications:e.notifications.map(e=>e.id===a.payload?{...e,read:!0}:e)};case l.SET_FILTERS:return{...e,filters:{...e.filters,...a.payload}};case l.UPDATE_STATS:return{...e,stats:{...e.stats,...a.payload}};case l.TOGGLE_THEME:let r="light"===e.theme?"dark":"light";return{...e,theme:r};case"SET_THEME":return{...e,theme:a.payload};default:return e}}let i=(0,s.createContext)();function AppProvider({children:e}){let[a,r]=(0,s.useReducer)(appReducer,o);(0,s.useEffect)(()=>{let e=localStorage.getItem("theme");e&&e!==a.theme&&r({type:"SET_THEME",payload:e})},[]),(0,s.useEffect)(()=>{},[a.theme]),(0,s.useEffect)(()=>{loadInitialData()},[]),(0,s.useEffect)(()=>{calculateStats()},[a.animals,a.materials,a.sales]);let loadInitialData=async()=>{r({type:l.SET_LOADING,payload:!0});try{let e=await fetch("/api/animals-list"),a=e.ok?await e.json():[],t=await fetch("/api/sales-list"),s=t.ok?await t.json():[];r({type:l.SET_ANIMALS,payload:a}),r({type:l.SET_MATERIALS,payload:[]}),r({type:l.SET_SALES,payload:s})}catch(e){r({type:l.SET_ERROR,payload:e.message})}finally{r({type:l.SET_LOADING,payload:!1})}},calculateStats=()=>{let e=a.animals.length,t=a.animals.reduce((e,a)=>e+(a.value||0),0),s=a.sales.filter(e=>{let a=new Date(e.date),r=new Date;return a.getMonth()===r.getMonth()&&a.getFullYear()===r.getFullYear()}).reduce((e,a)=>e+a.totalValue,0),o=a.materials.filter(e=>e.quantity<=e.minStock).length;r({type:l.UPDATE_STATS,payload:{totalAnimals:e,totalValue:t,monthlyProfit:s,pendingTasks:o}})};return t.jsx(i.Provider,{value:{state:a,actions:{setLoading:e=>r({type:l.SET_LOADING,payload:e}),setError:e=>r({type:l.SET_ERROR,payload:e}),setUser:e=>r({type:l.SET_USER,payload:e}),addAnimal:e=>r({type:l.ADD_ANIMAL,payload:e}),updateAnimal:e=>r({type:l.UPDATE_ANIMAL,payload:e}),deleteAnimal:e=>r({type:l.DELETE_ANIMAL,payload:e}),addMaterial:e=>r({type:l.ADD_MATERIAL,payload:e}),updateMaterial:e=>r({type:l.UPDATE_MATERIAL,payload:e}),deleteMaterial:e=>r({type:l.DELETE_MATERIAL,payload:e}),addSale:e=>r({type:l.ADD_SALE,payload:e}),addProcess:e=>r({type:l.ADD_PROCESS,payload:e}),updateProcess:e=>r({type:l.UPDATE_PROCESS,payload:e}),deleteProcess:e=>r({type:l.DELETE_PROCESS,payload:e}),addNotification:e=>r({type:l.ADD_NOTIFICATION,payload:e}),markNotificationRead:e=>r({type:l.MARK_NOTIFICATION_READ,payload:e}),setFilters:e=>r({type:l.SET_FILTERS,payload:e}),toggleTheme:()=>r({type:l.TOGGLE_THEME})}},children:e})}function useApp(){let e=(0,s.useContext)(i);if(!e)throw Error("useApp deve ser usado dentro de AppProvider");return e}},7016:(e,a,r)=>{"use strict";r.d(a,{Ho:()=>AuthProvider,aC:()=>useAuth});var t=r(997),s=r(6689);let o=(0,s.createContext)(),useAuth=()=>{let e=(0,s.useContext)(o);if(!e)throw Error("useAuth deve ser usado dentro de AuthProvider");return e},AuthProvider=({children:e})=>{let[a,r]=(0,s.useState)(null),[l,i]=(0,s.useState)(!0),n={Zeca:{name:"Zeca",role:"developer",permissions:["read","write","delete","admin","manage_users","dashboard_full","reports_full","animals_manage","sales_manage","reproduction_manage","gestation_manage","settings_access","export_import","feedback_system","invoice_manage"],description:"Desenvolvedor - Acesso completo"},Bento:{name:"Bento",role:"consultant",permissions:["read","dashboard_view","reports_view","animals_view","sales_view","search_animals","feedback_system"],description:"Consultor - Visualiza\xe7\xe3o e relat\xf3rios"},Nilson:{name:"Nilson",role:"consultant",permissions:["read","dashboard_view","reports_view","animals_view","sales_view","search_animals","feedback_system"],description:"Consultor - Visualiza\xe7\xe3o e relat\xf3rios"},Mauricio:{name:"Maur\xedcio",role:"consultant",permissions:["read","dashboard_view","reports_view","animals_view","sales_view","search_animals","feedback_system"],description:"Consultor - Visualiza\xe7\xe3o e relat\xf3rios"},Jorge:{name:"Jorge",role:"consultant",permissions:["read","dashboard_view","reports_view","animals_view","sales_view","search_animals","feedback_system"],description:"Consultor - Visualiza\xe7\xe3o e relat\xf3rios"}};(0,s.useEffect)(()=>{let e=localStorage.getItem("beef-sync-user");e&&r(JSON.parse(e)),i(!1)},[]);let login=async(e,a)=>{if(i(!0),await new Promise(e=>setTimeout(e,1e3)),!n[e])return i(!1),{success:!1,error:"Usu\xe1rio n\xe3o encontrado"};if("123"!==a)return i(!1),{success:!1,error:"Senha incorreta"};let t={username:e,name:n[e].name,role:n[e].role,permissions:n[e].permissions};return r(t),localStorage.setItem("beef-sync-user",JSON.stringify(t)),localStorage.setItem("beef_sync_user_name",n[e].name),localStorage.setItem("beef_sync_user_role","developer"===n[e].role?"Desenvolvedor":"Consultor"),i(!1),{success:!0}};return t.jsx(o.Provider,{value:{user:a,loading:l,login,logout:()=>{r(null),localStorage.removeItem("beef-sync-user"),localStorage.removeItem("beef_sync_user_name"),localStorage.removeItem("beef_sync_user_role")},checkPermission:e=>{if(!a)return!1;let r=n[a.username]||n.Bento;return r.permissions.includes(e)},getUserRole:()=>a?n[a.username]||n.Bento:null,isDeveloper:()=>!!a&&"developer"===a.role,isConsultant:()=>!!a&&"consultant"===a.role,userRoles:n},children:e})}},2415:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>c});var t=r(997);r(6764);var s=r(6689),o=r.n(s);let l=(0,s.createContext)(),ThemeProvider=({children:e})=>{let[a,r]=(0,s.useState)("dark");return(0,s.useEffect)(()=>{let e=localStorage.getItem("theme");e?r(e):r("dark")},[]),(0,s.useEffect)(()=>{"dark"===a?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",a)},[a]),t.jsx(l.Provider,{value:{theme:a,setTheme:r,toggleTheme:()=>{r(e=>"light"===e?"dark":"light")},isDark:"dark"===a},children:e})};var i=r(7016);let n=(0,s.createContext)(),ToastProvider=({children:e})=>{let[a,r]=(0,s.useState)([]),addToast=(e,a="info",t=5e3)=>{let s=Date.now(),o={id:s,message:e,type:a,duration:t};return r(e=>[...e,o]),t>0&&setTimeout(()=>{removeToast(s)},t),s},removeToast=e=>{r(a=>a.filter(a=>a.id!==e))};return(0,t.jsxs)(n.Provider,{value:{toasts:a,addToast,removeToast,success:(e,a)=>addToast(e,"success",a),error:(e,a)=>addToast(e,"error",a),warning:(e,a)=>addToast(e,"warning",a),info:(e,a)=>addToast(e,"info",a)},children:[e,t.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:a.map(e=>t.jsx("div",{className:`px-4 py-3 rounded-lg shadow-lg max-w-sm ${"success"===e.type?"bg-green-500 text-white":"error"===e.type?"bg-red-500 text-white":"warning"===e.type?"bg-yellow-500 text-white":"bg-blue-500 text-white"}`,children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("span",{children:e.message}),t.jsx("button",{onClick:()=>removeToast(e.id),className:"ml-2 text-white hover:text-gray-200",children:"\xd7"})]})},e.id))})]})};var d=r(4233);let ErrorBoundary=class ErrorBoundary extends o().Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,a){console.error("ErrorBoundary caught an error:",e,a),this.setState({error:e,errorInfo:a})}render(){return this.state.hasError?t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,t.jsxs)("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[t.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 dark:bg-red-900/20 rounded-full mb-4",children:t.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),t.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white text-center mb-2",children:"Oops! Algo deu errado"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"Ocorreu um erro inesperado. Nossa equipe foi notificada e est\xe1 trabalhando para resolver o problema."}),(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Recarregar P\xe1gina"}),t.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),className:"w-full px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Tentar Novamente"})]}),!1]})}):this.props.children}};function MyApp({Component:e,pageProps:a}){return t.jsx(ErrorBoundary,{children:t.jsx(ThemeProvider,{children:t.jsx(i.Ho,{children:t.jsx(d.wI,{children:t.jsx(ToastProvider,{children:t.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:t.jsx(e,{...a})})})})})})})}let c=MyApp},6764:()=>{}};