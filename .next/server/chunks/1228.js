"use strict";exports.id=1228,exports.ids=[1228],exports.modules={36:(e,r,a)=>{a.d(r,{Z:()=>AnimalForm});var t=a(997),s=a(6689),l=a(1415);function AnimalForm({animal:e,isOpen:r,onClose:a,onSave:i}){let[d,n]=(0,s.useState)({serie:"",rg:"",sexo:"",era:"",preco:"",observacoes:""}),[o,c]=(0,s.useState)({});(0,s.useEffect)(()=>{e?n({serie:e.serie||"",rg:e.rg||"",sexo:"MACHO"===e.sexo?"Macho":"F\xeamea",era:e.era||"",preco:e.valorVenda||"",observacoes:e.observacoes||""}):n({serie:"",rg:"",sexo:"",era:"",preco:"",observacoes:""})},[e]);let validateForm=()=>{let e={};return d.serie?["RPT","BENT","CJCJ","CJCG"].includes(d.serie)||(e.serie="S\xe9rie deve ser RPT, BENT, CJCJ ou CJCG"):e.serie="S\xe9rie \xe9 obrigat\xf3ria (RPT, BENT, CJCJ, CJCG)",d.rg?d.rg.length>6?e.rg="RG deve ter no m\xe1ximo 6 d\xedgitos":/^\d+$/.test(d.rg)||(e.rg="RG deve conter apenas n\xfameros"):e.rg="RG \xe9 obrigat\xf3rio",d.sexo?["Macho","F\xeamea"].includes(d.sexo)||(e.sexo="Sexo deve ser Macho ou F\xeamea"):e.sexo="Sexo \xe9 obrigat\xf3rio (Macho ou F\xeamea)",d.era&&(isNaN(d.era)||d.era<0||d.era>120)&&(e.era="Era deve ser um n\xfamero entre 0 e 120 meses"),d.preco&&(isNaN(d.preco)||d.preco<0)&&(e.preco="Pre\xe7o deve ser um valor positivo"),c(e),0===Object.keys(e).length},getDefaultRace=e=>({RPT:"Receptora",BENT:"Brahman",CJCJ:"Nelore",CJCG:"Gir"})[e]||"N\xe3o definida",calculateBirthDate=e=>{if(!e)return null;let r=parseInt(e);if(isNaN(r))return null;let a=new Date,t=new Date(a.getFullYear(),a.getMonth()-r,a.getDate());return t.toISOString().split("T")[0]};return r?t.jsx("div",{className:"modal-overlay",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e?"Editar Animal":"Novo Animal"}),t.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:t.jsx(l.Z,{className:"h-6 w-6"})})]}),(0,t.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),validateForm()){let e={serie:d.serie.toUpperCase(),rg:d.rg,brinco:`${d.serie.toUpperCase()} ${d.rg}`,nome:`${d.serie.toUpperCase()} ${d.rg}`,sexo:"Macho"===d.sexo?"MACHO":"FEMEA",raca:getDefaultRace(d.serie),status:"ATIVO",era:d.era||null,valorVenda:d.preco?parseFloat(d.preco):null,observacoes:d.observacoes||null,dataNascimento:calculateBirthDate(d.era),createdAt:new Date().toISOString()};console.log("Dados do animal a serem salvos:",e),i(e)}},className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900 dark:to-indigo-900 rounded-xl p-6 border-2 border-blue-200 dark:border-blue-700",children:[t.jsx("h4",{className:"text-xl font-bold text-blue-900 dark:text-blue-100 mb-6 flex items-center",children:"⭐ Campos Obrigat\xf3rios"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-blue-800 dark:text-blue-200 mb-3",children:"S\xc9RIE *"}),(0,t.jsxs)("select",{value:d.serie,onChange:e=>n({...d,serie:e.target.value}),className:`w-full px-4 py-4 border-2 rounded-xl focus:ring-4 focus:ring-blue-300 dark:bg-gray-700 dark:text-white text-lg font-medium ${o.serie?"border-red-500 bg-red-50":"border-blue-300 dark:border-blue-600"}`,children:[t.jsx("option",{value:"",children:"Selecione..."}),t.jsx("option",{value:"RPT",children:"RPT"}),t.jsx("option",{value:"BENT",children:"BENT"}),t.jsx("option",{value:"CJCJ",children:"CJCJ"}),t.jsx("option",{value:"CJCG",children:"CJCG"})]}),o.serie&&(0,t.jsxs)("p",{className:"text-red-600 text-sm mt-2 font-medium",children:["⚠️ ",o.serie]}),(0,t.jsxs)("p",{className:"text-xs text-blue-600 dark:text-blue-300 mt-2 font-medium",children:["RPT"===d.serie&&"Receptora","BENT"===d.serie&&"Brahman","CJCJ"===d.serie&&"Nelore","CJCG"===d.serie&&"Gir"]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-blue-800 dark:text-blue-200 mb-3",children:"RG (REGISTRO) *"}),t.jsx("input",{type:"text",value:d.rg,onChange:e=>n({...d,rg:e.target.value}),maxLength:6,className:`w-full px-4 py-4 border-2 rounded-xl focus:ring-4 focus:ring-blue-300 dark:bg-gray-700 dark:text-white text-lg font-mono ${o.rg?"border-red-500 bg-red-50":"border-blue-300 dark:border-blue-600"}`,placeholder:"123456"}),o.rg&&(0,t.jsxs)("p",{className:"text-red-600 text-sm mt-2 font-medium",children:["⚠️ ",o.rg]}),t.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-300 mt-2 font-medium",children:"At\xe9 6 d\xedgitos"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-blue-800 dark:text-blue-200 mb-3",children:"SEXO *"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>n({...d,sexo:"Macho"}),className:`p-4 rounded-xl border-2 transition-all duration-200 flex items-center justify-center text-base font-bold ${"Macho"===d.sexo?"border-blue-500 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 shadow-lg scale-105":"border-gray-300 dark:border-gray-600 hover:border-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30"}`,children:["\uD83D\uDC02",t.jsx("br",{}),"MACHO"]}),(0,t.jsxs)("button",{type:"button",onClick:()=>n({...d,sexo:"F\xeamea"}),className:`p-4 rounded-xl border-2 transition-all duration-200 flex items-center justify-center text-base font-bold ${"F\xeamea"===d.sexo?"border-pink-500 bg-pink-100 dark:bg-pink-800 text-pink-800 dark:text-pink-200 shadow-lg scale-105":"border-gray-300 dark:border-gray-600 hover:border-pink-400 hover:bg-pink-50 dark:hover:bg-pink-900/30"}`,children:["\uD83D\uDC04",t.jsx("br",{}),"F\xcaMEA"]})]}),o.sexo&&(0,t.jsxs)("p",{className:"text-red-600 text-sm mt-2 font-medium",children:["⚠️ ",o.sexo]})]})]})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900 dark:to-emerald-900 rounded-xl p-6 border-2 border-green-200 dark:border-green-700",children:[t.jsx("h4",{className:"text-xl font-bold text-green-900 dark:text-green-100 mb-6 flex items-center",children:"\uD83D\uDCDD Campos Opcionais"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-green-800 dark:text-green-200 mb-3",children:"ERA (IDADE EM MESES)"}),t.jsx("input",{type:"number",value:d.era,onChange:e=>n({...d,era:e.target.value}),className:"w-full px-4 py-4 border-2 border-green-300 dark:border-green-600 rounded-xl focus:ring-4 focus:ring-green-300 dark:bg-gray-700 dark:text-white text-lg font-medium",placeholder:"24",min:"0",max:"120"}),t.jsx("p",{className:"text-xs text-green-600 dark:text-green-300 mt-2 font-medium",children:"Idade do animal em meses (0-120)"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-green-800 dark:text-green-200 mb-3",children:"PRE\xc7O (R$)"}),t.jsx("input",{type:"number",step:"0.01",value:d.preco,onChange:e=>n({...d,preco:e.target.value}),className:"w-full px-4 py-4 border-2 border-green-300 dark:border-green-600 rounded-xl focus:ring-4 focus:ring-green-300 dark:bg-gray-700 dark:text-white text-lg font-medium",placeholder:"5000.00"}),t.jsx("p",{className:"text-xs text-green-600 dark:text-green-300 mt-2 font-medium",children:"Valor do animal em reais"})]})]}),(0,t.jsxs)("div",{className:"mt-6",children:[t.jsx("label",{className:"block text-sm font-bold text-green-800 dark:text-green-200 mb-3",children:"OBSERVA\xc7\xd5ES"}),t.jsx("textarea",{value:d.observacoes,onChange:e=>n({...d,observacoes:e.target.value}),className:"w-full px-4 py-4 border-2 border-green-300 dark:border-green-600 rounded-xl focus:ring-4 focus:ring-green-300 dark:bg-gray-700 dark:text-white text-base",rows:4,placeholder:"Informa\xe7\xf5es adicionais sobre o animal..."}),t.jsx("p",{className:"text-xs text-green-600 dark:text-green-300 mt-2 font-medium",children:"Texto livre para observa\xe7\xf5es"})]})]}),d.serie&&d.rg&&(0,t.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-violet-50 dark:from-purple-900 dark:to-violet-900 rounded-xl p-6 border-2 border-purple-200 dark:border-purple-700",children:[t.jsx("h4",{className:"text-xl font-bold text-purple-900 dark:text-purple-100 mb-6 flex items-center",children:"\uD83D\uDC41️ Preview do Animal"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"text-sm font-bold text-purple-800 dark:text-purple-200 mb-2",children:"BRINCO"}),(0,t.jsxs)("div",{className:"text-2xl font-mono font-bold text-purple-900 dark:text-purple-100 bg-white dark:bg-gray-800 rounded-lg p-3 border-2 border-purple-300",children:[d.serie," ",d.rg]})]}),(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"text-sm font-bold text-purple-800 dark:text-purple-200 mb-2",children:"RA\xc7A"}),t.jsx("div",{className:"text-lg font-bold text-purple-900 dark:text-purple-100 bg-white dark:bg-gray-800 rounded-lg p-3 border-2 border-purple-300",children:getDefaultRace(d.serie)})]}),(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"text-sm font-bold text-purple-800 dark:text-purple-200 mb-2",children:"SEXO"}),t.jsx("div",{className:"text-lg font-bold text-purple-900 dark:text-purple-100 bg-white dark:bg-gray-800 rounded-lg p-3 border-2 border-purple-300",children:d.sexo||"N\xe3o definido"})]}),(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"text-sm font-bold text-purple-800 dark:text-purple-200 mb-2",children:"ERA"}),t.jsx("div",{className:"text-lg font-bold text-purple-900 dark:text-purple-100 bg-white dark:bg-gray-800 rounded-lg p-3 border-2 border-purple-300",children:d.era?`${d.era}m`:"N/I"})]}),(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"text-sm font-bold text-purple-800 dark:text-purple-200 mb-2",children:"PRE\xc7O"}),t.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400 bg-white dark:bg-gray-800 rounded-lg p-3 border-2 border-purple-300",children:d.preco?`R$ ${parseFloat(d.preco).toLocaleString("pt-BR",{minimumFractionDigits:2})}`:"N/I"})]})]}),(0,t.jsxs)("div",{className:"mt-4 p-4 bg-white dark:bg-gray-800 rounded-lg border-2 border-purple-300",children:[t.jsx("h5",{className:"text-sm font-bold text-purple-800 dark:text-purple-200 mb-2",children:"\uD83D\uDD27 DADOS AUTO-GERADOS:"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-medium text-purple-700 dark:text-purple-300",children:"Nome:"}),(0,t.jsxs)("div",{className:"font-mono text-purple-900 dark:text-purple-100",children:[d.serie," ",d.rg]})]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-medium text-purple-700 dark:text-purple-300",children:"Status:"}),t.jsx("div",{className:"text-green-600 font-bold",children:"ATIVO"})]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-medium text-purple-700 dark:text-purple-300",children:"Data Nasc:"}),t.jsx("div",{className:"text-purple-900 dark:text-purple-100",children:d.era?"Calculada":"N/I"})]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-medium text-purple-700 dark:text-purple-300",children:"Brinco \xdanico:"}),t.jsx("div",{className:"text-green-600 font-bold",children:"✓ Validado"})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-6 border-2 border-gray-200 dark:border-gray-600",children:[t.jsx("h4",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-4 flex items-center",children:"✅ Status de Valida\xe7\xe3o"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:`text-2xl mb-2 ${d.serie?"text-green-500":"text-red-500"}`,children:d.serie?"✅":"❌"}),(0,t.jsxs)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["S\xe9rie ",d.serie?"✓":"(obrigat\xf3rio)"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:`text-2xl mb-2 ${d.rg&&d.rg.length<=6?"text-green-500":"text-red-500"}`,children:d.rg&&d.rg.length<=6?"✅":"❌"}),(0,t.jsxs)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["RG ",d.rg&&d.rg.length<=6?"✓":"(obrigat\xf3rio)"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:`text-2xl mb-2 ${d.sexo?"text-green-500":"text-red-500"}`,children:d.sexo?"✅":"❌"}),(0,t.jsxs)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Sexo ",d.sexo?"✓":"(obrigat\xf3rio)"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:`text-2xl mb-2 ${d.era?"text-blue-500":"text-gray-400"}`,children:d.era?"\uD83D\uDCC5":"⚪"}),(0,t.jsxs)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Era ",d.era?"✓":"(opcional)"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:`text-2xl mb-2 ${d.preco?"text-green-500":"text-gray-400"}`,children:d.preco?"\uD83D\uDCB0":"⚪"}),(0,t.jsxs)("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Pre\xe7o ",d.preco?"✓":"(opcional)"]})]})]}),d.serie&&d.rg&&t.jsx("div",{className:"mt-4 p-3 bg-green-100 dark:bg-green-900 rounded-lg border border-green-300 dark:border-green-700",children:t.jsx("div",{className:"flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-green-600 dark:text-green-400 font-bold",children:["\uD83C\uDFAF Brinco \xfanico ser\xe1: ",(0,t.jsxs)("span",{className:"font-mono text-lg",children:[d.serie," ",d.rg]})]})})})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center pt-6 border-t-2 border-gray-200 dark:border-gray-700",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.jsx("div",{className:"font-medium",children:"Campos obrigat\xf3rios: S\xe9rie, RG, Sexo"}),t.jsx("div",{children:"Campos opcionais: Era, Pre\xe7o, Observa\xe7\xf5es"})]}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[t.jsx("button",{type:"button",onClick:a,className:"px-8 py-4 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-all duration-200 font-bold text-lg",children:"❌ Cancelar"}),t.jsx("button",{type:"submit",disabled:!d.serie||!d.rg||!d.sexo,className:"px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-bold text-lg flex items-center disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:e?"✏️ ATUALIZAR ANIMAL":"\uD83D\uDCBE SALVAR ANIMAL"})]})]})]})]})}):null}},7087:(e,r,a)=>{a.d(r,{Z:()=>AuctionManager});var t=a(997),s=a(6689),l=a(5837),i=a(8771),d=a(445),n=a(3658),o=a(434),c=a(1415);a(6949);let DevicePhoneMobileIcon=({className:e})=>t.jsx("span",{className:e,children:"\uD83D\uDCF1"});function AuctionManager({isOpen:e,onClose:r,onSalesComplete:a}){let[x,m]=(0,s.useState)([]),[g,u]=(0,s.useState)([]),[h,b]=(0,s.useState)(!1),[p,v]=(0,s.useState)(!1),[j,y]=(0,s.useState)(""),[f,N]=(0,s.useState)({nome:"Sistema de Vendas",data:new Date().toISOString().split("T")[0],local:"Fazenda",tipo:"VENDA"}),[k,D]=(0,s.useState)({}),[w,C]=(0,s.useState)("timeline"),[A,R]=(0,s.useState)(!1),[S,E]=(0,s.useState)([]),[B,I]=(0,s.useState)({fivAnimals:[],iaAnimals:[],topBulls:[],priceAnalysis:{}});(0,s.useEffect)(()=>{e&&(loadActiveAnimals(),generateTimeline())},[e]),(0,s.useEffect)(()=>{g.length>0&&analyzeAnimals()},[g,k]),(0,s.useEffect)(()=>{if(j){let e=x.filter(e=>{let r=j.toLowerCase(),a=e.serie||extractSerieFromBrinco(e.brinco);return e.brinco?.toLowerCase().includes(r)||a?.toLowerCase().includes(r)||e.raca?.toLowerCase().includes(r)||e.nome?.toLowerCase().includes(r)||e.id?.toString().includes(r)});u(e)}else u(x)},[j,x]);let extractSerieFromBrinco=e=>{if(!e)return"CJCJ";let r=e.match(/^[A-Z]+/);return r?r[0]:"CJCJ"},generateTimeline=()=>{let e=[{time:"08:00",title:"Abertura do Leil\xe3o",description:"Recep\xe7\xe3o dos participantes e credenciamento",status:"pending",icon:"\uD83C\uDFAA"},{time:"08:30",title:"Apresenta\xe7\xe3o dos Animais",description:`${g.length} animais dispon\xedveis para venda`,status:"pending",icon:"\uD83D\uDC02"},{time:"09:00",title:"In\xedcio dos Lances",description:"Primeira categoria: Touros e Reprodutores",status:"pending",icon:"\uD83D\uDD28"},{time:"10:30",title:"Intervalo",description:"Coffee break e networking",status:"pending",icon:"☕"},{time:"11:00",title:"Segunda Rodada",description:"Novilhas e F\xeameas Jovens",status:"pending",icon:"\uD83D\uDC04"},{time:"14:00",title:"Almo\xe7o",description:"Pausa para refei\xe7\xe3o",status:"pending",icon:"\uD83C\uDF7D️"},{time:"15:00",title:"Rodada Final",description:"Animais FIV e Gen\xe9tica Superior",status:"pending",icon:"\uD83E\uDDEC"},{time:"17:00",title:"Encerramento",description:"Finaliza\xe7\xe3o e acerto de contas",status:"pending",icon:"\uD83C\uDFC1"}];E(e)},analyzeAnimals=()=>{let e=g.filter(e=>e.observacoes?.toLowerCase().includes("fiv")||e.categoria?.toLowerCase().includes("fiv")),r=g.filter(e=>!e.observacoes?.toLowerCase().includes("fiv")&&!e.categoria?.toLowerCase().includes("fiv")),a={};g.forEach(e=>{e.pai&&(a[e.pai]||(a[e.pai]={name:e.pai,count:0,animals:[],avgPrice:0}),a[e.pai].count++,a[e.pai].animals.push(e))});let t=Object.values(a).sort((e,r)=>r.count-e.count).slice(0,5),s=e.map(e=>k[e.id]?.valor||0).filter(e=>e>0),l=r.map(e=>k[e.id]?.valor||0).filter(e=>e>0),i={fiv:{count:e.length,avgPrice:s.length>0?s.reduce((e,r)=>e+r,0)/s.length:0,maxPrice:s.length>0?Math.max(...s):0,minPrice:s.length>0?Math.min(...s):0},ia:{count:r.length,avgPrice:l.length>0?l.reduce((e,r)=>e+r,0)/l.length:0,maxPrice:l.length>0?Math.max(...l):0,minPrice:l.length>0?Math.min(...l):0}};I({fivAnimals:e,iaAnimals:r,topBulls:t,priceAnalysis:i})},generateBIReport=()=>{let e=g.length,r=Object.keys(k).length,a=Object.values(k).reduce((e,r)=>e+(r.valor||0),0);return{summary:{totalAnimals:e,soldAnimals:r,totalRevenue:a,avgPrice:r>0?a/r:0,saleRate:e>0?r/e*100:0},fivVsIa:B.priceAnalysis,topBulls:B.topBulls,timeline:S}},sendBIReport=async e=>{try{let r=generateBIReport(),a=`
📋 *RELAT\xd3RIO DE VENDAS - BI*

📊 *RESUMO GERAL*
• Total de Animais: ${r.summary.totalAnimals}
• Animais Vendidos: ${r.summary.soldAnimals}
• Taxa de Venda: ${r.summary.saleRate.toFixed(1)}%
• Receita Total: R$ ${r.summary.totalRevenue.toLocaleString("pt-BR")}
• Pre\xe7o M\xe9dio: R$ ${r.summary.avgPrice.toLocaleString("pt-BR")}

🧬 *AN\xc1LISE FIV vs IA*
• FIV: ${r.fivVsIa.fiv.count} animais - M\xe9dia: R$ ${r.fivVsIa.fiv.avgPrice.toLocaleString("pt-BR")}
• IA: ${r.fivVsIa.ia.count} animais - M\xe9dia: R$ ${r.fivVsIa.ia.avgPrice.toLocaleString("pt-BR")}

🏆 *TOP TOUROS (Mais Filhos)*
${r.topBulls.slice(0,3).map((e,r)=>`${r+1}. ${e.name}: ${e.count} filhos`).join("\n")}

⏰ *CRONOGRAMA*
• 08:00 - Abertura
• 09:00 - In\xedcio dos Lances
• 15:00 - Animais FIV
• 17:00 - Encerramento

*Beef Sync* - Gest\xe3o Bovina Inteligente 🐂
      `,t=`https://wa.me/${e.replace(/\D/g,"")}?text=${encodeURIComponent(a)}`;window.open(t,"_blank"),alert("✅ Relat\xf3rio BI enviado!\n\nO WhatsApp Web foi aberto com o relat\xf3rio pronto para enviar.")}catch(e){console.error("Erro ao enviar BI:",e),alert("Erro ao enviar relat\xf3rio BI")}},loadActiveAnimals=async()=>{try{b(!0);let e=await fetch("/api/animals");if(e.ok){let r=await e.json();console.log("Animais carregados da API:",r);let a=r.filter(e=>"ATIVO"===e.status||!e.status||"ativo"===e.status);console.log("Animais ativos filtrados:",a);let t={};a.forEach(e=>{t[e.id]={selected:!1,valor:""}}),m(a),u(a),D(t)}else{console.error("Erro ao carregar animais da API:",e.status);let r=[],a={};r.forEach(e=>{a[e.id]={selected:!1,valor:""}}),m(r),u(r),D(a)}}catch(a){console.error("Erro ao carregar animais:",a);let e=[],r={};e.forEach(e=>{r[e.id]={selected:!1,valor:""}}),m(e),u(e),D(r)}finally{b(!1)}},handleAnimalToggle=e=>{D(r=>({...r,[e]:{...r[e],selected:!r[e].selected}}))},handleValueChange=(e,r)=>{D(a=>({...a,[e]:{...a[e],valor:r,selected:!!r||a[e].selected}}))},getSelectedAnimals=()=>{let e=Object.entries(k).filter(([e,r])=>r.selected&&r.valor).map(([e,r])=>({animalId:e,animal:x.find(r=>r.id===e),valor:parseFloat(r.valor)}));return console.log("\uD83D\uDD0D Animais selecionados:",e),console.log("\uD83D\uDCCA SalesData atual:",k),e},handleSaveAuction=async()=>{console.log("\uD83D\uDD04 Iniciando salvamento de vendas...");let e=getSelectedAnimals();if(console.log("\uD83D\uDCCB Vendas selecionadas:",e),0===e.length){alert("Selecione pelo menos um animal e informe o valor de venda");return}try{v(!0),console.log("\uD83D\uDCBE Salvando vendas no banco...");let t=e.map(e=>(console.log(`🔄 Salvando animal ${e.animalId} com valor ${e.valor}`),fetch("/api/animals/"+e.animalId,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"VENDIDO",valorVenda:e.valor,dataVenda:new Date().toISOString()})}))),s=await Promise.all(t);console.log("✅ Respostas da API:",s);let l=s.every(e=>e.ok);if(!l)throw Error("Algumas vendas n\xe3o puderam ser salvas");let i=generateBIReport();console.log("\uD83D\uDCCA Relat\xf3rio gerado:",i);let d=e.reduce((e,r)=>e+r.valor,0),n=d/e.length;alert(`✅ Vendas registradas com sucesso!

📊 RESUMO:
• ${e.length} animais vendidos
• Receita total: R$ ${d.toLocaleString("pt-BR")}
• Pre\xe7o m\xe9dio: R$ ${n.toLocaleString("pt-BR")}

📋 Relat\xf3rios dispon\xedveis na aba "Relat\xf3rios"
📱 Use "Enviar BI" para compartilhar via WhatsApp`);let o=x.map(r=>{let a=e.find(e=>e.animalId===r.id);return a?{...r,status:"VENDIDO",valorVenda:a.valor}:r});m(o),u(o),D({}),a&&a(),r()}catch(e){console.error("❌ Erro ao salvar vendas:",e),alert("Erro ao salvar vendas: "+e.message)}finally{v(!1)}},V=getSelectedAnimals().reduce((e,r)=>e+r.valor,0),F=getSelectedAnimals().length;return e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-6xl w-full max-h-[95vh] overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-green-600 to-blue-600",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(l.Z,{className:"h-8 w-8 text-white"}),(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"\uD83D\uDCCB Sistema de Vendas e NF"}),t.jsx("p",{className:"text-green-100",children:"Gest\xe3o de Vendas, Pre\xe7os, Compradores e Notas Fiscais"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)("button",{onClick:()=>R(!0),className:"px-4 py-2 bg-white/20 text-white rounded-lg hover:bg-white/30 transition-colors flex items-center",children:[t.jsx(i.Z,{className:"h-4 w-4 mr-2"}),"Enviar BI"]}),t.jsx("button",{onClick:r,className:"p-2 hover:bg-white/20 rounded-lg transition-colors text-white text-2xl font-bold",children:"\xd7"})]})]}),t.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[{id:"timeline",label:"Cronograma",icon:d.Z},{id:"analytics",label:"An\xe1lises",icon:n.Z},{id:"animals",label:"Animais",icon:l.Z},{id:"reports",label:"Relat\xf3rios",icon:o.Z}].map(e=>(0,t.jsxs)("button",{onClick:()=>C(e.id),className:`flex items-center px-6 py-3 text-sm font-medium transition-colors ${w===e.id?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400 bg-white dark:bg-gray-800":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[t.jsx(e.icon,{className:"h-4 w-4 mr-2"}),e.label]},e.id))}),(0,t.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(95vh-200px)]",children:["timeline"===w&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[t.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"⏰ Cronograma do Leil\xe3o"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Acompanhe a programa\xe7\xe3o completa do evento"})]}),t.jsx("div",{className:"relative",children:S.map((e,r)=>(0,t.jsxs)("div",{className:"flex items-start mb-6",children:[t.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center text-2xl",children:e.icon}),(0,t.jsxs)("div",{className:"ml-4 flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.title}),t.jsx("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900 px-3 py-1 rounded-full",children:e.time})]}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:e.description})]})]},r))})]}),"analytics"===w&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[t.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"\uD83D\uDCCA An\xe1lises do Leil\xe3o"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Insights e estat\xedsticas dos animais"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,t.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-xl p-6 border border-purple-200 dark:border-purple-800",children:[t.jsx("h4",{className:"text-lg font-semibold text-purple-900 dark:text-purple-100 mb-4 flex items-center",children:"\uD83E\uDDEC Animais FIV"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Quantidade:"}),t.jsx("span",{className:"font-bold text-purple-600 dark:text-purple-400",children:B.priceAnalysis.fiv?.count||0})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pre\xe7o M\xe9dio:"}),(0,t.jsxs)("span",{className:"font-bold text-green-600 dark:text-green-400",children:["R$ ",(B.priceAnalysis.fiv?.avgPrice||0).toLocaleString("pt-BR")]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Maior Valor:"}),(0,t.jsxs)("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:["R$ ",(B.priceAnalysis.fiv?.maxPrice||0).toLocaleString("pt-BR")]})]})]})]}),(0,t.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-6 border border-blue-200 dark:border-blue-800",children:[t.jsx("h4",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-4 flex items-center",children:"\uD83D\uDC04 Animais IA"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Quantidade:"}),t.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:B.priceAnalysis.ia?.count||0})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pre\xe7o M\xe9dio:"}),(0,t.jsxs)("span",{className:"font-bold text-green-600 dark:text-green-400",children:["R$ ",(B.priceAnalysis.ia?.avgPrice||0).toLocaleString("pt-BR")]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Maior Valor:"}),(0,t.jsxs)("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:["R$ ",(B.priceAnalysis.ia?.maxPrice||0).toLocaleString("pt-BR")]})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83C\uDFC6 Top Touros (Mais Filhos no Leil\xe3o)"}),t.jsx("div",{className:"space-y-3",children:B.topBulls.length>0?B.topBulls.map((e,r)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ${0===r?"bg-yellow-500":1===r?"bg-gray-400":2===r?"bg-orange-600":"bg-blue-500"}`,children:r+1}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),t.jsx("div",{className:"text-sm text-gray-500",children:"Touro reprodutor"})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"font-bold text-blue-600 dark:text-blue-400",children:[e.count," filhos"]}),t.jsx("div",{className:"text-sm text-gray-500",children:"no leil\xe3o"})]})]},r)):(0,t.jsxs)("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:[t.jsx("div",{className:"text-2xl mb-2",children:"\uD83D\uDC02"}),t.jsx("p",{children:"Nenhum dado de touro dispon\xedvel"})]})})]})]}),F>0&&t.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border-b border-gray-200 dark:border-gray-700",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:F})," animais selecionados"]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Valor total: ",(0,t.jsxs)("span",{className:"font-bold text-green-600 dark:text-green-400",children:["R$ ",V.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),t.jsx("button",{onClick:handleSaveAuction,disabled:p||0===F,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:p?"\uD83D\uDCBE Salvando...":"\uD83D\uDCBE Registrar Leil\xe3o"})]})}),t.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-300px)]",children:h?(0,t.jsxs)("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),t.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Carregando animais..."})]}):0===x.length?(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[t.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDC04"}),t.jsx("p",{children:"Nenhum animal ativo encontrado"})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),t.jsx("input",{type:"text",value:j,onChange:e=>y(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md leading-5 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"\uD83D\uDD0D Buscar por brinco, s\xe9rie, ra\xe7a ou nome..."}),j&&t.jsx("button",{onClick:()=>y(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:t.jsx("svg",{className:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400",children:[t.jsx("div",{children:j?(0,t.jsxs)("span",{children:[g.length," de ",x.length," animais encontrados",j&&(0,t.jsxs)("span",{className:"ml-2 font-medium",children:['para "',j,'"']})]}):(0,t.jsxs)("span",{children:[x.length," animais ativos dispon\xedveis"]})}),(0,t.jsxs)("div",{children:["\uD83D\uDCA1 ",t.jsx("strong",{children:"Dica:"})," Marque os animais vendidos e informe o valor"]})]}),t.jsx("div",{className:"space-y-3",children:0===g.length?(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[t.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDD0D"}),(0,t.jsxs)("p",{children:['Nenhum animal encontrado para "',j,'"']}),t.jsx("button",{onClick:()=>y(""),className:"mt-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:"Limpar busca"})]}):g.map(e=>t.jsx("div",{className:`border rounded-lg p-4 transition-all ${k[e.id]?.selected?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[t.jsx("input",{type:"checkbox",checked:k[e.id]?.selected||!1,onChange:()=>handleAnimalToggle(e.id),className:"w-5 h-5 text-green-600 rounded focus:ring-green-500"}),t.jsx("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"text-2xl",children:"Macho"===e.sexo?"\uD83D\uDC02":"\uD83D\uDC04"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"font-medium text-gray-900 dark:text-white",children:[e.serie||extractSerieFromBrinco(e.brinco)," ",e.brinco]}),(0,t.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.raca," • ",e.sexo," • ",e.categoria||"Bezerro"]})]})]})}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)("div",{className:"text-right",children:[t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Custo Total"}),(0,t.jsxs)("div",{className:"font-medium text-red-600 dark:text-red-400",children:["R$ ",(e.costs?.reduce((e,r)=>e+(r.valor||0),0)||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),(0,t.jsxs)("div",{className:"w-32",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Valor Venda"}),t.jsx("input",{type:"number",step:"0.01",value:k[e.id]?.valor||"",onChange:r=>handleValueChange(e.id,r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white text-right",placeholder:"0,00"})]}),k[e.id]?.valor&&(0,t.jsxs)("div",{className:"text-right",children:[t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Resultado"}),(0,t.jsxs)("div",{className:`font-bold ${parseFloat(k[e.id].valor)-(e.costs?.reduce((e,r)=>e+(r.valor||0),0)||0)>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["R$ ",(parseFloat(k[e.id].valor)-(e.costs?.reduce((e,r)=>e+(r.valor||0),0)||0)).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})]})},e.id))})]})}),t.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:'\uD83D\uDCA1 Os animais vendidos ter\xe3o status alterado para "VENDIDO" automaticamente'}),(0,t.jsxs)("div",{className:"flex space-x-3",children:[t.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Cancelar"}),t.jsx("button",{onClick:handleSaveAuction,disabled:p||0===F,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:p?"\uD83D\uDCBE Salvando...":`💾 Registrar ${F} Vendas`})]})]})}),"animals"===w&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"\uD83D\uDC04 Animais do Leil\xe3o"}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[g.length," animais dispon\xedveis"]})]}),(0,t.jsxs)("div",{className:"relative",children:[t.jsx("input",{type:"text",value:j,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"\uD83D\uDD0D Buscar animais..."}),t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),t.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:g.map(e=>{let r=e.serie||extractSerieFromBrinco(e.brinco),a=k[e.id]||{};return t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[t.jsx("input",{type:"checkbox",checked:a.selected||!1,onChange:()=>handleAnimalToggle(e.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"font-semibold text-gray-900 dark:text-white",children:[r," ",e.brinco]}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[e.raca," • ",e.sexo," • ",e.categoria]})]})]}),t.jsx("div",{className:"flex items-center space-x-3",children:t.jsx("input",{type:"number",value:a.valor||"",onChange:r=>handleValueChange(e.id,r.target.value),className:"w-32 px-3 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Valor R$"})})]})},e.id)})}),getSelectedAnimals().length>0&&t.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:"font-bold text-green-600 dark:text-green-400",children:[getSelectedAnimals().length," animais selecionados"]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Valor total: R$ ",getSelectedAnimals().reduce((e,r)=>e+r.valor,0).toLocaleString("pt-BR")]})]}),t.jsx("button",{onClick:handleSaveAuction,disabled:p,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:p?"\uD83D\uDCBE Salvando...":"\uD83D\uDCBE Registrar Vendas"})]})})]}),"reports"===w&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[t.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"\uD83D\uDCCB Relat\xf3rios do Leil\xe3o"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Resumos e estat\xedsticas para compartilhar"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCCA Resumo Executivo"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total de Animais:"}),t.jsx("span",{className:"font-bold",children:x.length})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Animais Ativos:"}),t.jsx("span",{className:"font-bold text-green-600",children:x.filter(e=>"ATIVO"===e.status).length})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Animais Vendidos:"}),t.jsx("span",{className:"font-bold text-blue-600",children:x.filter(e=>"VENDIDO"===e.status).length})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Receita Total:"}),(0,t.jsxs)("span",{className:"font-bold text-green-600",children:["R$ ",x.filter(e=>"VENDIDO"===e.status).reduce((e,r)=>e+(r.valorVenda||0),0).toLocaleString("pt-BR")]})]})]})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCF1 Compartilhar BI"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Envie relat\xf3rios detalhados via WhatsApp para compradores e interessados"}),(0,t.jsxs)("button",{onClick:()=>R(!0),className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center",children:[t.jsx(DevicePhoneMobileIcon,{className:"h-4 w-4 mr-2"}),"Enviar BI via WhatsApp"]})]})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCB0 Vendas Realizadas"}),t.jsx("div",{className:"space-y-3",children:x.filter(e=>"VENDIDO"===e.status).length>0?x.filter(e=>"VENDIDO"===e.status).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"text-2xl",children:"\uD83D\uDC02"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"font-medium text-gray-900 dark:text-white",children:[e.serie," ",e.brinco]}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[e.raca," • ",e.sexo]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"font-bold text-green-600",children:["R$ ",(e.valorVenda||0).toLocaleString("pt-BR")]}),t.jsx("div",{className:"text-sm text-gray-500",children:"Vendido"})]})]},e.id)):(0,t.jsxs)("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:[t.jsx("div",{className:"text-2xl mb-2",children:"\uD83D\uDCB0"}),t.jsx("p",{children:"Nenhuma venda registrada ainda"})]})})]})]})]}),A&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"\uD83D\uDCF1 Enviar BI via WhatsApp"}),t.jsx("button",{onClick:()=>R(!1),className:"text-gray-400 hover:text-gray-600",children:t.jsx(c.Z,{className:"h-6 w-6"})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"N\xfamero do WhatsApp"}),t.jsx("input",{type:"tel",id:"whatsappNumber",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white",placeholder:"+55 11 99999-9999"})]}),(0,t.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[t.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"O relat\xf3rio incluir\xe1:"}),(0,t.jsxs)("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[t.jsx("li",{children:"• Resumo geral do leil\xe3o"}),t.jsx("li",{children:"• An\xe1lise FIV vs IA com pre\xe7os"}),t.jsx("li",{children:"• Top touros com mais filhos"}),t.jsx("li",{children:"• Cronograma do evento"}),t.jsx("li",{children:"• Gr\xe1ficos otimizados para celular"})]})]}),(0,t.jsxs)("div",{className:"flex space-x-3",children:[t.jsx("button",{onClick:()=>R(!1),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancelar"}),t.jsx("button",{onClick:()=>{let e=document.getElementById("whatsappNumber").value;e?(sendBIReport(e),R(!1)):alert("Por favor, informe o n\xfamero do WhatsApp")},className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Enviar BI"})]})]})]})})})]})}):null}},4308:(e,r,a)=>{a.d(r,{Z:()=>SalesManager});var t=a(997),s=a(6689),l=a(8523),i=a(5837),d=a(9871);function SalesManager({isOpen:e,onClose:r}){let[a,n]=(0,s.useState)("menu"),[o,c]=(0,s.useState)([]),[x,m]=(0,s.useState)(!1),g=[{id:"invoice",title:"\uD83D\uDCCB Criar Nota Fiscal",description:"Emitir NF com dados do comprador, animais e pre\xe7os",color:"from-blue-600 to-indigo-600",icon:l.Z},{id:"sales",title:"\uD83D\uDCB0 Registrar Venda Direta",description:"Venda simples sem emiss\xe3o de NF",color:"from-green-600 to-emerald-600",icon:i.Z},{id:"history",title:"\uD83D\uDCCA Hist\xf3rico de Vendas",description:"Ver todas as vendas e NFs emitidas",color:"from-purple-600 to-pink-600",icon:d.Z}];return e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-600 to-indigo-600",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(i.Z,{className:"h-8 w-8 text-white"}),(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"\uD83D\uDCB0 Sistema de Vendas"}),t.jsx("p",{className:"text-blue-100",children:"Vendas, Notas Fiscais, Pre\xe7os e Compradores"})]})]}),t.jsx("button",{onClick:r,className:"p-2 hover:bg-white/20 rounded-lg transition-colors text-white text-2xl font-bold",children:"\xd7"})]}),(0,t.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:["menu"===a&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[t.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"O que voc\xea deseja fazer?"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Escolha uma das op\xe7\xf5es abaixo para gerenciar suas vendas"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:g.map(e=>t.jsx("button",{onClick:()=>n(e.id),className:`p-6 rounded-2xl bg-gradient-to-br ${e.color} text-white hover:scale-105 transform transition-all duration-200 shadow-xl`,children:(0,t.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[t.jsx(e.icon,{className:"h-12 w-12"}),(0,t.jsxs)("div",{children:[t.jsx("h4",{className:"text-xl font-bold mb-2",children:e.title}),t.jsx("p",{className:"text-sm opacity-90",children:e.description})]})]})},e.id))}),(0,t.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-6 mt-8",children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCCA Resumo R\xe1pido"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:"0"}),t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"NFs Emitidas"})]}),(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:"0"}),t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Vendas Diretas"})]}),(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:"0"}),t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Animais Vendidos"})]}),(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:"R$ 0"}),t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Receita Total"})]})]})]})]}),"invoice"===a&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"\uD83D\uDCCB Sistema de Notas Fiscais"}),t.jsx("button",{onClick:()=>n("menu"),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"← Voltar ao Menu"})]}),(0,t.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900 rounded-xl p-6 border border-blue-200 dark:border-blue-700",children:[t.jsx("h4",{className:"text-lg font-semibold text-blue-800 dark:text-blue-200 mb-4",children:"\uD83D\uDCCB Sistema de Notas Fiscais"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4",children:[t.jsx("h5",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Dados da NF"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx("input",{type:"text",placeholder:"N\xfamero da NF",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"}),t.jsx("input",{type:"date",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"}),(0,t.jsxs)("select",{className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{children:"Pendente"}),t.jsx("option",{children:"Emitida"}),t.jsx("option",{children:"Paga"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4",children:[t.jsx("h5",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Dados do Comprador"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("input",{type:"text",placeholder:"Nome/Raz\xe3o Social",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"}),t.jsx("input",{type:"text",placeholder:"CPF/CNPJ",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"}),t.jsx("input",{type:"text",placeholder:"Cidade",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"}),(0,t.jsxs)("select",{className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[t.jsx("option",{value:"",children:"Estado..."}),t.jsx("option",{value:"SP",children:"SP"}),t.jsx("option",{value:"MG",children:"MG"}),t.jsx("option",{value:"RJ",children:"RJ"}),t.jsx("option",{value:"GO",children:"GO"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4",children:[t.jsx("h5",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Animais da Venda"}),t.jsx("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:t.jsx("option",{children:"Selecionar animal..."})}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Primeiro cadastre animais para poder selecion\xe1-los aqui"})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4",children:[t.jsx("button",{className:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancelar"}),t.jsx("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Criar NF"})]})]})]})]}),"sales"===a&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"\uD83D\uDCB0 Vendas Diretas"}),t.jsx("button",{onClick:()=>n("menu"),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"← Voltar ao Menu"})]}),(0,t.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900 rounded-xl p-6 border border-yellow-200 dark:border-yellow-700",children:[t.jsx("h4",{className:"text-lg font-semibold text-yellow-800 dark:text-yellow-200 mb-2",children:"\uD83D\uDEA7 Em Desenvolvimento"}),t.jsx("p",{className:"text-yellow-700 dark:text-yellow-300",children:"O sistema de vendas diretas (sem NF) est\xe1 sendo desenvolvido. Por enquanto, use o sistema de Notas Fiscais para registrar suas vendas."})]})]}),"history"===a&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"\uD83D\uDCCA Hist\xf3rico de Vendas"}),t.jsx("button",{onClick:()=>n("menu"),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"← Voltar ao Menu"})]}),(0,t.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900 rounded-xl p-6 border border-blue-200 dark:border-blue-700",children:[t.jsx("h4",{className:"text-lg font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"\uD83D\uDCC8 Relat\xf3rios em Desenvolvimento"}),t.jsx("p",{className:"text-blue-700 dark:text-blue-300",children:"O hist\xf3rico detalhado de vendas e relat\xf3rios est\xe3o sendo desenvolvidos. Em breve voc\xea poder\xe1 ver gr\xe1ficos, estat\xedsticas e exportar dados."})]})]})]})]})}):null}}};