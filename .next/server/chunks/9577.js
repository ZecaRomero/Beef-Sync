"use strict";exports.id=9577,exports.ids=[9577],exports.modules={9577:(e,a,r)=>{r.d(a,{Z:()=>MarketWidget});var t=r(997),s=r(6689),n=r(8974);function MarketWidget(){let[e,a]=(0,s.useState)(null),[r,o]=(0,s.useState)(!0),[c,i]=(0,s.useState)(null),[d,l]=(0,s.useState)("Recria");(0,s.useEffect)(()=>{loadMarketData();let e=setInterval(loadMarketData,15e3);return()=>clearInterval(e)},[]);let loadMarketData=async()=>{try{let e=await n.I.getCattlePrices();a(e),i(new Date),o(!1)}catch(e){console.error("Erro ao carregar dados do mercado:",e),a({prices:{garrote:{price:270.9,change:0,changePercent:0,unit:"R$/arroba",market:"Mercado Regional",trend:"stable",icon:"\uD83D\uDC03",category:"Recria"},novilha:{price:265.2,change:0,changePercent:0,unit:"R$/arroba",market:"CEPEA/ESALQ",trend:"stable",icon:"\uD83D\uDC2E",category:"Recria"}},indices:{dolar:{value:5.61,change:0,changePercent:0,icon:"\uD83D\uDCB5"},soja:{value:142,change:0,changePercent:0,icon:"\uD83C\uDF31"}},marketStatus:{session:{status:"error",label:"Erro nos dados",color:"red"}}}),i(new Date),o(!1)}},formatCurrency=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),getTrendIcon=e=>{switch(e){case"up":return"\uD83D\uDCC8";case"down":return"\uD83D\uDCC9";default:return"➡️"}},getTrendColor=e=>e>0?"text-green-600 dark:text-green-400":e<0?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400";return r?t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin text-2xl mb-2",children:"\uD83D\uDCCA"}),t.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Carregando pre\xe7os..."})]})}):(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white flex items-center",children:"\uD83D\uDCC8 Pre\xe7os Hoje"}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),t.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Ao vivo"})]})]}),e&&t.jsx("div",{className:"mb-4",children:t.jsx("div",{className:"flex space-x-1 text-xs",children:["all","Terminados","Recria","Cria"].map(e=>t.jsx("button",{onClick:()=>l(e),className:`px-2 py-1 rounded-full transition-colors ${d===e?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"all"===e?"Todos":e},e))})}),e&&t.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:Object.entries(e.prices).filter(([e,a])=>"all"===d||("Recria"===d?"garrote"===e||"novilha"===e:a.category===d)).map(([e,a])=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-lg",children:a.icon}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"boi_gordo"===e?"Boi Gordo":"vaca_gorda"===e?"Vaca Gorda":"novilha"===e?"Novilha":"garrote"===e?"Garrote":"bezerro_macho"===e?"Bezerro":"bezerra"===e?"Bezerra":e}),t.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:a.market})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[t.jsx("div",{className:"text-sm font-bold text-gray-900 dark:text-white",children:a.unit.includes("arroba")?`R$ ${a.price.toFixed(0)}`:formatCurrency(a.price)}),(0,t.jsxs)("div",{className:`text-xs flex items-center justify-end ${getTrendColor(a.change)}`,children:[t.jsx("span",{className:"mr-1",children:getTrendIcon(a.trend)}),a.changePercent>0?"+":"",a.changePercent.toFixed(1),"%"]})]})]},e))}),e&&t.jsx("div",{className:"pt-3 mt-3 border-t border-gray-200 dark:border-gray-600",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,t.jsxs)("div",{className:"text-center p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-1",children:[t.jsx("span",{children:e.indices.dolar.icon}),(0,t.jsxs)("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:["USD ",e.indices.dolar.value.toFixed(2)]})]}),t.jsx("div",{className:"text-gray-500 mt-1",children:"D\xf3lar"}),(0,t.jsxs)("div",{className:`text-xs ${getTrendColor(e.indices.dolar.change)}`,children:[e.indices.dolar.changePercent>0?"+":"",e.indices.dolar.changePercent.toFixed(1),"%"]})]}),(0,t.jsxs)("div",{className:"text-center p-2 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-1",children:[t.jsx("span",{children:e.indices.soja.icon}),(0,t.jsxs)("span",{className:"font-medium text-green-600 dark:text-green-400",children:["R$ ",e.indices.soja.value.toFixed(0)]})]}),t.jsx("div",{className:"text-gray-500 mt-1",children:"Soja"}),(0,t.jsxs)("div",{className:`text-xs ${getTrendColor(e.indices.soja.change)}`,children:[e.indices.soja.changePercent>0?"+":"",e.indices.soja.changePercent.toFixed(1),"%"]})]})]})}),e&&t.jsx("div",{className:"pt-3 mt-3 border-t border-gray-200 dark:border-gray-600",children:(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:`w-2 h-2 rounded-full ${"open"===e.marketStatus.session.status?"bg-green-500 animate-pulse":"closing"===e.marketStatus.session.status?"bg-yellow-500 animate-pulse":"bg-red-500"}`}),t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e.marketStatus.session.label})]}),t.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:c?.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]})})]})}},8974:(e,a,r)=>{r.d(a,{I:()=>MarketAPI});let MarketAPI=class MarketAPI{static async getCattlePrices(){try{let e=await fetch("/api/market-prices"),a={};if(e.ok){let r=await e.json();a=r.reduce((e,a)=>(e[a.produto]={preco:a.preco,unidade:a.unidade,mercado:a.mercado,fonte:a.fonte},e),{})}let calculateChange=(e,a)=>{let r=(Math.random()-.5)*.04;return{change:Math.round(100*(e*r))/100,changePercent:Math.round(1e4*r)/100}},r={BOI_GORDO:{key:"boi_gordo",icon:"\uD83D\uDC02",category:"Terminados",description:"Bovinos machos adultos para abate",defaultUnit:"R$/arroba",defaultMarket:"CEPEA/ESALQ"},VACA_GORDA:{key:"vaca_gorda",icon:"\uD83D\uDC04",category:"Terminados",description:"F\xeameas adultas para abate",defaultUnit:"R$/arroba",defaultMarket:"CEPEA/ESALQ"},NOVILHA:{key:"novilha",icon:"\uD83D\uDC2E",category:"Recria",description:"F\xeameas jovens em crescimento",defaultUnit:"R$/arroba",defaultMarket:"CEPEA/ESALQ"},GARROTE:{key:"garrote",icon:"\uD83D\uDC03",category:"Recria",description:"Machos jovens em crescimento",defaultUnit:"R$/arroba",defaultMarket:"Mercado Regional"},BEZERRO_MACHO:{key:"bezerro_macho",icon:"\uD83D\uDC02",category:"Cria",description:"Machos at\xe9 12 meses",defaultUnit:"R$/cabe\xe7a",defaultMarket:"Mercado Regional"},BEZERRA:{key:"bezerra",icon:"\uD83D\uDC04",category:"Cria",description:"F\xeameas at\xe9 12 meses",defaultUnit:"R$/cabe\xe7a",defaultMarket:"Mercado Regional"}},t={};return Object.keys(r).forEach(e=>{let s=r[e],n=a[e];if(n){let{change:a,changePercent:r}=calculateChange(n.preco,e);t[s.key]={price:n.preco,change:a,changePercent:r,unit:n.unidade||s.defaultUnit,market:n.mercado||s.defaultMarket,lastUpdate:new Date,trend:a>0?"up":a<0?"down":"stable",icon:s.icon,category:s.category,description:s.description,fonte:n.fonte}}else t[s.key]={price:250,change:(Math.random()-.5)*10,changePercent:(Math.random()-.5)*2,unit:s.defaultUnit,market:s.defaultMarket,lastUpdate:new Date,trend:"stable",icon:s.icon,category:s.category,description:s.description,fonte:"Simulado"}}),{timestamp:new Date,prices:t,indices:{dolar:{value:5.614+(Math.random()-.5)*.05,change:(Math.random()-.5)*.03,changePercent:(Math.random()-.5)*.8,unit:"R$/USD",icon:"\uD83D\uDCB5",source:"Banco Central"},soja:{value:142+(Math.random()-.5)*15,change:(Math.random()-.5)*4,changePercent:(Math.random()-.5)*2.5,unit:"R$/saca",icon:"\uD83C\uDF31",source:"CEPEA"}},marketStatus:{session:this.getMarketSession(),lastUpdate:new Date,nextUpdate:new Date(Date.now()+9e5),dataQuality:"real-time"}}}catch(e){return console.error("Erro ao buscar pre\xe7os do mercado:",e),{timestamp:new Date,prices:{garrote:{price:0,change:0,changePercent:0,unit:"R$/arroba",market:"Mercado Regional",lastUpdate:new Date,trend:"stable",icon:"\uD83D\uDC03",category:"Recria",description:"Erro ao carregar dados",fonte:"N/A"},novilha:{price:0,change:0,changePercent:0,unit:"R$/arroba",market:"CEPEA/ESALQ",lastUpdate:new Date,trend:"stable",icon:"\uD83D\uDC2E",category:"Recria",description:"Erro ao carregar dados",fonte:"N/A"}},indices:{dolar:{value:5.614,change:0,changePercent:0,unit:"R$/USD",icon:"\uD83D\uDCB5",source:"Banco Central"},soja:{value:142,change:0,changePercent:0,unit:"R$/saca",icon:"\uD83C\uDF31",source:"CEPEA"}},marketStatus:{session:{status:"closed",label:"Erro nos dados",color:"red"},lastUpdate:new Date,nextUpdate:new Date(Date.now()+9e5),dataQuality:"error"}}}}static getMarketSession(){let e=new Date,a=e.getHours();return a>=9&&a<17?{status:"open",label:"Mercado Aberto",color:"green"}:a>=17&&a<18?{status:"closing",label:"Fechando",color:"yellow"}:{status:"closed",label:"Mercado Fechado",color:"red"}}static async updatePrice(e,a,r,t,s="Manual"){try{let n=await fetch("/api/market-prices",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({produto:e.toUpperCase(),preco:parseFloat(a),unidade:r,mercado:t,fonte:s})});if(!n.ok)throw Error("Erro ao atualizar pre\xe7o");return await n.json()}catch(e){throw console.error("Erro ao atualizar pre\xe7o:",e),e}}static async updatePrices(e){try{let a=await fetch("/api/market-prices/bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prices:e})});if(!a.ok)throw Error("Erro ao atualizar pre\xe7os");return await a.json()}catch(e){throw console.error("Erro ao atualizar pre\xe7os:",e),e}}static async getHistoricalPrices(e=30){return[]}static async getMarketNews(){return[]}static async getMarketAnalysis(){return{outlook:{short_term:"neutral",medium_term:"stable",long_term:"positive"},factors:{positive:[],negative:[]},recommendations:[],marketSentiment:{score:50,label:"Neutro",description:"Aguardando dados"}}}static async getRegionalPrices(e="SP"){return{state:e,prices:{boi_gordo:0,vaca_gorda:0,bezerro_macho:0,bezerro_femea:0},lastUpdate:new Date,marketCondition:"neutral"}}static async getPriceForecast(e=7){return{model:"Beef_Sync AI v2.0",accuracy:"0%",lastTrained:new Date,forecast:[]}}}}};