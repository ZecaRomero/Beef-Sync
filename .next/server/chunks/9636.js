"use strict";exports.id=9636,exports.ids=[9636],exports.modules={9636:(e,t,a)=>{a.d(t,{Z:()=>MaterialsManager});var r=a(997),s=a(6689),l=a(794),i=a(4491),d=a(6522),n=a(3192),c=a(4207);function AnimalProtocols({materials:e,animals:t,onUpdateMaterial:a,onCreateReminder:d}){let[n,c]=(0,s.useState)([]),[o,x]=(0,s.useState)([]),[m,g]=(0,s.useState)(null),u=[{id:"brucelose",name:"Vacina\xe7\xe3o Brucelose",description:"Vacina obrigat\xf3ria para f\xeameas",ageRange:{min:3,max:8,unit:"months"},gender:"female",materials:["vacina_brucelose"],frequency:"once",priority:"high",icon:"\uD83D\uDC89",color:"red"},{id:"brinco_identificacao",name:"Coloca\xe7\xe3o de Brinco",description:"Identifica\xe7\xe3o individual do animal",ageRange:{min:8,max:12,unit:"months"},gender:"both",materials:["brinco_auricular"],frequency:"once",priority:"high",icon:"\uD83C\uDFF7ï¸",color:"blue"},{id:"vermifugo_inicial",name:"Vermifuga\xe7\xe3o Inicial",description:"Primeira aplica\xe7\xe3o de verm\xedfugo",ageRange:{min:2,max:4,unit:"months"},gender:"both",materials:["ivermectina","vermifugo"],frequency:"once",priority:"medium",icon:"\uD83D\uDC1B",color:"green"},{id:"vermifugo_manutencao",name:"Vermifuga\xe7\xe3o de Manuten\xe7\xe3o",description:"Aplica\xe7\xe3o peri\xf3dica de verm\xedfugo",ageRange:{min:6,max:999,unit:"months"},gender:"both",materials:["ivermectina","vermifugo"],frequency:"quarterly",priority:"medium",icon:"\uD83D\uDD04",color:"yellow"},{id:"vacina_aftosa",name:"Vacina\xe7\xe3o Aftosa",description:"Vacina contra febre aftosa",ageRange:{min:4,max:999,unit:"months"},gender:"both",materials:["vacina_aftosa"],frequency:"biannual",priority:"high",icon:"\uD83E\uDDA0",color:"purple"}];(0,s.useEffect)(()=>{c(u),checkPendingActions()},[t,e]);let calculateAgeInMonths=e=>{let t=new Date(e),a=new Date;return Math.floor(Math.abs(a-t)/2630016e3)},checkPendingActions=()=>{let a=[];t?.forEach(t=>{let r=calculateAgeInMonths(t.birthDate);n.forEach(s=>{if(r>=s.ageRange.min&&r<=s.ageRange.max&&("both"===s.gender||"female"===s.gender&&"F"===t.gender||"male"===s.gender&&"M"===t.gender)){let l=t.protocols?.includes(s.id);if(!l){let l=s.materials.map(t=>e?.find(e=>e.category===t||e.name.toLowerCase().includes(t.replace("_"," ")))).filter(Boolean);a.push({id:`${t.id}-${s.id}`,animalId:t.id,animalName:t.name||`Animal ${t.id}`,animalAge:r,protocol:s,availableMaterials:l,status:l.length>0?"ready":"waiting_materials",dueDate:new Date(Date.now()+7*24*60*60*1e3),urgency:r>s.ageRange.max-1?"urgent":"normal"})}}})}),x(a)},executeProtocol=e=>{if(e.availableMaterials.forEach(e=>{e&&e.quantity>0&&a(e.id,{...e,quantity:e.quantity-1,totalValue:(e.quantity-1)*e.unitPrice})}),"once"!==e.protocol.frequency){let t=new Date;switch(e.protocol.frequency){case"quarterly":t.setMonth(t.getMonth()+3);break;case"biannual":t.setMonth(t.getMonth()+6);break;case"annual":t.setFullYear(t.getFullYear()+1)}d({title:`${e.protocol.name} - ${e.animalName}`,message:`Aplicar ${e.protocol.name} no animal ${e.animalName}`,date:t,type:"protocol",priority:e.protocol.priority})}x(t=>t.filter(t=>t.id!==e.id)),alert(`âœ… ${e.protocol.name} aplicado em ${e.animalName}!`)},getUrgencyColor=e=>{switch(e){case"urgent":return"border-red-500 bg-red-50 dark:bg-red-900/20";case"normal":return"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20";default:return"border-blue-500 bg-blue-50 dark:bg-blue-900/20"}},getStatusColor=e=>{switch(e){case"ready":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"waiting_materials":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}};return(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx(l.Zb,{className:"p-6 bg-gradient-to-r from-green-500 to-blue-600 text-white",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-bold mb-2",children:"\uD83C\uDFAF Protocolos Sanit\xe1rios Inteligentes"}),r.jsx("p",{className:"opacity-90",children:"Sistema automatizado baseado na idade dos animais"})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("div",{className:"text-3xl font-bold",children:o.length}),r.jsx("div",{className:"text-sm opacity-90",children:"A\xe7\xf5es Pendentes"})]})]})}),o.length>0&&(0,r.jsxs)(l.Zb,{className:"p-6",children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:["â° A\xe7\xf5es Pendentes (",o.length,")"]}),r.jsx("div",{className:"space-y-4",children:o.map(e=>r.jsx("div",{className:`p-4 rounded-lg border-l-4 ${getUrgencyColor(e.urgency)}`,children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"text-3xl",children:e.protocol.icon}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:e.protocol.name}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(e.status)}`,children:"ready"===e.status?"Pronto":"Aguardando Materiais"}),"urgent"===e.urgency&&r.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-medium",children:"\uD83D\uDEA8 Urgente"})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:[r.jsx("strong",{children:"Animal:"})," ",e.animalName," (",e.animalAge," meses)"]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:e.protocol.description}),(0,r.jsxs)("div",{className:"mb-3",children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Materiais necess\xe1rios:"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:e.protocol.materials.map((t,a)=>{let s=e.availableMaterials.find(e=>e?.category===t||e?.name.toLowerCase().includes(t.replace("_"," ")));return r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s&&s.quantity>0?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:s?`${s.name} (${s.quantity})`:t},a)})})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Prazo: ",e.dueDate.toLocaleDateString("pt-BR")]})]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:["ready"===e.status?r.jsx(i.z,{onClick:()=>executeProtocol(e),className:"bg-green-600 hover:bg-green-700 text-white",size:"sm",children:"âœ… Aplicar"}):r.jsx(i.z,{variant:"outline",size:"sm",className:"border-red-300 text-red-700 hover:bg-red-50",disabled:!0,children:"â³ Aguardando"}),r.jsx(i.z,{variant:"outline",size:"sm",onClick:()=>{let t=new Date;t.setDate(t.getDate()+7),d({title:`Lembrete: ${e.protocol.name}`,message:`Lembrar de aplicar ${e.protocol.name} no animal ${e.animalName}`,date:t,type:"reminder",priority:e.protocol.priority}),alert("\uD83D\uDD14 Lembrete criado para 7 dias!")},children:"\uD83D\uDD14 Lembrete"})]})]})},e.id))})]}),(0,r.jsxs)(l.Zb,{className:"p-6",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCCB Protocolos Configurados"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(e=>r.jsx("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:shadow-md transition-shadow",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"text-2xl",children:e.icon}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:e.name}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:e.description}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 space-y-1",children:[(0,r.jsxs)("div",{children:[r.jsx("strong",{children:"Idade:"})," ",e.ageRange.min,"-",e.ageRange.max," meses"]}),(0,r.jsxs)("div",{children:[r.jsx("strong",{children:"G\xeanero:"})," ","both"===e.gender?"Ambos":"female"===e.gender?"F\xeameas":"Machos"]}),(0,r.jsxs)("div",{children:[r.jsx("strong",{children:"Frequ\xeancia:"})," ","once"===e.frequency?"Uma vez":"quarterly"===e.frequency?"Trimestral":"biannual"===e.frequency?"Semestral":"Anual"]})]})]})]})},e.id))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)(l.Zb,{className:"p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:o.filter(e=>"urgent"===e.urgency).length}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Urgentes"})]}),(0,r.jsxs)(l.Zb,{className:"p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:o.filter(e=>"ready"===e.status).length}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Prontos"})]}),(0,r.jsxs)(l.Zb,{className:"p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:o.filter(e=>"waiting_materials"===e.status).length}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Aguardando"})]}),(0,r.jsxs)(l.Zb,{className:"p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:n.length}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Protocolos"})]})]})]})}function MaterialsManager({userId:e}){let[t,a]=(0,s.useState)("overview"),[o,x]=(0,s.useState)([]),[m,g]=(0,s.useState)(!1),[u,b]=(0,s.useState)(null),[h,p]=(0,s.useState)([]),[j,y]=(0,s.useState)([]),[k,f]=(0,s.useState)(null),[N,v]=(0,s.useState)(null),[w,D]=(0,s.useState)([]),[C,S]=(0,s.useState)({category:"all",supplier:"all",dateRange:"30d"});(0,s.useEffect)(()=>{let loadMaterials=async()=>{try{let e=await fetch("/api/materials");if(e.ok){let t=await e.json();x(Array.isArray(t)?t:[])}else console.error("Erro ao carregar materiais"),x([])}catch(e){console.error("Erro ao carregar materiais:",e),x([])}};loadMaterials();let loadAnimals=async()=>{try{let e=await fetch("/api/animals-list");if(e.ok){let t=await e.json();p(t)}}catch(e){console.error("Erro ao carregar animais:",e),p([])}};loadAnimals();let loadPurchaseHistory=async()=>{try{let e=await fetch("/api/purchase-history");if(e.ok){let t=await e.json();D(Array.isArray(t)?t:[])}else console.error("Erro ao carregar hist\xf3rico de compras"),D([])}catch(e){console.error("Erro ao carregar hist\xf3rico de compras:",e),D([])}};loadPurchaseHistory()},[]);let q=[{value:"all",label:"Todas as Categorias"},{value:"medicamento",label:"\uD83D\uDC8A Medicamentos"},{value:"identificacao",label:"\uD83C\uDFF7ï¸ Identifica\xe7\xe3o"},{value:"alimentacao",label:"\uD83C\uDF3E Alimenta\xe7\xe3o"},{value:"equipamento",label:"\uD83D\uDD27 Equipamentos"},{value:"insumo",label:"âš—ï¸ Insumos"},{value:"outros",label:"\uD83D\uDCE6 Outros"}],F=[{value:"all",label:"Todos os Fornecedores"},{value:"Agropecu\xe1ria Silva",label:"Agropecu\xe1ria Silva"},{value:"Vetfarma Ltda",label:"Vetfarma Ltda"},{value:"Nutri\xe7\xe3o Animal Pro",label:"Nutri\xe7\xe3o Animal Pro"}],E=o.filter(e=>("all"===C.category||e.category===C.category)&&("all"===C.supplier||e.supplier===C.supplier)),A=E.reduce((e,t)=>e+t.totalValue,0),R=o.filter(e=>e.quantity<=e.minStock),P=o.filter(e=>{if(!e.expiryDate)return!1;let t=new Date(e.expiryDate),a=new Date;return a.setDate(a.getDate()+30),t<=a}),getCategoryIcon=e=>({medicamento:"\uD83D\uDC8A",identificacao:"\uD83C\uDFF7ï¸",alimentacao:"\uD83C\uDF3E",equipamento:"\uD83D\uDD27",insumo:"âš—ï¸",outros:"\uD83D\uDCE6"})[e]||"\uD83D\uDCE6",getStatusColor=e=>{switch(e){case"active":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"low_stock":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"expired":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},handleUpdateMaterial=(e,t)=>{x(a=>a.map(a=>a.id===e?t:a))},handleCreateReminder=e=>{let t={id:Date.now(),...e,createdAt:new Date,read:!1};y(e=>[...e,t]),console.log("Novo lembrete criado:",t)},renderOverview=()=>(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6",children:[r.jsx(l.Zb,{className:"p-6 bg-white dark:bg-gray-800 border-2 border-blue-300 dark:border-blue-600 shadow-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-bold text-gray-600 dark:text-gray-300",children:"Total em Estoque"}),(0,r.jsxs)("p",{className:"text-2xl font-black text-blue-600 dark:text-blue-400",children:["R$"," ",A.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),r.jsx("div",{className:"text-4xl bg-blue-100 dark:bg-blue-900/30 p-3 rounded-lg",children:"\uD83D\uDCB0"})]})}),r.jsx(l.Zb,{className:"p-6 bg-green-100 dark:bg-green-900/30 border-2 border-green-300 dark:border-green-600",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-bold text-green-800 dark:text-green-200",children:"Itens Ativos"}),r.jsx("p",{className:"text-2xl font-black text-green-900 dark:text-green-100",children:o.length})]}),r.jsx("div",{className:"text-4xl",children:"\uD83D\uDCE6"})]})}),r.jsx(l.Zb,{className:"p-6 bg-yellow-100 dark:bg-yellow-900/30 border-2 border-yellow-300 dark:border-yellow-600",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-bold text-yellow-800 dark:text-yellow-200",children:"Estoque Baixo"}),r.jsx("p",{className:"text-2xl font-black text-yellow-900 dark:text-yellow-100",children:R.length})]}),r.jsx("div",{className:"text-4xl",children:"âš ï¸"})]})}),r.jsx(l.Zb,{className:"p-6 bg-red-100 dark:bg-red-900/30 border-2 border-red-300 dark:border-red-600",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-bold text-red-800 dark:text-red-200",children:"Vencendo"}),r.jsx("p",{className:"text-2xl font-black text-red-900 dark:text-red-100",children:P.length})]}),r.jsx("div",{className:"text-4xl",children:"â°"})]})})]}),(0,r.jsxs)(l.Zb,{className:"p-6 border-2 border-gray-300 dark:border-gray-600",children:[r.jsx("h3",{className:"text-xl font-black text-black dark:text-white mb-6",children:"\uD83C\uDFAF Protocolos Inteligentes"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"text-center p-6 bg-white dark:bg-gray-800 rounded-lg border-2 border-blue-400 dark:border-blue-600 shadow-lg",children:[r.jsx("div",{className:"text-4xl mb-3 bg-blue-100 dark:bg-blue-900/30 p-3 rounded-lg inline-block",children:"\uD83D\uDC89"}),r.jsx("div",{className:"text-2xl font-black text-blue-600 dark:text-blue-400",children:h?.filter(e=>{let t=Math.floor((new Date-new Date(e.birthDate))/(1e3*60*60*24*30.44));return"F"===e.gender&&t>=3&&t<=8&&!e.protocols?.includes("brucelose")}).length||0}),r.jsx("div",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:"Vacina\xe7\xe3o Brucelose"})]}),(0,r.jsxs)("div",{className:"text-center p-6 bg-green-200 dark:bg-green-800/50 rounded-lg border-2 border-green-400 dark:border-green-600",children:[r.jsx("div",{className:"text-4xl mb-3",children:"\uD83C\uDFF7ï¸"}),r.jsx("div",{className:"text-2xl font-black text-green-900 dark:text-green-100",children:h?.filter(e=>{let t=Math.floor((new Date-new Date(e.birthDate))/(1e3*60*60*24*30.44));return t>=8&&t<=12&&!e.protocols?.includes("brinco")}).length||0}),r.jsx("div",{className:"text-sm font-bold text-green-800 dark:text-green-200",children:"Coloca\xe7\xe3o de Brinco"})]}),(0,r.jsxs)("div",{className:"text-center p-6 bg-purple-200 dark:bg-purple-800/50 rounded-lg border-2 border-purple-400 dark:border-purple-600",children:[r.jsx("div",{className:"text-4xl mb-3",children:"\uD83D\uDC1B"}),r.jsx("div",{className:"text-2xl font-black text-purple-900 dark:text-purple-100",children:h?.filter(e=>{let t=Math.floor((new Date-new Date(e.birthDate))/(1e3*60*60*24*30.44));return t>=2&&t<=4&&!e.protocols?.includes("vermifugo")}).length||0}),r.jsx("div",{className:"text-sm font-bold text-purple-800 dark:text-purple-200",children:"Vermifuga\xe7\xe3o"})]})]}),r.jsx("div",{className:"mt-4 text-center",children:r.jsx(i.z,{onClick:()=>a("protocols"),className:"bg-blue-600 hover:bg-blue-700",children:"Ver Todos os Protocolos"})})]})]}),renderProtocols=()=>r.jsx(AnimalProtocols,{materials:o,animals:h,onUpdateMaterial:handleUpdateMaterial,onCreateReminder:handleCreateReminder}),renderReminders=()=>(0,r.jsxs)("div",{className:"p-6 text-center text-gray-500",children:[r.jsx("div",{className:"text-4xl mb-4",children:"\uD83E\uDDE0"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Lembretes Inteligentes"}),r.jsx("p",{children:"Funcionalidade em desenvolvimento"})]}),renderInventory=()=>(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx(n.Ph,{value:C.category,onValueChange:e=>S({...C,category:e}),className:"w-full sm:w-48",children:q.map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))}),r.jsx(n.Ph,{value:C.supplier,onValueChange:e=>S({...C,supplier:e}),className:"w-full sm:w-48",children:F.map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(i.z,{onClick:()=>g(!0),className:"bg-blue-600 hover:bg-blue-700",children:"âž• Novo Item"}),r.jsx(i.z,{variant:"outline",children:"\uD83D\uDCE4 Exportar"})]})]}),r.jsx(l.Zb,{className:"overflow-hidden border-2 border-gray-300 dark:border-gray-600",children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-200 dark:bg-gray-700",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-left text-sm font-black text-gray-900 dark:text-gray-100 uppercase tracking-wider",children:"Item"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-black text-gray-900 dark:text-gray-100 uppercase tracking-wider",children:"Categoria"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-black text-gray-900 dark:text-gray-100 uppercase tracking-wider",children:"Estoque"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-black text-gray-900 dark:text-gray-100 uppercase tracking-wider",children:"Valor Unit."}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-black text-gray-900 dark:text-gray-100 uppercase tracking-wider",children:"Valor Total"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-black text-gray-900 dark:text-gray-100 uppercase tracking-wider",children:"Fornecedor"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-black text-gray-900 dark:text-gray-100 uppercase tracking-wider",children:"Lote"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-black text-gray-900 dark:text-gray-100 uppercase tracking-wider",children:"Vencimento"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-black text-gray-900 dark:text-gray-100 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-4 text-left text-sm font-black text-gray-900 dark:text-gray-100 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),r.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:E.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-2xl mr-3",children:getCategoryIcon(e.category)}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm font-bold text-black dark:text-white",children:e.name}),r.jsx("div",{className:"text-sm font-bold text-gray-800 dark:text-gray-200",children:e.location})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-blue-600 text-white dark:bg-blue-500 dark:text-white",children:q.find(t=>t.value===e.category)?.label.replace(/.*\s/,"")||e.category})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsxs)("div",{className:"text-sm font-bold text-black dark:text-white",children:[e.quantity," ",e.unit]}),(0,r.jsxs)("div",{className:"text-xs font-bold text-gray-800 dark:text-gray-200",children:["M\xedn: ",e.minStock," ",e.unit]})]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-black dark:text-white",children:["R$ ",e.unitPrice.toFixed(2)]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-black text-black dark:text-white",children:["R$"," ",e.totalValue.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-black dark:text-white",children:e.supplier}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-black dark:text-white",children:e.batchNumber}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-black dark:text-white",children:e.expiryDate?new Date(e.expiryDate).toLocaleDateString("pt-BR"):"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusColor(e.status)}`,children:"active"===e.status?"Ativo":e.status})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>b(e),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Editar",children:"âœï¸"}),r.jsx("button",{className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Usar Material",children:"\uD83D\uDCCA"}),r.jsx("button",{className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Excluir",children:"\uD83D\uDDD1ï¸"})]})})]},e.id))})]})})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)(l.Zb,{className:"p-4 text-center bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 shadow-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:o.length}),r.jsx("div",{className:"text-sm text-black dark:text-white",children:"Total de Itens"})]}),(0,r.jsxs)(l.Zb,{className:"p-4 text-center",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:["R$"," ",A.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),r.jsx("div",{className:"text-sm text-black dark:text-white",children:"Valor Total"})]}),(0,r.jsxs)(l.Zb,{className:"p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:R.length}),r.jsx("div",{className:"text-sm text-black dark:text-white",children:"Estoque Baixo"})]}),(0,r.jsxs)(l.Zb,{className:"p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:P.length}),r.jsx("div",{className:"text-sm text-black dark:text-white",children:"Vencendo"})]})]})]}),renderPurchases=()=>{let e=o.filter(e=>e.quantity<=e.minStock),getStatusColor=e=>{switch(e){case"entregue":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"pendente":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"cancelado":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},getStatusLabel=e=>{switch(e){case"entregue":return"âœ… Entregue";case"pendente":return"â³ Pendente";case"cancelado":return"âŒ Cancelado";default:return e}};return(0,r.jsxs)("div",{className:"space-y-6",children:[e.length>0&&(0,r.jsxs)(l.Zb,{className:"p-6 border-2 border-red-300 dark:border-red-600 bg-red-50 dark:bg-red-900/20",children:[r.jsx("h3",{className:"text-xl font-black text-red-900 dark:text-red-100 mb-4 flex items-center",children:"\uD83D\uDEA8 Itens com Estoque Baixo - Necess\xe1rio Comprar"}),r.jsx("div",{className:"space-y-4",children:e.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 rounded-lg border-2 border-red-200 dark:border-red-700",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("span",{className:"text-3xl",children:getCategoryIcon(e.category)}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-black text-black dark:text-white text-lg",children:e.name}),(0,r.jsxs)("p",{className:"text-sm font-bold text-red-700 dark:text-red-300",children:["Estoque atual:"," ",(0,r.jsxs)("span",{className:"font-black",children:[e.quantity," ",e.unit]})," ","| M\xednimo:"," ",(0,r.jsxs)("span",{className:"font-black",children:[e.minStock," ",e.unit]})]}),(0,r.jsxs)("p",{className:"text-sm font-semibold text-black dark:text-white",children:["Fornecedor: ",e.supplier," | \xdaltimo pre\xe7o: R$"," ",e.unitPrice.toFixed(2)]})]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx(i.z,{className:"bg-red-600 hover:bg-red-700 text-white font-bold",onClick:()=>{let t=Math.max(2*e.minStock-e.quantity,e.minStock);alert(`ðŸ›’ Sugest\xe3o de Compra:

Item: ${e.name}
Quantidade sugerida: ${t} ${e.unit}
Fornecedor: ${e.supplier}
Valor estimado: R$ ${(t*e.unitPrice).toFixed(2)}`)},children:"\uD83D\uDED2 Comprar Agora"}),r.jsx(i.z,{variant:"outline",className:"border-red-300 text-red-700 hover:bg-red-50 font-bold",onClick:()=>{alert(`ðŸ“ž Contato do Fornecedor:

${e.supplier}
Telefone: (11) 9999-9999
Email: vendas@${e.supplier.toLowerCase().replace(/\s+/g,"")}.com.br`)},children:"\uD83D\uDCDE Contatar"})]})]},e.id))}),(0,r.jsxs)("div",{className:"mt-6 p-4 bg-yellow-100 dark:bg-yellow-900/20 rounded-lg border-2 border-yellow-300 dark:border-yellow-600",children:[r.jsx("h4",{className:"font-black text-yellow-900 dark:text-yellow-100 mb-2",children:"\uD83D\uDCA1 Sugest\xe3o Inteligente"}),(0,r.jsxs)("p",{className:"text-sm font-bold text-yellow-800 dark:text-yellow-200",children:["Valor total estimado para reposi\xe7\xe3o:"," ",(0,r.jsxs)("span",{className:"font-black",children:["R$"," ",e.reduce((e,t)=>{let a=Math.max(2*t.minStock-t.quantity,t.minStock);return e+a*t.unitPrice},0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})]}),(0,r.jsxs)(l.Zb,{className:"p-6 border-2 border-gray-300 dark:border-gray-600",children:[r.jsx("h3",{className:"text-xl font-black text-black dark:text-white mb-6",children:"\uD83D\uDCCB Hist\xf3rico de Compras"}),r.jsx("div",{className:"space-y-4",children:w.map(e=>(0,r.jsxs)("div",{className:"p-4 border-2 border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h4",{className:"font-black text-black dark:text-white",children:["Compra #",e.id," -"," ",new Date(e.date).toLocaleDateString("pt-BR")]}),(0,r.jsxs)("p",{className:"text-sm font-bold text-black dark:text-white",children:["Fornecedor: ",e.supplier]})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-bold ${getStatusColor(e.status)}`,children:getStatusLabel(e.status)}),(0,r.jsxs)("p",{className:"text-lg font-black text-black dark:text-white mt-1",children:["R$"," ",e.totalValue.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),r.jsx("div",{className:"space-y-2",children:e.items.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-gray-700 rounded border",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"text-2xl",children:"\uD83D\uDCE6"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-bold text-black dark:text-white",children:e.name}),(0,r.jsxs)("p",{className:"text-sm font-semibold text-black dark:text-white",children:[e.quantity," unidades \xd7 R$"," ",e.unitPrice.toFixed(2)]})]})]}),(0,r.jsxs)("p",{className:"font-black text-black dark:text-white",children:["R$"," ",e.total.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]},t))})]},e.id))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)(l.Zb,{className:"p-4 text-center border-2 border-blue-300 dark:border-blue-600 bg-white dark:bg-gray-800 shadow-lg",children:[r.jsx("div",{className:"text-2xl font-black text-blue-600 dark:text-blue-400",children:w.length}),r.jsx("div",{className:"text-sm font-bold text-black dark:text-white",children:"Total de Compras"})]}),(0,r.jsxs)(l.Zb,{className:"p-4 text-center border-2 border-green-300 dark:border-green-600",children:[(0,r.jsxs)("div",{className:"text-2xl font-black text-green-600 dark:text-green-400",children:["R$"," ",w.reduce((e,t)=>e+t.totalValue,0).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),r.jsx("div",{className:"text-sm font-bold text-black dark:text-white",children:"Valor Total Gasto"})]}),(0,r.jsxs)(l.Zb,{className:"p-4 text-center border-2 border-red-300 dark:border-red-600",children:[r.jsx("div",{className:"text-2xl font-black text-red-600 dark:text-red-400",children:e.length}),r.jsx("div",{className:"text-sm font-bold text-black dark:text-white",children:"Itens p/ Comprar"})]}),(0,r.jsxs)(l.Zb,{className:"p-4 text-center border-2 border-purple-300 dark:border-purple-600",children:[r.jsx("div",{className:"text-2xl font-black text-purple-600 dark:text-purple-400",children:new Set(w.map(e=>e.supplier)).size}),r.jsx("div",{className:"text-sm font-bold text-black dark:text-white",children:"Fornecedores"})]})]})]})},showCategoryItems=e=>{let t=o.filter(t=>t.category===e.value);f({...e,items:t})},showSupplierItems=e=>{let t=o.filter(t=>t.supplier===e.value);v({...e,items:t})},renderReports=()=>(0,r.jsxs)("div",{className:"space-y-6",children:[k&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h2",{className:"text-2xl font-black text-black dark:text-white",children:[k.label," - ",k.items.length," ","itens"]}),r.jsx(i.z,{onClick:()=>f(null),variant:"outline",className:"text-gray-500 hover:text-gray-700",children:"âœ• Fechar"})]})}),r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:k.items.map(e=>(0,r.jsxs)(l.Zb,{className:"p-3 sm:p-4 md:p-6 border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 sm:space-x-4 mb-3 sm:mb-4",children:[r.jsx("div",{className:"bg-blue-600 p-2 sm:p-3 rounded-lg flex-shrink-0",children:r.jsx("span",{className:"text-2xl sm:text-3xl text-white",children:getCategoryIcon(e.category)})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-black text-gray-900 dark:text-white text-base sm:text-lg",children:e.name}),r.jsx("p",{className:"text-xs sm:text-sm font-bold text-gray-600 dark:text-gray-300",children:e.location})]})]}),(0,r.jsxs)("div",{className:"space-y-3 text-sm",children:[r.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:"Estoque:"}),(0,r.jsxs)("span",{className:"font-black text-blue-700 dark:text-blue-300 text-lg",children:[e.quantity," ",e.unit]})]})}),r.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:"Valor Unit:"}),(0,r.jsxs)("span",{className:"font-black text-gray-900 dark:text-white text-lg",children:["R$ ",e.unitPrice.toFixed(2)]})]})}),r.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:"Valor Total:"}),(0,r.jsxs)("span",{className:"font-black text-green-700 dark:text-green-300 text-lg",children:["R$"," ",e.totalValue.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})}),r.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:"Lote:"}),r.jsx("span",{className:"font-black text-gray-900 dark:text-white",children:e.batchNumber})]})}),r.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:"Fornecedor:"}),r.jsx("span",{className:"font-black text-gray-900 dark:text-white",children:e.supplier})]})}),e.expiryDate&&r.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:"Vencimento:"}),r.jsx("span",{className:"font-black text-red-700 dark:text-red-300 text-lg",children:new Date(e.expiryDate).toLocaleDateString("pt-BR")})]})})]})]},e.id))})})]})}),N&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h2",{className:"text-2xl font-black text-black dark:text-white",children:[N.label," - ",N.items.length," ","itens"]}),r.jsx(i.z,{onClick:()=>v(null),variant:"outline",className:"text-gray-500 hover:text-gray-700",children:"âœ• Fechar"})]})}),r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:N.items.map(e=>(0,r.jsxs)(l.Zb,{className:"p-6 border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[r.jsx("div",{className:"bg-blue-600 p-3 rounded-lg",children:r.jsx("span",{className:"text-3xl text-white",children:getCategoryIcon(e.category)})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-black text-gray-900 dark:text-white text-lg",children:e.name}),r.jsx("p",{className:"text-sm font-bold text-gray-600 dark:text-gray-300",children:e.location})]})]}),(0,r.jsxs)("div",{className:"space-y-3 text-sm",children:[r.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:"Categoria:"}),r.jsx("span",{className:"font-black text-gray-900 dark:text-white",children:q.find(t=>t.value===e.category)?.label.replace(/.*\s/,"")||e.category})]})}),r.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:"Estoque:"}),(0,r.jsxs)("span",{className:"font-black text-blue-700 dark:text-blue-300 text-lg",children:[e.quantity," ",e.unit]})]})}),r.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:"Valor Total:"}),(0,r.jsxs)("span",{className:"font-black text-green-700 dark:text-green-300 text-lg",children:["R$"," ",e.totalValue.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})}),r.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-bold text-gray-900 dark:text-white",children:"Lote:"}),r.jsx("span",{className:"font-black text-gray-900 dark:text-white",children:e.batchNumber})]})})]})]},e.id))})})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-6",children:[(0,r.jsxs)(l.Zb,{className:"p-6 border-2 border-gray-300 dark:border-gray-600",children:[r.jsx("h3",{className:"text-xl font-black text-black dark:text-white mb-6",children:"\uD83D\uDCCA Relat\xf3rio por Categoria"}),r.jsx("div",{className:"space-y-3",children:q.slice(1).map(e=>{let t=o.filter(t=>t.category===e.value),a=t.reduce((e,t)=>e+t.totalValue,0);return(0,r.jsxs)("button",{onClick:()=>showCategoryItems(e),className:"w-full flex items-center justify-between p-4 rounded-lg border-2 border-gray-400 bg-gray-900 dark:bg-gray-900 hover:border-blue-400 hover:bg-blue-900 transition-all cursor-pointer shadow-lg hover:shadow-xl",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"text-3xl",children:getCategoryIcon(e.value)}),(0,r.jsxs)("div",{className:"text-left",children:[r.jsx("span",{className:"font-black text-white block text-xl drop-shadow-lg",children:e.label.replace(/.*\s/,"")}),(0,r.jsxs)("span",{className:"text-base font-bold text-gray-200 drop-shadow-lg",children:[t.length," itens"]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("span",{className:"font-black text-green-400 block text-xl drop-shadow-lg",children:["R$"," ",a.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-base font-bold text-yellow-300 drop-shadow-lg",children:"\uD83D\uDC46 Clique para ver"})]})]},e.value)})})]}),(0,r.jsxs)(l.Zb,{className:"p-6 border-2 border-gray-300 dark:border-gray-600",children:[r.jsx("h3",{className:"text-xl font-black text-black dark:text-white mb-6",children:"\uD83C\uDFEA Relat\xf3rio por Fornecedor"}),r.jsx("div",{className:"space-y-3",children:F.slice(1).map(e=>{let t=o.filter(t=>t.supplier===e.value),a=t.reduce((e,t)=>e+t.totalValue,0);return(0,r.jsxs)("button",{onClick:()=>showSupplierItems(e),className:"w-full flex items-center justify-between p-4 rounded-lg border-2 border-gray-400 bg-gray-900 dark:bg-gray-900 hover:border-green-400 hover:bg-green-900 transition-all cursor-pointer shadow-lg hover:shadow-xl",children:[(0,r.jsxs)("div",{className:"text-left",children:[r.jsx("span",{className:"font-black text-white block text-xl drop-shadow-lg",children:e.label}),(0,r.jsxs)("span",{className:"text-base font-bold text-gray-200 drop-shadow-lg",children:[t.length," itens"]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("span",{className:"font-black text-green-400 block text-xl drop-shadow-lg",children:["R$"," ",a.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),r.jsx("span",{className:"text-base font-bold text-yellow-300 drop-shadow-lg",children:"\uD83D\uDC46 Clique para ver"})]})]},e.value)})})]}),(0,r.jsxs)(l.Zb,{className:"p-6 border-2 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800",children:[r.jsx("div",{className:"bg-blue-600 text-white p-4 rounded-lg mb-6 text-center",children:r.jsx("h3",{className:"text-xl font-black mb-2",children:"\uD83D\uDCC8 Resumo Mensal"})}),(0,r.jsxs)("div",{className:"text-center py-4",children:[(0,r.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 p-6 rounded-lg mb-6",children:[(0,r.jsxs)("div",{className:"text-4xl font-black text-green-700 dark:text-green-300 mb-2",children:["R$"," ",A.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),r.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Valor total em estoque"})]}),(0,r.jsxs)("div",{className:"space-y-3 text-sm",children:[r.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-bold text-gray-900 dark:text-white text-base",children:"\uD83D\uDC8A Medicamentos:"}),r.jsx("span",{className:"font-black text-red-700 dark:text-red-300 text-xl",children:o.filter(e=>"medicamento"===e.category).length})]})}),r.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-bold text-gray-900 dark:text-white text-base",children:"\uD83C\uDFF7ï¸ Identifica\xe7\xe3o:"}),r.jsx("span",{className:"font-black text-blue-700 dark:text-blue-300 text-xl",children:o.filter(e=>"identificacao"===e.category).length})]})}),r.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"font-bold text-gray-900 dark:text-white text-base",children:"\uD83C\uDF3E Alimenta\xe7\xe3o:"}),r.jsx("span",{className:"font-black text-green-700 dark:text-green-300 text-xl",children:o.filter(e=>"alimentacao"===e.category).length})]})})]})]})]})]})]});return(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-700 rounded-3xl p-8 text-white",children:(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-4xl font-bold mb-3 flex items-center",children:"\uD83D\uDCE6 Gest\xe3o de Materiais & Custos"}),r.jsx("p",{className:"text-lg opacity-90",children:"Controle completo de estoque, medicamentos e custos operacionais"})]}),r.jsx("div",{className:"mt-6 lg:mt-0",children:r.jsx(i.z,{onClick:()=>g(!0),className:"border-l-indigo-500 text-purple-600 hover:bg-emerald-700 font-semibold px-6 py-3",children:"âž• Adicionar Item"})})]})}),(0,r.jsxs)("div",{className:"bg-slate-500 dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"border-b border-red-200 dark:border-gray-700",children:r.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"overview",label:"\uD83D\uDCCA Vis\xe3o Geral",icon:"\uD83D\uDCCA"},{id:"protocols",label:"\uD83C\uDFAF Protocolos",icon:"\uD83C\uDFAF"},{id:"reminders",label:"\uD83E\uDDE0 Lembretes",icon:"\uD83E\uDDE0"},{id:"inventory",label:"\uD83D\uDCE6 Estoque",icon:"\uD83D\uDCE6"},{id:"purchases",label:"\uD83D\uDED2 Compras",icon:"\uD83D\uDED2"},{id:"reports",label:"\uD83D\uDCC8 Relat\xf3rios",icon:"\uD83D\uDCC8"}].map(e=>r.jsx("button",{onClick:()=>a(e.id),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${t===e.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:e.label},e.id))})}),r.jsx("div",{className:"p-6",children:(()=>{switch(t){case"overview":default:return renderOverview();case"protocols":return renderProtocols();case"reminders":return renderReminders();case"inventory":return renderInventory();case"purchases":return renderPurchases();case"reports":return renderReports()}})()})]}),r.jsx(()=>{let[e,t]=(0,s.useState)({name:"",category:"medicamento",quantity:"",unit:"unidade",unitPrice:"",supplier:"",purchaseDate:"",expiryDate:"",batchNumber:"",location:"",minStock:"",notes:""});return((0,s.useEffect)(()=>{u&&t({name:u.name,category:u.category,quantity:u.quantity.toString(),unit:u.unit,unitPrice:u.unitPrice.toString(),supplier:u.supplier,purchaseDate:u.purchaseDate,expiryDate:u.expiryDate||"",batchNumber:u.batchNumber,location:u.location,minStock:u.minStock.toString(),notes:u.notes||""})},[u]),m||u)?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:r.jsx("h2",{className:"text-2xl font-bold text-black dark:text-white",children:u?"âœï¸ Editar Material":"âž• Adicionar Material"})}),(0,r.jsxs)("form",{onSubmit:a=>{a.preventDefault();let r={id:u?u.id:Date.now(),name:e.name,category:e.category,quantity:parseInt(e.quantity),unit:e.unit,unitPrice:parseFloat(e.unitPrice),totalValue:parseInt(e.quantity)*parseFloat(e.unitPrice),supplier:e.supplier,purchaseDate:e.purchaseDate,expiryDate:e.expiryDate||null,batchNumber:e.batchNumber,location:e.location,minStock:parseInt(e.minStock),status:"active",notes:e.notes};u?x(e=>e.map(e=>e.id===u.id?r:e)):x(e=>[...e,r]),g(!1),b(null),t({name:"",category:"medicamento",quantity:"",unit:"unidade",unitPrice:"",supplier:"",purchaseDate:"",expiryDate:"",batchNumber:"",location:"",minStock:"",notes:""})},className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 md:gap-6",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black dark:text-white mb-2",children:"Nome do Material *"}),r.jsx(d.I,{type:"text",value:e.name,onChange:a=>t({...e,name:a.target.value}),placeholder:"Ex: Brinco Auricular Numerado",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black dark:text-white mb-2",children:"Categoria *"}),r.jsx("select",{value:e.category,onChange:a=>t({...e,category:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0,children:q.slice(1).map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black dark:text-white mb-2",children:"Quantidade *"}),r.jsx(d.I,{type:"number",value:e.quantity,onChange:a=>t({...e,quantity:a.target.value}),placeholder:"Ex: 500",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black dark:text-white mb-2",children:"Unidade *"}),r.jsx("select",{value:e.unit,onChange:a=>t({...e,unit:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0,children:[{value:"unidade",label:"Unidade"},{value:"frasco",label:"Frasco"},{value:"saco",label:"Saco"},{value:"kg",label:"Quilograma"},{value:"litro",label:"Litro"},{value:"ml",label:"Mililitro"},{value:"caixa",label:"Caixa"},{value:"pacote",label:"Pacote"},{value:"dose",label:"Dose"}].map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black dark:text-white mb-2",children:"Valor Unit\xe1rio (R$) *"}),r.jsx(d.I,{type:"number",step:"0.01",value:e.unitPrice,onChange:a=>t({...e,unitPrice:a.target.value}),placeholder:"Ex: 2.50",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black dark:text-white mb-2",children:"Fornecedor *"}),r.jsx(d.I,{type:"text",value:e.supplier,onChange:a=>t({...e,supplier:a.target.value}),placeholder:"Ex: Agropecu\xe1ria Silva",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black dark:text-white mb-2",children:"Data da Compra *"}),r.jsx(d.I,{type:"date",value:e.purchaseDate,onChange:a=>t({...e,purchaseDate:a.target.value}),required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black dark:text-white mb-2",children:"Data de Vencimento"}),r.jsx(d.I,{type:"date",value:e.expiryDate,onChange:a=>t({...e,expiryDate:a.target.value})})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black dark:text-white mb-2",children:"N\xfamero do Lote *"}),r.jsx(d.I,{type:"text",value:e.batchNumber,onChange:a=>t({...e,batchNumber:a.target.value}),placeholder:"Ex: BR2024001",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black dark:text-white mb-2",children:"Localiza\xe7\xe3o *"}),r.jsx(d.I,{type:"text",value:e.location,onChange:a=>t({...e,location:a.target.value}),placeholder:"Ex: Estoque Principal",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black dark:text-white mb-2",children:"Estoque M\xednimo *"}),r.jsx(d.I,{type:"number",value:e.minStock,onChange:a=>t({...e,minStock:a.target.value}),placeholder:"Ex: 100",required:!0})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-black dark:text-white mb-2",children:"Observa\xe7\xf5es"}),r.jsx(c.g,{value:e.notes,onChange:a=>t({...e,notes:a.target.value}),placeholder:"Informa\xe7\xf5es adicionais sobre o material...",rows:3})]}),e.quantity&&e.unitPrice&&r.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Valor Total:"}),(0,r.jsxs)("span",{className:"text-lg font-bold text-blue-900 dark:text-blue-100",children:["R$"," ",(parseFloat(e.quantity||0)*parseFloat(e.unitPrice||0)).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[r.jsx(i.z,{type:"button",variant:"outline",onClick:()=>{g(!1),b(null)},children:"Cancelar"}),(0,r.jsxs)(i.z,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:[u?"Atualizar":"Adicionar"," Material"]})]})]})]})}):null},{})]})}}};