"use strict";(()=>{var e={};e.id=2394,e.ids=[2394,2888,660],e.modules={8868:(e,a,t)=>{t.r(a),t.d(a,{config:()=>J,default:()=>P,getServerSideProps:()=>B,getStaticPaths:()=>O,getStaticProps:()=>V,reportWebVitals:()=>L,routeModule:()=>Y,unstable_getServerProps:()=>z,unstable_getServerSideProps:()=>_,unstable_getStaticParams:()=>q,unstable_getStaticPaths:()=>G,unstable_getStaticProps:()=>Z});var s={};t.r(s),t.d(s,{default:()=>Animals});var r=t(7093),l=t(5244),i=t(1323),o=t(9209),d=t.n(o),n=t(9470),c=t(997),x=t(6689),m=t(1163),g=t(7787),u=t(36),h=t(9927),p=t(50),b=t(6244);function AnimalImporter({isOpen:e,onClose:a,onImport:t}){let[s,r]=(0,x.useState)(""),[l,i]=(0,x.useState)(null),[o,d]=(0,x.useState)(!1),[n,m]=(0,x.useState)("excel"),g=`Serie,RG,Lote,LOCAL,PESO,CE,Sexo,iABC7,DECA,MGTe,TOP,NASC,Meses,Nome do Pai,Av\xf4 Materno
CJCJ,15628,22,3,913,42,M,24.62,1,22.1,8,09/08/23,24,REM HERMOSO FIV GEN,B2887 DA S.NICE
CJCJ,15562,34,3,830,41,M,24.96,1,19.2,14,03/07/23,25,MAIAIO DA S.NICE,CJ SANT ANNA POI 7687`,calcularIdade=e=>{let a=new Date(e),t=new Date;return Math.ceil(Math.abs(t-a)/2630016e3)},convertDateToISO=e=>{if(!e)return null;let a=e.toString().trim();if(a.match(/^\d{4}-\d{2}-\d{2}$/))return a;let t=a.split("/");if(3===t.length){let[a,s,r]=t.map(e=>e.trim());if(2===r.length){let e=new Date().getFullYear(),a=100*Math.floor(e/100),t=parseInt(r);r=t>e%100+10?(a-100+t).toString():(a+t).toString()}let l=parseInt(a),i=parseInt(s),o=parseInt(r);if(isNaN(l)||isNaN(i)||isNaN(o))throw Error(`Formato de data inv\xe1lido: ${e}`);if(l<1||l>31||i<1||i>12)throw Error(`Data inv\xe1lida: ${e}`);return`${r}-${s.padStart(2,"0")}-${a.padStart(2,"0")}`}throw Error(`Formato de data inv\xe1lido: ${e}`)},downloadTemplate=()=>{let e=new Blob([g],{type:"text/csv"}),a=window.URL.createObjectURL(e),t=document.createElement("a");t.href=a,t.download="template_importacao_cjcj.csv",t.click(),window.URL.revokeObjectURL(a)};return e?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-3",children:[c.jsx(h.Z,{className:"h-8 w-8 text-blue-600"}),(0,c.jsxs)("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Importar Animais CJCJ"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Importe m\xfaltiplos animais CJCJ de uma vez"})]})]}),c.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl font-bold",children:"\xd7"})]}),(0,c.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[(0,c.jsxs)("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Escolha o M\xe9todo de Importa\xe7\xe3o"}),(0,c.jsxs)("div",{className:"flex space-x-4",children:[(0,c.jsxs)("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",value:"excel",checked:"excel"===n,onChange:e=>m(e.target.value),className:"mr-2"}),c.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"\uD83D\uDCCA Excel/Planilha (Recomendado)"})]}),(0,c.jsxs)("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",value:"csv",checked:"csv"===n,onChange:e=>m(e.target.value),className:"mr-2"}),c.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"CSV"})]}),(0,c.jsxs)("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",value:"manual",checked:"manual"===n,onChange:e=>m(e.target.value),className:"mr-2"}),c.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Manual"})]})]})]}),(0,c.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[c.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-200 mb-2",children:"\uD83D\uDCCB Instru\xe7\xf5es de Importa\xe7\xe3o"}),"excel"===n?(0,c.jsxs)("div",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-300",children:[(0,c.jsxs)("p",{children:[c.jsx("strong",{children:"\uD83D\uDCCA Formato Excel:"})," Cole os dados diretamente do Excel (com TAB ou v\xedrgulas)"]}),(0,c.jsxs)("p",{children:[c.jsx("strong",{children:"Colunas esperadas:"})," Serie, RG, Lote, LOCAL, PESO, CE, Sexo, iABC7, DECA, MGTe, TOP, NASC, Meses, Nome do Pai, Av\xf4 Materno"]}),(0,c.jsxs)("p",{children:[c.jsx("strong",{children:"Exemplo:"})," CJCJ 15628 22 3 913 42 M 24,62 1 22,1 8 09/08/23 24 REM HERMOSO FIV GEN B2887 DA S.NICE"]}),(0,c.jsxs)("p",{children:[c.jsx("strong",{children:"\uD83D\uDCA1 Dica:"})," Selecione as linhas no Excel e cole aqui (Ctrl+C → Ctrl+V)"]}),c.jsx("button",{onClick:downloadTemplate,className:"mt-2 px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"\uD83D\uDCE5 Baixar Template Excel"})]}):"csv"===n?(0,c.jsxs)("div",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-300",children:[(0,c.jsxs)("p",{children:[c.jsx("strong",{children:"Formato CSV:"})," Use v\xedrgulas para separar os campos"]}),(0,c.jsxs)("p",{children:[c.jsx("strong",{children:"Cabe\xe7alho:"})," ","Serie,RG,Nascimento,Pai,AvoMaterno,Sexo"]}),(0,c.jsxs)("p",{children:[c.jsx("strong",{children:"Exemplo:"})," CJCJ,123456,2022-01-15,CJCJ 100001,CJCJ 100002,Macho"]}),c.jsx("button",{onClick:downloadTemplate,className:"mt-2 px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"\uD83D\uDCE5 Baixar Template CSV"})]}):(0,c.jsxs)("div",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-300",children:[(0,c.jsxs)("p",{children:[c.jsx("strong",{children:"Formato Manual:"})," Use | (pipe) para separar os campos"]}),(0,c.jsxs)("p",{children:[c.jsx("strong",{children:"Ordem:"})," ","Serie|RG|Nascimento|Pai|AvoMaterno|Sexo"]}),(0,c.jsxs)("p",{children:[c.jsx("strong",{children:"Exemplo:"})," CJCJ|123456|2022-01-15|CJCJ 100001|CJCJ 100002|Macho"]}),c.jsx("p",{children:c.jsx("strong",{children:"Uma linha por animal"})})]}),(0,c.jsxs)("div",{className:"mt-3 text-sm text-blue-800 dark:text-blue-300",children:[(0,c.jsxs)("p",{children:[c.jsx("strong",{children:"\uD83D\uDCC5 Data:"})," Use formato YYYY-MM-DD (ex: 2022-01-15)"]}),(0,c.jsxs)("p",{children:[c.jsx("strong",{children:"\uD83D\uDC65 Sexo:"})," Macho, Femea ou F\xeamea"]}),(0,c.jsxs)("p",{children:[c.jsx("strong",{children:"\uD83E\uDDEC Autom\xe1tico:"})," DNA Paternidade (R$ 40) + Gen\xf4mica (R$ 80) ser\xe3o adicionados"]})]})]}),(0,c.jsxs)("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"excel"===n?"\uD83D\uDCCA Cole os dados do Excel aqui (Ctrl+C → Ctrl+V):":"csv"===n?"Cole os dados CSV aqui:":"Digite os dados (uma linha por animal):"}),c.jsx("textarea",{value:s,onChange:e=>r(e.target.value),rows:8,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm",placeholder:"excel"===n?"CJCJ	15628	22	3	913	42	M	24,62	1	22,1	8	09/08/23	24	REM HERMOSO FIV GEN	B2887 DA S.NICE\nCJCJ	15562	34	3	830	41	M	24,96	1	19,2	14	03/07/23	25	MAIAIO DA S.NICE	CJ SANT ANNA POI 7687":"csv"===n?"Serie,RG,Nascimento,Pai,AvoMaterno,Sexo\nCJCJ,123456,2022-01-15,CJCJ 100001,CJCJ 100002,Macho\nCJCJ,123457,2022-02-20,CJCJ 100003,CJCJ 100004,Femea":"CJCJ|123456|2022-01-15|CJCJ 100001|CJCJ 100002|Macho\nCJCJ|123457|2022-02-20|CJCJ 100003|CJCJ 100004|Femea"})]}),c.jsx("div",{className:"mb-6",children:c.jsx("button",{onClick:()=>{d(!0);try{let e=[];if("excel"===n){if(e=s.trim().split("\n"),0===e.length)throw Error("Nenhum dado encontrado");let a=e[0],t=a.toLowerCase().includes("serie")||a.toLowerCase().includes("rg")||a.toLowerCase().includes("nasc");t&&(e=e.slice(1))}else if("csv"===n){e=s.trim().split("\n");let a=e[0].split(",").map(e=>e.trim()),t=["Serie","RGN","Nascimento","Pai","AvoMaterno","Sexo"].every(e=>a.includes(e));if(!t)throw Error("Cabe\xe7alho CSV inv\xe1lido. Use: Serie,RGN,Nascimento,Pai,AvoMaterno,Sexo");e=e.slice(1)}else e=s.trim().split("\n");let a=[],t=[];e.forEach((e,s)=>{if(e.trim())try{let t,s,r,l,i,o,d,c,x;if("excel"===n){let a=[];if(e.includes("	"))a=e.split("	").map(e=>e.trim());else if(e.includes(","))a=e.split(",").map(e=>e.trim());else if(a=e.split(/\s+/).filter(e=>""!==e.trim()),console.log("Campos encontrados:",a.length,a),a.length>12){let e=a.slice(0,12),t=a.slice(12);console.log("Primeiros 12:",e),console.log("Restante para nomes:",t);let s=-1;for(let e=0;e<t.length;e++){let a=t[e];if(a.match(/^[A-Z]\d{3,4}$/)||a.match(/^[A-Z]{2}$/)||"DA"===a||"DE"===a||"DO"===a){s=e;break}}if(s>0){let r=t.slice(0,s).join(" "),l=t.slice(s).join(" ");a=[...e,r,l],console.log("Separa\xe7\xe3o encontrada no \xedndice",s,":",{nomePai:r,avoMaterno:l})}else{let s=Math.max(1,t.length-3),r=t.slice(0,s).join(" "),l=t.slice(s).join(" ");a=[...e,r,l],console.log("Usando fallback (\xfaltimas 3 palavras):",{nomePai:r,avoMaterno:l})}}else 14===a.length?console.log("Exatamente 14 campos, usando como est\xe1"):a.length<14&&console.log("Menos de 14 campos, pode haver erro no formato");if(a.length<7)throw Error(`Formato Excel inv\xe1lido. Esperado pelo menos 7 colunas, encontrado ${a.length}. Dados: ${e}`);console.log("Processando linha:",e),console.log("Total de campos:",a.length);let s=-1;for(let e=0;e<a.length;e++)if(a[e]&&a[e].includes("/")){s=e;break}if(-1===s)throw Error("Data n\xe3o encontrada. Esperado formato DD/MM/YY ou DD/MM/YYYY");if(console.log("Data encontrada na posi\xe7\xe3o:",s,"=",a[s]),a.length<s+2)throw Error(`Dados insuficientes. Encontrado ${a.length} campos, mas preciso de pelo menos ${s+2}`);let r=a.slice(s+2).join(" ");console.log("Nomes completos:",r);let l="",i="";if(r.trim()){let e=r.trim().split(" ");if(console.log("Palavras dos nomes:",e),e.length>=2){let a=Math.ceil(e.length/2);l=e.slice(0,a).join(" "),i=e.slice(a).join(" ")}else l=e[0]||"",i=""}console.log("Nomes separados:",{nomePai:l,avoMaterno:i}),t={serie:a[0]||"CJCJ",rg:a[1]||"",tipo:a[2]||"",nascimento:a[s]||"",meses:a[s+1]||"",pai:l,avoMaterno:i,sexo:"M"}}else if("csv"===n){let a=e.split(",").map(e=>e.trim());t={serie:a[0],rg:a[1],sexo:a[2],nascimento:a[3],pai:a[4],avoMaterno:a[5]}}else{let a=e.split("|").map(e=>e.trim());if(6!==a.length)throw Error("Formato inv\xe1lido. Use: Serie|RG|Nascimento|Pai|AvoMaterno|Sexo");t={serie:a[0],rg:a[1],sexo:a[2],nascimento:a[3],pai:a[4],avoMaterno:a[5]}}if("excel"===n){if(s=t.rg,r="M"===t.sexo?"Macho":"F"===t.sexo?"F\xeamea":t.sexo,console.log("Campo nascimento:",t.nascimento,"Tipo:",typeof t.nascimento),t.nascimento&&t.nascimento.toString().includes("/"))l=convertDateToISO(t.nascimento);else throw Error(`Campo de data n\xe3o parece v\xe1lido: ${t.nascimento}`);i=t.pai,o=t.avoMaterno,d=parseInt(t.meses)||calcularIdade(l),c=parseFloat(t.peso)||null,x=t.lote}else s=t.rg||t.rgn,r=t.sexo,l=t.nascimento,i=t.pai,o=t.avoMaterno,d=calcularIdade(l),c=null,x=null;if(!t.serie||!s||!l||!r)throw Error("Campos obrigat\xf3rios: Serie, RG, Nascimento, Sexo");if("CJCJ"!==t.serie)throw Error("Apenas animais CJCJ s\xe3o suportados nesta importa\xe7\xe3o");if(!["Macho","F\xeamea","Femea","M","F"].includes(t.sexo))throw Error("Sexo deve ser: Macho, F\xeamea, M ou F");let m=new Date(l);if(isNaN(m.getTime()))throw Error(`Data de nascimento inv\xe1lida: ${t.nascimento}`);let g=!1,u=[],h=0,p="IA";if("excel"===n&&t.tipo){let e=t.tipo.toUpperCase();e.includes("FIV")||e.includes("FV")?(g=!0,p="FIV",h=120,u=[{id:1,tipo:"DNA",subtipo:"Paternidade",valor:40,data:l,observacoes:"DNA Paternidade - FIV (Importa\xe7\xe3o)"},{id:2,tipo:"DNA",subtipo:"Gen\xf4mica",valor:80,data:l,observacoes:"DNA Gen\xf4mica - FIV (Importa\xe7\xe3o)"}]):e.includes("IA")||e.includes("I.A")?(g=!1,p="IA",h=80,u=[{id:1,tipo:"DNA",subtipo:"Gen\xf4mica",valor:80,data:l,observacoes:"DNA Gen\xf4mica - IA (Importa\xe7\xe3o)"}]):(g=!1,p=e,h=80,u=[{id:1,tipo:"DNA",subtipo:"Gen\xf4mica",valor:80,data:l,observacoes:`DNA Gen\xf4mica - ${e} (Importa\xe7\xe3o)`}])}else g=!0,p="FIV",h=120,u=[{id:1,tipo:"DNA",subtipo:"Paternidade",valor:40,data:l,observacoes:"DNA Paternidade - FIV (Importa\xe7\xe3o)"},{id:2,tipo:"DNA",subtipo:"Gen\xf4mica",valor:80,data:l,observacoes:"DNA Gen\xf4mica - FIV (Importa\xe7\xe3o)"}];let b={id:Date.now()+Math.random(),serie:t.serie,rg:s,raca:"Nelore",sexo:r,dataNascimento:l,meses:d,situacao:"Ativo",pai:i||null,mae:null,avoMaterno:o||null,receptora:null,isFiv:g,tipoCobertura:p,peso:c,lote:x,custoTotal:h,valorVenda:null,valorReal:null,custos:u};a.push(b)}catch(a){t.push({linha:s+1,dados:e,erro:a.message})}}),i({sucesso:a,erros:t,total:e.length})}catch(e){i({sucesso:[],erros:[{linha:0,dados:"",erro:e.message}],total:0})}d(!1)},disabled:!s.trim()||o,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center",children:o?(0,c.jsxs)(c.Fragment,{children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Validando..."]}):(0,c.jsxs)(c.Fragment,{children:[c.jsx(p.Z,{className:"h-4 w-4 mr-2"}),"Validar Dados"]})})}),l&&(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,c.jsxs)("div",{className:"text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:l.sucesso.length}),c.jsx("div",{className:"text-sm text-green-600 dark:text-green-400",children:"V\xe1lidos"})]}),(0,c.jsxs)("div",{className:"text-center p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:l.erros.length}),c.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:"Erros"})]}),(0,c.jsxs)("div",{className:"text-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:l.total}),c.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Total"})]})]}),l.erros.length>0&&(0,c.jsxs)("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[(0,c.jsxs)("h4",{className:"font-semibold text-red-900 dark:text-red-200 mb-2 flex items-center",children:[c.jsx(b.Z,{className:"h-5 w-5 mr-2"}),"Erros Encontrados"]}),c.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:l.erros.map((e,a)=>(0,c.jsxs)("div",{className:"text-sm text-red-800 dark:text-red-300",children:[(0,c.jsxs)("strong",{children:["Linha ",e.linha,":"]})," ",e.erro,e.dados&&c.jsx("div",{className:"font-mono text-xs mt-1 bg-red-100 dark:bg-red-900/40 p-1 rounded",children:e.dados})]},a))})]}),l.sucesso.length>0&&(0,c.jsxs)("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,c.jsxs)("h4",{className:"font-semibold text-green-900 dark:text-green-200 mb-2 flex items-center",children:[c.jsx(p.Z,{className:"h-5 w-5 mr-2"}),"Animais Prontos para Importa\xe7\xe3o (",l.sucesso.length,")"]}),(0,c.jsxs)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:[l.sucesso.slice(0,5).map((e,a)=>(0,c.jsxs)("div",{className:"text-sm text-green-800 dark:text-green-300 flex justify-between",children:[(0,c.jsxs)("span",{children:[e.serie," ",e.rg," - ",e.sexo]}),(0,c.jsxs)("span",{children:[e.meses," meses - R$"," ",e.custoTotal.toFixed(2)]})]},a)),l.sucesso.length>5&&(0,c.jsxs)("div",{className:"text-sm text-green-600 dark:text-green-400",children:["... e mais ",l.sucesso.length-5," ","animais"]})]})]})]})]}),(0,c.jsxs)("div",{className:"flex justify-between p-6 border-t border-gray-200 dark:border-gray-700",children:[c.jsx("button",{onClick:a,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Cancelar"}),(0,c.jsxs)("button",{onClick:()=>{l&&l.sucesso.length>0&&(t(l.sucesso),r(""),i(null),a())},disabled:!l||0===l.sucesso.length,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center",children:[c.jsx(h.Z,{className:"h-4 w-4 mr-2"}),"Importar ",l?l.sucesso.length:0," ","Animais"]})]})]})}):null}function CostManager({animal:e,isOpen:a,onClose:t,onSave:s}){let[r,l]=(0,x.useState)([]),[i,o]=(0,x.useState)(!0),[d,n]=(0,x.useState)(!1),[m,g]=(0,x.useState)({tipo:"",descricao:"",valor:"",data:new Date().toISOString().split("T")[0],observacoes:""});if((0,x.useEffect)(()=>{e&&a&&loadCosts()},[e,a]),!a||!e)return null;let loadCosts=async()=>{try{o(!0);let a=e.custos||[];l(a)}catch(e){console.error("Erro ao carregar custos:",e)}finally{o(!1)}},handleDeleteCost=a=>{if(!confirm("Tem certeza que deseja excluir este custo?"))return;let t=r.filter(e=>e.id!==a);l(t);let i={...e,custos:t,custoTotal:t.reduce((e,a)=>e+a.valor,0)};s&&s(i),alert("Custo exclu\xeddo com sucesso!")},u=r.reduce((e,a)=>e+a.valor,0);return(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"\uD83D\uDCB0 Gerenciar Custos"}),(0,c.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[e.serie," ",e.rg," - ",e.raca]})]}),c.jsx("button",{onClick:()=>n(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"➕ Adicionar Custo"})]}),c.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total de Custos"}),(0,c.jsxs)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:["R$ ",u.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),(0,c.jsxs)("div",{children:[c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Registros"}),c.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.length})]})]})}),i?(0,c.jsxs)("div",{className:"text-center py-8",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),c.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Carregando custos..."})]}):c.jsx("div",{className:"space-y-3",children:0===r.length?(0,c.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[c.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDCCB"}),c.jsx("p",{children:"Nenhum custo registrado ainda"}),c.jsx("p",{className:"text-sm",children:'Clique em "Adicionar Custo" para come\xe7ar'})]}):r.map(e=>c.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e.tipo}),e.descricao&&(0,c.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["- ",e.descricao]})]}),(0,c.jsxs)("div",{className:"flex items-center space-x-4 mt-1",children:[c.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(e.data).toLocaleDateString("pt-BR")}),e.observacoes&&c.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.observacoes})]})]}),(0,c.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,c.jsxs)("div",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:["R$ ",e.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),c.jsx("button",{onClick:()=>handleDeleteCost(e.id),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Excluir custo",children:"\uD83D\uDDD1️"})]})]})},e.id))}),d&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",children:[c.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:c.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Adicionar Novo Custo"})}),(0,c.jsxs)("div",{className:"p-6 space-y-4",children:[(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tipo de Custo *"}),(0,c.jsxs)("select",{value:m.tipo,onChange:e=>g({...m,tipo:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[c.jsx("option",{value:"",children:"Selecione o tipo"}),["Aquisi\xe7\xe3o","Alimenta\xe7\xe3o","Medicamentos","Veterin\xe1rios","DNA","M\xe3o de Obra","Transporte","Outros"].map(e=>c.jsx("option",{value:e,children:e},e))]})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descri\xe7\xe3o"}),c.jsx("input",{type:"text",value:m.descricao,onChange:e=>g({...m,descricao:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Ex: Ra\xe7\xe3o concentrada, Vacina, etc."})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Valor *"}),c.jsx("input",{type:"number",step:"0.01",value:m.valor,onChange:e=>g({...m,valor:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"0,00"})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Data"}),c.jsx("input",{type:"date",value:m.data,onChange:e=>g({...m,data:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Observa\xe7\xf5es"}),c.jsx("textarea",{value:m.observacoes,onChange:e=>g({...m,observacoes:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Observa\xe7\xf5es adicionais..."})]})]}),(0,c.jsxs)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3",children:[c.jsx("button",{onClick:()=>n(!1),className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Cancelar"}),c.jsx("button",{onClick:()=>{if(!m.tipo||!m.valor){alert("Preencha pelo menos o tipo e valor do custo");return}let a={id:Date.now(),tipo:m.tipo,descricao:m.descricao,valor:parseFloat(m.valor),data:m.data,observacoes:m.observacoes},t=[...r,a];l(t);let i={...e,custos:t,custoTotal:t.reduce((e,a)=>e+a.valor,0)};s&&s(i),g({tipo:"",descricao:"",valor:"",data:new Date().toISOString().split("T")[0],observacoes:""}),n(!1),alert("Custo adicionado com sucesso!")},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Adicionar"})]})]})})]})}function AnimalTimeline({animalId:e}){let[a,t]=(0,x.useState)([]),[s,r]=(0,x.useState)(e),[l,i]=(0,x.useState)(!0),[o,d]=(0,x.useState)(!1),[n,m]=(0,x.useState)(Date.now());(0,x.useEffect)(()=>{fetchAnimals()},[]),(0,x.useEffect)(()=>{let e=setInterval(()=>{fetchAnimals()},5e3);return()=>clearInterval(e)},[]),(0,x.useEffect)(()=>{let handleFocus=()=>{fetchAnimals()};return window.addEventListener("focus",handleFocus),()=>window.removeEventListener("focus",handleFocus)},[]);let fetchAnimals=async()=>{try{l||d(!0);let e=await fetch(`/api/animals?t=${Date.now()}`),a=await e.json();t(a),!s&&a.length>0&&r(a[0].id),m(Date.now())}catch(e){console.error("Erro ao carregar animais:",e)}finally{i(!1),d(!1)}};if(l)return c.jsx("div",{className:"card p-6",children:(0,c.jsxs)("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),(0,c.jsxs)("div",{className:"space-y-3",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded"}),c.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})});let g=a&&a.length>0?a.find(e=>e.id===s):null;if(!g)return c.jsx("div",{className:"card p-6 text-center",children:(0,c.jsxs)("div",{className:"text-gray-500 dark:text-gray-400",children:[c.jsx("div",{className:"text-4xl mb-4",children:"\uD83D\uDC04"}),c.jsx("h3",{className:"text-lg font-medium mb-2",children:"Nenhum animal selecionado"}),c.jsx("p",{children:"Selecione um animal para ver sua timeline completa"})]})});let getCostIcon=e=>({Aquisição:"\uD83D\uDED2",Alimentação:"\uD83C\uDF3E",DNA:"\uD83E\uDDEC",Medicamentos:"\uD83D\uDC8A",Veterinários:"\uD83D\uDC68‍⚕️","M\xe3o de Obra Proporcional":"\uD83D\uDC77","Frete / Transporte":"\uD83D\uDE9B",Outros:"\uD83D\uDCCB"})[e]||"\uD83D\uDCCB",getCostColor=e=>({Aquisição:"bg-purple-500",Alimentação:"bg-green-500",DNA:"bg-blue-500",Medicamentos:"bg-red-500",Veterinários:"bg-indigo-500","M\xe3o de Obra Proporcional":"bg-orange-500","Frete / Transporte":"bg-gray-500",Outros:"bg-gray-400"})[e]||"bg-gray-400",u=(e=>{let a=[];return e.data_nascimento&&a.push({id:"nascimento",date:e.data_nascimento,type:"nascimento",title:"Nascimento",description:`${e.sexo} • ${e.raca} • ${e.serie||""} ${e.rg||""}`,cost:0,icon:"\uD83C\uDF7C",color:"bg-green-500"}),e.custos&&e.custos.length>0&&e.custos.forEach(e=>{a.push({id:`custo-${e.id}`,date:e.data,type:"custo",title:e.tipo+(e.subtipo?` - ${e.subtipo}`:""),description:e.observacoes||"Custo registrado",cost:parseFloat(e.valor)||0,icon:getCostIcon(e.tipo),color:getCostColor(e.tipo)})}),e.vendas&&e.vendas.length>0&&e.vendas.forEach(e=>{a.push({id:`venda-${e.id}`,date:e.data_venda,type:"venda",title:"Venda do Animal",description:`Vendido por R$ ${parseFloat(e.valor).toLocaleString("pt-BR",{minimumFractionDigits:2})}`,cost:-parseFloat(e.valor),icon:"\uD83D\uDCB0",color:"bg-yellow-500"})}),a.sort((e,a)=>new Date(e.date)-new Date(a.date))})(g),h=u.filter(e=>e.cost>0).reduce((e,a)=>e+a.cost,0),p=u.filter(e=>e.cost<0).reduce((e,a)=>e+Math.abs(a.cost),0);return(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"card p-4",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Selecionar Animal para Timeline"}),(0,c.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,c.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["\xdaltima atualiza\xe7\xe3o: ",new Date(n).toLocaleTimeString("pt-BR")]}),c.jsx("button",{onClick:fetchAnimals,disabled:o,className:`px-3 py-1 text-white text-xs rounded-md transition-colors ${o?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"}`,title:"Atualizar dados",children:o?"\uD83D\uDD04 Atualizando...":"\uD83D\uDD04 Atualizar"})]})]}),(0,c.jsxs)("select",{value:s||"",onChange:e=>r(parseInt(e.target.value)),className:"input-field max-w-md",children:[c.jsx("option",{value:"",children:"Selecione um animal..."}),a&&a.map(e=>(0,c.jsxs)("option",{value:e.id,children:[e.serie||"S/N"," ",e.rg||"S/N"," - ",e.raca," (",e.status,")"]},e.id))]})]}),(0,c.jsxs)("div",{className:"card p-6",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[g.serie||"S/N"," ",g.rg||"S/N"]}),(0,c.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[g.raca," • ",g.sexo," • ",g.status]})]}),c.jsx("div",{className:"text-right",children:c.jsx("div",{className:"text-2xl mb-2",children:"Macho"===g.sexo?"\uD83D\uDC02":"\uD83D\uDC04"})})]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,c.jsxs)("div",{className:"text-center p-4 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[(0,c.jsxs)("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:["R$ ",h.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),c.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:"Total Investido"})]}),(0,c.jsxs)("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,c.jsxs)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:["R$ ",p.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),c.jsx("div",{className:"text-sm text-green-600 dark:text-green-400",children:"Total Recebido"})]}),(0,c.jsxs)("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,c.jsxs)("div",{className:`text-2xl font-bold ${p-h>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["R$ ",(p-h).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),c.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Resultado"})]})]})]}),(0,c.jsxs)("div",{className:"card p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"\uD83D\uDCC5 Timeline Completa"}),(0,c.jsxs)("div",{className:"relative",children:[c.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-gray-300 dark:bg-gray-600"}),c.jsx("div",{className:"space-y-6",children:u.map((e,a)=>(0,c.jsxs)("div",{className:"relative flex items-start",children:[c.jsx("div",{className:`${e.color} w-16 h-16 rounded-full flex items-center justify-center text-white text-xl font-bold shadow-lg z-10`,children:e.icon}),c.jsx("div",{className:"ml-6 flex-1",children:(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 p-4",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.title}),(0,c.jsxs)("div",{className:"flex items-center space-x-3",children:[c.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(e.date).toLocaleDateString("pt-BR")}),0!==e.cost&&(0,c.jsxs)("span",{className:`text-lg font-bold ${e.cost>0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:[e.cost>0?"-":"+","R$ ",Math.abs(e.cost).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e.description}),a>0&&c.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:(0,c.jsxs)("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Custo Acumulado:"}),(0,c.jsxs)("span",{className:"font-medium text-gray-900 dark:text-white",children:["R$ ",u.slice(0,a+1).filter(e=>e.cost>0).reduce((e,a)=>e+a.cost,0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})})]})})]},e.id))})]})]}),g.vendas&&g.vendas.length>0&&(0,c.jsxs)("div",{className:"card p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCCA An\xe1lise de Performance"}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,c.jsxs)("div",{children:[c.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Distribui\xe7\xe3o de Custos"}),c.jsx("div",{className:"space-y-2",children:Object.entries(u.filter(e=>e.cost>0).reduce((e,a)=>{let t="custo"===a.type?a.title.split(" - ")[0]:a.type;return e[t]=(e[t]||0)+a.cost,e},{})).map(([e,a])=>(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:e}),(0,c.jsxs)("span",{className:"font-medium text-gray-900 dark:text-white",children:["R$ ",a.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]},e))})]}),(0,c.jsxs)("div",{children:[c.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"M\xe9tricas"}),(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"ROI"}),(0,c.jsxs)("span",{className:`font-bold ${p-h>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[h>0?((p-h)/h*100).toFixed(1):"0.0","%"]})]}),(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Data de Nascimento"}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:g.data_nascimento?new Date(g.data_nascimento).toLocaleDateString("pt-BR"):"N/A"})]})]})]})]})]}),0===u.length&&c.jsx("div",{className:"card p-6 text-center",children:(0,c.jsxs)("div",{className:"text-gray-500 dark:text-gray-400",children:[c.jsx("div",{className:"text-4xl mb-4",children:"\uD83D\uDCCB"}),c.jsx("h3",{className:"text-lg font-medium mb-2",children:"Timeline vazia"}),c.jsx("p",{children:"Este animal ainda n\xe3o possui custos ou eventos registrados."}),c.jsx("p",{className:"text-sm mt-2",children:"Adicione custos ou registre eventos para ver a timeline completa."})]})})]})}var v=t(4308),j=t(7087),f=t(4491),y=t(794),N=t(5973),k=t(5837);function FinancialFixer(){let[e,a]=(0,x.useState)(!1),[t,s]=(0,x.useState)(null),[r,l]=(0,x.useState)(null),handleFixFinancial=async()=>{a(!0),l(null),s(null);try{console.log("\uD83D\uDD27 Iniciando corre\xe7\xe3o financeira...");let e=await fetch("/api/update-financial",{method:"POST",headers:{"Content-Type":"application/json"}}),a=await e.json();a.success?(s(a),console.log("✅ Corre\xe7\xe3o financeira conclu\xedda:",a)):l(a.message||"Erro desconhecido")}catch(e){console.error("❌ Erro na corre\xe7\xe3o financeira:",e),l("Erro ao conectar com o servidor")}finally{a(!1)}};return(0,c.jsxs)(y.Zb,{className:"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 border-2 border-yellow-300 dark:border-yellow-600",children:[c.jsx(y.Ol,{children:(0,c.jsxs)(y.ll,{className:"text-orange-700 dark:text-orange-300 flex items-center",children:[c.jsx(b.Z,{className:"h-6 w-6 mr-2"}),"\uD83D\uDD27 Corre\xe7\xe3o de Dados Financeiros"]})}),(0,c.jsxs)(y.aY,{className:"space-y-4",children:[(0,c.jsxs)("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[(0,c.jsxs)("p",{className:"mb-2",children:[c.jsx("strong",{children:"Problema identificado:"})," Os valores financeiros est\xe3o zerados mesmo com animais vendidos."]}),(0,c.jsxs)("p",{className:"mb-4",children:[c.jsx("strong",{children:"Solu\xe7\xe3o:"})," Este bot\xe3o vai sincronizar os dados de vendas com o sistema financeiro."]})]}),c.jsx(f.z,{onClick:handleFixFinancial,disabled:e,className:"w-full bg-orange-600 hover:bg-orange-700 text-white",children:e?(0,c.jsxs)(c.Fragment,{children:[c.jsx(N.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Corrigindo Dados Financeiros..."]}):(0,c.jsxs)(c.Fragment,{children:[c.jsx(k.Z,{className:"h-4 w-4 mr-2"}),"\uD83D\uDD27 Corrigir Dados Financeiros"]})}),t&&(0,c.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-600 rounded-lg p-4",children:[(0,c.jsxs)("div",{className:"flex items-center mb-3",children:[c.jsx(p.Z,{className:"h-5 w-5 text-green-600 mr-2"}),c.jsx("span",{className:"font-semibold text-green-800 dark:text-green-200",children:"Corre\xe7\xe3o Conclu\xedda!"})]}),(0,c.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,c.jsxs)("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Animais Processados:"}),c.jsx("span",{className:"font-semibold",children:t.stats.updatedAnimals})]}),(0,c.jsxs)("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Total de Vendas:"}),(0,c.jsxs)("span",{className:"font-semibold text-green-600",children:["R$ ",t.stats.totalSalesValue.toLocaleString("pt-BR")]})]}),(0,c.jsxs)("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Quantidade Vendida:"}),(0,c.jsxs)("span",{className:"font-semibold",children:[t.stats.totalSalesCount," animais"]})]}),(0,c.jsxs)("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Total de Custos:"}),(0,c.jsxs)("span",{className:"font-semibold text-red-600",children:["R$ ",t.stats.totalCosts.toLocaleString("pt-BR")]})]}),(0,c.jsxs)("div",{className:"flex justify-between border-t pt-2",children:[c.jsx("span",{className:"font-semibold",children:"Lucro:"}),(0,c.jsxs)("span",{className:`font-bold ${t.stats.profit>=0?"text-green-600":"text-red-600"}`,children:["R$ ",t.stats.profit.toLocaleString("pt-BR")]})]})]}),(0,c.jsxs)("div",{className:"mt-3 text-xs text-green-700 dark:text-green-300",children:["✅ ",t.message]})]}),r&&(0,c.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-600 rounded-lg p-4",children:[(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx(b.Z,{className:"h-5 w-5 text-red-600 mr-2"}),c.jsx("span",{className:"font-semibold text-red-800 dark:text-red-200",children:"Erro na Corre\xe7\xe3o"})]}),c.jsx("div",{className:"text-sm text-red-700 dark:text-red-300 mt-2",children:r})]}),(0,c.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-600 rounded-lg p-4",children:[c.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"\uD83D\uDCCB O que esta corre\xe7\xe3o faz:"}),(0,c.jsxs)("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[c.jsx("li",{children:"• Encontra todos os animais vendidos"}),c.jsx("li",{children:"• Cria registros de custo para as vendas"}),c.jsx("li",{children:"• Atualiza os valores financeiros"}),c.jsx("li",{children:"• Calcula lucros e preju\xedzos"}),c.jsx("li",{children:"• Sincroniza dados entre vendas e financeiro"})]})]})]})]})}var w=t(6949),D=t(434),C=t(8680),S=t(9633),A=t(9227),R=t(6829),F=t(2940),$=t(2268),E=t(445),M=t(8613),T=t(8357);let I=["Ativo","Vendido","Morto","Doado"];function Animals(){let e=(0,m.useRouter)(),[a,t]=(0,x.useState)([]),[s,r]=(0,x.useState)(!0),[l,i]=(0,x.useState)(null),[o,d]=(0,x.useState)(!1),[n,h]=(0,x.useState)(!1),[p,b]=(0,x.useState)(!1),[f,y]=(0,x.useState)(!1),[P,V]=(0,x.useState)(!1),[O,B]=(0,x.useState)(!1),[J,L]=(0,x.useState)(!1),[Z,G]=(0,x.useState)(!1),[q,z]=(0,x.useState)(""),[_,Y]=(0,x.useState)("table"),[U,H]=(0,x.useState)({raca:"",sexo:"",situacao:"",serie:""}),[W,Q]=(0,x.useState)([]),[X,K]=(0,x.useState)(!1),[ee,ea]=(0,x.useState)(!1),[et,es]=(0,x.useState)(1);(0,x.useEffect)(()=>{"true"===e.query.openImporter&&(G(!0),e.replace("/animals",void 0,{shallow:!0})),e.query.filter&&(H(a=>({...a,situacao:e.query.filter})),e.replace("/animals",void 0,{shallow:!0}))},[e.query.openImporter,e.query.filter]),(0,x.useEffect)(()=>{"true"===e.query.openImporter&&(G(!0),e.replace("/animals",void 0,{shallow:!0}))},[e.query.openImporter]);let er=a.filter(e=>{let a=e.serie.toLowerCase().includes(q.toLowerCase())||e.rg.includes(q)||e.raca.toLowerCase().includes(q.toLowerCase()),t=(!U.raca||e.raca===U.raca)&&(!U.sexo||e.sexo===U.sexo)&&(!U.situacao||e.situacao===U.situacao)&&(!U.serie||e.serie===U.serie);return a&&t}),el=Math.ceil(er.length/5),ei=(et-1)*5,eo=ei+5,ed=er.slice(ei,eo);(0,x.useEffect)(()=>{es(1)},[q,U]);let goToPage=e=>{es(e)},goToPreviousPage=()=>{et>1&&es(et-1)},goToNextPage=()=>{et<el&&es(et+1)},handleSelectAnimal=e=>{Q(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},handleSalesComplete=async()=>{await loadAnimals(),Q([]),K(!1)},handleDeleteSelected=async()=>{if(0===W.length){alert("Selecione pelo menos um animal para excluir.");return}let e=`Tem certeza que deseja excluir ${W.length} animal(is) selecionado(s)?`;if(confirm(e))try{await Promise.all(W.map(e=>w.Z.deleteAnimal(e))),Q([]),K(!1),await loadAnimals(),alert(`${W.length} animal(is) exclu\xeddo(s) com sucesso!`)}catch(e){console.error("Erro ao excluir animais:",e),alert("Erro ao excluir animais: "+e.message)}},handleSaveAnimal=async e=>{try{console.log("Dados recebidos do formul\xe1rio:",e);let a={Ativo:"ATIVO",Vendido:"VENDIDO",Morto:"MORTO",Doado:"DOADO"}[e.situacao]||"ATIVO";if(console.log("Status que ser\xe1 salvo:",a),l){let t={brinco:e.rg,serie:e.serie,nome:e.nome,raca:e.raca,sexo:e.sexo,dataNasc:e.dataNascimento?new Date(e.dataNascimento).toISOString():null,peso:e.peso?parseFloat(e.peso):null,categoria:e.categoria||"Bezerro",observacoes:e.observacoes,status:a};console.log("Dados que ser\xe3o enviados para API:",t),await w.Z.updateAnimal(l.id,t)}else{let a={brinco:e.rg,serie:e.serie,nome:e.nome,raca:e.raca,sexo:e.sexo,dataNasc:e.dataNascimento?new Date(e.dataNascimento).toISOString():null,peso:e.peso?parseFloat(e.peso):null,categoria:e.categoria||"Bezerro",observacoes:e.observacoes};console.log("Dados enviados para API:",a),await w.Z.addAnimal(a)}setTimeout(async()=>{await loadAnimals()},500),i(null),d(!1),alert("Animal atualizado com sucesso!")}catch(e){console.error("Erro ao salvar animal:",e),alert("Erro ao salvar animal: "+e.message)}},handleDeleteAnimal=async e=>{if(confirm("Tem certeza que deseja excluir este animal?"))try{await w.Z.deleteAnimal(e),await loadAnimals()}catch(e){console.error("Erro ao excluir animal:",e),alert("Erro ao excluir animal: "+e.message)}},handleViewAnimal=e=>{i(e),L(!0)},handlePrint=e=>{let a=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Ficha do Animal - ${e.serie} ${e.rg}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 20px; }
          .section { margin-bottom: 20px; }
          .section h3 { background-color: #f0f0f0; padding: 8px; margin: 0 0 10px 0; }
          .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
          .info-item { padding: 5px 0; border-bottom: 1px solid #eee; }
          .info-label { font-weight: bold; }
          .costs-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
          .costs-table th, .costs-table td { border: 1px solid #ddd; padding: 8px; text-align: left; }
          .costs-table th { background-color: #f0f0f0; }
          .total { font-weight: bold; background-color: #f9f9f9; }
          @media print { body { margin: 0; } }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>FICHA DO ANIMAL</h1>
          <h2>${e.serie} ${e.rg}</h2>
          <p>Impresso em: ${new Date().toLocaleDateString("pt-BR")} \xe0s ${new Date().toLocaleTimeString("pt-BR")}</p>
        </div>

        <div class="section">
          <h3>📋 Informa\xe7\xf5es B\xe1sicas</h3>
          <div class="info-grid">
            <div class="info-item">
              <span class="info-label">ID:</span> ${e.id}
            </div>
            <div class="info-item">
              <span class="info-label">S\xe9rie:</span> ${e.serie}
            </div>
            <div class="info-item">
              <span class="info-label">RG:</span> ${e.rg}
            </div>
            <div class="info-item">
              <span class="info-label">Ra\xe7a:</span> ${e.raca}
            </div>
            <div class="info-item">
              <span class="info-label">Sexo:</span> ${e.sexo}
            </div>
            <div class="info-item">
              <span class="info-label">Idade:</span> ${e.meses} meses
            </div>
            <div class="info-item">
              <span class="info-label">Situa\xe7\xe3o:</span> ${e.situacao}
            </div>
            <div class="info-item">
              <span class="info-label">Data de Nascimento:</span> ${e.dataNascimento?new Date(e.dataNascimento).toLocaleDateString("pt-BR"):"N/A"}
            </div>
          </div>
        </div>

        ${e.pai||e.mae||e.avoMaterno||e.receptora?`
        <div class="section">
          <h3>🧬 Genealogia</h3>
          <div class="info-grid">
            ${e.pai?`<div class="info-item"><span class="info-label">Pai:</span> ${e.pai}</div>`:""}
            ${e.mae?`<div class="info-item"><span class="info-label">M\xe3e:</span> ${e.mae}</div>`:""}
            ${e.avoMaterno?`<div class="info-item"><span class="info-label">Av\xf4 Materno:</span> ${e.avoMaterno}</div>`:""}
            ${e.receptora?`<div class="info-item"><span class="info-label">Receptora:</span> ${e.receptora}</div>`:""}
            ${e.isFiv?'<div class="info-item"><span class="info-label">FIV:</span> Sim</div>':""}
          </div>
        </div>
        `:""}

        <div class="section">
          <h3>💰 Resumo Financeiro</h3>
          <div class="info-grid">
            <div class="info-item">
              <span class="info-label">Custo Total:</span> R$ ${e.custoTotal.toLocaleString("pt-BR",{minimumFractionDigits:2})}
            </div>
            <div class="info-item">
              <span class="info-label">Valor de Venda:</span> ${e.valorVenda?`R$ ${e.valorVenda.toLocaleString("pt-BR",{minimumFractionDigits:2})}`:"N/A"}
            </div>
            <div class="info-item">
              <span class="info-label">Resultado:</span> ${null!==e.valorReal?`R$ ${e.valorReal.toLocaleString("pt-BR",{minimumFractionDigits:2})}`:"N/A"}
            </div>
            <div class="info-item">
              <span class="info-label">ROI:</span> ${e.valorVenda?`${((e.valorVenda-e.custoTotal)/e.custoTotal*100).toFixed(1)}%`:"N/A"}
            </div>
          </div>
        </div>

        ${e.custos&&e.custos.length>0?`
        <div class="section">
          <h3>📊 Detalhamento de Custos</h3>
          <table class="costs-table">
            <thead>
              <tr>
                <th>Data</th>
                <th>Tipo</th>
                <th>Subtipo</th>
                <th>Valor</th>
                <th>Observa\xe7\xf5es</th>
              </tr>
            </thead>
            <tbody>
              ${e.custos.map(e=>`
                <tr>
                  <td>${new Date(e.data).toLocaleDateString("pt-BR")}</td>
                  <td>${e.tipo}</td>
                  <td>${e.subtipo||"-"}</td>
                  <td>R$ ${Math.abs(e.valor).toLocaleString("pt-BR",{minimumFractionDigits:2})}</td>
                  <td>${e.observacoes||"-"}</td>
                </tr>
              `).join("")}
              <tr class="total">
                <td colspan="3"><strong>TOTAL</strong></td>
                <td><strong>R$ ${e.custoTotal.toLocaleString("pt-BR",{minimumFractionDigits:2})}</strong></td>
                <td></td>
              </tr>
            </tbody>
          </table>
        </div>
        `:""}

        <div class="section">
          <h3>📝 Observa\xe7\xf5es</h3>
          <p>${e.observacoes||"Nenhuma observa\xe7\xe3o registrada."}</p>
        </div>
      </body>
      </html>
    `,t=window.open("","_blank");t.document.write(a),t.document.close(),t.focus(),t.print(),t.close()},handleImportAnimals=async e=>{try{console.log("\uD83D\uDD04 Iniciando importa\xe7\xe3o de",e.length,"animais");let a=e.map(e=>({brinco:e.rg,serie:e.serie||"",nome:e.nome,raca:e.raca,sexo:e.sexo,dataNasc:e.dataNascimento,peso:e.peso,categoria:e.categoria||"Bezerro",observacoes:e.observacoes,status:"ATIVO"})),t=await fetch("/api/animals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!t.ok){let e=await t.json();throw Error(e.message||"Erro ao importar animais")}let s=await t.json();console.log("\uD83D\uDCCA Resultado da importa\xe7\xe3o:",s),await loadAnimals(),alert(`✅ ${s.message||e.length+" animais importados com sucesso!"}`)}catch(e){console.error("Erro ao importar animais:",e),alert("Erro ao importar animais: "+e.message)}},clearFilters=()=>{H({raca:"",sexo:"",situacao:"",serie:"",importados:""}),z("")};(0,x.useEffect)(()=>{loadAnimals()},[]);let loadAnimals=async()=>{try{r(!0);let e=await w.Z.getAllAnimals(),a=e.map(e=>{let a=e.serie||(e.brinco?.match(/^[A-Z]+/)?e.brinco.match(/^[A-Z]+/)[0]:"");return{id:e.id,serie:a,rg:e.brinco,brinco:e.brinco,nome:e.nome,sexo:e.sexo,raca:e.raca,dataNascimento:e.dataNasc?new Date(e.dataNasc).toISOString().split("T")[0]:null,dataNasc:e.dataNasc,meses:e.dataNasc?Math.floor((new Date-new Date(e.dataNasc))/2630016e3):0,situacao:"ATIVO"===e.status?"Ativo":"VENDIDO"===e.status?"Vendido":"MORTO"===e.status?"Morto":"DOADO"===e.status?"Doado":e.status,categoria:e.categoria,peso:e.peso,observacoes:e.observacoes,custoTotal:e.costs?.reduce((e,a)=>e+a.valor,0)||0,custos:e.costs?.map(e=>({id:e.id,tipo:e.tipo,descricao:e.descricao,valor:e.valor,data:new Date(e.data).toISOString().split("T")[0],observacoes:e.observacoes}))||[],valorVenda:null,valorReal:null,pai:null,mae:null,avoMaterno:null,receptora:null,isFiv:!1}});t(a)}catch(e){console.error("Erro ao carregar animais:",e),alert("Erro ao carregar animais do banco de dados: "+e.message)}finally{r(!1)}};return s?c.jsx(g.Z,{children:(0,c.jsxs)("div",{className:"flex items-center justify-center min-h-screen",children:[c.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500"}),c.jsx("p",{className:"ml-4 text-lg text-gray-600 dark:text-gray-400",children:"Carregando animais..."})]})}):(0,c.jsxs)(g.Z,{children:[(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,c.jsxs)("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gest\xe3o de Animais"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Gerencie o cadastro e informa\xe7\xf5es dos animais"})]}),(0,c.jsxs)("div",{className:"mt-4 sm:mt-0 flex space-x-3",children:[(0,c.jsxs)("button",{onClick:()=>G(!0),className:"btn-secondary flex items-center",children:[c.jsx(D.Z,{className:"h-5 w-5 mr-2"}),"\uD83D\uDCE5 Importar Planilha"]}),(0,c.jsxs)("button",{onClick:loadAnimals,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center font-medium",disabled:s,children:[c.jsx(N.Z,{className:"h-5 w-5 mr-2"}),s?"Carregando...":"\uD83D\uDD04 Recarregar Dados"]}),(0,c.jsxs)("button",{onClick:()=>V(!0),className:"px-4 py-2 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-lg hover:from-green-700 hover:to-blue-700 transition-all duration-300 flex items-center font-medium shadow-lg",children:[c.jsx(k.Z,{className:"h-5 w-5 mr-2"}),"\uD83D\uDCCB Nota Fiscal"]}),(0,c.jsxs)("button",{onClick:()=>{i(null),d(!0)},className:"btn-primary flex items-center",children:[c.jsx(C.Z,{className:"h-5 w-5 mr-2"}),"Novo Animal"]})]})]}),(0,c.jsxs)("div",{className:"card p-4",children:[(0,c.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[c.jsx("div",{className:"flex-1 max-w-md",children:(0,c.jsxs)("div",{className:"relative",children:[c.jsx(S.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),c.jsx("input",{type:"text",placeholder:"Buscar por s\xe9rie, RG ou ra\xe7a...",value:q,onChange:e=>z(e.target.value),className:"input-field pl-10"})]})}),(0,c.jsxs)("div",{className:"flex space-x-3",children:[(0,c.jsxs)("button",{onClick:()=>B(!O),className:"btn-secondary flex items-center",children:[c.jsx(A.Z,{className:"h-5 w-5 mr-2"}),"Filtros"]}),c.jsx("button",{onClick:clearFilters,className:"btn-secondary",children:"Limpar"})]})]}),O&&c.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,c.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"S\xe9rie"}),(0,c.jsxs)("select",{value:U.serie,onChange:e=>H({...U,serie:e.target.value}),className:"input-field",children:[c.jsx("option",{value:"",children:"Todas"}),c.jsx("option",{value:"RPT",children:"RPT"}),c.jsx("option",{value:"BENT",children:"BENT"}),c.jsx("option",{value:"CJCJ",children:"CJCJ"}),c.jsx("option",{value:"CJCG",children:"CJCG"})]})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Ra\xe7a"}),(0,c.jsxs)("select",{value:U.raca,onChange:e=>H({...U,raca:e.target.value}),className:"input-field",children:[c.jsx("option",{value:"",children:"Todas"}),c.jsx("option",{value:"Nelore",children:"Nelore"}),c.jsx("option",{value:"Brahman",children:"Brahman"}),c.jsx("option",{value:"Gir",children:"Gir"}),c.jsx("option",{value:"Receptora",children:"Receptora"})]})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sexo"}),(0,c.jsxs)("select",{value:U.sexo,onChange:e=>H({...U,sexo:e.target.value}),className:"input-field",children:[c.jsx("option",{value:"",children:"Todos"}),c.jsx("option",{value:"Macho",children:"Macho"}),c.jsx("option",{value:"F\xeamea",children:"F\xeamea"})]})]}),(0,c.jsxs)("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Situa\xe7\xe3o"}),(0,c.jsxs)("select",{value:U.situacao,onChange:e=>H({...U,situacao:e.target.value}),className:"input-field",children:[c.jsx("option",{value:"",children:"Todas"}),I.map(e=>c.jsx("option",{value:e,children:e},e))]})]})]})})]}),c.jsx(FinancialFixer,{}),W.length>0&&c.jsx("div",{className:"mb-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"flex items-center space-x-3",children:(0,c.jsxs)("span",{className:"text-green-800 dark:text-green-200 font-medium",children:[W.length," animais selecionados"]})}),(0,c.jsxs)("div",{className:"flex space-x-2",children:[(0,c.jsxs)("button",{onClick:()=>y(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center font-medium",children:[c.jsx(k.Z,{className:"h-4 w-4 mr-2"}),"\uD83D\uDCB0 Vender Animais"]}),c.jsx("button",{onClick:()=>{Q([]),K(!1)},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Cancelar Sele\xe7\xe3o"}),(0,c.jsxs)("button",{onClick:handleDeleteSelected,className:"btn-danger flex items-center space-x-2",children:[c.jsx(R.Z,{className:"h-4 w-4"}),c.jsx("span",{children:"Excluir Selecionados"})]})]})]})}),(0,c.jsxs)("div",{className:"card overflow-hidden",children:[c.jsx("div",{className:"overflow-x-auto",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[c.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,c.jsxs)("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:c.jsx("input",{type:"checkbox",checked:X,onChange:()=>{X?Q([]):Q(er.map(e=>e.id)),K(!X)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Animal"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Detalhes"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Situa\xe7\xe3o"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Financeiro"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:ed.map(e=>(0,c.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("input",{type:"checkbox",checked:W.includes(e.id),onChange:()=>handleSelectAnimal(e.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:c.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center",children:c.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Macho"===e.sexo?"\uD83D\uDC02":"\uD83D\uDC04"})})}),(0,c.jsxs)("div",{className:"ml-4",children:[(0,c.jsxs)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[e.serie," ",e.rg]}),(0,c.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",e.id]})]})]})}),(0,c.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,c.jsxs)("div",{className:"text-sm text-gray-900 dark:text-white",children:[e.raca," - ",e.sexo]}),(0,c.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.meses," meses"]})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${"Ativo"===e.situacao?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"Vendido"===e.situacao?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"Morto"===e.situacao?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"}`,children:e.situacao})}),(0,c.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[(0,c.jsxs)("div",{className:"text-gray-900 dark:text-white",children:["Custo: R$"," ",e.custoTotal.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),null!==e.valorReal&&(0,c.jsxs)("div",{className:e.valorReal>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:["Resultado: R$"," ",e.valorReal.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,c.jsxs)("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>handleViewAnimal(e),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Visualizar",children:c.jsx(F.Z,{className:"h-5 w-5"})}),c.jsx("button",{onClick:()=>{i(e),d(!0)},className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",title:"Editar",children:c.jsx($.Z,{className:"h-5 w-5"})}),c.jsx("button",{onClick:()=>{i(e),h(!0)},className:"text-yellow-600 hover:text-yellow-900 dark:text-yellow-400 dark:hover:text-yellow-300",title:"Gerenciar Custos",children:c.jsx(k.Z,{className:"h-5 w-5"})}),c.jsx("button",{onClick:()=>{i(e),b(!0)},className:"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300",title:"Timeline de Custos",children:c.jsx(E.Z,{className:"h-5 w-5"})}),c.jsx("button",{onClick:()=>handlePrint(e),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Imprimir",children:c.jsx(M.Z,{className:"h-5 w-5"})}),c.jsx("button",{onClick:()=>handleDeleteAnimal(e.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Excluir",children:c.jsx(R.Z,{className:"h-5 w-5"})})]})})]},e.id))})]})}),el>1&&(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-900 px-4 py-3 flex items-center justify-between border-t border-gray-200 dark:border-gray-700 sm:px-6",children:[(0,c.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[c.jsx("button",{onClick:goToPreviousPage,disabled:1===et,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),c.jsx("button",{onClick:goToNextPage,disabled:et===el,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Pr\xf3ximo"})]}),(0,c.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[c.jsx("div",{children:(0,c.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Mostrando"," ",c.jsx("span",{className:"font-medium",children:ei+1})," ","at\xe9"," ",c.jsx("span",{className:"font-medium",children:Math.min(eo,er.length)})," ","de"," ",c.jsx("span",{className:"font-medium",children:er.length})," ","resultados"]})}),c.jsx("div",{children:(0,c.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[c.jsx("button",{onClick:goToPreviousPage,disabled:1===et,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"←"}),Array.from({length:el},(e,a)=>a+1).map(e=>c.jsx("button",{onClick:()=>goToPage(e),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${e===et?"z-10 bg-blue-50 dark:bg-blue-900 border-blue-500 dark:border-blue-400 text-blue-600 dark:text-blue-200":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:e},e)),c.jsx("button",{onClick:goToNextPage,disabled:et===el,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"→"})]})})]})]}),0===er.length&&c.jsx("div",{className:"text-center py-12",children:(0,c.jsxs)("div",{className:"text-gray-500 dark:text-gray-400",children:[c.jsx(T.Z,{className:"mx-auto h-12 w-12 mb-4"}),c.jsx("p",{className:"text-lg font-medium",children:"Nenhum animal encontrado"}),c.jsx("p",{className:"text-sm",children:"Tente ajustar os filtros ou adicione um novo animal"})]})})]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,c.jsxs)("div",{onClick:()=>{clearFilters(),z("")},className:"card p-4 text-center cursor-pointer hover:shadow-lg hover:scale-105 transition-all duration-300 group bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border-2 border-blue-200 dark:border-blue-800 hover:border-blue-400 dark:hover:border-blue-600",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mb-2 group-hover:scale-110 transition-transform",children:er.length}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors font-medium",children:"Total Filtrado"}),c.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1 opacity-0 group-hover:opacity-100 transition-opacity",children:"\uD83D\uDC46 Clique para limpar filtros"})]}),(0,c.jsxs)("div",{onClick:()=>{H(e=>({...e,situacao:"Ativo"})),z("")},className:"card p-4 text-center cursor-pointer hover:shadow-lg hover:scale-105 transition-all duration-300 group bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border-2 border-green-200 dark:border-green-800 hover:border-green-400 dark:hover:border-green-600",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mb-2 group-hover:scale-110 transition-transform",children:er.filter(e=>"Ativo"===e.situacao).length}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 group-hover:text-green-600 dark:group-hover:text-green-400 transition-colors font-medium",children:"Ativos"}),c.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1 opacity-0 group-hover:opacity-100 transition-opacity",children:"\uD83D\uDC46 Clique para filtrar ativos"})]}),(0,c.jsxs)("div",{onClick:()=>{H(e=>({...e,situacao:"Vendido"})),z("")},className:"card p-4 text-center cursor-pointer hover:shadow-lg hover:scale-105 transition-all duration-300 group bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 border-2 border-orange-200 dark:border-orange-800 hover:border-orange-400 dark:hover:border-orange-600",children:[c.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400 mb-2 group-hover:scale-110 transition-transform",children:er.filter(e=>"Vendido"===e.situacao).length}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 group-hover:text-orange-600 dark:group-hover:text-orange-400 transition-colors font-medium",children:"Vendidos"}),c.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1 opacity-0 group-hover:opacity-100 transition-opacity",children:"\uD83D\uDC46 Clique para ver vendidos"})]}),(0,c.jsxs)("div",{onClick:()=>ea(!0),className:"card p-4 text-center cursor-pointer hover:shadow-lg hover:scale-105 transition-all duration-300 group bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border-2 border-purple-200 dark:border-purple-800 hover:border-purple-400 dark:hover:border-purple-600",children:[(0,c.jsxs)("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400 mb-2 group-hover:scale-110 transition-transform",children:["R$"," ",er.reduce((e,a)=>e+a.custoTotal,0).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors font-medium",children:"Custo Total"}),c.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1 opacity-0 group-hover:opacity-100 transition-opacity",children:"\uD83D\uDC46 Clique para ver resumo"})]}),(0,c.jsxs)("div",{onClick:()=>{let e=er.filter(e=>"Morto"===e.situacao).length,a=er.filter(e=>"Doado"===e.situacao).length,t=er.filter(e=>!["Ativo","Vendido","Morto","Doado"].includes(e.situacao)).length;e>0||a>0||t>0?H(t=>({...t,situacao:e>0?"Morto":a>0?"Doado":""})):alert("\uD83D\uDCCA Outras Situa\xe7\xf5es:\n\nNenhum animal encontrado em outras situa\xe7\xf5es (Morto, Doado, etc.)")},className:"card p-4 text-center cursor-pointer hover:shadow-lg hover:scale-105 transition-all duration-300 group bg-gradient-to-br from-gray-50 to-slate-50 dark:from-gray-900/20 dark:to-slate-900/20 border-2 border-gray-200 dark:border-gray-800 hover:border-gray-400 dark:hover:border-gray-600",children:[c.jsx("div",{className:"text-2xl font-bold text-gray-600 dark:text-gray-400 mb-2 group-hover:scale-110 transition-transform",children:er.filter(e=>!["Ativo","Vendido"].includes(e.situacao)).length}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 group-hover:text-gray-700 dark:group-hover:text-gray-300 transition-colors font-medium",children:"Outros"}),c.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1 opacity-0 group-hover:opacity-100 transition-opacity",children:"\uD83D\uDC46 Mortos, doados, etc."})]})]})]}),c.jsx(u.Z,{animal:l,isOpen:o,onClose:()=>{d(!1),i(null)},onSave:handleSaveAnimal}),n&&l&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,c.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["Gerenciar Custos - ",l.serie," ",l.rg]}),c.jsx("button",{onClick:()=>{h(!1),i(null)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl font-bold",children:"\xd7"})]}),c.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:c.jsx(CostManager,{animal:l,isOpen:!0,onClose:()=>{h(!1),i(null)},onSave:e=>{t(a.map(a=>a.id===e.id?e:a)),i(null)}})})]})}),p&&l&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,c.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["Timeline de Custos - ",l.serie," ",l.rg]}),c.jsx("button",{onClick:()=>{b(!1),i(null)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl font-bold",children:"\xd7"})]}),c.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:c.jsx(AnimalTimeline,{animalId:l.id})})]})}),c.jsx(AnimalImporter,{isOpen:Z,onClose:()=>G(!1),onImport:handleImportAnimals}),c.jsx(v.Z,{isOpen:f,onClose:()=>y(!1),selectedAnimals:W.map(e=>a.find(a=>a.id===e)).filter(Boolean),onSalesComplete:handleSalesComplete}),c.jsx(j.Z,{isOpen:P,onClose:()=>V(!1),onSalesComplete:handleSalesComplete}),J&&l&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"h-12 w-12 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center",children:c.jsx("span",{className:"text-2xl",children:"Macho"===l.sexo?"\uD83D\uDC02":"\uD83D\uDC04"})}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[l.serie," ",l.rg]}),(0,c.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[l.raca," • ",l.sexo," •"," ",l.meses," meses"]})]})]}),c.jsx("button",{onClick:()=>L(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl font-bold",children:"\xd7"})]}),(0,c.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[c.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[c.jsx("div",{children:c.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${"Ativo"===l.situacao?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"Vendido"===l.situacao?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"Morto"===l.situacao?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"}`,children:l.situacao})}),(0,c.jsxs)("div",{className:"text-right",children:[c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"ID do Sistema"}),(0,c.jsxs)("div",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["#",l.id]})]})]})}),(0,c.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[(0,c.jsxs)("div",{className:"card p-4",children:[(0,c.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center",children:[c.jsx("span",{className:"mr-2",children:"\uD83D\uDCCB"}),"Informa\xe7\xf5es B\xe1sicas"]}),(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsxs)("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"S\xe9rie:"}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:l.serie})]}),(0,c.jsxs)("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"RG:"}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:l.rg})]}),(0,c.jsxs)("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Ra\xe7a:"}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:l.raca})]}),(0,c.jsxs)("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Sexo:"}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:l.sexo})]}),(0,c.jsxs)("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Idade:"}),(0,c.jsxs)("span",{className:"font-medium text-gray-900 dark:text-white",children:[l.meses," meses"]})]}),l.dataNascimento&&(0,c.jsxs)("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Nascimento:"}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:new Date(l.dataNascimento).toLocaleDateString("pt-BR")})]})]})]}),(0,c.jsxs)("div",{className:"card p-4",children:[(0,c.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center",children:[c.jsx("span",{className:"mr-2",children:"\uD83D\uDCB0"}),"Resumo Financeiro"]}),(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsxs)("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Custo Total:"}),(0,c.jsxs)("span",{className:"font-bold text-red-600 dark:text-red-400",children:["R$"," ",l.custoTotal.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),l.valorVenda&&(0,c.jsxs)("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Valor de Venda:"}),(0,c.jsxs)("span",{className:"font-bold text-green-600 dark:text-green-400",children:["R$"," ",l.valorVenda.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),null!==l.valorReal&&(0,c.jsxs)("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Resultado:"}),(0,c.jsxs)("span",{className:`font-bold ${l.valorReal>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["R$"," ",l.valorReal.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),l.valorVenda&&(0,c.jsxs)("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"ROI:"}),(0,c.jsxs)("span",{className:`font-bold ${(l.valorVenda-l.custoTotal)/l.custoTotal>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[((l.valorVenda-l.custoTotal)/l.custoTotal*100).toFixed(1),"%"]})]})]})]})]}),(l.pai||l.mae||l.avoMaterno||l.receptora)&&(0,c.jsxs)("div",{className:"card p-4 mb-6",children:[(0,c.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center",children:[c.jsx("span",{className:"mr-2",children:"\uD83E\uDDEC"}),"Genealogia"]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.pai&&(0,c.jsxs)("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pai:"}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:l.pai})]}),l.mae&&(0,c.jsxs)("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"M\xe3e:"}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:l.mae})]}),l.avoMaterno&&(0,c.jsxs)("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Av\xf4 Materno:"}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:l.avoMaterno})]}),l.receptora&&(0,c.jsxs)("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Receptora:"}),c.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:l.receptora})]}),l.isFiv&&(0,c.jsxs)("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"FIV:"}),c.jsx("span",{className:"font-medium text-green-600 dark:text-green-400",children:"Sim"})]})]})]}),l.custos&&l.custos.length>0&&(0,c.jsxs)("div",{className:"card p-4",children:[(0,c.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center",children:[c.jsx("span",{className:"mr-2",children:"\uD83D\uDCCA"}),"Hist\xf3rico de Custos (",l.custos.length," ","registros)"]}),c.jsx("div",{className:"overflow-x-auto",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[c.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,c.jsxs)("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Data"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Tipo"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Valor"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Observa\xe7\xf5es"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:l.custos.map((e,a)=>(0,c.jsxs)("tr",{children:[c.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:new Date(e.data).toLocaleDateString("pt-BR")}),(0,c.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap",children:[c.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.tipo}),e.subtipo&&(0,c.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-1",children:["- ",e.subtipo]})]}),c.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:(0,c.jsxs)("span",{className:`text-sm font-bold ${e.valor>0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:[e.valor>0?"-":"+","R$"," ",Math.abs(e.valor).toLocaleString("pt-BR",{minimumFractionDigits:2})]})}),c.jsx("td",{className:"px-4 py-2 text-sm text-gray-500 dark:text-gray-400",children:e.observacoes||"-"})]},e.id||a))})]})})]})]}),c.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:(0,c.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between space-y-3 sm:space-y-0",children:[(0,c.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:[(0,c.jsxs)("button",{onClick:()=>{L(!1),d(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center font-medium",children:[c.jsx($.Z,{className:"h-4 w-4 mr-2"}),"✏️ Editar Animal"]}),(0,c.jsxs)("button",{onClick:()=>{L(!1),i(l),h(!0)},className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors flex items-center justify-center font-medium",children:[c.jsx(k.Z,{className:"h-4 w-4 mr-2"}),"\uD83D\uDCB0 Gerenciar Custos"]}),(0,c.jsxs)("button",{onClick:()=>handlePrint(l),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center font-medium",children:[c.jsx(M.Z,{className:"h-4 w-4 mr-2"}),"\uD83D\uDDA8️ Imprimir Ficha"]})]}),c.jsx("button",{onClick:()=>L(!1),className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium",children:"❌ Fechar"})]})})]})}),ee&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-purple-600 to-pink-600",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-3",children:[c.jsx(k.Z,{className:"h-8 w-8 text-white"}),(0,c.jsxs)("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-white",children:"Resumo Financeiro"}),c.jsx("p",{className:"text-purple-100",children:"An\xe1lise detalhada dos investimentos"})]})]}),c.jsx("button",{onClick:()=>ea(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors text-white text-2xl font-bold",children:"\xd7"})]}),(0,c.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[c.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl p-6 border border-green-200 dark:border-green-800",children:(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsxs)("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:["R$ ",er.reduce((e,a)=>e+a.custoTotal,0).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Total Investido"})]})}),c.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-6 border border-blue-200 dark:border-blue-800",children:(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsxs)("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:["R$ ",(er.reduce((e,a)=>e+a.custoTotal,0)/(er.length||1)).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Investimento M\xe9dio"})]})}),c.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 rounded-xl p-6 border border-orange-200 dark:border-orange-800",children:(0,c.jsxs)("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400",children:er.length}),c.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Animais Analisados"})]})})]}),(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83C\uDFC6 Top 5 Maiores Investimentos"}),c.jsx("div",{className:"space-y-3",children:[...er].sort((e,a)=>a.custoTotal-e.custoTotal).slice(0,5).map((e,a)=>(0,c.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ${0===a?"bg-yellow-500":1===a?"bg-gray-400":2===a?"bg-orange-600":"bg-blue-500"}`,children:a+1}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"font-medium text-gray-900 dark:text-white",children:[e.serie," ",e.rg]}),(0,c.jsxs)("div",{className:"text-sm text-gray-500",children:[e.raca," • ",e.sexo," • ",e.meses," meses"]})]})]}),(0,c.jsxs)("div",{className:"text-right",children:[(0,c.jsxs)("div",{className:"font-bold text-purple-600 dark:text-purple-400",children:["R$ ",e.custoTotal.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,c.jsxs)("div",{className:"text-sm text-gray-500",children:[(e.custoTotal/er.reduce((e,a)=>e+a.custoTotal,0)*100).toFixed(1),"% do total"]})]})]},e.id))})]}),(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83D\uDCCA Distribui\xe7\xe3o de Investimentos por Situa\xe7\xe3o"}),c.jsx("div",{className:"space-y-3",children:["Ativo","Vendido","Morto","Doado"].map(e=>{let a=er.filter(a=>a.situacao===e),t=a.reduce((e,a)=>e+a.custoTotal,0),s=er.reduce((e,a)=>e+a.custoTotal,0)>0?t/er.reduce((e,a)=>e+a.custoTotal,0)*100:0;return 0===a.length?null:(0,c.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:`w-4 h-4 rounded-full ${"Ativo"===e?"bg-green-500":"Vendido"===e?"bg-orange-500":"Morto"===e?"bg-red-500":"bg-blue-500"}`}),(0,c.jsxs)("div",{children:[c.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e}),(0,c.jsxs)("div",{className:"text-sm text-gray-500",children:[a.length," animais"]})]})]}),(0,c.jsxs)("div",{className:"text-right",children:[(0,c.jsxs)("div",{className:"font-bold text-gray-900 dark:text-white",children:["R$ ",t.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,c.jsxs)("div",{className:"text-sm text-gray-500",children:[s.toFixed(1),"% do total"]})]})]},e)})})]})]})]})})]})}let P=(0,i.l)(s,"default"),V=(0,i.l)(s,"getStaticProps"),O=(0,i.l)(s,"getStaticPaths"),B=(0,i.l)(s,"getServerSideProps"),J=(0,i.l)(s,"config"),L=(0,i.l)(s,"reportWebVitals"),Z=(0,i.l)(s,"unstable_getStaticProps"),G=(0,i.l)(s,"unstable_getStaticPaths"),q=(0,i.l)(s,"unstable_getStaticParams"),z=(0,i.l)(s,"unstable_getServerProps"),_=(0,i.l)(s,"unstable_getServerSideProps"),Y=new r.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/animals",pathname:"/animals",bundlePath:"",filename:""},components:{App:n.default,Document:d()},userland:s})},7641:e=>{e.exports=require("exceljs")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")}};var a=require("../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),t=a.X(0,[9209,8450,7792,1163,4205,194,2891,8523,703,7459,2940,9820,9470,6717,794,4491,7787,6949,1228],()=>__webpack_exec__(8868));module.exports=t})();