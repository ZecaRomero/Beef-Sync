"use strict";(()=>{var e={};e.id=7916,e.ids=[7916,2888,660],e.modules={6356:(e,t,a)=>{a.r(t),a.d(t,{config:()=>f,default:()=>m,getServerSideProps:()=>u,getStaticPaths:()=>g,getStaticProps:()=>h,reportWebVitals:()=>p,routeModule:()=>D,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>N,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>j});var r={};a.r(r),a.d(r,{default:()=>VendasRecentes});var s=a(7093),l=a(5244),d=a(1323),i=a(9209),n=a.n(i),c=a(9470),o=a(997),x=a(6689);function VendasRecentes(){let[e,t]=(0,x.useState)([]),[a,r]=(0,x.useState)(!0);(0,x.useEffect)(()=>{carregarVendasRecentes()},[]);let carregarVendasRecentes=async()=>{try{let e=await fetch("/api/sales-list"),a=await e.json(),r=a.slice(0,5);t(r),console.log("\uD83D\uDCCA Vendas encontradas:",r.length)}catch(e){console.error("❌ Erro ao carregar vendas:",e)}finally{r(!1)}},formatarData=e=>new Date(e).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),formatarValor=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e);return a?o.jsx("div",{className:"p-6",children:o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"\uD83D\uDD04 Carregando vendas..."})}):(0,o.jsxs)("div",{className:"p-6",children:[o.jsx("h1",{className:"text-2xl font-bold mb-6",children:"\uD83D\uDCB0 5 Vendas Mais Recentes"}),o.jsx(({vendas:e})=>{if(0===e.length)return null;let t=e.map((e,t)=>({x:t,y:e.valor||0,label:e.animal?.brinco||`Venda ${t+1}`,data:e.createdAt})).reverse(),a=Math.max(...t.map(e=>e.y)),r=Math.min(...t.map(e=>e.y)),s=a-r,calcularY=e=>0===s?150:50+(a-e)/s*200,l=t.map((e,a)=>{let r=50+a*(500/Math.max(t.length-1,1)),s=calcularY(e.y);return{x:r,y:s,...e}}),d=l.map((e,t)=>`${0===t?"M":"L"} ${e.x} ${e.y}`).join(" ");return(0,o.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700 mb-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83D\uDCC8 Gr\xe1fico de Varia\xe7\xe3o dos Pre\xe7os"}),o.jsx("div",{className:"relative",children:(0,o.jsxs)("svg",{width:"600",height:"300",className:"w-full h-auto",children:[o.jsx("defs",{children:o.jsx("pattern",{id:"grid",width:"50",height:"25",patternUnits:"userSpaceOnUse",children:o.jsx("path",{d:"M 50 0 L 0 0 0 25",fill:"none",stroke:"#e5e7eb",strokeWidth:"0.5"})})}),o.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),o.jsx("path",{d:d,fill:"none",stroke:"#3b82f6",strokeWidth:"3",className:"drop-shadow-sm"}),o.jsx("defs",{children:(0,o.jsxs)("linearGradient",{id:"areaGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:"0.3"}),o.jsx("stop",{offset:"100%",stopColor:"#3b82f6",stopOpacity:"0.05"})]})}),o.jsx("path",{d:`${d} L ${l[l.length-1]?.x||0} 250 L ${l[0]?.x||0} 250 Z`,fill:"url(#areaGradient)"}),l.map((e,t)=>(0,o.jsxs)("g",{children:[o.jsx("circle",{cx:e.x,cy:e.y,r:"6",fill:"#3b82f6",stroke:"white",strokeWidth:"2",className:"drop-shadow-sm hover:r-8 transition-all cursor-pointer"}),(0,o.jsxs)("g",{className:"opacity-0 hover:opacity-100 transition-opacity pointer-events-none",children:[o.jsx("rect",{x:e.x-40,y:e.y-35,width:"80",height:"25",fill:"#1f2937",rx:"4",className:"drop-shadow-lg"}),o.jsx("text",{x:e.x,y:e.y-18,textAnchor:"middle",fill:"white",fontSize:"12",fontWeight:"bold",children:formatarValor(e.y)})]}),o.jsx("text",{x:e.x,y:270,textAnchor:"middle",fill:"#6b7280",fontSize:"10",className:"dark:fill-gray-400",children:e.label})]},t)),(0,o.jsxs)("g",{children:[o.jsx("text",{x:"20",y:"60",fill:"#6b7280",fontSize:"12",className:"dark:fill-gray-400",children:formatarValor(a)}),o.jsx("text",{x:"20",y:"155",fill:"#6b7280",fontSize:"12",className:"dark:fill-gray-400",children:formatarValor((a+r)/2)}),o.jsx("text",{x:"20",y:"245",fill:"#6b7280",fontSize:"12",className:"dark:fill-gray-400",children:formatarValor(r)})]})]})}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,o.jsxs)("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:formatarValor(a)}),o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Maior Valor"})]}),(0,o.jsxs)("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:formatarValor(t.reduce((e,t)=>e+t.y,0)/t.length)}),o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Valor M\xe9dio"})]}),(0,o.jsxs)("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:formatarValor(r)}),o.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Menor Valor"})]})]})]})},{vendas:e}),0===e.length?(0,o.jsxs)("div",{className:"text-center py-8",children:[o.jsx("div",{className:"text-4xl mb-4",children:"\uD83D\uDCED"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-600",children:"Nenhuma venda encontrada"}),o.jsx("p",{className:"text-gray-500 mt-2",children:"Ainda n\xe3o h\xe1 vendas registradas no sistema."})]}):o.jsx("div",{className:"space-y-4",children:e.map((e,t)=>o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700",children:(0,o.jsxs)("div",{className:"flex justify-between items-start",children:[(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[o.jsx("span",{className:"text-2xl",children:e.animal?.sexo==="Macho"?"\uD83D\uDC02":"\uD83D\uDC04"}),(0,o.jsxs)("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:e.animal?.brinco||`Animal ${e.animalId}`}),(0,o.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.animal?.nome||"Nome n\xe3o informado"," • ",e.animal?.raca||"Ra\xe7a n\xe3o informada"]})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[(0,o.jsxs)("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"\uD83D\uDC64 Comprador:"}),o.jsx("p",{className:"text-gray-900 dark:text-white",children:e.comprador||"N\xe3o informado"})]}),(0,o.jsxs)("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"\uD83D\uDCC5 Data/Hora:"}),o.jsx("p",{className:"text-gray-900 dark:text-white font-mono",children:formatarData(e.createdAt)})]}),(0,o.jsxs)("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"\uD83D\uDCB3 Pagamento:"}),o.jsx("p",{className:"text-gray-900 dark:text-white",children:e.formaPagamento||"N\xe3o informado"})]})]}),e.observacoes&&(0,o.jsxs)("div",{className:"mt-3",children:[o.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"\uD83D\uDCDD Observa\xe7\xf5es:"}),o.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm mt-1",children:e.observacoes})]})]}),(0,o.jsxs)("div",{className:"text-right ml-6",children:[o.jsx("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:formatarValor(e.valor)}),(0,o.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Venda #",t+1]}),e.saleEvent&&(0,o.jsxs)("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:["\uD83D\uDCCD ",e.saleEvent.nome]})]})]})},e.id))}),o.jsx("div",{className:"mt-8 text-center",children:o.jsx("button",{onClick:carregarVendasRecentes,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium transition-colors",children:"\uD83D\uDD04 Atualizar Vendas"})})]})}let m=(0,d.l)(r,"default"),h=(0,d.l)(r,"getStaticProps"),g=(0,d.l)(r,"getStaticPaths"),u=(0,d.l)(r,"getServerSideProps"),f=(0,d.l)(r,"config"),p=(0,d.l)(r,"reportWebVitals"),j=(0,d.l)(r,"unstable_getStaticProps"),y=(0,d.l)(r,"unstable_getStaticPaths"),b=(0,d.l)(r,"unstable_getStaticParams"),v=(0,d.l)(r,"unstable_getServerProps"),N=(0,d.l)(r,"unstable_getServerSideProps"),D=new s.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/vendas-recentes",pathname:"/vendas-recentes",bundlePath:"",filename:""},components:{App:c.default,Document:n()},userland:r})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},997:e=>{e.exports=require("react/jsx-runtime")},1017:e=>{e.exports=require("path")}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[9209,8450,9470],()=>__webpack_exec__(6356));module.exports=a})();