"use strict";(()=>{var e={};e.id=3908,e.ids=[3908],e.modules={9344:e=>{e.exports=require("jsonwebtoken")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},964:(e,o,s)=>{s.r(o),s.d(o,{config:()=>u,default:()=>c,routeModule:()=>m});var a={};s.r(a),s.d(a,{default:()=>handler});var n=s(1802),r=s(7153),i=s(8781),t=s(9344),l=s.n(t);let d=[{id:1,email:"zeca@beefsync.com",password:"zeca123",name:"Zeca (Propriet\xe1rio)",role:"OWNER"},{id:2,email:"bento@fazenda.com",password:"bento123",name:"Bento (Dono)",role:"OWNER"},{id:3,email:"nilson@fazenda.com",password:"nilson123",name:"Nilson (Gerente)",role:"MANAGER"},{id:4,email:"admin@beefsync.com",password:"admin123",name:"Administrador",role:"ADMIN"}];async function handler(e,o){if(console.log("Login request received:",e.body),"POST"!==e.method)return o.status(405).json({message:"Method not allowed"});try{let{email:s,password:a}=e.body;if(!s||!a)return o.status(400).json({message:"Email e senha s\xe3o obrigat\xf3rios"});console.log("Tentando login com:",s);let n=d.find(e=>e.email.toLowerCase()===s.toLowerCase());if(!n)return console.log("Usu\xe1rio n\xe3o encontrado:",s),o.status(401).json({message:"Credenciais inv\xe1lidas"});if(n.password!==a)return console.log("Senha incorreta para:",s),o.status(401).json({message:"Credenciais inv\xe1lidas"});let r=l().sign({userId:n.id,email:n.email},process.env.JWT_SECRET||"your-super-secret-jwt-key-change-this-in-production",{expiresIn:"7d"});console.log("Login successful for:",s),o.status(200).json({token:r,user:{id:n.id,email:n.email,name:n.name,role:n.role}})}catch(e){console.error("Login error details:",e),o.status(500).json({message:"Erro interno do servidor",error:e.message})}}let c=(0,i.l)(a,"default"),u=(0,i.l)(a,"config"),m=new n.PagesAPIRouteModule({definition:{kind:r.x.PAGES_API,page:"/api/auth/login",pathname:"/api/auth/login",bundlePath:"",filename:""},userland:a})}};var o=require("../../../webpack-api-runtime.js");o.C(e);var __webpack_exec__=e=>o(o.s=e),s=o.X(0,[4222],()=>__webpack_exec__(964));module.exports=s})();