"use strict";(()=>{var e={};e.id=9130,e.ids=[9130],e.modules={3524:e=>{e.exports=require("@prisma/client")},9344:e=>{e.exports=require("jsonwebtoken")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},9929:(e,a,t)=>{t.r(a),t.d(a,{config:()=>c,default:()=>l,routeModule:()=>x});var r={};t.r(r),t.d(r,{default:()=>u});var s=t(1802),o=t(7153),n=t(6249),i=t(7864),d=t(9823);async function handler(e,a){let{method:t,query:r}=e,{id:s}=r,o=e.user.id;switch(t){case"PUT":try{let{dataCobertura:t,dataPrevParto:r,dataRealParto:n,touroId:d,status:u,observacoes:l}=e.body,c=await i._.gestation.findFirst({where:{id:s,animal:{userId:o}}});if(!c)return a.status(404).json({message:"Gesta\xe7\xe3o n\xe3o encontrada"});let x=await i._.gestation.update({where:{id:s},data:{dataCobertura:t?new Date(t):c.dataCobertura,dataPrevParto:r?new Date(r):c.dataPrevParto,dataRealParto:n?new Date(n):c.dataRealParto,touroId:d||c.touroId,status:u||c.status,observacoes:l},include:{animal:{select:{id:!0,brinco:!0,nome:!0,raca:!0}}}});a.status(200).json(x)}catch(e){console.error("Update gestation error:",e),a.status(500).json({message:"Erro ao atualizar gesta\xe7\xe3o"})}break;case"DELETE":try{let e=await i._.gestation.findFirst({where:{id:s,animal:{userId:o}}});if(!e)return a.status(404).json({message:"Gesta\xe7\xe3o n\xe3o encontrada"});await i._.gestation.delete({where:{id:s}}),a.status(200).json({message:"Gesta\xe7\xe3o removida com sucesso"})}catch(e){console.error("Delete gestation error:",e),a.status(500).json({message:"Erro ao remover gesta\xe7\xe3o"})}break;default:a.setHeader("Allow",["PUT","DELETE"]),a.status(405).end(`Method ${t} Not Allowed`)}}let u=(0,d.QO)(handler),l=(0,n.l)(r,"default"),c=(0,n.l)(r,"config"),x=new s.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/gestations/[id]",pathname:"/api/gestations/[id]",bundlePath:"",filename:""},userland:r})}};var a=require("../../../webpack-api-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),t=a.X(0,[4222,9823],()=>__webpack_exec__(9929));module.exports=t})();