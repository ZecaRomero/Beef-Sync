"use strict";(()=>{var e={};e.id=9045,e.ids=[9045],e.modules={3524:e=>{e.exports=require("@prisma/client")},9344:e=>{e.exports=require("jsonwebtoken")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},795:(e,a,t)=>{t.r(a),t.d(a,{config:()=>u,default:()=>c,routeModule:()=>m});var r={};t.r(r),t.d(r,{default:()=>l});var s=t(1802),o=t(7153),n=t(8781),i=t(7864),d=t(9823);async function handler(e,a){let{method:t}=e,r=e.user.id;switch(t){case"GET":try{let e=await i._.gestation.findMany({include:{animal:{where:{userId:r},select:{id:!0,brinco:!0,nome:!0,raca:!0}}},where:{animal:{userId:r}},orderBy:{createdAt:"desc"}});a.status(200).json(e)}catch(e){console.error("Get gestations error:",e),a.status(500).json({message:"Erro ao buscar gesta\xe7\xf5es"})}break;case"POST":try{let{animalId:t,dataCobertura:s,dataPrevParto:o,touroId:n,observacoes:d}=e.body;if(!t||!s||!o)return a.status(400).json({message:"Animal, data de cobertura e data prevista de parto s\xe3o obrigat\xf3rios"});let l=await i._.animal.findFirst({where:{id:t,userId:r}});if(!l)return a.status(404).json({message:"Animal n\xe3o encontrado"});let c=await i._.gestation.create({data:{animalId:t,dataCobertura:new Date(s),dataPrevParto:new Date(o),touroId:n,observacoes:d},include:{animal:{select:{id:!0,brinco:!0,nome:!0,raca:!0}}}});a.status(201).json(c)}catch(e){console.error("Create gestation error:",e),a.status(500).json({message:"Erro ao criar gesta\xe7\xe3o"})}break;default:a.setHeader("Allow",["GET","POST"]),a.status(405).end(`Method ${t} Not Allowed`)}}let l=(0,d.QO)(handler),c=(0,n.l)(r,"default"),u=(0,n.l)(r,"config"),m=new s.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/gestations",pathname:"/api/gestations",bundlePath:"",filename:""},userland:r})}};var a=require("../../webpack-api-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),t=a.X(0,[4222,9823],()=>__webpack_exec__(795));module.exports=t})();