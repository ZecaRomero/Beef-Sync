"use strict";(()=>{var a={};a.id=352,a.ids=[352],a.modules={3524:a=>{a.exports=require("@prisma/client")},145:a=>{a.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},8041:(a,e,s)=>{s.r(e),s.d(e,{config:()=>d,default:()=>o,routeModule:()=>c});var l={};s.r(l),s.d(l,{default:()=>handler});var t=s(1802),n=s(7153),r=s(6249),i=s(7864);async function handler(a,e){try{let a=await i._.sale.findMany({include:{animal:{select:{id:!0,brinco:!0,nome:!0,raca:!0,sexo:!0}}},orderBy:{dataVenda:"desc"},take:50}),s=await i._.animal.findMany({select:{id:!0,brinco:!0,nome:!0,raca:!0,sexo:!0,status:!0},where:{status:"ATIVO"},take:100}),l=a.length>0?a.map(a=>({date:a.dataVenda,vendas:1,valor:a.valorVenda||0,categoria:a.animal?.sexo==="MACHO"?"Boi Gordo":"Vaca",regiao:a.estadoComprador||"SP",animal:{id:a.animal?.brinco||a.animalId,nome:a.animal?.nome,raca:a.animal?.raca,sexo:a.animal?.sexo}})):[];e.status(200).json({sales:l,animals:s,hasRealSales:a.length>0,totalAnimals:s.length,totalSales:a.length})}catch(a){console.error("Erro ao buscar dados para BI:",a),e.status(500).json({message:"Erro ao buscar dados",sales:[],animals:[],hasRealSales:!1,totalAnimals:0,totalSales:0})}}let o=(0,r.l)(l,"default"),d=(0,r.l)(l,"config"),c=new t.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/sales-data",pathname:"/api/sales-data",bundlePath:"",filename:""},userland:l})},7864:(a,e,s)=>{s.d(e,{_:()=>n});var l=s(3524);let t=globalThis,n=t.prisma||new l.PrismaClient}};var e=require("../../webpack-api-runtime.js");e.C(a);var __webpack_exec__=a=>e(e.s=a),s=e.X(0,[4222],()=>__webpack_exec__(8041));module.exports=s})();