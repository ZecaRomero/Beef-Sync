"use strict";(()=>{var e={};e.id=7650,e.ids=[7650],e.modules={3524:e=>{e.exports=require("@prisma/client")},9344:e=>{e.exports=require("jsonwebtoken")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},2234:(e,a,t)=>{t.r(a),t.d(a,{config:()=>p,default:()=>u,routeModule:()=>c});var r={};t.r(r),t.d(r,{default:()=>l});var s=t(1802),i=t(7153),o=t(6249),n=t(7864),d=t(9823);async function handler(e,a){let{method:t}=e,r=e.user.id;if("POST"===t)try{let{animalId:t,peso:s,data:i}=e.body;if(!t||!s||!i)return a.status(400).json({message:"Animal, peso e data s\xe3o obrigat\xf3rios"});let o=await n._.animal.findFirst({where:{id:t,userId:r}});if(!o)return a.status(404).json({message:"Animal n\xe3o encontrado"});let d=await n._.weight.create({data:{animalId:t,peso:parseFloat(s),data:new Date(i)}});await n._.animal.update({where:{id:t},data:{peso:parseFloat(s)}}),a.status(201).json(d)}catch(e){console.error("Create weight error:",e),a.status(500).json({message:"Erro ao registrar peso"})}else a.setHeader("Allow",["POST"]),a.status(405).end(`Method ${t} Not Allowed`)}let l=(0,d.QO)(handler),u=(0,o.l)(r,"default"),p=(0,o.l)(r,"config"),c=new s.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/weights",pathname:"/api/weights",bundlePath:"",filename:""},userland:r})}};var a=require("../../webpack-api-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),t=a.X(0,[4222,9823],()=>__webpack_exec__(2234));module.exports=t})();