"use strict";(()=>{var e={};e.id=6555,e.ids=[6555,2888,660],e.modules={1507:(e,a,t)=>{t.r(a),t.d(a,{config:()=>p,default:()=>u,getServerSideProps:()=>v,getStaticPaths:()=>b,getStaticProps:()=>h,reportWebVitals:()=>j,routeModule:()=>C,unstable_getServerProps:()=>D,unstable_getServerSideProps:()=>f,unstable_getStaticParams:()=>k,unstable_getStaticPaths:()=>N,unstable_getStaticProps:()=>y});var r={};t.r(r),t.d(r,{default:()=>InvitePage});var s=t(7093),l=t(5244),d=t(1323),i=t(9209),c=t.n(i),n=t(9470),x=t(997),o=t(1163),m=t(6689),g=t(2807);function PublicDashboard({inviteToken:e}){let[a,t]=(0,m.useState)(null),[r,s]=(0,m.useState)(!0),[l,d]=(0,m.useState)([]),[i,c]=(0,m.useState)("sales");(0,m.useEffect)(()=>{loadDashboard();let e=setInterval(()=>{addLiveUpdate()},3e4);return()=>clearInterval(e)},[e]);let loadDashboard=async()=>{try{let a=await g.X.getPublicDashboard(e);t(a),d(a.liveUpdates)}catch(e){console.error("Erro ao carregar dashboard:",e)}finally{s(!1)}},addLiveUpdate=()=>{let e=[{type:"sale",message:"Nova venda: Garrote #5555 por R$ 4.200",icon:"\uD83D\uDCB0"},{type:"price_alert",message:"Pre\xe7o da arroba subiu R$ 2,50",icon:"\uD83D\uDCC8"},{type:"market",message:"Mercado em alta - momento favor\xe1vel",icon:"\uD83D\uDE80"},{type:"ranking",message:"Seu rebanho est\xe1 15% acima da m\xe9dia",icon:"\uD83C\uDFC6"}],a=e[Math.floor(Math.random()*e.length)],t={...a,timestamp:new Date().toISOString(),id:Date.now()};d(e=>[t,...e.slice(0,9)])},formatCurrency=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),formatDateTime=e=>new Date(e).toLocaleString("pt-BR");return r?x.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,x.jsxs)("div",{className:"text-center",children:[x.jsx("div",{className:"animate-spin text-6xl mb-4",children:"\uD83D\uDC04"}),x.jsx("div",{className:"text-xl text-gray-600 dark:text-gray-400",children:"Carregando dashboard..."})]})}):a?(0,x.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[x.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:x.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:"text-3xl",children:"\uD83D\uDC04"}),(0,x.jsxs)("div",{children:[x.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.farmName}),(0,x.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Propriet\xe1rio: ",a.owner," • ",a.totalAnimals," animais"]})]})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[x.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),x.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ao vivo"})]})]})})}),x.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,x.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[x.jsx("div",{className:"lg:col-span-1",children:(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-700 sticky top-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83D\uDD34 Atualiza\xe7\xf5es ao Vivo"}),x.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:l.map(e=>x.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border-l-4 border-blue-500",children:(0,x.jsxs)("div",{className:"flex items-start space-x-2",children:[x.jsx("span",{className:"text-lg",children:e.icon||"\uD83D\uDCE2"}),(0,x.jsxs)("div",{className:"flex-1",children:[x.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:e.message}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:formatDateTime(e.timestamp)})]})]})},e.id||e.timestamp))})]})}),x.jsx("div",{className:"lg:col-span-3",children:(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:[x.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:x.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"sales",label:"Vendas Recentes",icon:"\uD83D\uDCB0"},{id:"rankings",label:"Rankings",icon:"\uD83C\uDFC6"},{id:"market",label:"vs Mercado",icon:"\uD83D\uDCCA"}].map(e=>(0,x.jsxs)("button",{onClick:()=>c(e.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${i===e.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:[x.jsx("span",{children:e.icon}),x.jsx("span",{children:e.label})]},e.id))})}),(0,x.jsxs)("div",{className:"p-6",children:["sales"===i&&(0,x.jsxs)("div",{children:[x.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCB0 Vendas Recentes"}),x.jsx("div",{className:"space-y-4",children:a.recentSales.map(e=>x.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:"text-2xl",children:"\uD83D\uDC04"}),(0,x.jsxs)("div",{children:[x.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:e.animal}),(0,x.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.weight,"kg • ",e.buyer]}),x.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:formatDateTime(e.date)})]})]}),(0,x.jsxs)("div",{className:"text-right",children:[x.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:formatCurrency(e.price)}),(0,x.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Lucro: ",formatCurrency(e.profit)]}),x.jsx("div",{className:"text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded-full",children:e.category})]})]})},e.id))})]}),"rankings"===i&&(0,x.jsxs)("div",{children:[x.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"\uD83C\uDFC6 Rankings e Performance"}),(0,x.jsxs)("div",{className:"mb-6",children:[x.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"\uD83E\uDD47 Top Performers"}),x.jsx("div",{className:"space-y-2",children:a.rankings.bestPerformers.map((e,a)=>(0,x.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:"text-2xl",children:0===a?"\uD83E\uDD47":1===a?"\uD83E\uDD48":"\uD83E\uDD49"}),(0,x.jsxs)("div",{children:[x.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e.animal}),(0,x.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["ROI: ",e.roi,"%"]})]})]}),x.jsx("div",{className:"text-right",children:x.jsx("div",{className:"font-bold text-green-600 dark:text-green-400",children:formatCurrency(e.value)})})]},a))})]}),(0,x.jsxs)("div",{children:[x.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"\uD83D\uDCCA Por Categoria"}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(a.rankings.byCategory).map(([e,a])=>(0,x.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[x.jsx("div",{className:"text-2xl mb-2",children:"Terminados"===e?"\uD83D\uDC04":"Recria"===e?"\uD83D\uDC02":"\uD83D\uDC2E"}),x.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:e}),(0,x.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[a.count," animais"]}),x.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400 mt-2",children:formatCurrency(a.avgPrice)}),x.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Pre\xe7o m\xe9dio"})]},e))})]})]}),"market"===i&&(0,x.jsxs)("div",{children:[x.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCCA Performance vs Mercado"}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,x.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 text-center",children:[(0,x.jsxs)("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[a.marketComparison.aboveMarket,"%"]}),x.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"\uD83D\uDCC8 Acima do Mercado"})]}),(0,x.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 text-center",children:[(0,x.jsxs)("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:[a.marketComparison.atMarket,"%"]}),x.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"➡️ No Mercado"})]}),(0,x.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 text-center",children:[(0,x.jsxs)("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:[a.marketComparison.belowMarket,"%"]}),x.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"\uD83D\uDCC9 Abaixo do Mercado"})]}),(0,x.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 text-center",children:[(0,x.jsxs)("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:["+",a.marketComparison.avgPremium,"%"]}),x.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"\uD83C\uDFAF Pr\xeamio M\xe9dio"})]})]}),(0,x.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 rounded-lg p-6 text-center",children:[x.jsx("div",{className:"text-4xl mb-2",children:"\uD83C\uDFC6"}),x.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Excelente Performance!"}),(0,x.jsxs)("div",{className:"text-gray-600 dark:text-gray-400",children:["Seu rebanho est\xe1 performando ",a.marketComparison.avgPremium,"% acima da m\xe9dia do mercado"]})]})]})]})]})})]})})]}):x.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,x.jsxs)("div",{className:"text-center",children:[x.jsx("div",{className:"text-6xl mb-4",children:"❌"}),x.jsx("div",{className:"text-xl text-gray-600 dark:text-gray-400",children:"Convite inv\xe1lido ou expirado"})]})})}function InvitePage(){let e=(0,o.useRouter)(),{token:a}=e.query,[t,r]=(0,m.useState)("loading"),[s,l]=(0,m.useState)(null);(0,m.useEffect)(()=>{a&&handleInviteAcceptance()},[a]);let handleInviteAcceptance=async()=>{try{let e=await g.X.acceptInvite(a);l(e),r("accepted")}catch(e){console.error("Erro ao aceitar convite:",e),r("invalid")}};return"loading"===t?x.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,x.jsxs)("div",{className:"text-center",children:[x.jsx("div",{className:"animate-spin text-6xl mb-4",children:"\uD83D\uDC04"}),x.jsx("div",{className:"text-xl text-gray-600 dark:text-gray-400",children:"Verificando convite..."})]})}):"invalid"===t?x.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:(0,x.jsxs)("div",{className:"max-w-md mx-auto text-center p-8",children:[x.jsx("div",{className:"text-6xl mb-4",children:"❌"}),x.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Convite Inv\xe1lido"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Este convite pode ter expirado ou j\xe1 foi usado. Entre em contato com quem te convidou para obter um novo link."}),x.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[x.jsx("span",{className:"text-yellow-600 dark:text-yellow-400",children:"⚠️"}),(0,x.jsxs)("div",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[x.jsx("strong",{children:"Dica:"})," Verifique se o link est\xe1 completo e tente novamente."]})]})})]})}):"accepted"===t?(0,x.jsxs)("div",{children:[x.jsx("div",{className:"bg-green-500 text-white p-4 text-center",children:x.jsx("div",{className:"max-w-4xl mx-auto",children:(0,x.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[x.jsx("span",{className:"text-2xl",children:"\uD83C\uDF89"}),x.jsx("span",{className:"font-semibold",children:"Bem-vindo! Convite aceito com sucesso."}),x.jsx("span",{className:"text-2xl",children:"\uD83D\uDC04"})]})})}),x.jsx(PublicDashboard,{inviteToken:a})]}):null}let u=(0,d.l)(r,"default"),h=(0,d.l)(r,"getStaticProps"),b=(0,d.l)(r,"getStaticPaths"),v=(0,d.l)(r,"getServerSideProps"),p=(0,d.l)(r,"config"),j=(0,d.l)(r,"reportWebVitals"),y=(0,d.l)(r,"unstable_getStaticProps"),N=(0,d.l)(r,"unstable_getStaticPaths"),k=(0,d.l)(r,"unstable_getStaticParams"),D=(0,d.l)(r,"unstable_getServerProps"),f=(0,d.l)(r,"unstable_getServerSideProps"),C=new s.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/invite/[token]",pathname:"/invite/[token]",bundlePath:"",filename:""},components:{App:n.default,Document:c()},userland:r})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")}};var a=require("../../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),t=a.X(0,[9209,8450,7792,1163,9470,2807],()=>__webpack_exec__(1507));module.exports=t})();