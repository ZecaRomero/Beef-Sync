"use strict";(()=>{var e={};e.id=5405,e.ids=[5405,2888,660],e.modules={4257:(e,a,t)=>{t.r(a),t.d(a,{config:()=>q,default:()=>z,getServerSideProps:()=>_,getStaticPaths:()=>J,getStaticProps:()=>Z,reportWebVitals:()=>W,routeModule:()=>K,unstable_getServerProps:()=>H,unstable_getServerSideProps:()=>X,unstable_getStaticParams:()=>Q,unstable_getStaticPaths:()=>Y,unstable_getStaticProps:()=>U});var r={};t.r(r);var s={};t.r(s),t.d(s,{default:()=>Dashboard});var l=t(7093),i=t(5244),d=t(1323),n=t(9209),o=t.n(n),c=t(9597),x=t(997),m=t(6689),g=t(1163),h=t(7787);function MetricsCards({timeRange:e,onReportClick:a}){let[t,r]=(0,m.useState)(null),[s,l]=(0,m.useState)({animals:[],sales:[],loading:!0});(0,m.useEffect)(()=>{loadRealData()},[]);let loadRealData=async()=>{try{l({animals:[],sales:[],loading:!1})}catch(e){console.error("Erro ao carregar dados reais:",e),l({animals:[],sales:[],loading:!1})}},i=(()=>{if(s.loading)return{totalInvested:0,totalRevenue:0,totalProfit:0,avgROI:0,activeAnimals:0,soldAnimals:0,conversionRate:0};let{animals:e,sales:a}=s,t=e.reduce((e,a)=>{let t=a.costs||[],r=t.filter(e=>"VENDA"!==e.tipo).reduce((e,a)=>e+a.valor,0);return e+r},0),r=a.reduce((e,a)=>e+a.valor,0),l=0;a.forEach(a=>{let t=e.find(e=>e.id===a.animalId);if(t){let e=t.costs||[],r=e.filter(e=>"VENDA"!==e.tipo).reduce((e,a)=>e+a.valor,0),s=a.valor-r-(a.comissao||0)-(a.taxas||0);l+=s}});let i=0,d=0;a.forEach(a=>{let t=e.find(e=>e.id===a.animalId);if(t){let e=t.costs||[],r=e.filter(e=>"VENDA"!==e.tipo).reduce((e,a)=>e+a.valor,0);if(r>0){let e=a.valor-r-(a.comissao||0)-(a.taxas||0);i+=e/r*100,d+=1}}});let n=d>0?i/d:0,o=e.filter(e=>"ATIVO"===e.status).length,c=a.length,x=e.length>0?c/e.length*100:0;return{totalInvested:t,totalRevenue:r,totalProfit:l,avgROI:n,activeAnimals:o,soldAnimals:c,conversionRate:x}})(),d=[{id:"invested",title:"Total Investido",value:`R$ ${i.totalInvested.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,change:s.loading?"...":"Atual",trend:"stable",icon:"\uD83D\uDCB0",color:"from-red-500 to-pink-600",bgColor:"bg-red-50 dark:bg-red-900/20",description:"Investimento total em todos os animais",details:`${s.animals.length} animais cadastrados`},{id:"revenue",title:"Receita Total",value:`R$ ${i.totalRevenue.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,change:s.loading?"...":i.soldAnimals>0?"Com vendas":"Sem vendas",trend:i.soldAnimals>0?"up":"stable",icon:"\uD83D\uDCC8",color:"from-green-500 to-emerald-600",bgColor:"bg-green-50 dark:bg-green-900/20",description:"Receita com vendas realizadas",details:`${i.soldAnimals} animais vendidos`},{id:"profit",title:"Lucro L\xedquido",value:`R$ ${i.totalProfit.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,change:s.loading?"...":i.totalProfit>=0?"Positivo":"Negativo",trend:i.totalProfit>=0?"up":"down",icon:i.totalProfit>=0?"\uD83C\uDFAF":"\uD83D\uDCC9",color:i.totalProfit>=0?"from-blue-500 to-cyan-600":"from-red-500 to-orange-600",bgColor:i.totalProfit>=0?"bg-blue-50 dark:bg-blue-900/20":"bg-red-50 dark:bg-red-900/20",description:"Lucro l\xedquido das opera\xe7\xf5es",details:`Margem: ${i.totalRevenue>0?(i.totalProfit/i.totalRevenue*100).toFixed(1):0}%`},{id:"roi",title:"ROI M\xe9dio",value:`${i.avgROI.toFixed(1)}%`,change:s.loading?"...":i.avgROI>0?"Positivo":"Neutro",trend:i.avgROI>0?"up":"stable",icon:"\uD83D\uDCCA",color:"from-purple-500 to-indigo-600",bgColor:"bg-purple-50 dark:bg-purple-900/20",description:"Retorno m\xe9dio sobre investimento",details:`Taxa de convers\xe3o: ${i.conversionRate.toFixed(1)}%`},{id:"active",title:"Animais Ativos",value:i.activeAnimals.toString(),change:s.loading?"...":"Atual",trend:"stable",icon:"\uD83D\uDC04",color:"from-orange-500 to-yellow-600",bgColor:"bg-orange-50 dark:bg-orange-900/20",description:"Animais ativos no rebanho",details:`${s.animals.length>0?(i.activeAnimals/s.animals.length*100).toFixed(1):0}% do rebanho`},{id:"sold",title:"Animais Vendidos",value:i.soldAnimals.toString(),change:i.soldAnimals>0?"+1":"0",trend:i.soldAnimals>0?"up":"stable",icon:"\uD83D\uDCB0",color:"from-emerald-500 to-teal-600",bgColor:"bg-emerald-50 dark:bg-emerald-900/20",description:"Animais vendidos no per\xedodo",details:`Taxa de convers\xe3o: ${i.conversionRate.toFixed(1)}%`},{id:"performance",title:"Performance",value:i.avgROI>15?"Excelente":i.avgROI>5?"Boa":"Regular",change:s.loading?"...":"Atual",trend:"stable",icon:i.avgROI>15?"\uD83C\uDFC6":i.avgROI>5?"⭐":"\uD83D\uDCC8",color:"from-teal-500 to-green-600",bgColor:"bg-teal-50 dark:bg-teal-900/20",description:"Avalia\xe7\xe3o geral do desempenho",details:"Meta: ROI > 20%"}];return x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map((e,s)=>(0,x.jsxs)("div",{onClick:()=>a(e.id),onMouseEnter:()=>r(e.id),onMouseLeave:()=>r(null),className:`
            relative overflow-hidden rounded-2xl p-6 cursor-pointer transition-all duration-500 transform
            ${t===e.id?"scale-105 shadow-2xl":"hover:scale-102 shadow-lg"}
            bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700
            hover:border-transparent
          `,style:{animationDelay:`${100*s}ms`},children:[x.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${e.color} opacity-5`}),x.jsx("div",{className:`
            absolute inset-0 bg-gradient-to-br ${e.color} opacity-0 transition-opacity duration-300
            ${t===e.id?"opacity-10":""}
          `}),(0,x.jsxs)("div",{className:"relative z-10",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("div",{className:`p-3 rounded-xl ${e.bgColor}`,children:x.jsx("span",{className:"text-2xl",children:e.icon})}),(0,x.jsxs)("div",{className:`
                px-3 py-1 rounded-full text-xs font-semibold flex items-center
                ${"up"===e.trend?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}
              `,children:[x.jsx("span",{className:"mr-1",children:"up"===e.trend?"↗️":"↘️"}),e.change]})]}),(0,x.jsxs)("div",{className:"space-y-2",children:[x.jsx("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:e.title}),x.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e.value}),x.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.description}),x.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:e.details})]}),x.jsx("div",{className:"mt-4",children:x.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:x.jsx("div",{className:`bg-gradient-to-r ${e.color} h-2 rounded-full transition-all duration-1000`,style:{width:`${Math.min(100,5*Math.abs(parseFloat(e.change)))}%`}})})}),x.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity",children:x.jsx("div",{className:"w-6 h-6 rounded-full bg-white dark:bg-gray-800 shadow-lg flex items-center justify-center",children:x.jsx("span",{className:"text-xs",children:"\uD83D\uDCCA"})})})]}),x.jsx("div",{className:`
            absolute inset-0 rounded-2xl border-2 border-transparent
            ${t===e.id?`bg-gradient-to-r ${e.color} p-[2px]`:""}
          `,children:t===e.id&&x.jsx("div",{className:"w-full h-full rounded-2xl bg-white dark:bg-gray-800"})})]},e.id))})}function AdvancedCharts({timeRange:e}){let[a,t]=(0,m.useState)("costs"),{custosPorTipo:r,animaisPorRaca:s,roiPorMes:l,custosTemporais:i}={custosPorTipo:{},animaisPorRaca:{},roiPorMes:{Jan:15.2,Fev:18.7,Mar:22.1,Abr:19.8,Mai:25.3,Jun:28.9,Jul:31.2,Ago:29.5,Set:33.1,Out:35.7,Nov:38.2,Dez:41.5},custosTemporais:{Jan:12500,Fev:15800,Mar:18200,Abr:16900,Mai:21300,Jun:24700,Jul:27100,Ago:25800,Set:29400,Out:32100,Nov:34600,Dez:37200}},d=[{id:"costs",label:"\uD83D\uDCB0 Custos por Tipo",data:r},{id:"breeds",label:"\uD83D\uDC04 Animais por Ra\xe7a",data:s},{id:"roi",label:"\uD83D\uDCC8 ROI Mensal",data:l},{id:"timeline",label:"\uD83D\uDCCA Custos Temporais",data:i}];return(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,x.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center",children:[x.jsx("span",{className:"mr-3 text-2xl",children:"\uD83D\uDCCA"}),"An\xe1lises Avan\xe7adas"]}),(0,x.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Per\xedodo: ",e]})]}),x.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:d.map(e=>x.jsx("button",{onClick:()=>t(e.id),className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${a===e.id?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg transform scale-105":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:e.label},e.id))}),x.jsx("div",{className:"min-h-96",children:"roi"===a||"timeline"===a?(e=>{let t=Object.entries(e),r=Math.max(...Object.values(e)),s=Math.min(...Object.values(e));return(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{className:"text-center p-4 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 rounded-lg",children:[x.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"roi"===a?`${(Object.values(e).reduce((e,a)=>e+a,0)/t.length).toFixed(1)}%`:"Tend\xeancia"}),x.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"roi"===a?"ROI M\xe9dio Anual":"Evolu\xe7\xe3o Temporal"})]}),x.jsx("div",{className:"relative h-64 bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:(0,x.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 400 200",children:[[0,1,2,3,4].map(e=>x.jsx("line",{x1:"0",y1:40*e,x2:"400",y2:40*e,stroke:"currentColor",strokeWidth:"0.5",className:"text-gray-300 dark:text-gray-600"},e)),x.jsx("polyline",{fill:"none",stroke:"url(#gradient)",strokeWidth:"3",points:t.map(([,e],a)=>{let l=a/(t.length-1)*400;return`${l},${200-(e-s)/(r-s)*180}`}).join(" ")}),t.map(([e,l],i)=>{let d=i/(t.length-1)*400,n=200-(l-s)/(r-s)*180;return(0,x.jsxs)("g",{children:[x.jsx("circle",{cx:d,cy:n,r:"4",fill:"url(#gradient)",className:"hover:r-6 transition-all cursor-pointer"}),x.jsx("text",{x:d,y:n-10,textAnchor:"middle",className:"text-xs fill-current text-gray-600 dark:text-gray-400",children:"roi"===a?`${l}%`:`R$ ${(l/1e3).toFixed(0)}k`}),x.jsx("text",{x:d,y:190,textAnchor:"middle",className:"text-xs fill-current text-gray-500 dark:text-gray-500",children:e})]},i)}),x.jsx("defs",{children:(0,x.jsxs)("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[x.jsx("stop",{offset:"0%",stopColor:"#3B82F6"}),x.jsx("stop",{offset:"50%",stopColor:"#8B5CF6"}),x.jsx("stop",{offset:"100%",stopColor:"#06B6D4"})]})})]})})]})})(d.find(e=>e.id===a)?.data):((e,a)=>{let t=Math.max(...Object.values(e)),r=Object.values(e).reduce((e,a)=>e+a,0),s={Nascimento:"from-green-400 to-green-600",DNA:"from-purple-400 to-purple-600",Alimentação:"from-orange-400 to-orange-600",Medicamentos:"from-red-400 to-red-600",Veterinários:"from-blue-400 to-blue-600",Aquisição:"from-indigo-400 to-indigo-600",Nelore:"from-blue-400 to-blue-600",Brahman:"from-red-400 to-red-600",Gir:"from-green-400 to-green-600",Receptora:"from-purple-400 to-purple-600"},l=Object.entries(e).sort(([,e],[,a])=>a-e);return(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{className:"text-center p-4 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg",children:[x.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"costs"===a||"timeline"===a?`R$ ${r.toLocaleString("pt-BR",{minimumFractionDigits:2})}`:r.toString()}),(0,x.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["costs"===a&&"Total de Custos","breeds"===a&&"Total de Animais","roi"===a&&"ROI M\xe9dio Anual","timeline"===a&&"Custos Acumulados"]})]}),x.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:l.map(([e,r],l)=>{let i=r/t*100,d=s[e]||"from-gray-400 to-gray-600";return(0,x.jsxs)("div",{className:"p-4 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-all duration-300",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[x.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:e}),(0,x.jsxs)("div",{className:"text-right",children:[x.jsx("div",{className:"font-bold text-gray-900 dark:text-white",children:"costs"===a||"timeline"===a?`R$ ${r.toLocaleString("pt-BR",{minimumFractionDigits:2})}`:"roi"===a?`${r}%`:r.toString()}),(0,x.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["#",l+1]})]})]}),(0,x.jsxs)("div",{className:"relative",children:[x.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:x.jsx("div",{className:`bg-gradient-to-r ${d} h-3 rounded-full transition-all duration-1000 ease-out relative overflow-hidden`,style:{width:`${i}%`},children:x.jsx("div",{className:"absolute inset-0 bg-white opacity-20 animate-pulse"})})}),(0,x.jsxs)("div",{className:"absolute -top-6 right-0 text-xs font-medium text-gray-600 dark:text-gray-400",children:[i.toFixed(1),"%"]})]})]},e)})})]})})(d.find(e=>e.id===a)?.data,a)}),(0,x.jsxs)("div",{className:"mt-6 p-4 bg-gradient-to-r from-gray-50 to-blue-50 dark:from-gray-800 dark:to-blue-900/20 rounded-lg",children:[(0,x.jsxs)("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2 flex items-center",children:[x.jsx("span",{className:"mr-2",children:"\uD83D\uDCA1"}),"Insights Inteligentes"]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:["costs"===a&&(0,x.jsxs)(x.Fragment,{children:[x.jsx("div",{children:"\uD83D\uDCC8 Alimenta\xe7\xe3o representa o maior custo operacional"}),x.jsx("div",{children:"\uD83C\uDFAF Foque na otimiza\xe7\xe3o dos 3 maiores custos"})]}),"breeds"===a&&(0,x.jsxs)(x.Fragment,{children:[x.jsx("div",{children:"\uD83D\uDC04 Nelore \xe9 a ra\xe7a predominante no rebanho"}),x.jsx("div",{children:"\uD83D\uDCCA Diversifica\xe7\xe3o racial est\xe1 equilibrada"})]}),"roi"===a&&(0,x.jsxs)(x.Fragment,{children:[x.jsx("div",{children:"\uD83D\uDCC8 ROI mostra tend\xeancia crescente no ano"}),x.jsx("div",{children:"\uD83C\uDFAF Meta de 20% de ROI est\xe1 sendo atingida"})]}),"timeline"===a&&(0,x.jsxs)(x.Fragment,{children:[x.jsx("div",{children:"\uD83D\uDCCA Custos crescem consistentemente"}),x.jsx("div",{children:"⚡ Pico de custos no final do ano"})]})]})]})]})}function ReportsModal({reportType:e,onClose:a,timeRange:t}){let[r,s]=(0,m.useState)("overview"),[l,i]=(0,m.useState)("excel"),[d,n]=(0,m.useState)([]),[o,c]=(0,m.useState)([]),[g,h]=(0,m.useState)(!0);(0,m.useEffect)(()=>{loadRealData()},[e,t]);let loadRealData=async()=>{try{h(!0);let e=await fetch("/api/sales-list"),a=await e.json(),t=await fetch("/api/animals-list"),r=await t.json();console.log("\uD83D\uDCCA Vendas carregadas:",a.length),console.log("\uD83D\uDC04 Animais carregados:",r.length),n(a),c(r)}catch(e){console.error("Erro ao carregar dados:",e)}finally{h(!1)}},u=(()=>{if(g)return{title:"⏳ Carregando...",description:"Buscando dados reais do sistema",data:[],summary:{}};switch(e){case"invested":let a=o.filter(e=>"ATIVO"===e.status),t=a.map(e=>({animal:`${e.serie||""} ${e.rg||e.brinco}`,raca:e.raca,situacao:e.situacao||e.status,investimento:e.custoTotal||0,idade:e.meses||0,custoMensal:e.meses>0?(e.custoTotal||0)/e.meses:0})).sort((e,a)=>a.investimento-e.investimento),r=t.reduce((e,a)=>e+a.investimento,0);return{title:"\uD83D\uDCB0 Relat\xf3rio de Investimentos",description:"An\xe1lise detalhada dos investimentos realizados",data:t,summary:{total:r,average:t.length>0?r/t.length:0,highest:t.length>0?Math.max(...t.map(e=>e.investimento)):0,lowest:t.length>0?Math.min(...t.map(e=>e.investimento)):0}};case"revenue":let s=d.map(e=>({animal:`${e.animal?.serie||""} ${e.animal?.rg||e.animal?.brinco||e.animalId}`,raca:e.animal?.raca||"N\xe3o informado",investimento:e.animal?.custoTotal||0,receita:parseFloat(e.valorVenda)||0,lucro:(parseFloat(e.valorVenda)||0)-(e.animal?.custoTotal||0),roi:e.animal?.custoTotal>0?((parseFloat(e.valorVenda)||0)-(e.animal?.custoTotal||0))/(e.animal?.custoTotal||0)*100:0})).sort((e,a)=>a.receita-e.receita),l=s.reduce((e,a)=>e+a.receita,0);return{title:"\uD83D\uDCC8 Relat\xf3rio de Receitas",description:"An\xe1lise das receitas obtidas com vendas",data:s,summary:{total:l,average:s.length>0?l/s.length:0,highest:s.length>0?Math.max(...s.map(e=>e.receita)):0,count:s.length}};case"profit":let i=d.map(e=>{let a=parseFloat(e.valorVenda)||0,t=e.animal?.custoTotal||0,r=a-t;return{animal:`${e.animal?.serie||""} ${e.animal?.rg||e.animal?.brinco||e.animalId}`,raca:e.animal?.raca||"N\xe3o informado",investimento:t,receita:a,lucro:r,roi:t>0?r/t*100:0,margem:a>0?r/a*100:0}}).sort((e,a)=>a.lucro-e.lucro),n=i.reduce((e,a)=>e+a.lucro,0);return{title:"\uD83C\uDFAF Relat\xf3rio de Lucros",description:"An\xe1lise da lucratividade das opera\xe7\xf5es",data:i,summary:{total:n,positive:i.filter(e=>e.lucro>0).length,negative:i.filter(e=>e.lucro<0).length,averageMargin:i.length>0?i.reduce((e,a)=>e+a.margem,0)/i.length:0}};case"roi":let c=d.filter(e=>e.animal?.custoTotal>0).map(e=>{let a=parseFloat(e.valorVenda)||0,t=e.animal?.custoTotal||0,r=t>0?(a-t)/t*100:0;return{animal:`${e.animal?.serie||""} ${e.animal?.rg||e.animal?.brinco||e.animalId}`,raca:e.animal?.raca||"N\xe3o informado",investimento:t,receita:a,roi:r,periodo:e.animal?.meses||0,roiMensal:(e.animal?.meses||0)>0?r/(e.animal?.meses||1):0}}).sort((e,a)=>a.roi-e.roi);return{title:"\uD83D\uDCCA Relat\xf3rio de ROI",description:"An\xe1lise do retorno sobre investimento",data:c,summary:{average:c.length>0?c.reduce((e,a)=>e+a.roi,0)/c.length:0,best:c.length>0?Math.max(...c.map(e=>e.roi)):0,worst:c.length>0?Math.min(...c.map(e=>e.roi)):0,above20:c.filter(e=>e.roi>20).length}};default:return{title:"\uD83D\uDCCB Relat\xf3rio Geral",description:"Vis\xe3o geral dos dados",data:[],summary:{}}}})();return x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20",children:[(0,x.jsxs)("div",{children:[x.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:u.title}),(0,x.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:[u.description," • Per\xedodo: ",t]})]}),x.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-3xl font-bold transition-colors",children:"\xd7"})]}),x.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[{id:"overview",label:"\uD83D\uDCCA Vis\xe3o Geral",icon:"\uD83D\uDCCA"},{id:"details",label:"\uD83D\uDCCB Detalhes",icon:"\uD83D\uDCCB"},{id:"charts",label:"\uD83D\uDCC8 Gr\xe1ficos",icon:"\uD83D\uDCC8"},{id:"export",label:"\uD83D\uDCE4 Exportar",icon:"\uD83D\uDCE4"}].map(e=>(0,x.jsxs)("button",{onClick:()=>s(e.id),className:`flex-1 px-6 py-4 text-sm font-medium transition-all duration-300 ${r===e.id?"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 border-b-2 border-blue-500":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[x.jsx("span",{className:"mr-2",children:e.icon}),e.label]},e.id))}),(0,x.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:["overview"===r&&(0,x.jsxs)("div",{className:"space-y-6",children:[x.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(u.summary).map(([e,a])=>(0,x.jsxs)("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg",children:[x.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 capitalize",children:e.replace(/([A-Z])/g," $1").trim()}),x.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"number"==typeof a?e.includes("roi")||e.includes("margin")||e.includes("average")&&a<100?`${a.toFixed(1)}%`:`R$ ${a.toLocaleString("pt-BR",{minimumFractionDigits:2})}`:a})]},e))}),(0,x.jsxs)("div",{className:"p-6 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 rounded-lg",children:[(0,x.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[x.jsx("span",{className:"mr-2",children:"\uD83D\uDCA1"}),"Insights Principais"]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["invested"===e&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"flex items-start space-x-3",children:[x.jsx("span",{className:"text-green-500",children:"✅"}),(0,x.jsxs)("div",{children:[x.jsx("div",{className:"font-medium",children:"Diversifica\xe7\xe3o Adequada"}),x.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Investimentos distribu\xeddos entre diferentes ra\xe7as"})]})]}),(0,x.jsxs)("div",{className:"flex items-start space-x-3",children:[x.jsx("span",{className:"text-yellow-500",children:"⚠️"}),(0,x.jsxs)("div",{children:[x.jsx("div",{className:"font-medium",children:"Monitorar Custos Altos"}),x.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Alguns animais com investimento acima da m\xe9dia"})]})]})]}),"revenue"===e&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"flex items-start space-x-3",children:[x.jsx("span",{className:"text-green-500",children:"\uD83D\uDCC8"}),(0,x.jsxs)("div",{children:[x.jsx("div",{className:"font-medium",children:"Receita Crescente"}),x.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tend\xeancia positiva nas vendas realizadas"})]})]}),(0,x.jsxs)("div",{className:"flex items-start space-x-3",children:[x.jsx("span",{className:"text-blue-500",children:"\uD83C\uDFAF"}),(0,x.jsxs)("div",{children:[x.jsx("div",{className:"font-medium",children:"Oportunidade de Melhoria"}),x.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Potencial para aumentar pre\xe7os de venda"})]})]})]})]})]})]}),"details"===r&&(0,x.jsxs)("div",{className:"space-y-4",children:[x.jsx("div",{className:"overflow-x-auto",children:(0,x.jsxs)("table",{className:"w-full text-sm",children:[x.jsx("thead",{children:(0,x.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[x.jsx("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white",children:"Animal"}),x.jsx("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white",children:"Ra\xe7a"}),u.data[0]&&Object.keys(u.data[0]).slice(2).map(e=>x.jsx("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white capitalize",children:e.replace(/([A-Z])/g," $1").trim()},e))]})}),x.jsx("tbody",{children:u.data.slice(0,10).map((e,a)=>(0,x.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700",children:[x.jsx("td",{className:"p-3 font-medium text-gray-900 dark:text-white",children:e.animal}),x.jsx("td",{className:"p-3 text-gray-600 dark:text-gray-400",children:e.raca}),Object.entries(e).slice(2).map(([e,a])=>x.jsx("td",{className:"p-3 text-gray-600 dark:text-gray-400",children:"number"==typeof a?e.includes("roi")||e.includes("margem")?`${a.toFixed(1)}%`:`R$ ${a.toLocaleString("pt-BR",{minimumFractionDigits:2})}`:a},e))]},a))})]})}),u.data.length>10&&(0,x.jsxs)("div",{className:"text-center p-4 text-gray-500 dark:text-gray-400",children:["Mostrando 10 de ",u.data.length," registros"]})]}),"charts"===r&&(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsxs)("div",{className:"text-center p-8 text-gray-500 dark:text-gray-400",children:[x.jsx("div",{className:"text-4xl mb-4",children:"\uD83D\uDCCA"}),x.jsx("div",{className:"text-lg font-medium mb-2",children:"Gr\xe1ficos Interativos"}),x.jsx("div",{className:"text-sm",children:"Visualiza\xe7\xf5es avan\xe7adas dos dados do relat\xf3rio"})]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsx("div",{className:"h-64 bg-gradient-to-br from-blue-100 to-purple-100 dark:from-blue-900/20 dark:to-purple-900/20 rounded-lg flex items-center justify-center",children:(0,x.jsxs)("div",{className:"text-center",children:[x.jsx("div",{className:"text-2xl mb-2",children:"\uD83D\uDCC8"}),x.jsx("div",{className:"font-medium",children:"Gr\xe1fico de Tend\xeancia"})]})}),x.jsx("div",{className:"h-64 bg-gradient-to-br from-green-100 to-blue-100 dark:from-green-900/20 dark:to-blue-900/20 rounded-lg flex items-center justify-center",children:(0,x.jsxs)("div",{className:"text-center",children:[x.jsx("div",{className:"text-2xl mb-2",children:"\uD83E\uDD67"}),x.jsx("div",{className:"font-medium",children:"Distribui\xe7\xe3o"})]})})]})]}),"export"===r&&(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsxs)("div",{className:"text-center",children:[x.jsx("div",{className:"text-4xl mb-4",children:"\uD83D\uDCE4"}),x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Exportar Relat\xf3rio"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Escolha o formato desejado para exporta\xe7\xe3o"})]}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{id:"excel",label:"Excel",icon:"\uD83D\uDCCA",desc:"Planilha completa com dados"},{id:"pdf",label:"PDF",icon:"\uD83D\uDCC4",desc:"Relat\xf3rio formatado para impress\xe3o"},{id:"csv",label:"CSV",icon:"\uD83D\uDCCB",desc:"Dados em formato texto"}].map(e=>(0,x.jsxs)("button",{onClick:()=>i(e.id),className:`p-6 rounded-lg border-2 transition-all duration-300 ${l===e.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[x.jsx("div",{className:"text-3xl mb-3",children:e.icon}),x.jsx("div",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:e.label}),x.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.desc})]},e.id))}),x.jsx("div",{className:"text-center",children:x.jsx("button",{onClick:()=>{alert(`Exportando relat\xf3rio em formato ${{excel:"Excel (.xlsx)",pdf:"PDF (.pdf)",csv:"CSV (.csv)"}[l]}...`),setTimeout(()=>{alert("✅ Relat\xf3rio exportado com sucesso!")},2e3)},className:"px-8 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-semibold hover:shadow-lg transition-all duration-300 transform hover:scale-105",children:"Exportar Relat\xf3rio"})})]})]})]})})}function QuickActions({onROICalculatorOpen:e}){let a=(0,g.useRouter)(),[t,r]=(0,m.useState)(!1),[s,l]=(0,m.useState)(""),showNotificationMessage=e=>{l(e),r(!0),setTimeout(()=>r(!1),3e3)};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,x.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center",children:[x.jsx("span",{className:"mr-3 text-2xl",children:"⚡"}),"A\xe7\xf5es R\xe1pidas"]}),x.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Clique para executar"})]}),x.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{id:"manage-animals",title:"Gest\xe3o de Animais",description:"Editar e gerenciar animais",icon:"\uD83D\uDC04",color:"from-green-500 to-emerald-600",action:()=>{a.push("/animals"),showNotificationMessage("Abrindo gest\xe3o de animais...")}},{id:"add-animal",title:"Novo Animal",description:"Cadastrar novo animal",icon:"➕",color:"from-blue-500 to-cyan-600",action:()=>{a.push("/animals"),showNotificationMessage("Redirecionando para cadastro...")}},{id:"add-cost",title:"Adicionar Custo",description:"Registrar novo custo",icon:"\uD83D\uDCB0",color:"from-blue-500 to-cyan-600",action:()=>{a.push("/animals"),showNotificationMessage("Abrindo gerenciador de custos...")}},{id:"pregnancy",title:"Gesta\xe7\xe3o",description:"Gerenciar gesta\xe7\xf5es",icon:"\uD83D\uDC04",color:"from-pink-500 to-rose-600",action:()=>{a.push("/gestacao"),showNotificationMessage("Abrindo controle de gesta\xe7\xf5es...")}},{id:"reports",title:"Relat\xf3rios",description:"Ver relat\xf3rios detalhados",icon:"\uD83D\uDCCA",color:"from-purple-500 to-indigo-600",action:()=>{a.push("/reports"),showNotificationMessage("Carregando relat\xf3rios...")}},{id:"export",title:"Exportar Dados",description:"Exportar para Excel/PDF",icon:"\uD83D\uDCE4",color:"from-orange-500 to-yellow-600",action:()=>{showNotificationMessage("Preparando exporta\xe7\xe3o..."),setTimeout(()=>{showNotificationMessage("✅ Dados exportados com sucesso!")},2e3)}},{id:"calculator",title:"Calculadora ROI",description:"Calcular retorno",icon:"\uD83E\uDDEE",color:"from-teal-500 to-green-600",action:()=>{e&&e(),showNotificationMessage("Abrindo calculadora de ROI...")}},{id:"analytics",title:"Analytics",description:"An\xe1lises avan\xe7adas",icon:"\uD83D\uDCC8",color:"from-red-500 to-pink-600",action:()=>{showNotificationMessage("Carregando analytics...")}},{id:"backup",title:"Backup",description:"Fazer backup dos dados",icon:"\uD83D\uDCBE",color:"from-gray-500 to-slate-600",action:()=>{showNotificationMessage("Iniciando backup..."),setTimeout(()=>{showNotificationMessage("✅ Backup realizado com sucesso!")},3e3)}}].map((e,a)=>(0,x.jsxs)("button",{onClick:e.action,className:`
                group relative overflow-hidden rounded-xl p-4 text-left transition-all duration-300
                hover:scale-105 hover:shadow-xl transform
                bg-gradient-to-br ${e.color} text-white
              `,style:{animationDelay:`${50*a}ms`},children:[x.jsx("div",{className:"absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity"}),(0,x.jsxs)("div",{className:"relative z-10",children:[x.jsx("div",{className:"text-3xl mb-3",children:e.icon}),x.jsx("h3",{className:"font-semibold text-white mb-1",children:e.title}),x.jsx("p",{className:"text-xs text-white/80",children:e.description})]}),x.jsx("div",{className:"absolute inset-0 bg-white opacity-0 group-hover:opacity-10 transition-opacity"}),x.jsx("div",{className:"absolute inset-0 bg-white opacity-0 group-active:opacity-20 transition-opacity duration-150"})]},e.id))}),x.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:(0,x.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,x.jsxs)("div",{children:[x.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"127"}),x.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"A\xe7\xf5es hoje"})]}),(0,x.jsxs)("div",{children:[x.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"89%"}),x.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Efici\xeancia"})]}),(0,x.jsxs)("div",{children:[x.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"2.3s"}),x.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Tempo m\xe9dio"})]})]})})]}),t&&x.jsx("div",{className:"fixed top-4 right-4 z-50 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg transition-all duration-300 transform animate-bounce",children:(0,x.jsxs)("div",{className:"flex items-center",children:[x.jsx("div",{className:"mr-3 text-lg",children:"✅"}),x.jsx("div",{className:"font-medium",children:s})]})})]})}function LiveStats({data:e}){let[a,t]=(0,m.useState)({totalAnimals:0,activeAnimals:0,totalInvested:0,totalRevenue:0});(0,m.useEffect)(()=>{let animateValue=(e,a,r,s)=>{let l=Date.now(),animate=()=>{let i=Date.now()-l,d=Math.min(i/r,1),n=e+(a-e)*d;t(e=>({...e,[s]:Math.floor(n)})),d<1&&requestAnimationFrame(animate)};animate()};animateValue(a.totalAnimals,e.totalAnimals,1e3,"totalAnimals"),animateValue(a.activeAnimals,e.activeAnimals,1e3,"activeAnimals"),animateValue(a.totalInvested,e.totalInvested,1500,"totalInvested"),animateValue(a.totalRevenue,e.totalRevenue,1500,"totalRevenue")},[e]);let r=[{label:"Animais Totais",value:a.totalAnimals,icon:"\uD83D\uDC04",color:"text-blue-600",bgColor:"bg-blue-100 dark:bg-blue-900/30"},{label:"Ativos",value:a.activeAnimals,icon:"✅",color:"text-green-600",bgColor:"bg-green-100 dark:bg-green-900/30"},{label:"Investido",value:`R$ ${(a.totalInvested/1e3).toFixed(0)}k`,icon:"\uD83D\uDCB0",color:"text-red-600",bgColor:"bg-red-100 dark:bg-red-900/30"},{label:"Receita",value:`R$ ${(a.totalRevenue/1e3).toFixed(0)}k`,icon:"\uD83D\uDCC8",color:"text-purple-600",bgColor:"bg-purple-100 dark:bg-purple-900/30"},{label:"ROI M\xe9dio",value:`${e.avgROI?.toFixed(1)||0}%`,icon:"\uD83D\uDCCA",color:"text-orange-600",bgColor:"bg-orange-100 dark:bg-orange-900/30"}];return(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,x.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center",children:[x.jsx("span",{className:"mr-3 text-2xl",children:"⚡"}),"Stats em Tempo Real"]}),(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[x.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),x.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Ao vivo"})]})]}),x.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:r.map((e,a)=>x.jsx("div",{className:`
              p-4 rounded-xl transition-all duration-300 hover:scale-105 cursor-pointer
              ${e.bgColor} border border-gray-200 dark:border-gray-600
            `,style:{animationDelay:`${100*a}ms`},children:(0,x.jsxs)("div",{className:"text-center",children:[x.jsx("div",{className:"text-2xl mb-2",children:e.icon}),x.jsx("div",{className:`text-2xl font-bold ${e.color} mb-1`,children:e.value}),x.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.label})]})},e.label))}),e.topPerformer&&x.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 rounded-xl border border-yellow-200 dark:border-yellow-800",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[x.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white flex items-center",children:"\uD83C\uDFC6 Top Performer"}),(0,x.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.topPerformer.serie," ",e.topPerformer.rg]})]}),(0,x.jsxs)("div",{className:"text-right",children:[(0,x.jsxs)("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:[((e.topPerformer.valorVenda-e.topPerformer.custoTotal)/e.topPerformer.custoTotal*100).toFixed(1),"%"]}),x.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ROI"})]})]})})]})}function AnimalPerformance(){let[e,a]=(0,m.useState)("roi"),[t,r]=(0,m.useState)("all"),s=[],l=[{id:"all",label:"Todos",count:s.length},{id:"excellent",label:"Excelentes",count:s.filter(e=>"Excelente"===e.performance).length},{id:"good",label:"Bons",count:s.filter(e=>"Boa"===e.performance).length},{id:"regular",label:"Regulares",count:s.filter(e=>"Regular"===e.performance).length},{id:"poor",label:"Ruins",count:s.filter(e=>"Ruim"===e.performance).length}],i="all"===t?s:s.filter(e=>{switch(t){case"excellent":return"Excelente"===e.performance;case"good":return"Boa"===e.performance;case"regular":return"Regular"===e.performance;case"poor":return"Ruim"===e.performance;default:return!0}});return[...i].sort((a,t)=>{switch(e){case"roi":return t.roi-a.roi;case"profit":return t.profit-a.profit;case"cost":return t.custoTotal-a.custoTotal;case"age":return t.meses-a.meses;default:return 0}}),(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,x.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center",children:[x.jsx("span",{className:"mr-3 text-2xl",children:"\uD83C\uDFC6"}),"Performance dos Animais"]}),x.jsx("div",{className:"flex items-center space-x-2",children:(0,x.jsxs)("select",{value:e,onChange:e=>a(e.target.value),className:"text-sm border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[x.jsx("option",{value:"roi",children:"ROI"}),x.jsx("option",{value:"profit",children:"Lucro"}),x.jsx("option",{value:"cost",children:"Custo"}),x.jsx("option",{value:"age",children:"Idade"})]})})]}),x.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:l.map(e=>(0,x.jsxs)("button",{onClick:()=>r(e.id),className:`px-3 py-1 rounded-full text-xs font-medium transition-all duration-300 ${t===e.id?"bg-blue-500 text-white shadow-lg":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:[e.label," (",e.count,")"]},e.id))}),(0,x.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[x.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDC04"}),x.jsx("div",{className:"text-sm",children:"Nenhum animal cadastrado"}),x.jsx("div",{className:"text-xs mt-1",children:"Dados reais ser\xe3o carregados da API"})]}),x.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:(0,x.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,x.jsxs)("div",{children:[x.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:"0"}),x.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Excelentes"})]}),(0,x.jsxs)("div",{children:[x.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:"0"}),x.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Lucrativos"})]}),(0,x.jsxs)("div",{children:[x.jsx("div",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:"0"}),x.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Alto Risco"})]})]})})]})}function SmartAlerts(){let[e,a]=(0,m.useState)([]),[t,r]=(0,m.useState)(!1);(0,m.useEffect)(()=>{generateSmartAlerts()},[]);let generateSmartAlerts=()=>{let e=[],t={high:3,medium:2,low:1};e.sort((e,a)=>t[a.priority]-t[e.priority]),a(e.slice(0,10))},dismissAlert=e=>{a(a=>a.filter(a=>a.id!==e))},getPriorityColor=e=>{switch(e){case"high":return"border-red-500 bg-red-50 dark:bg-red-900/20";case"medium":return"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20";case"low":return"border-green-500 bg-green-50 dark:bg-green-900/20";default:return"border-gray-500 bg-gray-50 dark:bg-gray-900/20"}};return(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,x.jsxs)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center",children:[x.jsx("span",{className:"mr-3 text-2xl",children:"\uD83D\uDEA8"}),"Alertas Inteligentes"]}),(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.length," alertas"]}),x.jsx("button",{onClick:()=>r(!t),className:"text-blue-600 dark:text-blue-400 hover:underline text-sm",children:t?"Ocultar":"Mostrar todos"})]})]}),0===e.length?(0,x.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[x.jsx("div",{className:"text-4xl mb-2",children:"✅"}),x.jsx("div",{className:"text-sm",children:"Nenhum alerta no momento"}),x.jsx("div",{className:"text-xs mt-1",children:"Tudo funcionando perfeitamente!"})]}):(0,x.jsxs)("div",{className:"space-y-3",children:[(t?e:e.slice(0,3)).map(e=>x.jsx("div",{className:`p-4 rounded-lg border-l-4 ${getPriorityColor(e.priority)} transition-all duration-300 hover:shadow-md`,children:(0,x.jsxs)("div",{className:"flex items-start justify-between",children:[(0,x.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[x.jsx("div",{className:`p-2 rounded-full ${e.color} text-white flex-shrink-0`,children:x.jsx("span",{className:"text-sm",children:e.icon})}),(0,x.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[x.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:e.title}),x.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${"high"===e.priority?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"medium"===e.priority?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}`,children:"high"===e.priority?"Alta":"medium"===e.priority?"M\xe9dia":"Baixa"})]}),x.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.message}),e.action&&(0,x.jsxs)("div",{className:"mt-2 flex items-center space-x-2",children:[x.jsx("button",{className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:e.action}),e.animal&&x.jsx("button",{className:"text-xs text-gray-500 dark:text-gray-400 hover:underline",children:"Ver animal"})]})]})]}),x.jsx("button",{onClick:()=>dismissAlert(e.id),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 ml-2",children:"\xd7"})]})},e.id)),!t&&e.length>3&&(0,x.jsxs)("button",{onClick:()=>r(!0),className:"w-full p-3 text-center text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:["Ver mais ",e.length-3," alertas"]})]}),x.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:(0,x.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,x.jsxs)("div",{children:[x.jsx("div",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:e.filter(e=>"high"===e.priority).length}),x.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Alta Prioridade"})]}),(0,x.jsxs)("div",{children:[x.jsx("div",{className:"text-lg font-bold text-yellow-600 dark:text-yellow-400",children:e.filter(e=>"medium"===e.priority).length}),x.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"M\xe9dia Prioridade"})]}),(0,x.jsxs)("div",{children:[x.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:e.filter(e=>"low"===e.priority).length}),x.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Baixa Prioridade"})]})]})})]})}function ROICalculator({isOpen:e,onClose:a}){let[t,r]=(0,m.useState)(""),[s,l]=(0,m.useState)(""),[i,d]=(0,m.useState)(""),[n,o]=(0,m.useState)(null),calculateROI=()=>{let e=parseFloat(t)||0,a=parseFloat(s)||0,r=parseFloat(i)||1;if(e>0){let t=a-e,s=t/e*100,l=s/r,i=e/(a/r);o({profit:t,roi:s,monthlyROI:l,breakEven:i>0?i:0,profitMargin:a>0?t/a*100:0})}};return((0,m.useEffect)(()=>{calculateROI()},[t,s,i]),e)?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[x.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center",children:"\uD83E\uDDEE Calculadora ROI"}),x.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl",children:"\xd7"})]}),(0,x.jsxs)("div",{className:"p-6 space-y-4",children:[(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uD83D\uDCB0 Investimento Total (R$)"}),x.jsx("input",{type:"number",value:t,onChange:e=>r(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Ex: 3500.00"})]}),(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uD83D\uDCC8 Receita Esperada (R$)"}),x.jsx("input",{type:"number",value:s,onChange:e=>l(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Ex: 4500.00"})]}),(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uD83D\uDCC5 Per\xedodo (meses)"}),x.jsx("input",{type:"number",value:i,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Ex: 18"})]})]}),n&&(0,x.jsxs)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCCA Resultados"}),(0,x.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,x.jsxs)("div",{className:"text-center p-3 bg-white dark:bg-gray-800 rounded-lg",children:[(0,x.jsxs)("div",{className:`text-lg font-bold ${n.profit>=0?"text-green-600":"text-red-600"}`,children:["R$ ",n.profit.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),x.jsx("div",{className:"text-xs text-gray-500",children:"Lucro"})]}),(0,x.jsxs)("div",{className:"text-center p-3 bg-white dark:bg-gray-800 rounded-lg",children:[(0,x.jsxs)("div",{className:`text-lg font-bold ${n.roi>=0?"text-blue-600":"text-red-600"}`,children:[n.roi.toFixed(1),"%"]}),x.jsx("div",{className:"text-xs text-gray-500",children:"ROI Total"})]}),(0,x.jsxs)("div",{className:"text-center p-3 bg-white dark:bg-gray-800 rounded-lg",children:[(0,x.jsxs)("div",{className:"text-lg font-bold text-purple-600",children:[n.monthlyROI.toFixed(1),"%"]}),x.jsx("div",{className:"text-xs text-gray-500",children:"ROI Mensal"})]}),(0,x.jsxs)("div",{className:"text-center p-3 bg-white dark:bg-gray-800 rounded-lg",children:[(0,x.jsxs)("div",{className:"text-lg font-bold text-orange-600",children:[n.profitMargin.toFixed(1),"%"]}),x.jsx("div",{className:"text-xs text-gray-500",children:"Margem"})]})]}),n.breakEven>0&&x.jsx("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:(0,x.jsxs)("div",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:["⏱️ Ponto de equil\xedbrio: ",n.breakEven.toFixed(1)," meses"]})})]})]})}):null}var u=t(8974);function MarketDashboard(){let[e,a]=(0,m.useState)(null),[t,r]=(0,m.useState)([]),[s,l]=(0,m.useState)(null),[i,d]=(0,m.useState)(null),[n,o]=(0,m.useState)(!0),[c,g]=(0,m.useState)("prices"),[h,b]=(0,m.useState)("SP");(0,m.useEffect)(()=>{loadMarketData();let e=setInterval(loadMarketData,6e4);return()=>clearInterval(e)},[]);let loadMarketData=async()=>{try{o(!0);let[e,t,s,i]=await Promise.all([u.I.getCattlePrices(),u.I.getMarketNews(),u.I.getMarketAnalysis(),u.I.getPriceForecast()]);a(e),r(t),l(s),d(i)}catch(e){console.error("Erro ao carregar dados do mercado:",e)}finally{o(!1)}},getTrendIcon=e=>{switch(e){case"up":return"\uD83D\uDCC8";case"down":return"\uD83D\uDCC9";default:return"➡️"}},getTrendColor=e=>e>0?"text-green-600 dark:text-green-400":e<0?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400",formatCurrency=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2}).format(e),formatPercent=e=>`${e>=0?"+":""}${e.toFixed(2)}%`,p=[{id:"prices",label:"\uD83D\uDCB0 Pre\xe7os",component:()=>(0,x.jsxs)("div",{className:"space-y-6",children:[e&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83E\uDD69 Animais Terminados (Para Abate)"}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(e.prices).filter(([e,a])=>"Terminados"===a.category).map(([e,a])=>(0,x.jsxs)("div",{className:"p-4 bg-gradient-to-br from-red-50 to-orange-50 dark:from-red-900/20 dark:to-orange-900/20 rounded-xl border border-red-200 dark:border-red-800 hover:shadow-lg transition-all",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[x.jsx("span",{className:"text-2xl",children:a.icon}),x.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"boi_gordo"===e?"Boi Gordo":"vaca_gorda"===e?"Vaca Gorda":e})]}),x.jsx("span",{className:"text-xl",children:getTrendIcon(a.trend)})]}),(0,x.jsxs)("div",{className:"space-y-2",children:[(0,x.jsxs)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["R$ ",a.price.toFixed(0)]}),(0,x.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a.unit," • ",a.market]}),(0,x.jsxs)("div",{className:`text-sm font-medium flex items-center ${getTrendColor(a.change)}`,children:[x.jsx("span",{className:"mr-1",children:a.change>=0?"↗️":"↘️"}),formatPercent(a.changePercent)," (",a.change>=0?"+":"","R$ ",a.change.toFixed(2),")"]}),x.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:a.description})]})]},e))})]}),(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83C\uDF31 Animais de Recria (Crescimento)"}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(e.prices).filter(([e,a])=>"Recria"===a.category).map(([e,a])=>(0,x.jsxs)("div",{className:"p-4 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl border border-green-200 dark:border-green-800 hover:shadow-lg transition-all",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[x.jsx("span",{className:"text-2xl",children:a.icon}),x.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"garrote"===e?"Garrote":"novilho"===e?"Novilho":"novilha"===e?"Novilha":e})]}),x.jsx("span",{className:"text-xl",children:getTrendIcon(a.trend)})]}),(0,x.jsxs)("div",{className:"space-y-2",children:[x.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.unit.includes("arroba")?`R$ ${a.price.toFixed(0)}`:formatCurrency(a.price)}),(0,x.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a.unit," • ",a.market]}),(0,x.jsxs)("div",{className:`text-sm font-medium flex items-center ${getTrendColor(a.change)}`,children:[x.jsx("span",{className:"mr-1",children:a.change>=0?"↗️":"↘️"}),formatPercent(a.changePercent)," (",a.change>=0?"+":"","R$ ",a.change.toFixed(2),")"]}),x.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:a.description})]})]},e))})]}),(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83C\uDF7C Animais de Cria (At\xe9 12 meses)"}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(e.prices).filter(([e,a])=>"Cria"===a.category).map(([e,a])=>(0,x.jsxs)("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl border border-blue-200 dark:border-blue-800 hover:shadow-lg transition-all",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[x.jsx("span",{className:"text-2xl",children:a.icon}),x.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"bezerro_macho"===e?"Bezerro Macho":"bezerra"===e?"Bezerra":e})]}),x.jsx("span",{className:"text-xl",children:getTrendIcon(a.trend)})]}),(0,x.jsxs)("div",{className:"space-y-2",children:[x.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:formatCurrency(a.price)}),(0,x.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a.unit," • ",a.market]}),(0,x.jsxs)("div",{className:`text-sm font-medium flex items-center ${getTrendColor(a.change)}`,children:[x.jsx("span",{className:"mr-1",children:a.change>=0?"↗️":"↘️"}),formatPercent(a.changePercent)," (",a.change>=0?"+":"","R$ ",a.change.toFixed(2),")"]}),x.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:a.description})]})]},e))})]})]}),(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83D\uDCCA \xcdndices Econ\xf4micos"}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:e&&Object.entries(e.indices).map(([e,a])=>x.jsx("div",{className:"p-4 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl border border-purple-200 dark:border-purple-800 hover:shadow-lg transition-all",children:(0,x.jsxs)("div",{className:"text-center",children:[x.jsx("div",{className:"text-3xl mb-2",children:a.icon}),x.jsx("div",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"dolar"===e?"D\xf3lar USD":"milho"===e?"Milho":"soja"===e?"Soja":"farelo_soja"===e?"Farelo Soja":"boi_futuro"===e?"Boi Futuro":e}),x.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1",children:"dolar"===e?`USD ${a.value.toFixed(2)}`:`R$ ${a.value.toFixed(0)}`}),(0,x.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:[a.unit," • ",a.source]}),(0,x.jsxs)("div",{className:`text-sm font-medium flex items-center justify-center ${getTrendColor(a.change)}`,children:[x.jsx("span",{className:"mr-1",children:a.change>=0?"↗️":"↘️"}),formatPercent(a.changePercent)]})]})},e))})]}),e&&e.marketStatus&&(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83D\uDD50 Status do Mercado"}),(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-4",children:[x.jsx("div",{className:`w-4 h-4 rounded-full ${"open"===e.marketStatus.session.status?"bg-green-500 animate-pulse":"closing"===e.marketStatus.session.status?"bg-yellow-500 animate-pulse":"bg-red-500"}`}),(0,x.jsxs)("div",{children:[x.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:e.marketStatus.session.label}),(0,x.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Qualidade dos dados: ",e.marketStatus.dataQuality]})]})]}),(0,x.jsxs)("div",{className:"text-right",children:[(0,x.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["\xdaltima atualiza\xe7\xe3o: ",e.marketStatus.lastUpdate.toLocaleTimeString("pt-BR")]}),(0,x.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Pr\xf3xima: ",e.marketStatus.nextUpdate.toLocaleTimeString("pt-BR")]})]})]})]})]})},{id:"news",label:"\uD83D\uDCF0 Not\xedcias",component:()=>x.jsx("div",{className:"space-y-4",children:t.map(e=>x.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-all",children:x.jsx("div",{className:"flex items-start justify-between",children:(0,x.jsxs)("div",{className:"flex-1",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[x.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${"positive"===e.impact?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"negative"===e.impact?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:"positive"===e.impact?"\uD83D\uDCC8 Positivo":"negative"===e.impact?"\uD83D\uDCC9 Negativo":"➡️ Neutro"}),x.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${"high"===e.relevance?"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200":"medium"===e.relevance?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}`,children:"high"===e.relevance?"\uD83D\uDD25 Alta":"medium"===e.relevance?"⚡ M\xe9dia":"\uD83D\uDCCA Baixa"})]}),x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e.title}),x.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:e.summary}),(0,x.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400",children:[x.jsx("span",{children:e.source}),x.jsx("span",{children:new Date(e.publishedAt).toLocaleString("pt-BR")})]})]})})},e.id))})},{id:"analysis",label:"\uD83D\uDCCA An\xe1lise",component:()=>x.jsx("div",{className:"space-y-6",children:s&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83C\uDFAF Sentimento do Mercado"}),(0,x.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,x.jsxs)("div",{className:"flex-1",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Score"}),(0,x.jsxs)("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[s.marketSentiment.score,"/100"]})]}),x.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:x.jsx("div",{className:`h-3 rounded-full transition-all duration-1000 ${s.marketSentiment.score>=70?"bg-green-500":s.marketSentiment.score>=40?"bg-yellow-500":"bg-red-500"}`,style:{width:`${s.marketSentiment.score}%`}})})]}),(0,x.jsxs)("div",{className:"text-center",children:[x.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.marketSentiment.label}),x.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.marketSentiment.description})]})]})]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[x.jsx("h3",{className:"text-lg font-semibold text-green-600 dark:text-green-400 mb-4 flex items-center",children:"✅ Fatores Positivos"}),x.jsx("ul",{className:"space-y-2",children:s.factors.positive.map((e,a)=>(0,x.jsxs)("li",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[x.jsx("span",{className:"text-green-500 mr-2",children:"•"}),e]},a))})]}),(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[x.jsx("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-4 flex items-center",children:"⚠️ Fatores Negativos"}),x.jsx("ul",{className:"space-y-2",children:s.factors.negative.map((e,a)=>(0,x.jsxs)("li",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[x.jsx("span",{className:"text-red-500 mr-2",children:"•"}),e]},a))})]})]}),(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83D\uDCA1 Recomenda\xe7\xf5es de Investimento"}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:s.recommendations.map((e,a)=>(0,x.jsxs)("div",{className:`p-4 rounded-lg border-2 ${"buy"===e.type?"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-900/20":"sell"===e.type?"border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-900/20":"border-yellow-200 bg-yellow-50 dark:border-yellow-800 dark:bg-yellow-900/20"}`,children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-bold ${"buy"===e.type?"bg-green-500 text-white":"sell"===e.type?"bg-red-500 text-white":"bg-yellow-500 text-white"}`,children:"buy"===e.type?"\uD83D\uDFE2 COMPRAR":"sell"===e.type?"\uD83D\uDD34 VENDER":"\uD83D\uDFE1 MANTER"}),(0,x.jsxs)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:[e.confidence,"%"]})]}),x.jsx("div",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:e.category}),x.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.reason})]},a))})]})]})})},{id:"forecast",label:"\uD83D\uDD2E Previs\xe3o IA",component:()=>x.jsx("div",{className:"space-y-6",children:i&&(0,x.jsxs)(x.Fragment,{children:[x.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:["\uD83E\uDD16 ",i.model]}),(0,x.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["Precis\xe3o: ",i.accuracy," • \xdaltimo treino: ",new Date(i.lastTrained).toLocaleDateString("pt-BR")]})]}),(0,x.jsxs)("div",{className:"text-right",children:[x.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:i.accuracy}),x.jsx("div",{className:"text-sm text-gray-500",children:"Precis\xe3o"})]})]})}),(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:"\uD83D\uDCC8 Previs\xe3o de Pre\xe7os - Pr\xf3ximos 7 dias"}),x.jsx("div",{className:"space-y-3",children:i.forecast.map((e,a)=>(0,x.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:new Date(e.date).toLocaleDateString("pt-BR",{weekday:"short",day:"2-digit",month:"2-digit"})}),x.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${"bullish"===e.trend?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bearish"===e.trend?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:"bullish"===e.trend?"\uD83D\uDCC8 Alta":"bearish"===e.trend?"\uD83D\uDCC9 Baixa":"➡️ Est\xe1vel"})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,x.jsxs)("div",{className:"text-right",children:[x.jsx("div",{className:"font-bold text-gray-900 dark:text-white",children:formatCurrency(e.predictedPrice)}),(0,x.jsxs)("div",{className:"text-xs text-gray-500",children:["Confian\xe7a: ",e.confidence.toFixed(0),"%"]})]}),x.jsx("div",{className:"w-16 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:x.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${e.confidence}%`}})})]})]},a))})]})]})})}];return n?x.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-lg border border-gray-200 dark:border-gray-700",children:(0,x.jsxs)("div",{className:"text-center",children:[x.jsx("div",{className:"animate-spin text-4xl mb-4",children:"\uD83D\uDCCA"}),x.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Carregando dados do mercado..."}),x.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Conectando com APIs de mercado"})]})}):(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700",children:[x.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center",children:["\uD83D\uDCC8 Market Intelligence",x.jsx("span",{className:"ml-3 px-3 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-sm font-medium rounded-full",children:"Ao Vivo"})]}),(0,x.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["Dados em tempo real do mercado de gado • \xdaltima atualiza\xe7\xe3o: ",e?.timestamp.toLocaleTimeString("pt-BR")]})]}),(0,x.jsxs)("button",{onClick:loadMarketData,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center space-x-2",children:[x.jsx("span",{children:"\uD83D\uDD04"}),x.jsx("span",{children:"Atualizar"})]})]})}),x.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:p.map(e=>x.jsx("button",{onClick:()=>g(e.id),className:`flex-1 px-6 py-4 text-sm font-medium transition-all duration-300 ${c===e.id?"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 border-b-2 border-blue-500":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:e.label},e.id))}),x.jsx("div",{className:"p-6",children:p.find(e=>e.id===c)?.component()})]})}function PriceComparison(){let[e,a]=(0,m.useState)(null),[t,r]=(0,m.useState)(null),[s,l]=(0,m.useState)("SP"),[i,d]=(0,m.useState)(null),[n,o]=(0,m.useState)(!0);(0,m.useEffect)(()=>{loadPriceData()},[s]);let loadPriceData=async()=>{try{o(!0);let[e,t]=await Promise.all([u.I.getCattlePrices(),u.I.getRegionalPrices(s)]);a(e),r(t),calculateComparison(e,t)}catch(e){console.error("Erro ao carregar pre\xe7os:",e)}finally{o(!1)}},[c,g]=(0,m.useState)([]);(0,m.useEffect)(()=>{loadAnimals()},[]);let loadAnimals=async()=>{try{let e={animals:[]},a=await ({ok:!0,json:()=>Promise.resolve(e)}).json();g(a)}catch(e){console.error("Erro ao carregar animais:",e)}},calculateComparison=(e,a)=>{let t=c.filter(e=>"ATIVO"===e.status),r=c.filter(e=>"VENDIDO"===e.status),estimateWeight=(e,a)=>Math.min(e*("Macho"===a?15:12),"Macho"===a?550:450),s=t.map(e=>{let t=estimateWeight(e.meses,e.sexo),r=t/15,s=0;if(e.meses>=30)s="Macho"===e.sexo?a.prices.boi_gordo*r:a.prices.vaca_gorda*r;else if(e.meses<=12)s="Macho"===e.sexo?a.prices.bezerro_macho:a.prices.bezerro_femea;else{let t="Macho"===e.sexo?a.prices.boi_gordo*r:a.prices.vaca_gorda*r,l="Macho"===e.sexo?a.prices.bezerro_macho:a.prices.bezerro_femea,i=(e.meses-12)/18;s=l+(t-l)*i}let l=s-e.custoTotal,i=e.custoTotal>0?l/e.custoTotal*100:0;return{...e,estimatedWeight:t,estimatedArrobas:r,marketValue:s,potentialProfit:l,potentialROI:i,recommendation:i>20?"sell":i>10?"hold":"improve"}}),l=r.map(e=>{let t=estimateWeight(e.meses,e.sexo),r=t/15,s=0;s=e.meses>=30?"Macho"===e.sexo?a.prices.boi_gordo*r*.95:a.prices.vaca_gorda*r*.95:"Macho"===e.sexo?.95*a.prices.bezerro_macho:.95*a.prices.bezerro_femea;let l=e.valorVenda-s,i=s>0?l/s*100:0;return{...e,estimatedMarketPrice:s,marketDifference:l,performanceVsMarket:i}});d({activeAnimals:s,salesAnalysis:l,summary:{totalMarketValue:s.reduce((e,a)=>e+a.marketValue,0),totalInvested:s.reduce((e,a)=>e+a.custoTotal,0),potentialProfit:s.reduce((e,a)=>e+a.potentialProfit,0),averageROI:s.length>0?s.reduce((e,a)=>e+a.potentialROI,0)/s.length:0,recommendSell:s.filter(e=>"sell"===e.recommendation).length,recommendHold:s.filter(e=>"hold"===e.recommendation).length,recommendImprove:s.filter(e=>"improve"===e.recommendation).length}})},formatCurrency=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2}).format(e),getRecommendationColor=e=>{switch(e){case"sell":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"hold":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"improve":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},getRecommendationText=e=>{switch(e){case"sell":return"\uD83D\uDFE2 Vender";case"hold":return"\uD83D\uDFE1 Manter";case"improve":return"\uD83D\uDD34 Melhorar";default:return"⚪ Analisar"}};return n?x.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-lg border border-gray-200 dark:border-gray-700",children:(0,x.jsxs)("div",{className:"text-center",children:[x.jsx("div",{className:"animate-spin text-4xl mb-4",children:"\uD83D\uDCB0"}),x.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Analisando pre\xe7os de mercado..."})]})}):(0,x.jsxs)("div",{className:"space-y-6",children:[x.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[x.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center",children:"\uD83D\uDCB0 Compara\xe7\xe3o de Pre\xe7os"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Compare seus animais com os pre\xe7os atuais do mercado"})]}),(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado/Regi\xe3o"}),x.jsx("select",{value:s,onChange:e=>l(e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[{code:"SP",name:"S\xe3o Paulo"},{code:"MG",name:"Minas Gerais"},{code:"GO",name:"Goi\xe1s"},{code:"MT",name:"Mato Grosso"},{code:"MS",name:"Mato Grosso do Sul"},{code:"PR",name:"Paran\xe1"},{code:"RS",name:"Rio Grande do Sul"},{code:"BA",name:"Bahia"}].map(e=>x.jsx("option",{value:e.code,children:e.name},e.code))})]})]})}),i&&(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[x.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:(0,x.jsxs)("div",{className:"text-center",children:[x.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:formatCurrency(i.summary.totalMarketValue)}),x.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Valor de Mercado Total"}),x.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Estimativa baseada em peso e idade"})]})}),x.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:(0,x.jsxs)("div",{className:"text-center",children:[x.jsx("div",{className:`text-2xl font-bold ${i.summary.potentialProfit>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:formatCurrency(i.summary.potentialProfit)}),x.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Lucro Potencial"}),x.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Se vendidos hoje"})]})}),x.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsxs)("div",{className:`text-2xl font-bold ${i.summary.averageROI>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[i.summary.averageROI.toFixed(1),"%"]}),x.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"ROI M\xe9dio Potencial"}),x.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Retorno estimado"})]})}),x.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:(0,x.jsxs)("div",{className:"text-center",children:[x.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:i.summary.recommendSell}),x.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Recomendados p/ Venda"}),x.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"ROI > 20%"})]})})]}),i&&(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[x.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:"\uD83D\uDC04 An\xe1lise Individual - Animais Ativos"}),x.jsx("div",{className:"overflow-x-auto",children:(0,x.jsxs)("table",{className:"w-full text-sm",children:[x.jsx("thead",{children:(0,x.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[x.jsx("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white",children:"Animal"}),x.jsx("th",{className:"text-center p-3 font-semibold text-gray-900 dark:text-white",children:"Idade"}),x.jsx("th",{className:"text-center p-3 font-semibold text-gray-900 dark:text-white",children:"Peso Est."}),x.jsx("th",{className:"text-center p-3 font-semibold text-gray-900 dark:text-white",children:"Investido"}),x.jsx("th",{className:"text-center p-3 font-semibold text-gray-900 dark:text-white",children:"Valor Mercado"}),x.jsx("th",{className:"text-center p-3 font-semibold text-gray-900 dark:text-white",children:"Lucro Pot."}),x.jsx("th",{className:"text-center p-3 font-semibold text-gray-900 dark:text-white",children:"ROI Pot."}),x.jsx("th",{className:"text-center p-3 font-semibold text-gray-900 dark:text-white",children:"Recomenda\xe7\xe3o"})]})}),x.jsx("tbody",{children:i.activeAnimals.map(e=>(0,x.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,x.jsxs)("td",{className:"p-3",children:[(0,x.jsxs)("div",{className:"font-medium text-gray-900 dark:text-white",children:[e.serie," ",e.rg]}),(0,x.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.raca," • ",e.sexo]})]}),(0,x.jsxs)("td",{className:"p-3 text-center text-gray-600 dark:text-gray-400",children:[e.meses,"m"]}),(0,x.jsxs)("td",{className:"p-3 text-center text-gray-600 dark:text-gray-400",children:[e.estimatedWeight.toFixed(0),"kg",(0,x.jsxs)("div",{className:"text-xs text-gray-500",children:["(",e.estimatedArrobas.toFixed(1),"@)"]})]}),x.jsx("td",{className:"p-3 text-center text-red-600 dark:text-red-400 font-medium",children:formatCurrency(e.custoTotal)}),x.jsx("td",{className:"p-3 text-center text-blue-600 dark:text-blue-400 font-medium",children:formatCurrency(e.marketValue)}),x.jsx("td",{className:`p-3 text-center font-medium ${e.potentialProfit>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:formatCurrency(e.potentialProfit)}),(0,x.jsxs)("td",{className:`p-3 text-center font-medium ${e.potentialROI>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[e.potentialROI.toFixed(1),"%"]}),x.jsx("td",{className:"p-3 text-center",children:x.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${getRecommendationColor(e.recommendation)}`,children:getRecommendationText(e.recommendation)})})]},e.id))})]})})]}),i&&i.salesAnalysis.length>0&&(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:[x.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:"\uD83D\uDCCA Performance vs Mercado - Vendas Realizadas"}),x.jsx("div",{className:"space-y-4",children:i.salesAnalysis.map(e=>(0,x.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[x.jsx("div",{className:"flex items-center space-x-4",children:(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"font-medium text-gray-900 dark:text-white",children:[e.serie," ",e.rg]}),(0,x.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.raca," • ",e.sexo," • ",e.meses," meses"]})]})}),(0,x.jsxs)("div",{className:"flex items-center space-x-6 text-sm",children:[(0,x.jsxs)("div",{className:"text-center",children:[x.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:formatCurrency(e.valorVenda)}),x.jsx("div",{className:"text-xs text-gray-500",children:"Vendido por"})]}),(0,x.jsxs)("div",{className:"text-center",children:[x.jsx("div",{className:"font-medium text-gray-600 dark:text-gray-400",children:formatCurrency(e.estimatedMarketPrice)}),x.jsx("div",{className:"text-xs text-gray-500",children:"Pre\xe7o mercado"})]}),(0,x.jsxs)("div",{className:"text-center",children:[x.jsx("div",{className:`font-medium ${e.marketDifference>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:formatCurrency(e.marketDifference)}),x.jsx("div",{className:"text-xs text-gray-500",children:"Diferen\xe7a"})]}),(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsxs)("div",{className:`font-bold ${e.performanceVsMarket>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[e.performanceVsMarket>=0?"+":"",e.performanceVsMarket.toFixed(1),"%"]}),x.jsx("div",{className:"text-xs text-gray-500",children:"vs Mercado"})]})]})]},e.id))})]})]})}function SalesDashboard({onOpenSalesManager:e}){let[a,t]=(0,m.useState)(null),[r,s]=(0,m.useState)(!0),[l,i]=(0,m.useState)("30"),[d,n]=(0,m.useState)("overview"),[o,c]=(0,m.useState)(!1),[g,h]=(0,m.useState)(!1);(0,m.useEffect)(()=>{loadSalesData()},[l]);let loadSalesData=async()=>{try{s(!0),t({totalSales:0,totalRevenue:0,averagePrice:0,averageROI:0,salesGrowth:0,revenueGrowth:0,priceGrowth:0,roiGrowth:0,salesByPeriod:[],topAnimals:[],salesByCategory:[],topBuyers:[]})}catch(e){console.error("Erro ao carregar dados de vendas:",e)}finally{s(!1)}},formatCurrency=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2}).format(e||0),formatPercent=e=>`${e>=0?"+":""}${e.toFixed(1)}%`;return r?x.jsx("div",{className:"flex items-center justify-center h-64",children:(0,x.jsxs)("div",{className:"text-center",children:[x.jsx("div",{className:"animate-spin text-4xl mb-4",children:"\uD83D\uDCB0"}),x.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Carregando dashboard de vendas..."})]})}):(0,x.jsxs)("div",{className:"space-y-6",children:[x.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[x.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center",children:"\uD83D\uDCB0 Dashboard de Vendas"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"An\xe1lise completa das suas vendas e performance"})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,x.jsxs)("select",{value:l,onChange:e=>i(e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[x.jsx("option",{value:"7",children:"\xdaltimos 7 dias"}),x.jsx("option",{value:"30",children:"\xdaltimos 30 dias"}),x.jsx("option",{value:"90",children:"\xdaltimos 3 meses"}),x.jsx("option",{value:"365",children:"\xdaltimo ano"})]}),(0,x.jsxs)("button",{onClick:e,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center",children:[x.jsx("span",{className:"text-lg mr-2",children:"➕"}),"Nova Venda"]})]})]})}),(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700",children:[(0,x.jsxs)("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[x.jsx("button",{onClick:()=>n("overview"),className:`flex-1 px-6 py-4 text-sm font-medium transition-colors ${"overview"===d?"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 border-b-2 border-green-500":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"\uD83D\uDCCA Vis\xe3o Geral"}),x.jsx("button",{onClick:()=>n("recent"),className:`flex-1 px-6 py-4 text-sm font-medium transition-colors ${"recent"===d?"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 border-b-2 border-green-500":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"\uD83D\uDCCB Vendas Recentes"})]}),(0,x.jsxs)("div",{className:"p-6",children:["overview"===d&&(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[x.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-xl p-6 border border-green-200 dark:border-green-800",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[x.jsx("p",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"Receita Total"}),x.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:formatCurrency(a?.totalRevenue||0)}),(0,x.jsxs)("div",{className:"flex items-center mt-2",children:[x.jsx("span",{className:"text-2xl mr-1",children:(a?.revenueGrowth||0)>=0?"\uD83D\uDCC8":"\uD83D\uDCC9"}),x.jsx("span",{className:`text-sm font-medium ${(a?.revenueGrowth||0)>=0?"text-green-600":"text-red-600"}`,children:formatPercent(a?.revenueGrowth||0)}),x.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs per\xedodo anterior"})]})]}),x.jsx("div",{className:"p-3 bg-green-500 rounded-full",children:x.jsx("span",{className:"text-2xl text-white",children:"\uD83D\uDCB0"})})]})}),x.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-6 border border-blue-200 dark:border-blue-800",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[x.jsx("p",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Animais Vendidos"}),x.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:a?.totalSales||0}),(0,x.jsxs)("div",{className:"flex items-center mt-2",children:[x.jsx("span",{className:"text-2xl mr-1",children:(a?.salesGrowth||0)>=0?"\uD83D\uDCC8":"\uD83D\uDCC9"}),x.jsx("span",{className:`text-sm font-medium ${(a?.salesGrowth||0)>=0?"text-green-600":"text-red-600"}`,children:formatPercent(a?.salesGrowth||0)}),x.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs per\xedodo anterior"})]})]}),x.jsx("div",{className:"p-3 bg-blue-500 rounded-full",children:x.jsx("span",{className:"text-2xl text-white",children:"\uD83D\uDCCA"})})]})}),x.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-xl p-6 border border-purple-200 dark:border-purple-800",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[x.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:"Pre\xe7o M\xe9dio"}),x.jsx("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:formatCurrency(a?.averagePrice||0)}),(0,x.jsxs)("div",{className:"flex items-center mt-2",children:[x.jsx("span",{className:"text-2xl mr-1",children:(a?.priceGrowth||0)>=0?"\uD83D\uDCC8":"\uD83D\uDCC9"}),x.jsx("span",{className:`text-sm font-medium ${(a?.priceGrowth||0)>=0?"text-green-600":"text-red-600"}`,children:formatPercent(a?.priceGrowth||0)}),x.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs per\xedodo anterior"})]})]}),x.jsx("div",{className:"p-3 bg-purple-500 rounded-full",children:x.jsx("span",{className:"text-2xl text-white",children:"\uD83D\uDCC8"})})]})}),x.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 rounded-xl p-6 border border-orange-200 dark:border-orange-800",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[x.jsx("p",{className:"text-sm font-medium text-orange-600 dark:text-orange-400",children:"ROI M\xe9dio"}),(0,x.jsxs)("p",{className:"text-2xl font-bold text-orange-900 dark:text-orange-100",children:[(a?.averageROI||0).toFixed(1),"%"]}),(0,x.jsxs)("div",{className:"flex items-center mt-2",children:[x.jsx("span",{className:"text-2xl mr-1",children:(a?.roiGrowth||0)>=0?"\uD83D\uDCC8":"\uD83D\uDCC9"}),x.jsx("span",{className:`text-sm font-medium ${(a?.roiGrowth||0)>=0?"text-green-600":"text-red-600"}`,children:formatPercent(a?.roiGrowth||0)}),x.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs per\xedodo anterior"})]})]}),x.jsx("div",{className:"p-3 bg-orange-500 rounded-full",children:x.jsx("span",{className:"text-2xl text-white",children:"\uD83D\uDCC8"})})]})})]}),(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCC8 Evolu\xe7\xe3o das Vendas"}),x.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:(0,x.jsxs)("div",{className:"text-center",children:[x.jsx("span",{className:"text-6xl mb-2 block",children:"\uD83D\uDCCA"}),x.jsx("p",{children:"Gr\xe1fico de evolu\xe7\xe3o das vendas"}),x.jsx("p",{className:"text-sm",children:"Implementar com Chart.js ou similar"})]})})]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 cursor-pointer hover:shadow-lg hover:border-blue-300 dark:hover:border-blue-500 transition-all duration-200",onClick:()=>c(!0),children:[(0,x.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex items-center",children:[x.jsx("span",{className:"text-2xl mr-2",children:"\uD83D\uDC65"}),"Top Compradores"]}),x.jsx("span",{className:"text-sm text-blue-600 dark:text-blue-400 font-normal",children:"Clique para ver detalhes →"})]}),x.jsx("div",{className:"space-y-3",children:a?.topBuyers?.map((e,a)=>x.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ${0===a?"bg-yellow-500":1===a?"bg-gray-400":2===a?"bg-orange-600":"bg-blue-500"}`,children:a+1}),x.jsxs("div",{children:[x.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),x.jsxs("div",{className:"text-sm text-gray-500",children:[e.totalAnimals," animais"]})]})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("div",{className:"font-bold text-gray-900 dark:text-white",children:formatCurrency(e.totalValue)}),x.jsxs("div",{className:"text-sm text-gray-500",children:["M\xe9dia: ",formatCurrency(e.averagePrice)]})]})]},a))})]}),(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 cursor-pointer hover:shadow-lg hover:border-green-300 dark:hover:border-green-500 transition-all duration-200",onClick:()=>h(!0),children:[(0,x.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center justify-between",children:[x.jsx("div",{className:"flex items-center",children:"\uD83D\uDC04 Vendas por Categoria"}),x.jsx("span",{className:"text-sm text-green-600 dark:text-green-400 font-normal",children:"Clique para ver detalhes →"})]}),x.jsx("div",{className:"space-y-3",children:a?.salesByCategory?.map((e,a)=>x.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("span",{className:"text-2xl",children:e.icon}),x.jsxs("div",{children:[x.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),x.jsxs("div",{className:"text-sm text-gray-500",children:[e.count," animais (",e.percentage,"%)"]})]})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("div",{className:"font-bold text-gray-900 dark:text-white",children:formatCurrency(e.totalValue)}),x.jsxs("div",{className:"text-sm text-gray-500",children:["M\xe9dia: ",formatCurrency(e.averagePrice)]})]})]},a))})]})]})]}),"recent"===d&&(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[x.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[x.jsx("span",{className:"text-2xl mr-2",children:"\uD83D\uDCCB"}),"Vendas Recentes"]}),(0,x.jsxs)("button",{onClick:e,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center",children:[x.jsx("span",{className:"text-lg mr-2",children:"➕"}),"Nova Venda"]})]})}),x.jsx("div",{className:"overflow-x-auto",children:(0,x.jsxs)("table",{className:"w-full text-sm",children:[x.jsx("thead",{children:(0,x.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:[x.jsx("th",{className:"text-left p-4 font-semibold text-gray-900 dark:text-white",children:"Data"}),x.jsx("th",{className:"text-left p-4 font-semibold text-gray-900 dark:text-white",children:"Animal"}),x.jsx("th",{className:"text-left p-4 font-semibold text-gray-900 dark:text-white",children:"Comprador"}),x.jsx("th",{className:"text-center p-4 font-semibold text-gray-900 dark:text-white",children:"Valor"}),x.jsx("th",{className:"text-center p-4 font-semibold text-gray-900 dark:text-white",children:"ROI"}),x.jsx("th",{className:"text-center p-4 font-semibold text-gray-900 dark:text-white",children:"Pagamento"}),x.jsx("th",{className:"text-center p-4 font-semibold text-gray-900 dark:text-white",children:"A\xe7\xf5es"})]})}),x.jsx("tbody",{children:a?.recentSales?.map(e=>x.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700",children:[x.jsx("td",{className:"p-4 text-gray-600 dark:text-gray-400",children:new Date(e.dataVenda).toLocaleDateString("pt-BR")}),x.jsxs("td",{className:"p-4",children:[x.jsxs("div",{className:"font-medium text-gray-900 dark:text-white",children:[e.animal.serie," ",e.animal.rg]}),x.jsxs("div",{className:"text-sm text-gray-500",children:[e.animal.raca," • ",e.animal.sexo]})]}),x.jsxs("td",{className:"p-4",children:[x.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e.comprador}),e.documento&&x.jsx("div",{className:"text-sm text-gray-500",children:e.documento})]}),x.jsxs("td",{className:"p-4 text-center",children:[x.jsx("div",{className:"font-bold text-green-600 dark:text-green-400",children:formatCurrency(e.valor)}),x.jsxs("div",{className:"text-sm text-gray-500",children:[e.animal.peso,"kg"]})]}),x.jsxs("td",{className:"p-4 text-center",children:[x.jsxs("div",{className:`font-bold ${e.roi>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[e.roi?.toFixed(1)||0,"%"]}),x.jsxs("div",{className:"text-sm text-gray-500",children:["Lucro: ",formatCurrency(e.profit)]})]}),x.jsx("td",{className:"p-4 text-center",children:x.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${"PAGO"===e.statusPagamento?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"PENDENTE"===e.statusPagamento?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:e.statusPagamento})}),x.jsx("td",{className:"p-4 text-center",children:x.jsx("button",{className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200",children:x.jsx("span",{className:"text-lg",children:"\uD83D\uDC41️"})})})]},e.id))})]})})]})]})]})]})}var b=t(50),p=t(8444),v=t(6244),j=t(7243);function SalesAnalytics({salesData:e={},onRefresh:a}){let[t,s]=(0,m.useState)("revenue"),[l,i]=(0,m.useState)("monthly"),d={totalRevenue:0,totalSales:0,totalAnimals:0,averagePrice:0,salesByMonth:[],topBuyers:[],salesByState:[],recentSales:[],...e},n=[{id:"revenue",name:"\uD83D\uDCB0 Receita",value:d.totalRevenue,change:"+15%",trend:"up",color:"green"},{id:"sales",name:"\uD83D\uDCCB Vendas",value:d.totalSales,change:"+12%",trend:"up",color:"blue"},{id:"animals",name:"\uD83D\uDC04 Animais",value:d.totalAnimals,change:"+8%",trend:"up",color:"purple"},{id:"avgPrice",name:"\uD83D\uDC8E Pre\xe7o M\xe9dio",value:d.averagePrice,change:"+5%",trend:"up",color:"orange"}],o=[{type:"success",icon:b.Z,title:"\uD83C\uDFAF Meta Superada",description:"Receita mensal 20% acima da meta estabelecida",impact:"Alto",color:"green"},{type:"opportunity",icon:p.Z,title:"\uD83D\uDCA1 Oportunidade Identificada",description:"Estados do Nordeste apresentam potencial inexplorado",impact:"M\xe9dio",color:"blue"},{type:"warning",icon:v.Z,title:"⚠️ Aten\xe7\xe3o Necess\xe1ria",description:"Queda de 5% nas vendas para o estado do RJ",impact:"Baixo",color:"yellow"}];return(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[x.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"\uD83D\uDD0D Analytics Avan\xe7ado"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Insights inteligentes e previs\xf5es baseadas em IA"})]}),(0,x.jsxs)("div",{className:"flex space-x-3",children:[(0,x.jsxs)("select",{"aria-label":"Selecionar per\xedodo de tempo",value:l,onChange:e=>i(e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:[x.jsx("option",{value:"daily",children:"Di\xe1rio"}),x.jsx("option",{value:"weekly",children:"Semanal"}),x.jsx("option",{value:"monthly",children:"Mensal"}),x.jsx("option",{value:"quarterly",children:"Trimestral"})]}),x.jsx("button",{onClick:a,disabled:!a,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:"\uD83D\uDD04 Atualizar"})]})]}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map(e=>(0,x.jsxs)("div",{className:`bg-white dark:bg-gray-800 rounded-xl border-2 p-6 cursor-pointer transition-all duration-200 ${t===e.id?"border-blue-500 shadow-lg":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,onClick:()=>s(e.id),children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),"up"===e.trend?x.jsx(r.TrendingUpIcon,{className:"h-5 w-5 text-green-500"}):x.jsx(r.TrendingDownIcon,{className:"h-5 w-5 text-red-500"})]}),x.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"revenue"===e.id?`R$ ${(e.value/1e6).toFixed(1)}M`:"avgPrice"===e.id?`R$ ${e.value.toLocaleString()}`:e.value.toLocaleString()}),(0,x.jsxs)("div",{className:`text-sm font-medium ${"up"===e.trend?"text-green-600":"text-red-600"}`,children:[e.change," vs per\xedodo anterior"]})]},e.id))}),(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,x.jsxs)("h4",{className:"text-lg font-bold text-gray-900 dark:text-white",children:["\uD83D\uDCC8 Tend\xeancia - ",n.find(e=>e.id===t)?.name]}),x.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 rounded-full text-sm",children:"Crescimento Consistente"})]}),x.jsx("div",{className:"h-64 bg-gradient-to-t from-blue-50 to-transparent dark:from-blue-900 rounded-lg flex items-end justify-between p-4",children:d.salesByMonth.map(e=>(0,x.jsxs)("div",{className:"flex flex-col items-center",children:[x.jsx("div",{className:"bg-blue-500 rounded-t-lg mb-2 transition-all duration-500 hover:bg-blue-600",style:{height:`${d.salesByMonth.length>0?e.revenue/Math.max(...d.salesByMonth.map(e=>e.revenue))*200:0}px`,width:"30px"}}),x.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:e.month})]},e.month))})]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,x.jsxs)("h4",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center",children:[x.jsx(p.Z,{className:"h-5 w-5 mr-2"})," \uD83E\uDDE0 Insights Inteligentes"]}),x.jsx("div",{className:"space-y-4",children:o.map((e,a)=>{let t=e.icon;return x.jsx("div",{className:`p-4 rounded-lg border-l-4 ${"green"===e.color?"bg-green-50 dark:bg-green-900 border-green-500":"blue"===e.color?"bg-blue-50 dark:bg-blue-900 border-blue-500":"bg-yellow-50 dark:bg-yellow-900 border-yellow-500"}`,children:(0,x.jsxs)("div",{className:"flex items-start",children:[x.jsx(t,{className:`h-5 w-5 mr-3 mt-0.5 ${"green"===e.color?"text-green-600":"blue"===e.color?"text-blue-600":"text-yellow-600"}`}),(0,x.jsxs)("div",{className:"flex-1",children:[x.jsx("h5",{className:"font-medium text-gray-900 dark:text-white mb-1",children:e.title}),x.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:e.description}),(0,x.jsxs)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${"Alto"===e.impact?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"M\xe9dio"===e.impact?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}`,children:["Impacto ",e.impact]})]})]})},a)})})]}),(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,x.jsxs)("h4",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center",children:[x.jsx(j.Z,{className:"h-5 w-5 mr-2"})," \uD83D\uDD2E Previs\xf5es IA"]}),x.jsx("div",{className:"space-y-4",children:[{metric:"Receita Pr\xf3ximo M\xeas",predicted:"R$ 3.2M",confidence:85,trend:"up"},{metric:"Vendas Pr\xf3ximo M\xeas",predicted:"180 vendas",confidence:78,trend:"up"},{metric:"Pre\xe7o M\xe9dio Tend\xeancia",predicted:"R$ 31.500",confidence:72,trend:"up"}].map((e,a)=>(0,x.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("h5",{className:"font-medium text-gray-900 dark:text-white",children:e.metric}),"up"===e.trend?x.jsx(r.TrendingUpIcon,{className:"h-4 w-4 text-green-500"}):x.jsx(r.TrendingDownIcon,{className:"h-4 w-4 text-red-500"})]}),x.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:e.predicted}),(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Confian\xe7a: ",e.confidence,"%"]}),x.jsx("div",{className:"w-24 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:x.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-500",style:{width:`${e.confidence}%`}})})]})]},a))})]})]})]})}var f=t(4308),y=t(2807);function InviteSystem({userId:e}){let[a,t]=(0,m.useState)([]),[r,s]=(0,m.useState)({name:"",phone:"",email:"",permissions:["view_sales","view_rankings"]}),[l,i]=(0,m.useState)(!1),[d,n]=(0,m.useState)(!1),[o,c]=(0,m.useState)(!1),[g,h]=(0,m.useState)(""),[u,b]=(0,m.useState)(!1),[p,v]=(0,m.useState)(!1),[j,f]=(0,m.useState)("");(0,m.useEffect)(()=>{loadInvites()},[]);let loadInvites=async()=>{try{let a=await y.X.getInvites(e);t(a)}catch(e){console.error("Erro ao carregar convites:",e)}},sendInvite=async()=>{if(!r.name||!r.phone){alert("Nome e telefone s\xe3o obrigat\xf3rios!");return}i(!0);try{let l={...r,invitedBy:e,phone:formatPhone(r.phone),customMessage:j||void 0},i=await y.X.sendInvite(l);t([...a,i]),s({name:"",phone:"",email:"",permissions:["view_sales","view_rankings"]}),f(""),n(!1);let d=confirm(`Convite enviado para ${r.name}! 📱

Deseja gerar um QR Code tamb\xe9m?`);d&&(h(i.inviteLink),c(!0))}catch(e){console.error("Erro ao enviar convite:",e),alert("Erro ao enviar convite. Tente novamente.")}finally{i(!1)}},formatPhone=e=>{let a=e.replace(/\D/g,"");return 11===a.length?`+55${a}`:13===a.length&&a.startsWith("55")?`+${a}`:e},revokeInvite=async e=>{if(confirm("Tem certeza que deseja revogar este convite?"))try{await y.X.revokeInvite(e),t(a.filter(a=>a.id!==e))}catch(e){console.error("Erro ao revogar convite:",e)}},getStatusIcon=e=>{switch(e){case"pending":return"⏳";case"accepted":return"✅";case"expired":return"⏰";case"revoked":return"❌";default:return"\uD83D\uDCE4"}},getStatusColor=e=>{switch(e){case"pending":return"text-yellow-600 bg-yellow-50";case"accepted":return"text-green-600 bg-green-50";case"expired":return"text-gray-600 bg-gray-50";case"revoked":return"text-red-600 bg-red-50";default:return"text-blue-600 bg-blue-50"}};return(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,x.jsxs)("div",{children:[x.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center",children:"\uD83D\uDCF1 Sistema de Convites"}),x.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Convide pessoas para acompanhar suas vendas em tempo real"})]}),(0,x.jsxs)("button",{onClick:()=>n(!d),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[x.jsx("span",{children:"➕"}),x.jsx("span",{children:"Novo Convite"})]})]}),d&&(0,x.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCE4 Enviar Novo Convite"}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nome *"}),x.jsx("input",{type:"text",value:r.name,onChange:e=>s({...r,name:e.target.value}),placeholder:"Ex: Jo\xe3o Silva",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-white"})]}),(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Telefone/WhatsApp *"}),x.jsx("input",{type:"tel",value:r.phone,onChange:e=>s({...r,phone:e.target.value}),placeholder:"(11) 99999-9999",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-white"})]})]}),(0,x.jsxs)("div",{className:"mb-4",children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email (opcional)"}),x.jsx("input",{type:"email",value:r.email,onChange:e=>s({...r,email:e.target.value}),placeholder:"joao@email.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:text-white"})]}),(0,x.jsxs)("div",{className:"mb-4",children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Permiss\xf5es"}),x.jsx("div",{className:"space-y-2",children:[{id:"view_sales",label:"Ver vendas em tempo real",icon:"\uD83D\uDCB0"},{id:"view_rankings",label:"Ver rankings e compara\xe7\xf5es",icon:"\uD83C\uDFC6"},{id:"view_analytics",label:"Ver an\xe1lises e relat\xf3rios",icon:"\uD83D\uDCCA"},{id:"receive_alerts",label:"Receber alertas de vendas",icon:"\uD83D\uDD14"}].map(e=>(0,x.jsxs)("label",{className:"flex items-center space-x-2",children:[x.jsx("input",{type:"checkbox",checked:r.permissions.includes(e.id),onChange:a=>{a.target.checked?s({...r,permissions:[...r.permissions,e.id]}):s({...r,permissions:r.permissions.filter(a=>a!==e.id)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,x.jsxs)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.icon," ",e.label]})]},e.id))})]}),(0,x.jsxs)("div",{className:"flex space-x-3",children:[x.jsx("button",{onClick:sendInvite,disabled:l,className:"bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:l?(0,x.jsxs)(x.Fragment,{children:[x.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),x.jsx("span",{children:"Enviando..."})]}):(0,x.jsxs)(x.Fragment,{children:[x.jsx("span",{children:"\uD83D\uDCF1"}),x.jsx("span",{children:"Enviar Convite"})]})}),x.jsx("button",{onClick:()=>n(!1),className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"Cancelar"})]})]}),(0,x.jsxs)("div",{className:"space-y-3",children:[(0,x.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["\uD83D\uDCCB Convites Enviados (",a.length,")"]}),0===a.length?(0,x.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[x.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDCF1"}),x.jsx("p",{children:"Nenhum convite enviado ainda"}),x.jsx("p",{className:"text-sm",children:'Clique em "Novo Convite" para come\xe7ar'})]}):x.jsx("div",{className:"space-y-2",children:a.map(e=>(0,x.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:"text-2xl",children:"\uD83D\uDC64"}),(0,x.jsxs)("div",{children:[x.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e.name}),(0,x.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.phone," ",e.email&&`• ${e.email}`]}),(0,x.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Enviado em ",new Date(e.createdAt).toLocaleDateString("pt-BR")]})]})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,x.jsxs)("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(e.status)}`,children:[getStatusIcon(e.status)," ","pending"===e.status?"Pendente":"accepted"===e.status?"Aceito":"expired"===e.status?"Expirado":"Revogado"]}),"accepted"===e.status&&x.jsx("div",{className:"text-xs text-green-600 dark:text-green-400",children:"\uD83D\uDFE2 Online"}),"pending"===e.status&&x.jsx("button",{onClick:()=>revokeInvite(e.id),className:"text-red-500 hover:text-red-700 text-sm",title:"Revogar convite",children:"❌"})]})]},e.id))})]}),x.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-600",children:(0,x.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,x.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[x.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:a.length}),x.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total"})]}),(0,x.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[x.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:a.filter(e=>"accepted"===e.status).length}),x.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Aceitos"})]}),(0,x.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-lg",children:[x.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:a.filter(e=>"pending"===e.status).length}),x.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Pendentes"})]}),(0,x.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg",children:[x.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:a.filter(e=>"accepted"===e.status).length}),x.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Online"})]})]})})]})}var N=t(8565),k=t(9636);function ModernDashboard(){(0,g.useRouter)();let[e,a]=(0,m.useState)("30d"),[t,r]=(0,m.useState)(!1),[s,l]=(0,m.useState)(null),[i,d]=(0,m.useState)(!1),[n,o]=(0,m.useState)("dashboard"),[c,h]=(0,m.useState)(!1),[u,b]=(0,m.useState)([]),[p,v]=(0,m.useState)({totalAnimals:0,activeAnimals:0,totalInvested:0,totalRevenue:0,avgROI:0,topPerformer:null});return(0,m.useEffect)(()=>{let loadRealData=async()=>{try{let e=[],a=[],t=e.length,r=e.filter(e=>"ATIVO"===e.status).length,s=e.reduce((e,a)=>{let t=a.costs||[],r=t.filter(e=>"VENDA"!==e.tipo).reduce((e,a)=>e+a.valor,0);return e+r},0),l=a.reduce((e,a)=>e+a.valor,0),i=0,d=0,n=null,o=-1/0;a.forEach(a=>{let t=e.find(e=>e.id===a.animalId);if(t){let e=t.costs||[],r=e.filter(e=>"VENDA"!==e.tipo).reduce((e,a)=>e+a.valor,0);if(r>0){let e=a.valor-r-(a.comissao||0)-(a.taxas||0),s=e/r*100;i+=s,d+=1,s>o&&(o=s,n={...t,saleValue:a.valor,roi:s})}}});let c=d>0?i/d:0;v({totalAnimals:t,activeAnimals:r,totalInvested:s,totalRevenue:l,avgROI:c,topPerformer:n,lastUpdate:new Date})}catch(e){console.error("Erro ao carregar dados reais:",e)}};loadRealData();let e=setInterval(loadRealData,3e4);return()=>clearInterval(e)},[]),(0,x.jsxs)("div",{className:"space-y-8",children:[(0,x.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-700 rounded-3xl p-8 text-white relative overflow-hidden",children:[x.jsx("div",{className:"absolute inset-0 bg-black opacity-10"}),x.jsx("div",{className:"relative z-10",children:(0,x.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[(0,x.jsxs)("div",{className:"mb-6 lg:mb-0",children:[(0,x.jsxs)("h1",{className:"text-4xl font-bold mb-3 flex items-center",children:["\uD83D\uDE80 Dashboard Inteligente",x.jsx("span",{className:"ml-4 px-4 py-2 bg-white/20 rounded-full text-sm font-medium backdrop-blur-sm",children:"v3.0 Pro + Market AI"})]}),x.jsx("p",{className:"text-blue-100 text-lg leading-relaxed",children:"An\xe1lise avan\xe7ada do seu rebanho com dados de mercado em tempo real"}),(0,x.jsxs)("div",{className:"mt-4 flex items-center space-x-6 text-sm",children:[(0,x.jsxs)("div",{className:"flex items-center",children:[x.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse"}),x.jsx("span",{children:"Sistema Online"})]}),(0,x.jsxs)("div",{className:"flex items-center",children:[x.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full mr-2"}),(0,x.jsxs)("span",{children:["\xdaltima atualiza\xe7\xe3o: ",p.lastUpdate?.toLocaleTimeString()||"Carregando..."]})]}),(0,x.jsxs)("div",{className:"flex items-center",children:[x.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full mr-2 animate-pulse"}),x.jsx("span",{children:"APIs de Mercado Ativas"})]})]})]}),("dashboard"===n||"sales"===n||"analytics"===n)&&(0,x.jsxs)("div",{className:"flex flex-col space-y-4",children:[x.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"7d",label:"7 dias"},{value:"30d",label:"30 dias"},{value:"90d",label:"3 meses"},{value:"1y",label:"1 ano"},{value:"all",label:"Todos"}].map(t=>x.jsx("button",{onClick:()=>a(t.value),className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${e===t.value?"bg-white text-blue-600 shadow-lg transform scale-105":"bg-white/20 text-white hover:bg-white/30 backdrop-blur-sm"}`,children:t.label},t.value))}),(0,x.jsxs)("div",{className:"text-right",children:[x.jsx("div",{className:"text-2xl font-bold",children:p.totalAnimals}),x.jsx("div",{className:"text-blue-200 text-sm",children:"Animais Cadastrados"})]})]}),!["dashboard","sales","analytics"].includes(n)&&(0,x.jsxs)("div",{className:"text-right",children:[x.jsx("div",{className:"text-2xl font-bold",children:"market"===n?"\uD83D\uDCC8":"comparison"===n?"\uD83D\uDD0D":"\uD83D\uDCCA"}),x.jsx("div",{className:"text-blue-200 text-sm",children:"market"===n?"Dados de Mercado":"comparison"===n?"An\xe1lise de Pre\xe7os":"Analytics"})]})]})}),x.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white opacity-5 rounded-full -mr-32 -mt-32"}),x.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-white opacity-5 rounded-full -ml-24 -mb-24"})]}),x.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700",children:x.jsx("div",{className:"flex flex-wrap gap-4",children:[{id:"dashboard",label:"\uD83C\uDFE0 Dashboard",description:"Vis\xe3o geral do rebanho"},{id:"sales",label:"\uD83D\uDCB0 Vendas",description:"Dashboard completo de vendas"},{id:"analytics",label:"\uD83D\uDCCA An\xe1lise Comparativa",description:"FIV vs IA, performance por touro, av\xf4 materno"},{id:"materials",label:"\uD83D\uDCE6 Materiais & Custos",description:"Gest\xe3o de materiais, medicamentos e custos"},{id:"market",label:"\uD83D\uDCC8 Market Intelligence",description:"Dados de mercado em tempo real"},{id:"comparison",label:"\uD83D\uDD0D Compara\xe7\xe3o",description:"Compare seus animais com o mercado"},{id:"invites",label:"\uD83D\uDCF1 Convites",description:"Convide pessoas para acompanhar suas vendas"},{id:"notifications",label:"\uD83D\uDD14 Notifica\xe7\xf5es",description:"Alertas e atualiza\xe7\xf5es em tempo real"}].map(e=>(0,x.jsxs)("button",{onClick:()=>o(e.id),className:`flex-1 min-w-[200px] p-4 rounded-xl text-left transition-all duration-300 transform hover:scale-105 ${n===e.id?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[x.jsx("div",{className:"font-semibold text-lg mb-1",children:e.label}),x.jsx("div",{className:`text-sm ${n===e.id?"text-blue-100":"text-gray-500 dark:text-gray-400"}`,children:e.description})]},e.id))})}),(()=>{switch(n){case"sales":return x.jsx(SalesDashboard,{onOpenSalesManager:()=>h(!0)});case"analytics":return x.jsx(SalesAnalytics,{});case"materials":return x.jsx(k.Z,{userId:"user123"});case"market":return x.jsx(MarketDashboard,{});case"comparison":return x.jsx(PriceComparison,{});case"invites":return x.jsx(InviteSystem,{userId:"user123"});case"notifications":return x.jsx(N.Z,{userId:"user123"});default:return(0,x.jsxs)("div",{className:"space-y-8",children:[x.jsx(LiveStats,{data:p}),x.jsx(MetricsCards,{timeRange:e,onReportClick:e=>{l(e),r(!0)}}),x.jsx(QuickActions,{onROICalculatorOpen:()=>d(!0)}),x.jsx(SmartAlerts,{}),(0,x.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[x.jsx("div",{className:"xl:col-span-2",children:x.jsx(AdvancedCharts,{timeRange:e})}),x.jsx("div",{children:x.jsx(AnimalPerformance,{})})]})]})}})(),t&&x.jsx(ReportsModal,{reportType:s,onClose:()=>r(!1),timeRange:e}),x.jsx(ROICalculator,{isOpen:i,onClose:()=>d(!1)}),x.jsx(f.Z,{isOpen:c,onClose:()=>h(!1),selectedAnimals:u,onSalesComplete:()=>{b([])}})]})}var w=t(7087),D=t(8357),C=t(8680),S=t(2268),A=t(6249),R=t(36);function SimpleAnimalManager({isOpen:e,onClose:a}){let[t,r]=(0,m.useState)([]),[s,l]=(0,m.useState)(!1),[i,d]=(0,m.useState)(!1),[n,o]=(0,m.useState)(null);(0,m.useEffect)(()=>{e&&loadAnimals()},[e]);let loadAnimals=async()=>{try{l(!0);let e=await fetch("/api/animals");if(e.ok){let a=await e.json();r(a)}else console.error("Erro ao carregar animais")}catch(e){console.error("Erro ao carregar animais:",e)}finally{l(!1)}},handleSaveAnimal=async e=>{try{let a=n?`/api/animals/${n.id}`:"/api/animals",t=n?"PUT":"POST",r=await fetch(a,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(r.ok)loadAnimals(),d(!1),o(null),alert(n?"Animal atualizado!":"Animal salvo!");else{let e=await r.json();alert(`Erro: ${e.error||"Erro desconhecido"}`)}}catch(e){console.error("Erro ao salvar animal:",e),alert("Erro ao salvar animal")}},handleEditAnimal=e=>{o(e),d(!0)},handleDeleteAnimal=async e=>{if(confirm("Excluir este animal?"))try{let a=await fetch(`/api/animals/${e}`,{method:"DELETE"});a.ok?(loadAnimals(),alert("Animal exclu\xeddo!")):alert("Erro ao excluir")}catch(e){console.error("Erro ao excluir:",e),alert("Erro ao excluir")}};return e?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-green-600 to-emerald-600",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[x.jsx(D.Z,{className:"h-8 w-8 text-white"}),(0,x.jsxs)("div",{children:[x.jsx("h2",{className:"text-2xl font-bold text-white",children:"\uD83D\uDC04 Cadastro de Animais"}),x.jsx("p",{className:"text-green-100",children:"S\xe9rie • RG • Sexo • Era • Pre\xe7o"})]})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,x.jsxs)("button",{onClick:()=>{o(null),d(!0)},className:"px-6 py-3 bg-white/20 text-white rounded-lg hover:bg-white/30 transition-colors flex items-center font-medium",children:[x.jsx(C.Z,{className:"h-5 w-5 mr-2"}),"Novo Animal"]}),x.jsx("button",{onClick:a,className:"p-2 hover:bg-white/20 rounded-lg transition-colors text-white text-2xl font-bold",children:"\xd7"})]})]}),x.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[(0,x.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[(0,x.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["\uD83D\uDC04 Animais Cadastrados (",t.length,")"]}),(0,x.jsxs)("button",{onClick:()=>{o(null),d(!0)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center",children:[x.jsx(C.Z,{className:"h-4 w-4 mr-2"}),"Novo"]})]}),s?(0,x.jsxs)("div",{className:"p-8 text-center",children:[x.jsx("div",{className:"animate-spin text-2xl mb-2",children:"⏳"}),x.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Carregando..."})]}):0===t.length?(0,x.jsxs)("div",{className:"p-8 text-center",children:[x.jsx("div",{className:"text-6xl mb-4",children:"\uD83D\uDC04"}),x.jsx("div",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Nenhum animal cadastrado"}),x.jsx("button",{onClick:()=>{o(null),d(!0)},className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Cadastrar Primeiro Animal"})]}):x.jsx("div",{className:"overflow-x-auto",children:(0,x.jsxs)("table",{className:"w-full",children:[x.jsx("thead",{children:(0,x.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:[x.jsx("th",{className:"text-left p-4 font-semibold text-gray-900 dark:text-white",children:"S\xe9rie"}),x.jsx("th",{className:"text-left p-4 font-semibold text-gray-900 dark:text-white",children:"RG"}),x.jsx("th",{className:"text-center p-4 font-semibold text-gray-900 dark:text-white",children:"Sexo"}),x.jsx("th",{className:"text-center p-4 font-semibold text-gray-900 dark:text-white",children:"Era"}),x.jsx("th",{className:"text-center p-4 font-semibold text-gray-900 dark:text-white",children:"Pre\xe7o"}),x.jsx("th",{className:"text-center p-4 font-semibold text-gray-900 dark:text-white",children:"Status"}),x.jsx("th",{className:"text-center p-4 font-semibold text-gray-900 dark:text-white",children:"A\xe7\xf5es"})]})}),x.jsx("tbody",{children:t.map(e=>(0,x.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,x.jsxs)("td",{className:"p-4",children:[x.jsx("div",{className:"font-bold text-lg text-gray-900 dark:text-white",children:e.serie||e.brinco?.split(" ")[0]}),x.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.raca})]}),(0,x.jsxs)("td",{className:"p-4",children:[x.jsx("div",{className:"font-mono text-lg font-bold text-gray-900 dark:text-white",children:e.rg||e.brinco?.split(" ")[1]}),x.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.brinco})]}),x.jsx("td",{className:"p-4 text-center",children:x.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${"MACHO"===e.sexo?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200"}`,children:"MACHO"===e.sexo?"\uD83D\uDC02 Macho":"\uD83D\uDC04 F\xeamea"})}),x.jsx("td",{className:"p-4 text-center",children:x.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e.era?`${e.era}m`:"N/I"})}),x.jsx("td",{className:"p-4 text-center",children:x.jsx("div",{className:"font-bold text-green-600 dark:text-green-400",children:e.valorVenda?`R$ ${e.valorVenda.toLocaleString("pt-BR",{minimumFractionDigits:2})}`:"N/I"})}),x.jsx("td",{className:"p-4 text-center",children:x.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${"ATIVO"===e.status?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"VENDIDO"===e.status?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:e.status})}),x.jsx("td",{className:"p-4 text-center",children:(0,x.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[x.jsx("button",{onClick:()=>handleEditAnimal(e),className:"p-2 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900 rounded-lg transition-colors",title:"Editar",children:x.jsx(S.Z,{className:"h-4 w-4"})}),x.jsx("button",{onClick:()=>handleDeleteAnimal(e.id),className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded-lg transition-colors",title:"Excluir",children:x.jsx(A.Z,{className:"h-4 w-4"})})]})})]},e.id))})]})})]})}),x.jsx(R.Z,{animal:n,isOpen:i,onClose:()=>{d(!1),o(null)},onSave:handleSaveAnimal})]})}):null}var P=t(8523),I=t(1113);function DirectInvoiceManager({isOpen:e,onClose:a}){let[t,r]=(0,m.useState)({numero:"",dataVenda:new Date().toISOString().split("T")[0],status:"PENDENTE",compradorNome:"",compradorCpfCnpj:"",compradorEndereco:"",compradorCidade:"",compradorEstado:"",compradorCep:"",observacoes:""}),[s,l]=(0,m.useState)([]),[i,d]=(0,m.useState)(!1),[n,o]=(0,m.useState)(!1),[c,g]=(0,m.useState)({serie:"",rg:"",sexo:"",era:"",preco:"",raca:""}),removeAnimal=e=>{l(s.filter(a=>a.id!==e))},getRacaBySerie=e=>({RPT:"Receptora",BENT:"Brahman",CJCJ:"Nelore",CJCG:"Gir"})[e]||"N\xe3o definida",handleSerieChange=e=>{let a=getRacaBySerie(e);g({...c,serie:e,raca:a})},calculateTotal=()=>s.reduce((e,a)=>e+(a.preco||0),0),handleSave=async()=>{if(!t.numero||!t.compradorNome||0===s.length){alert("Preencha n\xfamero da NF, comprador e adicione pelo menos um animal");return}try{let e=[];for(let a of s){let r={serie:a.serie,rg:a.rg,brinco:a.brinco,nome:a.brinco,sexo:"Macho"===a.sexo?"MACHO":"FEMEA",raca:a.raca,status:"VENDIDO",era:a.era,valorVenda:a.preco,observacoes:`Vendido na NF ${t.numero}`,dataNascimento:a.era?calculateBirthDate(a.era):null},s=await fetch("/api/animals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(s.ok){let t=await s.json();e.push({id:t.id,brinco:t.brinco,nome:t.nome,raca:t.raca,sexo:t.sexo,preco:a.preco})}}let r={...t,animais:e,valorTotal:calculateTotal()},l=await fetch("/api/invoices",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});l.ok?(alert(`NF ${t.numero} criada com sucesso! ${s.length} animais cadastrados.`),a()):alert("Erro ao criar NF")}catch(e){console.error("Erro ao salvar:",e),alert("Erro ao salvar dados")}},calculateBirthDate=e=>{if(!e)return null;let a=parseInt(e);if(isNaN(a))return null;let t=new Date,r=new Date(t.getFullYear(),t.getMonth()-a,t.getDate());return r.toISOString().split("T")[0]};return e?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-7xl w-full max-h-[90vh] overflow-hidden",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-600 to-indigo-600",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[x.jsx(P.Z,{className:"h-8 w-8 text-white"}),(0,x.jsxs)("div",{children:[x.jsx("h2",{className:"text-2xl font-bold text-white",children:"\uD83D\uDCCB Criar Nota Fiscal"}),x.jsx("p",{className:"text-blue-100",children:"Cadastre animais diretamente na NF"})]})]}),x.jsx("button",{onClick:a,className:"p-2 hover:bg-white/20 rounded-lg transition-colors text-white text-2xl font-bold",children:"\xd7"})]}),(0,x.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)] space-y-6",children:[(0,x.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900 rounded-xl p-6",children:[x.jsx("h3",{className:"text-lg font-bold text-blue-900 dark:text-blue-100 mb-4 flex items-center",children:"\uD83D\uDCC4 Dados da Nota Fiscal"}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:"N\xfamero da NF *"}),x.jsx("input",{type:"text",value:t.numero,onChange:e=>r({...t,numero:e.target.value}),className:"w-full px-4 py-3 border border-blue-300 dark:border-blue-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-lg font-medium",placeholder:"Ex: 001"})]}),(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:"Data da Venda *"}),x.jsx("input",{type:"date",value:t.dataVenda,onChange:e=>r({...t,dataVenda:e.target.value}),className:"w-full px-4 py-3 border border-blue-300 dark:border-blue-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-lg"})]}),(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:"Status"}),(0,x.jsxs)("select",{value:t.status,onChange:e=>r({...t,status:e.target.value}),className:"w-full px-4 py-3 border border-blue-300 dark:border-blue-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white text-lg",children:[x.jsx("option",{value:"PENDENTE",children:"Pendente"}),x.jsx("option",{value:"EMITIDA",children:"Emitida"}),x.jsx("option",{value:"PAGA",children:"Paga"})]})]})]})]}),(0,x.jsxs)("div",{className:"bg-green-50 dark:bg-green-900 rounded-xl p-6",children:[(0,x.jsxs)("h3",{className:"text-lg font-bold text-green-900 dark:text-green-100 mb-4 flex items-center",children:[x.jsx(I.Z,{className:"h-5 w-5 mr-2"}),"Dados do Comprador"]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-green-800 dark:text-green-200 mb-2",children:"Nome/Raz\xe3o Social *"}),x.jsx("input",{type:"text",value:t.compradorNome,onChange:e=>r({...t,compradorNome:e.target.value}),className:"w-full px-4 py-3 border border-green-300 dark:border-green-600 rounded-lg focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white text-lg",placeholder:"Nome do comprador"})]}),(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-green-800 dark:text-green-200 mb-2",children:"CPF/CNPJ"}),x.jsx("input",{type:"text",value:t.compradorCpfCnpj,onChange:e=>r({...t,compradorCpfCnpj:e.target.value}),className:"w-full px-4 py-3 border border-green-300 dark:border-green-600 rounded-lg focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white text-lg",placeholder:"000.000.000-00"})]}),(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-green-800 dark:text-green-200 mb-2",children:"Cidade"}),x.jsx("input",{type:"text",value:t.compradorCidade,onChange:e=>r({...t,compradorCidade:e.target.value}),className:"w-full px-4 py-3 border border-green-300 dark:border-green-600 rounded-lg focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white text-lg",placeholder:"Nome da cidade"})]}),(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-green-800 dark:text-green-200 mb-2",children:"Estado"}),(0,x.jsxs)("select",{value:t.compradorEstado,onChange:e=>r({...t,compradorEstado:e.target.value}),className:"w-full px-4 py-3 border border-green-300 dark:border-green-600 rounded-lg focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white text-lg",children:[x.jsx("option",{value:"",children:"Selecionar..."}),["AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"].map(e=>x.jsx("option",{value:e,children:e},e))]})]})]})]}),(0,x.jsxs)("div",{className:"bg-orange-50 dark:bg-orange-900 rounded-xl p-6",children:[x.jsx("h3",{className:"text-lg font-bold text-orange-900 dark:text-orange-100 mb-4",children:"\uD83D\uDC04 Cadastrar Animais na NF"}),(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 mb-4 border-2 border-orange-200 dark:border-orange-700",children:[x.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Adicionar Animal Individual"}),(0,x.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-3",children:[(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"S\xe9rie *"}),(0,x.jsxs)("select",{value:c.serie,onChange:e=>handleSerieChange(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white",children:[x.jsx("option",{value:"",children:"Selecione..."}),["RPT","BENT","CJCJ","CJCG"].map(e=>x.jsx("option",{value:e,children:e},e))]})]}),(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"RG *"}),x.jsx("input",{type:"text",value:c.rg,onChange:e=>g({...c,rg:e.target.value}),maxLength:6,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white",placeholder:"123456"})]}),(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Ra\xe7a"}),x.jsx("input",{type:"text",value:c.raca,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-600",placeholder:"",readOnly:!0})]}),(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sexo *"}),(0,x.jsxs)("select",{value:c.sexo,onChange:e=>g({...c,sexo:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white",children:[x.jsx("option",{value:"",children:"Selecione..."}),x.jsx("option",{value:"Macho",children:"Macho"}),x.jsx("option",{value:"F\xeamea",children:"F\xeamea"})]})]}),(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Era (meses)"}),x.jsx("input",{type:"number",value:c.era,onChange:e=>g({...c,era:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white",placeholder:"24"})]}),(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Pre\xe7o (R$)"}),x.jsx("input",{type:"number",step:"0.01",value:c.preco,onChange:e=>g({...c,preco:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 dark:bg-gray-700 dark:text-white",placeholder:"5000.00"})]})]}),(0,x.jsxs)("div",{className:"mt-3 flex justify-between items-center",children:[x.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.serie&&c.rg&&(0,x.jsxs)("span",{children:["Brinco: ",(0,x.jsxs)("strong",{children:[c.serie," ",c.rg]})," | Ra\xe7a: ",x.jsx("strong",{children:getRacaBySerie(c.serie)})]})}),(0,x.jsxs)("button",{onClick:()=>{if(!c.serie||!c.rg||!c.sexo){alert("Preencha S\xe9rie, RG e Sexo do animal");return}let e=`${c.serie} ${c.rg}`;if(s.find(a=>a.brinco===e)){alert("J\xe1 existe um animal com este brinco na lista");return}let a={id:Date.now(),serie:c.serie,rg:c.rg,brinco:`${c.serie} ${c.rg}`,sexo:c.sexo,era:c.era||null,preco:parseFloat(c.preco)||0,raca:getRacaBySerie(c.serie)};l([...s,a]),g({serie:"",rg:"",sexo:"",era:"",preco:""})},className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors flex items-center",children:[x.jsx(C.Z,{className:"h-4 w-4 mr-2"}),"Adicionar"]})]})]}),s.length>0&&(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4",children:[(0,x.jsxs)("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:["Animais na NF (",s.length,")"]}),x.jsx("div",{className:"space-y-2",children:s.map(e=>x.jsx("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:(0,x.jsxs)("div",{className:"flex-1 grid grid-cols-2 md:grid-cols-5 gap-4 text-sm",children:[(0,x.jsxs)("div",{children:[x.jsx("span",{className:"font-medium",children:e.brinco}),x.jsx("div",{className:"text-xs text-gray-500",children:e.raca})]}),x.jsx("div",{children:x.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${"Macho"===e.sexo?"bg-blue-100 text-blue-800":"bg-pink-100 text-pink-800"}`,children:"Macho"===e.sexo?"\uD83D\uDC02 Macho":"\uD83D\uDC04 F\xeamea"})}),x.jsx("div",{children:e.era?`${e.era} meses`:"N/I"}),(0,x.jsxs)("div",{className:"font-bold text-green-600",children:["R$ ",e.preco.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),x.jsx("div",{className:"flex justify-end",children:x.jsx("button",{onClick:()=>removeAnimal(e.id),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Remover",children:x.jsx(A.Z,{className:"h-4 w-4"})})})]})},e.id))}),x.jsx("div",{className:"mt-4 text-right",children:(0,x.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["Total: R$ ",calculateTotal().toLocaleString("pt-BR",{minimumFractionDigits:2})]})})]})]}),(0,x.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900 rounded-xl p-6",children:[x.jsx("h3",{className:"text-lg font-bold text-purple-900 dark:text-purple-100 mb-4",children:"\uD83D\uDCCA Op\xe7\xf5es de Importa\xe7\xe3o"}),(0,x.jsxs)("div",{className:"flex space-x-4",children:[(0,x.jsxs)("button",{onClick:()=>d(!0),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all duration-200 flex items-center shadow-lg",children:[x.jsx(P.Z,{className:"h-5 w-5 mr-2"}),"\uD83D\uDCC4 Importar GTA"]}),(0,x.jsxs)("button",{onClick:()=>o(!0),className:"px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all duration-200 flex items-center shadow-lg",children:[x.jsx(C.Z,{className:"h-5 w-5 mr-2"}),"\uD83D\uDCCA Adicionar Lote"]})]})]}),(0,x.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-6",children:[x.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"\uD83D\uDCDD Observa\xe7\xf5es"}),x.jsx("textarea",{value:t.observacoes,onChange:e=>r({...t,observacoes:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-gray-500 dark:bg-gray-600 dark:text-white",rows:3,placeholder:"Observa\xe7\xf5es sobre a venda..."})]}),(0,x.jsxs)("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[x.jsx("button",{onClick:a,className:"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium",children:"Cancelar"}),(0,x.jsxs)("button",{onClick:handleSave,disabled:!t.numero||!t.compradorNome||0===s.length,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:["\uD83D\uDCBE Criar NF com ",s.length," Animais"]})]})]}),i&&x.jsx(GTAImportModal,{isOpen:i,onClose:()=>d(!1),onAnimalsImported:e=>{l([...s,...e]),d(!1)}}),n&&x.jsx(BulkAddModal,{isOpen:n,onClose:()=>o(!1),onAnimalsAdded:e=>{l([...s,...e]),o(!1)}})]})}):null}function GTAImportModal({isOpen:e,onClose:a,onAnimalsImported:r}){let[s,l]=(0,m.useState)(!1),[i,d]=(0,m.useState)(""),[n,o]=(0,m.useState)([]),c=(0,m.useRef)(null),handlePDFUpload=async e=>{if(!e||"application/pdf"!==e.type){alert("Por favor, selecione um arquivo PDF v\xe1lido.");return}l(!0);try{let a=await Promise.resolve().then(t.bind(t,121));a.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${a.version}/pdf.worker.min.js`;let r=await e.arrayBuffer(),s=await a.getDocument(r).promise,l="";for(let e=1;e<=s.numPages;e++){let a=await s.getPage(e),t=await a.getTextContent(),r=t.items.map(e=>e.str).join(" ");l+=r+"\n"}d(l);let i=extractAnimalsFromText(l);o(i),0===i.length&&alert("Nenhum animal encontrado no PDF. Verifique o arquivo.")}catch(e){console.error("Erro ao processar PDF:",e),alert("Erro ao processar PDF. Tente novamente.")}finally{l(!1)}},extractAnimalsFromText=e=>{let a=[],t=e.matchAll(/(CJCJ|BENT|RPT|CJCG)\s+(\d{1,6})/gi);for(let e of t){let t=e[1].toUpperCase(),r=e[2],s=`${t} ${r}`;a.find(e=>e.brinco===s)||a.push({id:Date.now()+Math.random(),serie:t,rg:r,brinco:s,sexo:"",era:"",preco:"",raca:getRacaBySerie(t)})}return a},getRacaBySerie=e=>({RPT:"Receptora",BENT:"Brahman",CJCJ:"Nelore",CJCG:"Gir"})[e]||"N\xe3o definida";return e?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[80vh] overflow-hidden",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-purple-600 to-indigo-600",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[x.jsx(P.Z,{className:"h-8 w-8 text-white"}),(0,x.jsxs)("div",{children:[x.jsx("h3",{className:"text-xl font-bold text-white",children:"\uD83D\uDCC4 Importar GTA"}),x.jsx("p",{className:"text-purple-100",children:"Extrair animais do PDF da GTA"})]})]}),x.jsx("button",{onClick:a,className:"p-2 hover:bg-white/20 rounded-lg transition-colors text-white text-xl font-bold",children:"\xd7"})]}),x.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(80vh-120px)]",children:n.length?(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"bg-green-50 dark:bg-green-900 rounded-xl p-4 mb-6",children:[(0,x.jsxs)("h4",{className:"font-bold text-green-900 dark:text-green-100 mb-2",children:["✅ ",n.length," animais encontrados!"]}),x.jsx("p",{className:"text-green-700 dark:text-green-300 text-sm",children:'Revise os dados e clique em "Importar" para adicionar \xe0 NF'})]}),x.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:x.jsx("div",{className:"overflow-x-auto",children:(0,x.jsxs)("table",{className:"w-full text-sm",children:[x.jsx("thead",{children:(0,x.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:[x.jsx("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white",children:"Brinco"}),x.jsx("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white",children:"S\xe9rie"}),x.jsx("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white",children:"RG"}),x.jsx("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white",children:"Ra\xe7a"})]})}),x.jsx("tbody",{children:n.map(e=>(0,x.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700",children:[x.jsx("td",{className:"p-3 font-mono font-bold text-gray-900 dark:text-white",children:e.brinco}),x.jsx("td",{className:"p-3 text-gray-600 dark:text-gray-400",children:e.serie}),x.jsx("td",{className:"p-3 text-gray-600 dark:text-gray-400",children:e.rg}),x.jsx("td",{className:"p-3 text-gray-600 dark:text-gray-400",children:e.raca})]},e.id))})]})})}),(0,x.jsxs)("div",{className:"flex justify-end space-x-4 mt-6",children:[x.jsx("button",{onClick:a,className:"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancelar"}),(0,x.jsxs)("button",{onClick:()=>{if(0===n.length){alert("Nenhum animal para importar.");return}r(n)},className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:["\uD83D\uDCE5 Importar ",n.length," Animais"]})]})]}):x.jsx("div",{className:"text-center",children:(0,x.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900 rounded-xl p-8 border-2 border-dashed border-purple-300 dark:border-purple-600",children:[x.jsx(P.Z,{className:"h-16 w-16 text-purple-500 mx-auto mb-4"}),x.jsx("h4",{className:"text-lg font-bold text-purple-900 dark:text-purple-100 mb-4",children:"Selecione o PDF da GTA"}),x.jsx("button",{onClick:()=>c.current?.click(),disabled:s,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:s?"\uD83D\uDD04 Processando...":"\uD83D\uDCC1 Escolher Arquivo"}),x.jsx("input",{ref:c,type:"file",accept:".pdf",onChange:e=>handlePDFUpload(e.target.files[0]),className:"hidden"}),x.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-300 mt-4",children:"O sistema ir\xe1 detectar automaticamente os animais no PDF"})]})})})]})}):null}function BulkAddModal({isOpen:e,onClose:a,onAnimalsAdded:t}){let[r,s]=(0,m.useState)([{id:1,serie:"",rg:"",sexo:"",era:"",preco:""}]),removeRow=e=>{s(r.filter(a=>a.id!==e))},updateAnimal=(e,a,t)=>{s(r.map(r=>r.id===e?{...r,[a]:t}:r))},getRacaBySerie=e=>({RPT:"Receptora",BENT:"Brahman",CJCJ:"Nelore",CJCG:"Gir"})[e]||"N\xe3o definida";return e?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-6xl w-full max-h-[80vh] overflow-hidden",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-green-600 to-emerald-600",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[x.jsx(C.Z,{className:"h-8 w-8 text-white"}),(0,x.jsxs)("div",{children:[x.jsx("h3",{className:"text-xl font-bold text-white",children:"\uD83D\uDCCA Adicionar Lote"}),x.jsx("p",{className:"text-green-100",children:"Cadastre m\xfaltiplos animais de uma vez"})]})]}),x.jsx("button",{onClick:a,className:"p-2 hover:bg-white/20 rounded-lg transition-colors text-white text-xl font-bold",children:"\xd7"})]}),(0,x.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(80vh-120px)]",children:[(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[(0,x.jsxs)("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[(0,x.jsxs)("h4",{className:"font-semibold text-gray-900 dark:text-white",children:["Animais para Adicionar (",r.length,")"]}),(0,x.jsxs)("button",{onClick:()=>{s([...r,{id:Date.now(),serie:"",rg:"",sexo:"",era:"",preco:""}])},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center",children:[x.jsx(C.Z,{className:"h-4 w-4 mr-2"}),"Adicionar Linha"]})]}),x.jsx("div",{className:"overflow-x-auto",children:(0,x.jsxs)("table",{className:"w-full text-sm",children:[x.jsx("thead",{children:(0,x.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:[x.jsx("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white",children:"S\xe9rie *"}),x.jsx("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white",children:"RG *"}),x.jsx("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white",children:"Sexo *"}),x.jsx("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white",children:"Era"}),x.jsx("th",{className:"text-left p-3 font-semibold text-gray-900 dark:text-white",children:"Pre\xe7o"}),x.jsx("th",{className:"text-center p-3 font-semibold text-gray-900 dark:text-white",children:"A\xe7\xf5es"})]})}),x.jsx("tbody",{children:r.map(e=>(0,x.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800",children:[x.jsx("td",{className:"p-3",children:(0,x.jsxs)("select",{value:e.serie,onChange:a=>updateAnimal(e.id,"serie",a.target.value),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-green-500 dark:bg-gray-600 dark:text-white",children:[x.jsx("option",{value:"",children:"Selecione..."}),x.jsx("option",{value:"RPT",children:"RPT"}),x.jsx("option",{value:"BENT",children:"BENT"}),x.jsx("option",{value:"CJCJ",children:"CJCJ"}),x.jsx("option",{value:"CJCG",children:"CJCG"})]})}),x.jsx("td",{className:"p-3",children:x.jsx("input",{type:"text",value:e.rg,onChange:a=>updateAnimal(e.id,"rg",a.target.value),maxLength:6,className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-green-500 dark:bg-gray-600 dark:text-white",placeholder:"123456"})}),x.jsx("td",{className:"p-3",children:(0,x.jsxs)("select",{value:e.sexo,onChange:a=>updateAnimal(e.id,"sexo",a.target.value),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-green-500 dark:bg-gray-600 dark:text-white",children:[x.jsx("option",{value:"",children:"Selecione..."}),x.jsx("option",{value:"Macho",children:"Macho"}),x.jsx("option",{value:"F\xeamea",children:"F\xeamea"})]})}),x.jsx("td",{className:"p-3",children:x.jsx("input",{type:"number",value:e.era,onChange:a=>updateAnimal(e.id,"era",a.target.value),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-green-500 dark:bg-gray-600 dark:text-white",placeholder:"24"})}),x.jsx("td",{className:"p-3",children:x.jsx("input",{type:"number",step:"0.01",value:e.preco,onChange:a=>updateAnimal(e.id,"preco",a.target.value),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-green-500 dark:bg-gray-600 dark:text-white",placeholder:"5000.00"})}),x.jsx("td",{className:"p-3 text-center",children:r.length>1&&x.jsx("button",{onClick:()=>removeRow(e.id),className:"p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded transition-colors",children:x.jsx(A.Z,{className:"h-4 w-4"})})})]},e.id))})]})})]}),(0,x.jsxs)("div",{className:"flex justify-end space-x-4 mt-6",children:[x.jsx("button",{onClick:a,className:"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancelar"}),x.jsx("button",{onClick:()=>{let e=r.filter(e=>e.serie&&e.rg&&e.sexo);if(0===e.length){alert("Preencha pelo menos um animal com S\xe9rie, RG e Sexo");return}let a=e.map(e=>({id:Date.now()+Math.random(),serie:e.serie,rg:e.rg,brinco:`${e.serie} ${e.rg}`,sexo:e.sexo,era:e.era,preco:parseFloat(e.preco)||0,raca:getRacaBySerie(e.serie)}));t(a)},className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"\uD83D\uDCE5 Adicionar Animais"})]})]})]})}):null}var T=t(794),M=t(4491),$=t(445),E=t(6654),F=t(1321),V=t(5837),B=t(3658);function SalesTimeline({salesData:e=[],isLive:a=!1}){let[t,r]=(0,m.useState)(new Date),[s,l]=(0,m.useState)([]),[i,d]=(0,m.useState)(a),[n,o]=(0,m.useState)("today"),c=(0,m.useRef)(null),g=(0,m.useRef)(null);(0,m.useEffect)(()=>{generateTimelineData()},[e,n]),(0,m.useEffect)(()=>(i?g.current=setInterval(()=>{r(new Date),.1>Math.random()&&addNewSale()},1e3):clearInterval(g.current),()=>clearInterval(g.current)),[i]),(0,m.useEffect)(()=>{drawTimeline()},[s,t]);let generateTimelineData=()=>{let a=new Date,t=[],r=new Date(a);r.setHours(8,0,0,0);let s=new Date(a);s.setHours(17,0,0,0);let i=(s-r)/6e4,d=e.length||98;for(let e=0;e<d;e++){let s=Math.floor(Math.random()*i),l=new Date(r.getTime()+6e4*s),d=1,n=l.getHours();n>=9&&n<=11&&(d=3),n>=14&&n<=16&&(d=4),n>=15&&n<=15.5&&(d=5),Math.random()<d/5&&t.push({id:e+1,time:l,animal:`CJCJ ${15e3+e}`,buyer:`Comprador ${Math.floor(e/5)+1}`,value:Math.floor(5e4*Math.random())+2e4,type:.1>Math.random()?"FIV":"IA",serie:["CJCJ","BENT","CJCG"][Math.floor(3*Math.random())],status:l<=a?"completed":"pending"})}t.sort((e,a)=>e.time-a.time),l(t)},addNewSale=()=>{let e={id:s.length+1,time:new Date,animal:`CJCJ ${15e3+s.length}`,buyer:`Comprador ${Math.floor(s.length/5)+1}`,value:Math.floor(5e4*Math.random())+2e4,type:.1>Math.random()?"FIV":"IA",serie:["CJCJ","BENT","CJCG"][Math.floor(3*Math.random())],status:"completed"};l(a=>[...a,e].sort((e,a)=>e.time-a.time))},drawTimeline=()=>{let e=c.current;if(!e||0===s.length)return;let a=e.getContext("2d"),t=e.width,r=e.height;a.clearRect(0,0,t,r);let l=r-120;a.strokeStyle="#e5e7eb",a.lineWidth=2,a.beginPath(),a.moveTo(60,60),a.lineTo(60,r-60),a.stroke(),a.fillStyle="#6b7280",a.font="12px Arial",a.textAlign="right";for(let e=8;e<=17;e++){let r=60+(e-8)/9*l;a.strokeStyle="#f3f4f6",a.lineWidth=1,a.beginPath(),a.moveTo(55,r),a.lineTo(t-60,r),a.stroke(),a.fillStyle="#6b7280",a.fillText(`${e}:00`,50,r+4)}let i=new Date,d=i.getHours()+i.getMinutes()/60;if(s.forEach((e,t)=>{let r=e.time.getHours()+e.time.getMinutes()/60;if(r>=8&&r<=17){let s=60+(r-8)/9*l,i=80+t%10*15,n="FIV"===e.type?"#10b981":"#3b82f6",o="completed"===e.status,c=r>d;a.fillStyle=c?"#d1d5db":n,a.beginPath(),a.arc(i,s,o?6:4,0,2*Math.PI),a.fill(),o&&(a.strokeStyle="#ffffff",a.lineWidth=2,a.stroke()),a.strokeStyle=c?"#d1d5db":n,a.lineWidth=1,a.beginPath(),a.moveTo(60,s),a.lineTo(i-6,s),a.stroke(),t<5&&(a.fillStyle="#1f2937",a.font="10px Arial",a.textAlign="left",a.fillText(`${e.animal} - R$ ${(e.value/1e3).toFixed(0)}k`,i+10,s-5))}}),d>=8&&d<=17){let e=60+(d-8)/9*l;a.strokeStyle="#ef4444",a.lineWidth=3,a.beginPath(),a.moveTo(50,e),a.lineTo(t-60,e),a.stroke(),a.fillStyle="#ef4444",a.font="bold 12px Arial",a.textAlign="left",a.fillText("AGORA",t-60-50,e-5)}a.fillStyle="#1f2937",a.font="bold 16px Arial",a.textAlign="center",a.fillText("\uD83D\uDCC5 Timeline de Vendas - Sistema",t/2,25),a.font="12px Arial",a.textAlign="left",a.fillStyle="#10b981",a.beginPath(),a.arc(t-150,r-40,6,0,2*Math.PI),a.fill(),a.fillStyle="#1f2937",a.fillText("FIV",t-135,r-35),a.fillStyle="#3b82f6",a.beginPath(),a.arc(t-100,r-40,6,0,2*Math.PI),a.fill(),a.fillStyle="#1f2937",a.fillText("IA",t-85,r-35),a.fillStyle="#d1d5db",a.beginPath(),a.arc(t-50,r-40,6,0,2*Math.PI),a.fill(),a.fillStyle="#1f2937",a.fillText("Pendente",t-35,r-35)},h=s.filter(e=>"completed"===e.status),u=h.reduce((e,a)=>e+a.value,0),b=h.length>0?u/h.length:0,p=h.filter(e=>"FIV"===e.type).length,v=h.filter(e=>"IA"===e.type).length;return(0,x.jsxs)("div",{className:"space-y-6",children:[x.jsx(T.Zb,{children:x.jsx(T.Ol,{children:(0,x.jsxs)(T.ll,{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[x.jsx($.Z,{className:"h-6 w-6 text-blue-600"}),x.jsx("span",{children:"Timeline de Vendas em Tempo Real"}),a&&(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[x.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),x.jsx("span",{className:"text-red-600 font-semibold",children:"AO VIVO"})]})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[x.jsx(M.z,{onClick:()=>d(!i),size:"sm",variant:i?"default":"outline",children:i?(0,x.jsxs)(x.Fragment,{children:[x.jsx(E.Z,{className:"h-4 w-4 mr-2"}),"Pausar"]}):(0,x.jsxs)(x.Fragment,{children:[x.jsx(F.Z,{className:"h-4 w-4 mr-2"}),"Iniciar"]})}),x.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.toLocaleTimeString("pt-BR")})]})]})})}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[x.jsx(T.Zb,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:x.jsx(T.aY,{className:"pt-6",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[x.jsx("div",{className:"text-2xl font-bold",children:h.length}),x.jsx("div",{className:"text-green-100",children:"Vendas Realizadas"})]}),x.jsx(V.Z,{className:"h-8 w-8 text-green-200"})]})})}),x.jsx(T.Zb,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:x.jsx(T.aY,{className:"pt-6",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"text-2xl font-bold",children:["R$ ",(u/1e6).toFixed(1),"M"]}),x.jsx("div",{className:"text-blue-100",children:"Receita Total"})]}),x.jsx(B.Z,{className:"h-8 w-8 text-blue-200"})]})})}),x.jsx(T.Zb,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:x.jsx(T.aY,{className:"pt-6",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"text-2xl font-bold",children:["R$ ",(b/1e3).toFixed(0),"k"]}),x.jsx("div",{className:"text-purple-100",children:"Pre\xe7o M\xe9dio"})]}),x.jsx(D.Z,{className:"h-8 w-8 text-purple-200"})]})})}),x.jsx(T.Zb,{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:x.jsx(T.aY,{className:"pt-6",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsxs)("div",{className:"text-lg font-bold",children:["FIV: ",p," | IA: ",v]}),x.jsx("div",{className:"text-orange-100",children:"Distribui\xe7\xe3o"})]})})})]}),(0,x.jsxs)(T.Zb,{children:[x.jsx(T.Ol,{children:x.jsx(T.ll,{children:"\uD83D\uDCCA Timeline Visual - 08:00 \xe0s 17:00"})}),x.jsx(T.aY,{children:x.jsx("canvas",{ref:c,width:800,height:600,className:"w-full border border-gray-200 dark:border-gray-600 rounded-lg"})})]}),(0,x.jsxs)(T.Zb,{children:[x.jsx(T.Ol,{children:x.jsx(T.ll,{children:"\uD83D\uDD50 \xdaltimas Vendas"})}),x.jsx(T.aY,{children:x.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:h.slice(-10).reverse().map((e,a)=>(0,x.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:`w-3 h-3 rounded-full ${"FIV"===e.type?"bg-green-500":"bg-blue-500"}`}),(0,x.jsxs)("div",{children:[x.jsx("div",{className:"font-semibold",children:e.animal}),(0,x.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.time.toLocaleTimeString("pt-BR")," - ",e.buyer]})]})]}),(0,x.jsxs)("div",{className:"text-right",children:[(0,x.jsxs)("div",{className:"font-bold text-green-600",children:["R$ ",e.value.toLocaleString("pt-BR")]}),x.jsx("div",{className:"text-sm text-gray-500",children:e.type})]})]},e.id))})})]})]})}function BIPieChart({salesData:e,animationProgress:a,pieChartRef:t}){(0,m.useEffect)(()=>{drawPieChart()},[e,a]);let drawPieChart=()=>{let r=t.current;if(!r||0===e.length)return;let s=r.getContext("2d"),l=r.width,i=r.height;s.clearRect(0,0,l,i);let d=e.filter(e=>"FIV"===e.tipoCobertura).length,n=e.length-d,o=e.length;if(0===o)return;let c=l/2,x=i/2,m=Math.min(l,i)/3,g="#10b981",h="#3b82f6",u=d/o*2*Math.PI*a,b=n/o*2*Math.PI*a;s.fillStyle=g,s.beginPath(),s.moveTo(c,x),s.arc(c,x,m,-Math.PI/2,-Math.PI/2+u),s.closePath(),s.fill(),s.fillStyle=h,s.beginPath(),s.moveTo(c,x),s.arc(c,x,m,-Math.PI/2+u,-Math.PI/2+u+b),s.closePath(),s.fill(),s.fillStyle="#ffffff",s.beginPath(),s.arc(c,x,.6*m,0,2*Math.PI),s.fill(),s.fillStyle="#1f2937",s.font="bold 24px Arial",s.textAlign="center",s.fillText(o.toString(),c,x-5),s.font="14px Arial",s.fillText("Animais",c,x+15),s.font="14px Arial",s.textAlign="left",s.fillStyle=g,s.fillRect(20,i-60,15,15),s.fillStyle="#1f2937",s.fillText(`FIV: ${d} (${(d/o*100).toFixed(1)}%)`,45,i-48),s.fillStyle=h,s.fillRect(20,i-35,15,15),s.fillStyle="#1f2937",s.fillText(`IA: ${n} (${(n/o*100).toFixed(1)}%)`,45,i-23),s.font="bold 16px Arial",s.textAlign="center",s.fillText("\uD83D\uDCCA FIV vs IA",l/2,25)};return x.jsx("canvas",{ref:t,width:400,height:300,className:"w-full","aria-label":"Gr\xe1fico de pizza FIV vs IA",role:"img"})}function BIChartsVisual({salesData:e,onSendWhatsApp:a}){let t=(0,m.useRef)(null),r=(0,m.useRef)(null),s=(0,m.useRef)(null),[l,i]=(0,m.useState)(0);(0,m.useEffect)(()=>{e.length>0&&startAnimation()},[e]);let startAnimation=()=>{i(0);let animate=e=>{let a=Math.min(e/2e3,1);i(a),a<1?requestAnimationFrame(animate):drawCharts()};requestAnimationFrame(animate)},drawCharts=()=>{drawPieChart(),drawBarChart(),drawLineChart()},drawPieChart=()=>{let a=t.current;if(!a||0===e.length)return;let r=a.getContext("2d"),s=a.width,i=a.height;r.clearRect(0,0,s,i);let d=e.filter(e=>"FIV"===e.tipoCobertura).length,n=e.length-d,o=e.length;if(0===o)return;let c=s/2,x=i/2,m=Math.min(s,i)/3,g="#10b981",h="#3b82f6",u=d/o*2*Math.PI*l,b=n/o*2*Math.PI*l;r.fillStyle=g,r.beginPath(),r.moveTo(c,x),r.arc(c,x,m,-Math.PI/2,-Math.PI/2+u),r.closePath(),r.fill(),r.fillStyle=h,r.beginPath(),r.moveTo(c,x),r.arc(c,x,m,-Math.PI/2+u,-Math.PI/2+u+b),r.closePath(),r.fill(),r.fillStyle="#ffffff",r.beginPath(),r.arc(c,x,.6*m,0,2*Math.PI),r.fill(),r.fillStyle="#1f2937",r.font="bold 24px Arial",r.textAlign="center",r.fillText(o.toString(),c,x-5),r.font="14px Arial",r.fillText("Animais",c,x+15),r.font="14px Arial",r.textAlign="left",r.fillStyle=g,r.fillRect(20,i-60,15,15),r.fillStyle="#1f2937",r.fillText(`FIV: ${d} (${(d/o*100).toFixed(1)}%)`,45,i-48),r.fillStyle=h,r.fillRect(20,i-35,15,15),r.fillStyle="#1f2937",r.fillText(`IA: ${n} (${(n/o*100).toFixed(1)}%)`,45,i-23),r.font="bold 16px Arial",r.textAlign="center",r.fillText("\uD83D\uDCCA FIV vs IA",s/2,25)},drawBarChart=()=>{let a=r.current;if(!a||0===e.length)return;let t=a.getContext("2d"),s=a.width,i=a.height;t.clearRect(0,0,s,i);let d=s-120,n=i-120,o={};e.forEach(e=>{let a=e.serie||"CJCJ";o[a]=(o[a]||0)+1});let c=Object.keys(o),x=Object.values(o),m=Math.max(...x);if(0===m)return;let g=d/c.length*.7,h=d/c.length*.3,u=["#10b981","#3b82f6","#f59e0b","#ef4444"];c.forEach((e,a)=>{let r=60+a*(d/c.length)+h/2,s=x[a]/m*n*l,o=i-60-s,b=t.createLinearGradient(0,o,0,i-60);b.addColorStop(0,u[a%u.length]),b.addColorStop(1,u[a%u.length]+"80"),t.fillStyle=b,t.fillRect(r,o,g,s),l>.8&&(t.fillStyle="#1f2937",t.font="bold 14px Arial",t.textAlign="center",t.fillText(x[a].toString(),r+g/2,o-10)),t.fillStyle="#6b7280",t.font="12px Arial",t.fillText(e,r+g/2,i-60+20)}),t.strokeStyle="#e5e7eb",t.lineWidth=1,t.beginPath(),t.moveTo(60,i-60),t.lineTo(s-60,i-60),t.stroke(),t.beginPath(),t.moveTo(60,60),t.lineTo(60,i-60),t.stroke(),t.fillStyle="#1f2937",t.font="bold 16px Arial",t.textAlign="center",t.fillText("\uD83D\uDCC8 Vendas por S\xe9rie",s/2,25)},drawLineChart=()=>{let a=s.current;if(!a||0===e.length)return;let t=a.getContext("2d"),r=a.width,i=a.height;t.clearRect(0,0,r,i);let d=r-120,n=i-120,o=[],c=[];for(let e=6;e>=0;e--){let a=new Date;a.setDate(a.getDate()-e),o.push(a.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}));let t=Math.floor(20*Math.random())+5;c.push(t)}let x=Math.max(...c),m=Math.min(...c);if(x===m)return;t.strokeStyle="#f3f4f6",t.lineWidth=1;for(let e=0;e<=5;e++){let a=60+e/5*n;t.beginPath(),t.moveTo(60,a),t.lineTo(r-60,a),t.stroke()}let g=t.createLinearGradient(0,60,0,i-60);g.addColorStop(0,"rgba(16, 185, 129, 0.3)"),g.addColorStop(1,"rgba(16, 185, 129, 0.05)"),t.fillStyle=g,t.beginPath(),t.moveTo(60,i-60),c.forEach((e,a)=>{if(a/c.length<=l){let r=60+a/(c.length-1)*d,s=i-60-(e-m)/(x-m)*n;t.lineTo(r,s)}}),t.lineTo(60+d*l,i-60),t.closePath(),t.fill(),t.strokeStyle="#10b981",t.lineWidth=3,t.beginPath(),c.forEach((e,a)=>{if(a/c.length<=l){let r=60+a/(c.length-1)*d,s=i-60-(e-m)/(x-m)*n;0===a?t.moveTo(r,s):t.lineTo(r,s)}}),t.stroke(),t.fillStyle="#10b981",c.forEach((e,a)=>{if(a/c.length<=l){let r=60+a/(c.length-1)*d,s=i-60-(e-m)/(x-m)*n;t.beginPath(),t.arc(r,s,4,0,2*Math.PI),t.fill()}}),t.fillStyle="#6b7280",t.font="10px Arial",t.textAlign="center",o.forEach((e,a)=>{let r=60+a/(o.length-1)*d;t.fillText(e,r,i-60+35)}),t.fillStyle="#1f2937",t.font="bold 16px Arial",t.textAlign="center",t.fillText("\uD83D\uDCC5 Vendas nos \xdaltimos 7 Dias",r/2,25)};return(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,x.jsxs)(T.Zb,{children:[x.jsx(T.Ol,{children:x.jsx(T.ll,{children:"An\xe1lise FIV vs IA"})}),x.jsx(T.aY,{children:x.jsx(BIPieChart,{salesData:e,animationProgress:l,pieChartRef:t})})]}),(0,x.jsxs)(T.Zb,{children:[x.jsx(T.Ol,{children:x.jsx(T.ll,{children:"Vendas por S\xe9rie"})}),x.jsx(T.aY,{children:x.jsx("canvas",{ref:r,width:400,height:300,className:"w-full"})})]})]}),x.jsx(SalesTimeline,{salesData:e,isLive:!0}),(0,x.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[x.jsx(M.z,{onClick:()=>a&&a(),className:"bg-green-600 hover:bg-green-700 text-white px-8 py-3 text-lg",children:"\uD83D\uDCF1 Enviar para M\xfaltiplos Contatos"}),x.jsx(M.z,{onClick:startAnimation,variant:"outline",className:"px-8 py-3 text-lg",children:"\uD83D\uDD04 Recarregar Gr\xe1ficos"})]})]})}var O=t(6522),L=t(2911),G=t(882);function WhatsAppMultiSender({isOpen:e,onClose:a,reportMessage:t}){let[r,s]=(0,m.useState)([{id:1,name:"Jo\xe3o Silva",number:"+55 11 99999-1234",selected:!1},{id:2,name:"Maria Santos",number:"+55 16 98888-5678",selected:!1},{id:3,name:"Carlos Mendes",number:"+55 17 97777-9999",selected:!1},{id:4,name:"Ana Costa",number:"+55 31 96666-7890",selected:!1}]),[l,i]=(0,m.useState)({name:"",number:""}),[d,n]=(0,m.useState)(!1),[o,c]=(0,m.useState)(!1),handleToggleContact=e=>{s(r.map(a=>a.id===e?{...a,selected:!a.selected}:a))},handleRemoveContact=e=>{s(r.filter(a=>a.id!==e))},handleSendToSelected=async()=>{let e=r.filter(e=>e.selected);if(0===e.length){alert("Selecione pelo menos um contato para enviar!");return}c(!0);try{let r=e.map(async e=>{let a=await fetch("/api/whatsapp/send-bi",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({number:e.number,message:t,contactName:e.name})});return{contact:e,success:a.ok}}),s=await Promise.all(r),l=s.filter(e=>e.success).length,i=s.length-l;l>0?alert(`✅ Relat\xf3rio enviado com sucesso para ${l} contato(s)!${i>0?` (${i} falharam)`:""}`):alert("❌ Erro ao enviar para todos os contatos."),l>0&&a()}catch(e){console.error("Erro ao enviar WhatsApp:",e),alert("Erro ao enviar relat\xf3rios via WhatsApp")}finally{c(!1)}};if(!e)return null;let g=r.filter(e=>e.selected).length;return x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[70] p-4",children:(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-green-600 to-blue-600",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[x.jsx(D.Z,{className:"h-8 w-8 text-white"}),(0,x.jsxs)("div",{children:[x.jsx("h2",{className:"text-2xl font-bold text-white",children:"\uD83D\uDCF1 Enviar Relat\xf3rio BI"}),x.jsx("p",{className:"text-green-100",children:"Selecione os contatos para envio"})]})]}),x.jsx("button",{onClick:a,className:"p-2 hover:bg-white/20 rounded-lg transition-colors text-white text-2xl font-bold",children:"\xd7"})]}),(0,x.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,x.jsxs)(M.z,{onClick:()=>{let e=r.every(e=>e.selected);s(r.map(a=>({...a,selected:!e})))},variant:"outline",size:"sm",children:[x.jsx(L.Z,{className:"h-4 w-4 mr-2"}),r.every(e=>e.selected)?"Desmarcar Todos":"Selecionar Todos"]}),(0,x.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[g," de ",r.length," selecionados"]})]}),(0,x.jsxs)(M.z,{onClick:()=>n(!d),size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[x.jsx(C.Z,{className:"h-4 w-4 mr-2"}),"Novo Contato"]})]}),d&&(0,x.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:[x.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Adicionar Novo Contato"}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[x.jsx(O.I,{placeholder:"Nome do contato",value:l.name,onChange:e=>i({...l,name:e.target.value})}),x.jsx(O.I,{placeholder:"+55 11 99999-9999",value:l.number,onChange:e=>i({...l,number:e.target.value})})]}),(0,x.jsxs)("div",{className:"flex space-x-2 mt-3",children:[x.jsx(M.z,{onClick:()=>{if(l.name&&l.number){let e=Math.max(...r.map(e=>e.id))+1;s([...r,{id:e,name:l.name,number:l.number,selected:!0}]),i({name:"",number:""}),n(!1)}},size:"sm",className:"bg-green-600 hover:bg-green-700",children:"Adicionar"}),x.jsx(M.z,{onClick:()=>n(!1),variant:"outline",size:"sm",children:"Cancelar"})]})]}),x.jsx("div",{className:"space-y-3",children:r.map(e=>(0,x.jsxs)("div",{className:`flex items-center justify-between p-4 rounded-lg border-2 transition-all cursor-pointer ${e.selected?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300"}`,onClick:()=>handleToggleContact(e.id),children:[(0,x.jsxs)("div",{className:"flex items-center space-x-4",children:[x.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${e.selected?"border-green-500 bg-green-500":"border-gray-300"}`,children:e.selected&&x.jsx(L.Z,{className:"h-4 w-4 text-white"})}),(0,x.jsxs)("div",{children:[x.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:e.name}),x.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.number})]})]}),x.jsx("button",{onClick:a=>{a.stopPropagation(),handleRemoveContact(e.id)},className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:x.jsx(A.Z,{className:"h-4 w-4"})})]},e.id))}),(0,x.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[x.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"\uD83D\uDCCB Preview do Relat\xf3rio"}),x.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 max-h-32 overflow-y-auto",children:(0,x.jsxs)("pre",{className:"whitespace-pre-wrap font-mono text-xs",children:[t?.substring(0,300),"..."]})})]})]}),(0,x.jsxs)("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:[x.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:g>0?(0,x.jsxs)("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:["✅ ",g," contato(s) selecionado(s)"]}):x.jsx("span",{children:"Nenhum contato selecionado"})}),(0,x.jsxs)("div",{className:"flex space-x-3",children:[x.jsx(M.z,{onClick:a,variant:"outline",children:"Cancelar"}),(0,x.jsxs)(M.z,{onClick:handleSendToSelected,disabled:0===g||o,className:"bg-green-600 hover:bg-green-700",children:[x.jsx(G.Z,{className:"h-4 w-4 mr-2"}),o?"Enviando...":`Enviar para ${g} contato(s)`]})]})]})]})})}function AuctionCalculator({currentSales:e=[]}){let[a,t]=(0,m.useState)(""),[r,s]=(0,m.useState)(30),[l,i]=(0,m.useState)(20),d=e.reduce((e,a)=>e+(a.value||0),0),n=a?parseFloat(a)||0:d,o=n*(1+l/100),c=o/r,handleQuickValue=e=>{t(e.toString())};return(0,x.jsxs)(T.Zb,{className:"bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 border-2 border-green-200 dark:border-green-600",children:[x.jsx(T.Ol,{children:(0,x.jsxs)(T.ll,{className:"text-green-700 dark:text-green-300 flex items-center justify-between",children:[x.jsx("span",{children:"\uD83E\uDDEE Calculadora do Leil\xe3o"}),(0,x.jsxs)("div",{className:"text-sm font-normal text-gray-600 dark:text-gray-400",children:["Parcelamento em ",r,"x"]})]})}),(0,x.jsxs)(T.aY,{className:"space-y-6",children:[(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Valor para C\xe1lculo"}),x.jsx(O.I,{type:"number",placeholder:"Digite um valor ou use vendas reais",value:a,onChange:e=>t(e.target.value),className:"text-lg font-semibold"}),(0,x.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Deixe vazio para usar vendas reais: R$ ",d.toLocaleString("pt-BR")]})]}),(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Parcelas"}),(0,x.jsxs)("select",{value:r,onChange:e=>s(parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:text-white",children:[x.jsx("option",{value:12,children:"12x"}),x.jsx("option",{value:24,children:"24x"}),x.jsx("option",{value:30,children:"30x"}),x.jsx("option",{value:36,children:"36x"}),x.jsx("option",{value:48,children:"48x"})]})]}),(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Juros (%)"}),x.jsx(O.I,{type:"number",value:l,onChange:e=>i(parseFloat(e.target.value)||0),min:"0",max:"100",step:"0.1"})]})]}),(0,x.jsxs)("div",{className:"flex flex-wrap gap-2",children:[x.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Valores r\xe1pidos:"}),[1e4,25e3,45e3,5e4,75e3,1e5].map(e=>(0,x.jsxs)(M.z,{onClick:()=>handleQuickValue(e),size:"sm",variant:"outline",className:"text-xs",children:["R$ ",(e/1e3).toFixed(0),"k"]},e))]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,x.jsxs)("div",{className:"text-center p-6 bg-white dark:bg-gray-800 rounded-xl border-2 border-green-200 dark:border-green-600",children:[x.jsx("div",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"\uD83D\uDCB0 Valor \xe0 Vista"}),(0,x.jsxs)("div",{className:"text-3xl font-bold text-green-600",children:["R$ ",n.toLocaleString("pt-BR")]}),x.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Sem juros"})]}),(0,x.jsxs)("div",{className:"text-center p-6 bg-white dark:bg-gray-800 rounded-xl border-2 border-blue-200 dark:border-blue-600",children:[x.jsx("div",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"\uD83D\uDCCA Valor Parcelado"}),(0,x.jsxs)("div",{className:"text-3xl font-bold text-blue-600",children:["R$ ",o.toLocaleString("pt-BR")]}),(0,x.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["+",l,"% juros"]})]}),(0,x.jsxs)("div",{className:"text-center p-6 bg-white dark:bg-gray-800 rounded-xl border-2 border-purple-200 dark:border-purple-600",children:[x.jsx("div",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"\uD83D\uDCC5 Parcela Mensal"}),(0,x.jsxs)("div",{className:"text-3xl font-bold text-purple-600",children:["R$ ",c.toLocaleString("pt-BR")]}),(0,x.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[r," parcelas"]})]})]}),(0,x.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[x.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"\uD83D\uDCCB Detalhamento do Financiamento"}),(0,x.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,x.jsxs)("div",{children:[x.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Valor Principal:"}),(0,x.jsxs)("div",{className:"font-semibold",children:["R$ ",n.toLocaleString("pt-BR")]})]}),(0,x.jsxs)("div",{children:[x.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Juros Total:"}),(0,x.jsxs)("div",{className:"font-semibold text-red-600",children:["R$ ",(o-n).toLocaleString("pt-BR")]})]}),(0,x.jsxs)("div",{children:[x.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Taxa Mensal:"}),(0,x.jsxs)("div",{className:"font-semibold",children:[(l/r).toFixed(2),"%"]})]}),(0,x.jsxs)("div",{children:[x.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Pago:"}),(0,x.jsxs)("div",{className:"font-semibold text-blue-600",children:["R$ ",o.toLocaleString("pt-BR")]})]})]})]}),n>0&&(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border",children:[x.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"\uD83D\uDCCA Simula\xe7\xe3o de Parcelas"}),x.jsx("div",{className:"max-h-32 overflow-y-auto",children:(0,x.jsxs)("div",{className:"grid grid-cols-6 gap-2 text-xs",children:[Array.from({length:Math.min(r,12)},(e,a)=>(0,x.jsxs)("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[(0,x.jsxs)("div",{className:"font-semibold",children:[a+1,"\xaa"]}),(0,x.jsxs)("div",{className:"text-green-600",children:["R$ ",c.toLocaleString("pt-BR")]})]},a)),r>12&&x.jsx("div",{className:"text-center p-2 bg-gray-100 dark:bg-gray-600 rounded col-span-6",children:(0,x.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:["... e mais ",r-12," parcelas de R$ ",c.toLocaleString("pt-BR")]})})]})})]})]})]})}function RealTimeSalesTracker(){let[e,a]=(0,m.useState)([]),[t,r]=(0,m.useState)(0),[s,l]=(0,m.useState)(0),[i,d]=(0,m.useState)(new Date);(0,m.useEffect)(()=>{let e=setInterval(async()=>{await loadRealSales()},2e3);return loadRealSales(),()=>clearInterval(e)},[]);let loadRealSales=async()=>{try{let e=await fetch("/api/sales-list"),t=await e.json();if(t.length>0){let e=t.map(e=>({id:e.id,animal:e.animal?.brinco||e.animalId,value:parseFloat(e.valorVenda)||parseFloat(e.valor)||0,time:new Date(e.dataVenda||e.createdAt),buyer:e.nomeComprador||"Comprador",status:"completed"})),s=e.reduce((e,a)=>e+a.value,0),i=e.length>0?s/e.length:0;a(e),r(s),l(i),d(new Date),console.log(`📊 ${e.length} vendas reais carregadas. Total: R$ ${s.toLocaleString("pt-BR")}`)}}catch(e){console.error("Erro ao carregar vendas reais:",e)}};return(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[x.jsx(T.Zb,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:x.jsx(T.aY,{className:"pt-6",children:(0,x.jsxs)("div",{className:"text-center",children:[x.jsx("div",{className:"text-3xl font-bold",children:e.length}),x.jsx("div",{className:"text-green-100",children:"Vendas Reais"})]})})}),x.jsx(T.Zb,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:x.jsx(T.aY,{className:"pt-6",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsxs)("div",{className:"text-2xl font-bold",children:["R$ ",(t/1e6).toFixed(1),"M"]}),x.jsx("div",{className:"text-blue-100",children:"Receita Total"})]})})}),x.jsx(T.Zb,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:x.jsx(T.aY,{className:"pt-6",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsxs)("div",{className:"text-2xl font-bold",children:["R$ ",(s/1e3).toFixed(0),"k"]}),x.jsx("div",{className:"text-purple-100",children:"Pre\xe7o M\xe9dio"})]})})}),x.jsx(T.Zb,{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:x.jsx(T.aY,{className:"pt-6",children:(0,x.jsxs)("div",{className:"text-center",children:[x.jsx("div",{className:"text-lg font-bold",children:i.toLocaleTimeString("pt-BR")}),x.jsx("div",{className:"text-orange-100",children:"\xdaltima Atualiza\xe7\xe3o"})]})})})]}),(0,x.jsxs)(T.Zb,{children:[x.jsx(T.Ol,{children:(0,x.jsxs)(T.ll,{className:"flex items-center justify-between",children:[x.jsx("span",{children:"\uD83D\uDCB0 Vendas Registradas em Tempo Real"}),(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[x.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),x.jsx("span",{className:"text-green-600 font-semibold",children:"MONITORANDO"})]})]})}),x.jsx(T.aY,{children:x.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:0===e.length?(0,x.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[x.jsx("div",{className:"text-4xl mb-2",children:"⏳"}),x.jsx("div",{children:"Aguardando vendas reais..."}),x.jsx("div",{className:"text-sm mt-2",children:"As vendas aparecer\xe3o aqui automaticamente quando voc\xea registr\xe1-las"})]}):e.slice().reverse().map((e,a)=>(0,x.jsxs)("div",{className:`flex items-center justify-between p-4 rounded-lg border-2 transition-all ${0===a?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-600"}`,children:[(0,x.jsxs)("div",{className:"flex items-center space-x-4",children:[x.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full"}),(0,x.jsxs)("div",{children:[x.jsx("div",{className:"font-bold text-lg",children:e.animal}),(0,x.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.time.toLocaleTimeString("pt-BR")," - ",e.buyer]})]})]}),(0,x.jsxs)("div",{className:"text-right",children:[(0,x.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["R$ ",e.value.toLocaleString("pt-BR")]}),0===a&&x.jsx("div",{className:"text-sm text-green-500 font-semibold",children:"✨ NOVA VENDA"})]})]},e.id))})})]}),x.jsx(AuctionCalculator,{currentSales:e})]})}function LiveSaleEntry({onSaleRegistered:e}){let[a,t]=(0,m.useState)({animal:"",buyer:"",value:"",notes:""}),[r,s]=(0,m.useState)([]),[l,i]=(0,m.useState)(!1),[d,n]=(0,m.useState)(!1);(0,m.useEffect)(()=>{loadRecentSales()},[]);let loadRecentSales=async()=>{try{let e=await fetch("/api/sales-list"),a=await e.json(),t=a.slice(-5).reverse().map(e=>({id:e.id,animal:e.animal?.brinco||e.animalId,buyer:e.nomeComprador||"Comprador",value:parseFloat(e.valorVenda)||0,time:new Date(e.dataVenda||e.createdAt)}));s(t)}catch(e){console.error("Erro ao carregar vendas recentes:",e)}},handleQuickValue=e=>{t(a=>({...a,value:e.toString()}))},handleSubmit=async r=>{if(r.preventDefault(),!a.animal||!a.value){alert("Animal e valor s\xe3o obrigat\xf3rios!");return}i(!0);try{let r=await fetch("/api/animals-list"),s=await r.json(),l=s.find(e=>e.brinco?.toLowerCase().includes(a.animal.toLowerCase())||e.id===a.animal);if(!l){alert(`Animal ${a.animal} n\xe3o encontrado!`),i(!1);return}let d=await fetch("/api/sales-simple",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({animalId:l.id,valorVenda:parseFloat(a.value),nomeComprador:a.buyer||"Comprador do Leil\xe3o",dataVenda:new Date().toISOString(),observacoes:a.notes||`Venda registrada em tempo real - ${new Date().toLocaleTimeString("pt-BR")}`})});if(d.ok)await fetch(`/api/animals/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"VENDIDO",valorVenda:parseFloat(a.value),dataVenda:new Date().toISOString()})}),t({animal:"",buyer:"",value:"",notes:""}),n(!0),setTimeout(()=>n(!1),3e3),await loadRecentSales(),e&&e({animal:l.brinco,buyer:a.buyer||"Comprador do Leil\xe3o",value:parseFloat(a.value),time:new Date}),console.log(`✅ Venda registrada: ${l.brinco} por R$ ${a.value}`);else throw Error("Erro ao registrar venda")}catch(e){console.error("Erro ao registrar venda:",e),alert("Erro ao registrar venda: "+e.message)}finally{i(!1)}},handleQuickAnimal=e=>{t(a=>({...a,animal:e}))};return(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsxs)(T.Zb,{className:"bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 border-2 border-green-300 dark:border-green-600",children:[x.jsx(T.Ol,{children:(0,x.jsxs)(T.ll,{className:"text-green-700 dark:text-green-300 flex items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex items-center",children:[x.jsx(C.Z,{className:"h-6 w-6 mr-2"}),"\uD83C\uDFDB️ Registrar Venda em Tempo Real"]}),(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[x.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),x.jsx("span",{className:"text-green-600 font-semibold text-sm",children:"AO VIVO"})]})]})}),(0,x.jsxs)(T.aY,{children:[(0,x.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uD83D\uDC04 Animal (Brinco/ID) *"}),x.jsx(O.I,{type:"text",placeholder:"Ex: CJCJ 15556, 15556, etc.",value:a.animal,onChange:e=>t(a=>({...a,animal:e.target.value})),className:"text-lg font-semibold",required:!0}),(0,x.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[x.jsx("span",{className:"text-xs text-gray-500",children:"R\xe1pido:"}),["15556","16276","16286","16283","15525"].map(e=>x.jsx("button",{type:"button",onClick:()=>handleQuickAnimal(`CJCJ ${e}`),className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 rounded",children:e},e))]})]}),(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uD83D\uDC64 Comprador"}),x.jsx(O.I,{type:"text",placeholder:"Nome do comprador (opcional)",value:a.buyer,onChange:e=>t(a=>({...a,buyer:e.target.value}))})]})]}),(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uD83D\uDCB0 Valor da Venda (R$) *"}),x.jsx(O.I,{type:"number",placeholder:"45000",value:a.value,onChange:e=>t(a=>({...a,value:e.target.value})),className:"text-2xl font-bold text-green-600",required:!0}),(0,x.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[x.jsx("span",{className:"text-xs text-gray-500",children:"Valores r\xe1pidos:"}),[25e3,3e4,35e3,4e4,45e3,5e4,6e4,75e3].map(e=>(0,x.jsxs)("button",{type:"button",onClick:()=>handleQuickValue(e),className:"px-3 py-1 text-xs bg-green-100 hover:bg-green-200 dark:bg-green-900 dark:hover:bg-green-800 text-green-700 dark:text-green-300 rounded-full",children:["R$ ",(e/1e3).toFixed(0),"k"]},e))]})]}),(0,x.jsxs)("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\uD83D\uDCDD Observa\xe7\xf5es"}),x.jsx(O.I,{type:"text",placeholder:"Observa\xe7\xf5es sobre a venda (opcional)",value:a.notes,onChange:e=>t(a=>({...a,notes:e.target.value}))})]}),x.jsx(M.z,{type:"submit",disabled:l||!a.animal||!a.value,className:"w-full bg-green-600 hover:bg-green-700 text-white py-3 text-lg font-semibold",children:l?(0,x.jsxs)(x.Fragment,{children:[x.jsx($.Z,{className:"h-5 w-5 mr-2 animate-spin"}),"Registrando Venda..."]}):(0,x.jsxs)(x.Fragment,{children:[x.jsx(V.Z,{className:"h-5 w-5 mr-2"}),"\uD83C\uDFDB️ Registrar Venda"]})})]}),d&&(0,x.jsxs)("div",{className:"mt-4 p-3 bg-green-100 dark:bg-green-900/20 border border-green-300 dark:border-green-600 rounded-lg flex items-center",children:[x.jsx(b.Z,{className:"h-5 w-5 text-green-600 mr-2"}),x.jsx("span",{className:"text-green-700 dark:text-green-300 font-semibold",children:"✅ Venda registrada com sucesso!"})]})]})]}),(0,x.jsxs)(T.Zb,{children:[x.jsx(T.Ol,{children:(0,x.jsxs)(T.ll,{className:"flex items-center justify-between",children:[x.jsx("span",{children:"\uD83D\uDD50 \xdaltimas Vendas Registradas"}),x.jsx(M.z,{onClick:loadRecentSales,size:"sm",variant:"outline",children:"\uD83D\uDD04 Atualizar"})]})}),x.jsx(T.aY,{children:x.jsx("div",{className:"space-y-3",children:0===r.length?(0,x.jsxs)("div",{className:"text-center py-6 text-gray-500",children:[x.jsx("div",{className:"text-4xl mb-2",children:"\uD83D\uDCDD"}),x.jsx("div",{children:"Nenhuma venda registrada ainda"}),x.jsx("div",{className:"text-sm mt-1",children:"Use o formul\xe1rio acima para registrar a primeira venda"})]}):r.map((e,a)=>(0,x.jsxs)("div",{className:`flex items-center justify-between p-3 rounded-lg border-2 transition-all ${0===a?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-600"}`,children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:`w-3 h-3 rounded-full ${0===a?"bg-green-500 animate-pulse":"bg-gray-400"}`}),(0,x.jsxs)("div",{children:[x.jsx("div",{className:"font-bold text-lg",children:e.animal}),(0,x.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.time.toLocaleTimeString("pt-BR")," - ",e.buyer]})]})]}),(0,x.jsxs)("div",{className:"text-right",children:[(0,x.jsxs)("div",{className:"text-xl font-bold text-green-600",children:["R$ ",e.value.toLocaleString("pt-BR")]}),0===a&&x.jsx("div",{className:"text-xs text-green-500 font-semibold",children:"✨ REC\xc9M ADICIONADA"})]})]},e.id))})})]}),x.jsx(T.Zb,{className:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-600",children:(0,x.jsxs)(T.aY,{className:"pt-6",children:[x.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-3",children:"\uD83D\uDCCB Como Usar - Registro R\xe1pido"}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-700 dark:text-blue-300",children:[(0,x.jsxs)("div",{children:[x.jsx("strong",{children:"1. Digite o Animal:"}),(0,x.jsxs)("ul",{className:"ml-4 mt-1 space-y-1",children:[x.jsx("li",{children:"• CJCJ 15556"}),x.jsx("li",{children:"• Apenas 15556"}),x.jsx("li",{children:"• Use bot\xf5es r\xe1pidos"})]})]}),(0,x.jsxs)("div",{children:[x.jsx("strong",{children:"2. Valor da Venda:"}),(0,x.jsxs)("ul",{className:"ml-4 mt-1 space-y-1",children:[x.jsx("li",{children:"• Digite: 45000"}),x.jsx("li",{children:"• Use bot\xf5es r\xe1pidos"}),x.jsx("li",{children:"• Sem pontos ou v\xedrgulas"})]})]}),(0,x.jsxs)("div",{children:[x.jsx("strong",{children:"3. Comprador (Opcional):"}),(0,x.jsxs)("ul",{className:"ml-4 mt-1 space-y-1",children:[x.jsx("li",{children:"• Nome do comprador"}),x.jsx("li",{children:"• Deixe vazio se n\xe3o souber"})]})]}),(0,x.jsxs)("div",{children:[x.jsx("strong",{children:"4. Registrar:"}),(0,x.jsxs)("ul",{className:"ml-4 mt-1 space-y-1",children:[x.jsx("li",{children:'• Clique "Registrar Venda"'}),x.jsx("li",{children:"• Aparece nas vendas recentes"}),x.jsx("li",{children:"• Atualiza timeline automaticamente"})]})]})]})]})})]})}function LiveSalesTimeline({isOpen:e,onClose:a}){let[t,r]=(0,m.useState)(!0),[s,l]=(0,m.useState)([]);(0,m.useEffect)(()=>{let e;return loadSalesData(),t&&(e=setInterval(()=>{loadSalesData()},5e3)),()=>{e&&clearInterval(e)}},[t]);let loadSalesData=async()=>{try{console.log("\uD83D\uDD04 Carregando dados reais de vendas...");let e=await fetch("/api/sales-list"),a=await e.json();if(console.log("\uD83D\uDCCA Vendas encontradas:",a.length),a.length>0){let e=a.map((e,a)=>{let t=e.dataVenda?new Date(e.dataVenda):new Date;return{id:e.id||a+1,time:t,animal:e.animal?.brinco||e.animalId||`CJCJ ${15e3+a}`,buyer:e.nomeComprador||e.buyer||`Comprador ${a+1}`,value:parseFloat(e.valorVenda)||parseFloat(e.valor)||0,type:e.animal?.serie==="FIV"||.15>Math.random()?"FIV":"IA",serie:e.animal?.serie||"CJCJ",status:"completed",realSale:!0}});console.log("✅ Timeline com dados reais:",e.length),l(e)}else console.log("⚠️ Nenhuma venda real encontrada, usando dados de exemplo"),l([])}catch(e){console.error("❌ Erro ao carregar vendas reais:",e),l([])}};return e?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-7xl w-full max-h-[95vh] overflow-hidden",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-600 to-green-600",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[x.jsx($.Z,{className:"h-8 w-8 text-white"}),(0,x.jsxs)("div",{children:[x.jsx("h2",{className:"text-2xl font-bold text-white",children:"\uD83D\uDCC5 Timeline de Vendas - Sistema"}),x.jsx("p",{className:"text-blue-100",children:"Acompanhe as vendas em tempo real"})]})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-4",children:[x.jsx(M.z,{onClick:()=>r(!t),size:"sm",className:`${t?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"} text-white`,children:t?(0,x.jsxs)(x.Fragment,{children:[x.jsx(E.Z,{className:"h-4 w-4 mr-2"}),"Pausar Live"]}):(0,x.jsxs)(x.Fragment,{children:[x.jsx(F.Z,{className:"h-4 w-4 mr-2"}),"Iniciar Live"]})}),t&&(0,x.jsxs)("div",{className:"flex items-center space-x-2 bg-red-600 px-3 py-1 rounded-full",children:[x.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),x.jsx("span",{className:"text-white text-sm font-semibold",children:"AO VIVO"})]}),x.jsx("button",{onClick:a,className:"p-2 hover:bg-white/20 rounded-lg transition-colors text-white text-2xl font-bold",children:"\xd7"})]})]}),(0,x.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(95vh-120px)]",children:[x.jsx(LiveSaleEntry,{onSaleRegistered:e=>{console.log("Nova venda registrada:",e),setTimeout(()=>{loadSalesData()},1e3)}}),x.jsx("div",{className:"mt-6",children:x.jsx(RealTimeSalesTracker,{})}),x.jsx("div",{className:"mt-6",children:x.jsx(SalesTimeline,{salesData:s,isLive:t})})]})]})}):null}function Dashboard(){let[e,a]=(0,m.useState)(!1),[t,r]=(0,m.useState)(!1),[s,l]=(0,m.useState)(!1),[i,d]=(0,m.useState)(!1),[n,o]=(0,m.useState)(!1),[c,u]=(0,m.useState)(!1);(0,g.useRouter)();let b=[];return(0,x.jsxs)(h.Z,{children:[(0,x.jsxs)("div",{className:"mb-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 max-w-6xl mx-auto",children:[(0,x.jsxs)("button",{onClick:()=>l(!0),className:"px-6 py-4 bg-gradient-to-r from-emerald-600 to-green-600 text-white rounded-xl hover:from-emerald-700 hover:to-green-700 transition-all duration-300 flex items-center font-bold text-lg shadow-2xl transform hover:scale-105",children:[x.jsx(D.Z,{className:"h-6 w-6 mr-3"}),"\uD83D\uDC04 CADASTRO DE ANIMAIS"]}),(0,x.jsxs)("button",{onClick:()=>d(!0),className:"px-6 py-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all duration-300 flex items-center font-bold text-lg shadow-2xl transform hover:scale-105",children:[x.jsx(B.Z,{className:"h-6 w-6 mr-3"}),"\uD83D\uDCCA BI ANALYTICS"]}),(0,x.jsxs)("button",{onClick:()=>u(!0),className:"px-6 py-4 bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-xl hover:from-blue-700 hover:to-cyan-700 transition-all duration-300 flex items-center font-bold text-lg shadow-2xl transform hover:scale-105",children:[x.jsx($.Z,{className:"h-6 w-6 mr-3"}),"\uD83D\uDCC5 TIMELINE VENDAS"]}),(0,x.jsxs)("button",{onClick:()=>r(!0),className:"px-6 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 flex items-center font-bold text-lg shadow-2xl transform hover:scale-105",children:[x.jsx(V.Z,{className:"h-6 w-6 mr-3"}),"\uD83D\uDCCB CRIAR NOTA FISCAL"]})]}),x.jsx(ModernDashboard,{}),x.jsx(w.Z,{isOpen:e,onClose:()=>a(!1),onSalesComplete:()=>{console.log("Vendas do leil\xe3o completadas!")}}),x.jsx(DirectInvoiceManager,{isOpen:t,onClose:()=>r(!1)}),x.jsx(SimpleAnimalManager,{isOpen:s,onClose:()=>l(!1)}),i&&x.jsx(()=>x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-7xl w-full max-h-[95vh] overflow-hidden",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-purple-600 to-pink-600",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[x.jsx(B.Z,{className:"h-8 w-8 text-white"}),(0,x.jsxs)("div",{children:[x.jsx("h2",{className:"text-2xl font-bold text-white",children:"\uD83D\uDCCA BI Analytics - Sistema de Vendas"}),x.jsx("p",{className:"text-purple-100",children:"Gr\xe1ficos visuais e an\xe1lises avan\xe7adas"})]})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-4",children:[x.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"\uD83D\uDCF1 Enviar WhatsApp"}),x.jsx("button",{onClick:()=>d(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors text-white text-2xl font-bold",children:"\xd7"})]})]}),x.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(95vh-120px)]",children:x.jsx(BIChartsVisual,{salesData:b,onSendWhatsApp:()=>o(!0)})})]})}),{}),x.jsx(LiveSalesTimeline,{isOpen:c,onClose:()=>u(!1)}),x.jsx(WhatsAppMultiSender,{isOpen:n,onClose:()=>o(!1),reportMessage:`
🐄 *RELAT\xd3RIO BI - VENDAS*

📊 *RESUMO GERAL*
• Total de Animais: 98
• Animais Vendidos: 98
• Taxa de Venda: 100.0%
• Receita Total: R$ 2.850.000
• Pre\xe7o M\xe9dio: R$ 29.082

📈 *AN\xc1LISE FIV vs IA*
• FIV: 3 animais - M\xe9dia: R$ 35.000
• IA: 95 animais - M\xe9dia: R$ 28.500

🏆 *TOP TOUROS (Mais Filhos)*
• Dados reais ser\xe3o carregados da API
• Sistema limpo de dados mockados

📅 *CRONOGRAMA*
• 08:00 - Abertura
• 09:00 - In\xedcio dos Lances
• 15:00 - Animais FIV
• 17:00 - Encerramento

📊 *GR\xc1FICOS INCLUSOS*
• 🥧 An\xe1lise FIV vs IA
• 📊 Vendas por S\xe9rie
• 📈 Timeline dos \xdaltimos 7 Dias

---
🤖 Beef Sync - Gest\xe3o Bovina Inteligente 🐄
    `.trim()})]})}let z=(0,d.l)(s,"default"),Z=(0,d.l)(s,"getStaticProps"),J=(0,d.l)(s,"getStaticPaths"),_=(0,d.l)(s,"getServerSideProps"),q=(0,d.l)(s,"config"),W=(0,d.l)(s,"reportWebVitals"),U=(0,d.l)(s,"unstable_getStaticProps"),Y=(0,d.l)(s,"unstable_getStaticPaths"),Q=(0,d.l)(s,"unstable_getStaticParams"),H=(0,d.l)(s,"unstable_getServerProps"),X=(0,d.l)(s,"unstable_getServerSideProps"),K=new l.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/index",pathname:"/",bundlePath:"",filename:""},components:{App:c.default,Document:o()},userland:s})},7641:e=>{e.exports=require("exceljs")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},121:e=>{e.exports=import("pdfjs-dist")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")}};var a=require("../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),t=a.X(0,[9209,8450,7792,1163,4205,194,2891,8523,2333,3006,9597,9577,7787,1867,6949,1228,9636,2807],()=>__webpack_exec__(4257));module.exports=t})();